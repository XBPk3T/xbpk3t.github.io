"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7881],{9318:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>o});var s=t(4848),a=t(8453);const r={title:"\u5e38\u7528mysql sql\u6574\u7406",date:new Date("2024-08-01T00:00:00.000Z")},l=void 0,i={id:"2024/sql",title:"\u5e38\u7528mysql sql\u6574\u7406",description:"- MySQL CLI Cheatsheet",source:"@site/docs/2024/sql.md",sourceDirName:"2024",slug:"/2024/sql",permalink:"/2024/sql",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"XBPk3T",lastUpdatedAt:1728693899e3,frontMatter:{title:"\u5e38\u7528mysql sql\u6574\u7406",date:"2024-08-01T00:00:00.000Z"},sidebar:"zzz",previous:{title:"\u5df4\u9ece\u5965\u8fd0\u4f1a\u7eaa\u5f55",permalink:"/2024/record-for-paris-olympics"},next:{title:"\u4e3a\u4ec0\u4e48\u5728CI\u4e2d\u5e94\u8be5\u7528pre-commit\u4ee3\u66fflinters?",permalink:"/2024/pre-commit"}},c={},o=[];function E(n){const e={a:"a",code:"code",li:"li",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# \u6dfb\u52a0\u7d22\u5f15\nCREATE FULLTEXT INDEX index_name ON table_name (field_to_index);\n\n# \u5220\u9664\u7d22\u5f15\nDROP INDEX index_name ON table_name;\n\n# \u67e5\u770b\u7d22\u5f15\nSHOW INDEX FROM table_name;\n\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# \u786c\u5220\u9664\u6570\u636e\u5e93\u6570\u636e\u540e\uff0c\u6e05\u9664\u5bf9\u5e94\u6587\u4ef6\uff0c\u4ece\u800c\u4f18\u5316\u7d22\u5f15\u6548\u7387\u7684\nOPTIMIZE TABLE table_name;\n\n# \u67e5\u770b MySQL \u662f\u5426\u652f\u6301\u5206\u8868\nSHOW VARIABLES LIKE '%partition%';\n\n# \u67e5\u770b\u5f53\u524d\u8fdb\u7a0b\u5217\u8868\nSHOW PROCESSLIST;\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"\n# \u5b57\u7b26\u4e32\u51fd\u6570\nSELECT LEFT('string', length), RIGHT('string', length), SUBSTR('string', start, length), SUBSTRING_INDEX('string', delimiter, count);\n\n# \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u65e5\u671f\u7c7b\u578b\nSELECT CAST(date AS DATE) AS date FROM table1;\n\n# string\u8f6cint\nSELECT CAST('123' AS SIGNED);\n\n# \u805a\u5408\u51fd\u6570\nSELECT AVG(column_name), MIN(column_name), MAX(column_name), COUNT(column_name), SUM(column_name) FROM table_name;\n\n# \u805a\u5408\u5b57\u7b26\u4e32\nSELECT GROUP_CONCAT(column_name ORDER BY another_column_name SEPARATOR 'separator');\n\n# \u63a7\u5236\u6d41\u51fd\u6570if(), ifnull(), when case\nSELECT COUNT(IF(channel_type=1, IF(check_status=6,1,0),0)) FROM tougao_record WHERE accept_company_id=100;\n\n# \u65f6\u95f4\u6233\u6309\u5929\u5206\u7ec4\nSELECT DATE_FORMAT(date_entered, \"%Y-%m-%d\") AS ud, COUNT(id) AS cs FROM ttrss_entries GROUP BY ud;\n\n# \u6bcf\u4e2a\u6708\u7684\u6570\u636e\u7edf\u8ba1\nSELECT MONTH(date_entered) AS month, COUNT(id) FROM ttrss_entries WHERE YEAR(date_entered) = 2020 GROUP BY month;\n\n# xxx\u65f6\u95f4\u5185\u7684\u6570\u636e\u7edf\u8ba1\nSELECT COUNT(id) FROM ttrss_feeds WHERE DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= DATE(last_successful_update);\n\n# \u600e\u4e48\u83b7\u53d6\u683c\u5f0f\u5316\u65f6\u95f4\u7684\u5dee\u503c\nSELECT TIME_TO_SEC(TIMEDIFF(t2, t1)), TIMESTAMPDIFF(SECOND, t1, t2), UNIX_TIMESTAMP(t2) - UNIX_TIMESTAMP(t1);\n\n# \u6309\u4e2d\u6587\u5b57\u6bcd\u6392\u5e8f\nSELECT * FROM tablename WHERE 1=1 ORDER BY CONVERT(name USING gbk) COLLATE gbk_chinese_ci ASC;\n\n# \u76ee\u524d\u6709\u5206\u6570\u6563\u5e03\u57281-100\u7684n\u7ec4\u6570\u636e\uff0c\u600e\u4e48\u6839\u636e\u7edf\u8ba1\u533a\u95f4\u5462\uff1f\nSELECT ELT(INTERVAL(score, 0, 60, 80, 100), '0-60', '60-80', '80-100') AS score_interval, COUNT(id) FROM student_score GROUP BY score_interval;\n\n\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"# insert into ... on duplicate key update\nINSERT INTO test_tbl (id, dr) VALUES (1, 2), (2, 3), (x, y) ON DUPLICATE KEY UPDATE dr=VALUES(dr);\n\n# \u6279\u91cf\u63d2\u5165\u65f6\uff0c\u5982\u4f55\u4e0d\u63d2\u5165\u91cd\u590d\u6570\u636e\uff1f\nINSERT IGNORE INTO test_tbl (id, dr) VALUES (1, 2), (2, 3), (x, y);\n\n# \u4e0d\u5b58\u5728\u5219\u63d2\u5165\uff0c\u5b58\u5728\u5219\u4fee\u6539\nREPLACE INTO test_tbl (id, dr) VALUES (1, 2), (2, 3), (x, y);\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://gist.github.com/hofmannsven/9164408",children:"MySQL CLI Cheatsheet"})}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(E,{...n})}):E(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>i});var s=t(6540);const a={},r=s.createContext(a);function l(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:l(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);