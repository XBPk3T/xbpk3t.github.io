"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9929],{1002:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>o});var l=s(4848),r=s(8453);const c={title:"\u300a\u8da3\u8c08 Linux \u64cd\u4f5c\u7cfb\u7edf\u300b\u8bfb\u4e66\u7b14\u8bb0",date:"2023-9-17",slug:"/2023/kernel",description:"2024-09-29\u4ecekernel.yml\u6574\u7406\u51fa\u6765\u7684"},a=void 0,i={id:"2023/kernel",title:"\u300a\u8da3\u8c08 Linux \u64cd\u4f5c\u7cfb\u7edf\u300b\u8bfb\u4e66\u7b14\u8bb0",description:"2024-09-29\u4ecekernel.yml\u6574\u7406\u51fa\u6765\u7684",source:"@site/docs/2023/kernel.mdx",sourceDirName:"2023",slug:"/2023/kernel",permalink:"/zh-Hans/2023/kernel",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"XBPk3T",lastUpdatedAt:1728923499e3,frontMatter:{title:"\u300a\u8da3\u8c08 Linux \u64cd\u4f5c\u7cfb\u7edf\u300b\u8bfb\u4e66\u7b14\u8bb0",date:"2023-9-17",slug:"/2023/kernel",description:"2024-09-29\u4ecekernel.yml\u6574\u7406\u51fa\u6765\u7684"},sidebar:"zzz",previous:{title:"Weekly#40",permalink:"/zh-Hans/2023/weekly40"},next:{title:"network-protocol",permalink:"/zh-Hans/2023/network-protocol"}},d={},o=[{value:"kernel",id:"kernel",level:2},{value:"micro, macro, hybrid",id:"micro-macro-hybrid",level:3},{value:"\u5185\u6838\u6001\u548c\u7528\u6237\u6001",id:"\u5185\u6838\u6001\u548c\u7528\u6237\u6001",level:3},{value:"syscall &amp; glibc",id:"syscall--glibc",level:3},{value:"CPU",id:"cpu",level:2},{value:"z",id:"z",level:3},{value:"CPU\u4e0a\u4e0b\u6587",id:"cpu\u4e0a\u4e0b\u6587",level:3},{value:"irq \u548c softirq",id:"irq-\u548c-softirq",level:3},{value:"process",id:"process",level:2},{value:"vs",id:"vs",level:3},{value:"\u544a\u8bc9\u6211 process \u6d3e\u751f child process \u7684\u6574\u4e2a\u6d41\u7a0b\uff1f",id:"\u544a\u8bc9\u6211-process-\u6d3e\u751f-child-process-\u7684\u6574\u4e2a\u6d41\u7a0b",level:3},{value:"process state, scheduler",id:"process-state-scheduler",level:3},{value:"process scheduler",id:"process-scheduler",level:3},{value:"orphan, zombie. \u6211\u4eec\u90fd\u77e5\u9053orphan\u662f\u56e0\u4e3appid\u6ca1\u4e86\uff0czombie\u662f\u56e0\u4e3appid\u5e9f\u4e86\u3002\u90a3\u4ec0\u4e48\u60c5\u51b5\u4e0bppid\u4f1a\u6ca1\u4e86\u6216\u8005\u5e9f\u4e86\u5462?",id:"orphan-zombie-\u6211\u4eec\u90fd\u77e5\u9053orphan\u662f\u56e0\u4e3appid\u6ca1\u4e86zombie\u662f\u56e0\u4e3appid\u5e9f\u4e86\u90a3\u4ec0\u4e48\u60c5\u51b5\u4e0bppid\u4f1a\u6ca1\u4e86\u6216\u8005\u5e9f\u4e86\u5462",level:3},{value:"idle process, init process, kthreadd process",id:"idle-process-init-process-kthreadd-process",level:3},{value:"\u51e0\u79cdIPC (pipeline, MQ, share mem, sema, socket)",id:"\u51e0\u79cdipc-pipeline-mq-share-mem-sema-socket",level:3},{value:"ns, cgroup",id:"ns-cgroup",level:3},{value:"cgroup",id:"cgroup",level:3},{value:"false sharing",id:"false-sharing",level:3},{value:"signal",id:"signal",level:3},{value:"waitqueue \u548c workqueue \u5206\u522b\u662f\u5565\uff1f",id:"waitqueue-\u548c-workqueue-\u5206\u522b\u662f\u5565",level:3},{value:"PCB, TCB",id:"pcb-tcb",level:3},{value:"\u600e\u4e48\u67e5\u770b\u4e00\u4e2a\u8fdb\u7a0b\u7a76\u7adf\u5360\u7528\u591a\u5c11\u5185\u5b58\uff1f\u4e3a\u5565RSS\u5728\u4f7f\u7528pmap\u548cps\u65f6\u4e0d\u540c?",id:"\u600e\u4e48\u67e5\u770b\u4e00\u4e2a\u8fdb\u7a0b\u7a76\u7adf\u5360\u7528\u591a\u5c11\u5185\u5b58\u4e3a\u5565rss\u5728\u4f7f\u7528pmap\u548cps\u65f6\u4e0d\u540c",level:3},{value:"\u5185\u5b58",id:"\u5185\u5b58",level:2},{value:"z",id:"z-1",level:3},{value:"DMA",id:"dma",level:3},{value:"zero-copy",id:"zero-copy",level:3},{value:"mmap",id:"mmap",level:3},{value:"\u865a\u62df\u5185\u5b58",id:"\u865a\u62df\u5185\u5b58",level:3},{value:"\u7269\u7406\u5185\u5b58",id:"\u7269\u7406\u5185\u5b58",level:3},{value:"kernel\u4e2d\u662f\u600e\u4e48\u628a\u7269\u7406\u5185\u5b58\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u7684?",id:"kernel\u4e2d\u662f\u600e\u4e48\u628a\u7269\u7406\u5185\u5b58\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u7684",level:4},{value:"zone_type",id:"zone_type",level:4},{value:"vmalloc",id:"vmalloc",level:4},{value:"buddy-allocator",id:"buddy-allocator",level:4},{value:"TLB",id:"tlb",level:4},{value:"storage",id:"storage",level:2},{value:"network",id:"network",level:2},{value:"select\u3001poll\u3001epoll \u5206\u522b\u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"selectpollepoll-\u5206\u522b\u662f\u4ec0\u4e48\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"epoll, Compare ET mode and LT mode?",id:"epoll-compare-et-mode-and-lt-mode",level:3},{value:"\u4e3a\u4ec0\u4e48 epoll \u7684\u6548\u7387\u9ad8\uff1f",id:"\u4e3a\u4ec0\u4e48-epoll-\u7684\u6548\u7387\u9ad8",level:3},{value:"reactor, proactor, actor, CSP \u6709\u5565\u533a\u522b",id:"reactor-proactor-actor-csp-\u6709\u5565\u533a\u522b",level:3},{value:"implement reactor using epoll",id:"implement-reactor-using-epoll",level:3},{value:"iptables",id:"iptables",level:3},{value:"process/thread",id:"processthread",level:2},{value:"\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5",id:"\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5",level:3},{value:"\u7ebf\u7a0b",id:"\u7ebf\u7a0b",level:3},{value:"\u7ebf\u7a0b\u72b6\u6001",id:"\u7ebf\u7a0b\u72b6\u6001",level:3},{value:"false sharing",id:"false-sharing-1",level:3},{value:"cgroup",id:"cgroup-1",level:3},{value:"xxx",id:"xxx",level:3},{value:"IPC",id:"ipc",level:3},{value:"zzz",id:"zzz",level:3},{value:"memory",id:"memory",level:2},{value:"\u865a\u62df\u5185\u5b58",id:"\u865a\u62df\u5185\u5b58-1",level:3},{value:"xxx",id:"xxx-1",level:3},{value:"zzz",id:"zzz-1",level:3},{value:"kkk",id:"kkk",level:3},{value:"\u5185\u6838\u7a7a\u95f4",id:"\u5185\u6838\u7a7a\u95f4",level:3},{value:"storage",id:"storage-1",level:2},{value:"Linux \u6587\u4ef6\u7cfb\u7edf",id:"linux-\u6587\u4ef6\u7cfb\u7edf",level:3},{value:"network",id:"network-1",level:2},{value:"linux \u7684\u4e09\u79cd\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f\uff1f",id:"linux-\u7684\u4e09\u79cd\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f",level:3},{value:"linux \u8def\u7531",id:"linux-\u8def\u7531",level:3},{value:"iptables",id:"iptables-1",level:3},{value:"IO \u673a\u5236",id:"io-\u673a\u5236",level:3},{value:"reactor \u6a21\u578b",id:"reactor-\u6a21\u578b",level:3},{value:"<del>socket \u7f16\u7a0b</del>",id:"socket-\u7f16\u7a0b",level:3},{value:"\u300a\u8da3\u8c08 Linux \u64cd\u4f5c\u7cfb\u7edf\u300b\u8bfb\u4e66\u7b14\u8bb0",id:"\u8da3\u8c08-linux-\u64cd\u4f5c\u7cfb\u7edf\u8bfb\u4e66\u7b14\u8bb0",level:2},{value:"\u4e32\u8bb2",id:"\u4e32\u8bb2",level:3},{value:"\u8bfb\u4e66\u8bb0\u5f55",id:"\u8bfb\u4e66\u8bb0\u5f55",level:3},{value:"\u300a\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u6218 45 \u8bb2\u300b",id:"\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u6218-45-\u8bb2",level:2},{value:"\u300a\u91cd\u5b66\u64cd\u4f5c\u7cfb\u7edf\u300b",id:"\u91cd\u5b66\u64cd\u4f5c\u7cfb\u7edf",level:2},{value:"\u300a\u6df1\u5165\u6d45\u51fa\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\u300b",id:"\u6df1\u5165\u6d45\u51fa\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406",level:2},{value:"\u300aLinux \u6027\u80fd\u4f18\u5316\u5b9e\u6218\u300b",id:"linux-\u6027\u80fd\u4f18\u5316\u5b9e\u6218",level:2},{value:"\u300aLinux \u5185\u6838\u6280\u672f\u5b9e\u6218\u8bfe\u300b",id:"linux-\u5185\u6838\u6280\u672f\u5b9e\u6218\u8bfe",level:2},{value:"Page Cache",id:"page-cache",level:3},{value:"\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898",id:"\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898",level:3},{value:"TCP \u91cd\u4f20\u95ee\u9898",id:"tcp-\u91cd\u4f20\u95ee\u9898",level:3},{value:"\u5185\u6838\u6001 CPU \u6bdb\u523a",id:"\u5185\u6838\u6001-cpu-\u6bdb\u523a",level:3},{value:"\u300a\u8ba1\u7b97\u673a\u57fa\u7840\u5b9e\u6218\u8bfe\u300b",id:"\u8ba1\u7b97\u673a\u57fa\u7840\u5b9e\u6218\u8bfe",level:2},{value:"zzz",id:"zzz-2",level:2},{value:"[xxx] Linux\u4efb\u52a1\u8c03\u5ea6",id:"xxx-linux\u4efb\u52a1\u8c03\u5ea6",level:2},{value:"[xxx] epoll",id:"xxx-epoll",level:2},{value:"[xxx] linux routing",id:"xxx-linux-routing",level:2},{value:"<em><strong>\u300aLinux kernel \u8109\u7edc\u548c\u4e3b\u5e72\u603b\u7ed3\u300b</strong></em>",id:"linux-kernel-\u8109\u7edc\u548c\u4e3b\u5e72\u603b\u7ed3",level:2}];function t(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",del:"del",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components},{Details:s}=e;return s||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"kernel",children:"kernel"}),"\n",(0,l.jsx)(e.h3,{id:"micro-macro-hybrid",children:"micro, macro, hybrid"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"\n- \u5355\u5185\u6838: \u4e5f\u5c31\u662f\u4f01\u4e1a\u6587\u5316\uff0c\u5355\u5185\u6838\u5c31\u662f\u201c\u5927\u653f\u5e9c\u201d \uff08\u201c\u7ecf\u8425\u4f01\u4e1a\u7684\u65b9\u5f0f\u4e5f\u6709\u5f88\u591a\u79cd\uff0c\u5230\u5e95\u662f\u4eba\u6027\u5316\u7684\uff0c\u8fd8\u662f\u5f3a\u7eaa\u5f8b\u7684\u201d\uff0c\u6216\u8005\u8bf4 \u5355\u5185\u6838\u3001\u5fae\u5185\u6838\u8fd8\u662f\u6df7\u5408\u5185\u6838\uff09\n\n#\u61c2\u4e86\uff0c\u6211\u8bf4\u8bf4\u6211\u7684\u7406\u89e3\uff0c\u4f60\u770b\u5bf9\u4e0d\u5bf9\u54c8\u3002\u5fae\u5185\u6838\u867d\u7136\u628a\u5f88\u591a\u539f\u672c\u5e94\u8be5\u5728\u5185\u6838\u7684\u6743\u9650\u4e0b\u653e\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u7406\u8bba\u4e0a\u4f1a\u51cf\u5c11\u5207\u6362\uff0c\u4f46\u662f\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u901a\u4fe1\u8fd8\u662f\u8981\u901a\u8fc7\u5185\u6838\uff0c\u539f\u672c\u5728\u5185\u6838\u5185\u90e8\u4e0d\u9700\u8981\u5207\u6362\u7684\u5de5\u4f5c\uff0c\u73b0\u5728\u53cd\u800c\u9700\u8981\u5207\u6362\u4e86\u3002\u8fd8\u662f\u62ff\u516c\u53f8\u4e3e\u4f8b\uff0c\u5185\u6838\u5c31\u662f\u516c\u53f8\u8001\u677f\uff0c\u539f\u672c\u516c\u53f8\u6709 10 \u4e2a\u9ad8\u7ba1\uff0c\u5404\u7ba1\u4e00\u644a\uff0c\u4f46\u662f\u73b0\u5728\u4e3a\u4e86\u7cbe\u5175\u7b80\u653f\uff0c\u63d0\u9ad8\u6548\u7387\uff0c\u628a\u5176\u4e2d\u7684 7 \u4e2a\u9ad8\u7ba1\u964d\u7ea7\u4e86\uff0c\u90a3\u4e48\u539f\u672c\u8fd9 10 \u4e2a\u9ad8\u7ba1\u5f00\u4e2a\u4f1a\u5c31\u80fd\u89e3\u51b3\u7684\u4e8b\uff0c\u73b0\u5728 3 \u4e2a\u4eba\u5c31\u62cd\u4e0d\u4e86\u677f\u4e86\uff0c\u9700\u8981\u9891\u7e41\u8ddf\u90a3 7 \u4e2a\u88ab\u964d\u7ea7\u7684\u9ad8\u7ba1\u6c9f\u901a\u3002\u7ad9\u5728\u8fd9 7 \u4e2a\u9ad8\u7ba1\u7684\u89d2\u5ea6\uff0c\u4e5f\u5f88\u96be\u53d7\uff0c\u672c\u6765\u5728\u5185\u90e8\u4e00\u53e5\u8bdd\u7684\u4e8b\uff0c\u73b0\u5728\u4e92\u76f8\u6c9f\u901a\u8fd8\u8981\u7ecf\u8fc7\u90a3 3 \u4e2a\u9ad8\u7ba1\uff0c\u6548\u7387\u5c31\u53d8\u4f4e\u4e86\u3002\u4e0d\u77e5\u9053\u6211\u7406\u89e3\u7684\u5bf9\u5417\uff1f\n\n#\u61c2\u4e86\uff0c\u8fd9\u4e48\u8bf4\u7684\u8bdd\uff0c\u62ff\u653f\u5e9c\u4e3e\u4f8b\uff0c\u5355\u5185\u6838\u5c31\u662f\u5927\u653f\u5e9c\uff0c\u91cc\u9762\u4ec0\u4e48\u90fd\u6709\uff0c\u6c9f\u901a\u65b9\u4fbf\uff0c\u4f46\u662f\u7f3a\u70b9\u662f\u53e0\u5e8a\u67b6\u5c4b\uff0c\u5e76\u4e14\u7ec4\u4ef6\u592a\u591a\uff0c\u7275\u4e00\u53d1\u800c\u52a8\u5168\u8eab\uff0c\u672c\u8eab\u5b58\u5728\u4e00\u5b9a\u7684\u7a33\u5b9a\u6027\u95ee\u9898\uff0c\u201c\u65e0\u9650\u8d23\u4efb\u5236\u653f\u5e9c\u201d\u561b\u3002\u5fae\u5185\u6838\u5c31\u662f\u5c0f\u653f\u5e9c\uff0c\u53ea\u4fdd\u7559\u6838\u5fc3\u6743\u529b\uff0c\u5176\u4ed6\u7684\u90fd\u5206\u51fa\u53bb\uff0c\u80fd\u591f\u4fdd\u8bc1\u5185\u6838\u81ea\u8eab\u7a33\u5b9a\uff0c\u4f46\u662f\u56e0\u4e3a\u4e5f\u5206\u51fa\u53bb\u4e86\u4e00\u4e9b\u5f88\u91cd\u8981\u7684\u6743\u529b\uff0c\u867d\u7136\u80fd\u591f\u63d0\u9ad8\u7075\u6d3b\u6027\uff0c\u4f46\u662f\u4f1a\u5bfc\u81f4\u5927\u91cf\u9700\u8981\u4e0e\u653f\u5e9c\u52fe\u5151\u7684\u4e8b\u60c5\uff0c\u4e0d\u4ec5\u964d\u4f4e\u6548\u7387\uff0c\u8fd8\u4f1a\u6d6a\u8d39\u7a7a\u95f4\u3002\u6df7\u5408\u5185\u6838\u5c31\u662f\u4e00\u79cd\u6bd4\u8f83\u7406\u60f3\u7684\u72b6\u6001\uff0c\u6743\u8d23\u5212\u5206\u5408\u7406\uff0c\u6548\u7387\u548c\u7a33\u5b9a\u6027\u90fd\u5f88\u9ad8\uff0c\u4f46\u662f\u5f88\u96be\u5b9e\u73b0\uff0c\u5c31\u50cf\u7406\u60f3\u56fd\u4e00\u6837\uff0c\u4eba\u7c7b\u5386\u53f2\u4e0a\u8fd8\u6ca1\u51fa\u73b0\u8fc7\u8fd9\u73a9\u610f\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"API: \u516c\u53f8\u4ea7\u54c1\u8bf4\u660e\u4e66\uff08\u4f1a\u7ecf\u5e38\u4fee\u6539\uff09\n\nABI: \u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u516c\u53f8\u7684\u57fa\u672c\u4fe1\u606f\u548c\u8fd0\u8425\u53c2\u6570\uff0c\u5982\u516c\u53f8\u7684\u5730\u5740\u3001\u89c4\u6a21\u3001\u6027\u8d28\u3001\u7535\u8bdd\u53f7\u7801\u7b49\u3002\u8fd9\u4e9b\u4fe1\u606f\u57fa\u672c\u4e0a\u4e0d\u53ef\u80fd\u4fee\u6539\u3002ABI\u4fdd\u8bc1\u4e86userspace\u80fd\u6b63\u786e\u4e0ekernel\u8fdb\u884c\u4ea4\u4e92\uff0c\u4e5f\u6b63\u5982\u4f01\u4e1a\u56fa\u5b9a\u5730\u5740\u3001\u56fa\u5b9a\u53f7\u7801\uff0c\u65b9\u4fbf\u5176\u4ed6\u516c\u53f8\u8ddf\u672c\u516c\u53f8\u6d3d\u8c08\u4e1a\u52a1\u3002\n\n# - **\u516c\u53f8\u7684\u5730\u5740** \u5bf9\u5e94\u4e8e\u5185\u6838\u7684\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3\uff0c\u5b83\u662f\u4e00\u4e2a\u56fa\u5b9a\u7684\u201c\u5730\u70b9\u201d\uff0c\u5f00\u53d1\u8005\u548c\u7528\u6237\u7a7a\u95f4\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u63a5\u53e3\u4e0e\u5185\u6838\u8fdb\u884c\u4ea4\u4e92\u3002\n# - **\u516c\u53f8\u7684\u89c4\u6a21** \u7c7b\u4f3c\u4e8e\u5185\u6838\u652f\u6301\u7684\u529f\u80fd\u96c6\u548c\u6027\u80fd\u53c2\u6570\uff0c\u5b83\u51b3\u5b9a\u4e86\u516c\u53f8\u80fd\u5904\u7406\u7684\u4e1a\u52a1\u91cf\u548c\u590d\u6742\u5ea6\u3002\n# - **\u516c\u53f8\u6027\u8d28** \u5bf9\u5e94\u4e8e\u5185\u6838\u7684\u7c7b\u578b\u548c\u8bbe\u8ba1\u76ee\u6807\uff0c\u6bd4\u5982\u662f\u9762\u5411\u4f01\u4e1a\u670d\u52a1\u7684\u8fd8\u662f\u9762\u5411\u6d88\u8d39\u8005\u5e02\u573a\u7684\u3002\n# - **\u516c\u53f8\u7535\u8bdd\u53f7\u7801** \u7c7b\u4f3c\u4e8e\u5185\u6838\u63d0\u4f9b\u7684\u7cfb\u7edf\u8c03\u7528\u7f16\u53f7\uff0c\u6bcf\u4e2a\u7f16\u53f7\u90fd\u5bf9\u5e94\u4e00\u4e2a\u7279\u5b9a\u7684\u670d\u52a1\u6216\u529f\u80fd\u3002\n\n# \u5185\u6838 ABI \u901a\u8fc7\u5b9a\u4e49\u4e00\u5957\u7a33\u5b9a\u7684\u63a5\u53e3\u548c\u8c03\u7528\u7ea6\u5b9a\uff0c\u786e\u4fdd\u7528\u6237\u7a7a\u95f4\u7684\u7a0b\u5e8f\u80fd\u591f\u53ef\u9760\u5730\u4e0e\u5185\u6838\u8fdb\u884c\u901a\u4fe1\u548c\u4ea4\u4e92\u3002\u8fd9\u4e9b\u63a5\u53e3\u548c\u7ea6\u5b9a\u662f\u64cd\u4f5c\u7cfb\u7edf\u517c\u5bb9\u6027\u548c\u7a33\u5b9a\u6027\u7684\u5173\u952e\uff0c\u5b83\u4eec\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u786e\u4fe1\uff0c\u4ed6\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u5728\u5185\u6838\u7684\u652f\u6301\u4e0b\u6b63\u5e38\u8fd0\u884c\uff0c\u5373\u4f7f\u5728\u5185\u6838\u7248\u672c\u66f4\u65b0\u540e\u4e5f\u80fd\u4fdd\u6301\u517c\u5bb9\u6027\u3002\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u6838\u6001\u548c\u7528\u6237\u6001",children:"\u5185\u6838\u6001\u548c\u7528\u6237\u6001"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u5185\u6838\u6001\uff0cCPU \u62e5\u6709\u5b8c\u5168\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u6267\u884c\u7279\u6743\u6307\u4ee4\u548c\u8bbf\u95ee\u7cfb\u7edf\u7684\u6240\u6709\u5185\u5b58\u3002\u8fd9\u610f\u5473\u7740\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff0c\u5305\u62ec\u4fee\u6539\u5185\u5b58\u4e2d\u7684\u654f\u611f\u6570\u636e\u548c\u63a7\u5236\u786c\u4ef6\u8bbe\u5907\u3002\u800c\u5728\u7528\u6237\u6001\uff0cCPU \u7684\u6743\u9650\u88ab\u9650\u5236\u5728\u975e\u7279\u6743\u6307\u4ee4\u548c\u53d7\u9650\u5185\u5b58\u8bbf\u95ee\u4e0a\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u4fdd\u62a4\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u9632\u6b62\u5e94\u7528\u7a0b\u5e8f\u6ee5\u7528\u7cfb\u7edf\u8d44\u6e90\u6216\u5e72\u6270\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"KernelMode: ring0(direct),\nUserMode: ring3(syscall)\n\nkernel-space: \u516c\u53f8\u5185\u90e8\n# DMA, NORMAL, HIGHMEM\nuser-space: \u5916\u5305\uff08\u76f8\u5e94\u7684\uff0c\u5916\u90e8\u8bbe\u5907\u5c31\u662f\u5176\u4ed6\u516c\u53f8\uff09\n# text section, data section, bbs segment, heap, stack\n\n# BIOS\uff08\u6216\u8005 UEFI\uff09\u5c31\u662f\u653f\u5e9c\uff08\u786c\u4ef6\uff09\u5f00\u516c\u53f8\u7684\u6d41\u7a0b\uff08BIOS/UEFI \u56fa\u4ef6\u76f4\u63a5\u5d4c\u5165\u8ba1\u7b97\u673a\u4e3b\u677f\uff09\uff0cCPU \u5c31\u662f\u5458\u5de5\uff0c\u6587\u4ef6\u7cfb\u7edf\u5c31\u662f\u516c\u53f8\u7684\u6863\u6848\u5e93\uff0c\uff0c0 \u53f7\u8fdb\u7a0b\u5c31\u662f\u9879\u76ee\u6a21\u677f\uff0c\u8fdb\u7a0b\u6811\u5c31\u662f\u9879\u76ee\u6811\uff08\u6bd4\u5982\u516c\u53f8\u9879\u76ee\u5185\u90e8\u5d4c\u5957\u7684\u5404\u79cd\u9879\u76ee\uff09\n\nCPU: \u5458\u5de5\uff0c\u6216\u8005\u8bf4\u5de5\u4eba\u3002\u4f46\u662f\u5728kernel\u4e2d\uff0c\u901a\u5e38\u6309\u7167\u5355\u6838\u548c\u591a\u6838\u6765\u8bf4\uff0c\u6216\u8bb8\u7c7b\u6bd4\u6210\u201c\u591a\u624b\u5de5\u4e1a\u673a\u5668\u4eba\u201d\u66f4\u5408\u9002\uff0c\u56e0\u4e3aCPU\u53ea\u80fd\u770b\u61c2 ELF\uff0c\u9700\u8981\u6709\u4eba\u628a\u5ba2\u6237\u9700\u6c42\u8f6c\u5316\u6210\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff08ELF\uff09\uff0cCPU \u5c0f\u4f19\u4f34\u4eec\u624d\u80fd\u6267\u884c\uff0c\u8fd9\u5c31\u662f\u7f16\u8bd1\u3002\n# \u7f16\u8bd1\u5176\u5b9e\u662f\u4e00\u4e2a\u9700\u6c42\u5206\u6790\u548c\u9700\u6c42\u8f6c\u6362\u7684\u8fc7\u7a0b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u5c06\u63a5\u8fd1\u4eba\u7c7b\u7684 C/C++ \u8bed\u8a00\uff0c\u8f6c\u6362\u4e3a CPU \u5c0f\u4f19\u4f34\u80fd\u591f\u542c\u61c2\u7684\u4e8c\u8fdb\u5236\u8bed\u8a00\uff0c\u5e76\u4e14\u4ee5\u4e00\u5b9a\u7684\u6587\u6863\u683c\u5f0f\uff0c\u5199\u6210\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5982\u679c\u6211\u4eec\u8fd8\u62ff\u516c\u53f8\u4e3e\u4f8b\uff0c\u628a\u7528\u6237\u6001\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u804c\u5458\uff0c\u628a\u5185\u6838\u6001\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u9ad8\u7ba1\uff0c\u662f\u4e0d\u662f\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u201c\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u662f\u4e00\u79cd\u8fd0\u884c\u6a21\u5f0f\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5982\u679c\u8ba9\u8fd9\u4e2a\u804c\u5458\u8d1f\u8d23\u9ad8\u7ba1\u7684\u5de5\u4f5c\uff0c\u4ed6\u73b0\u5728\u7684\u5de5\u4f5c\u6a21\u5f0f\u5c31\u662f\u5185\u6838\u6001\uff0c\u5982\u679c\u4ed6\u53ea\u505a\u666e\u901a\u7684\u6267\u884c\u5de5\u4f5c\uff0c\u4ed6\u7684\u5de5\u4f5c\u6a21\u5f0f\u5c31\u662f\u7528\u6237\u6001\u3002\u8ddf\u4ed6\u672c\u8eab\u65e0\u5173\uff0c\u53ea\u4e0d\u8fc7\u662f\u5185\u6838\u8c03\u5ea6\u4ed6\u8fdb\u884c\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\uff08\u516c\u53f8\u8001\u677f\u8ba9\u4ed6\u8d1f\u8d23\u4e0d\u540c\u7684\u5de5\u4f5c\uff09\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u56de\u8fc7\u5934\u770b\uff0c\u8fd9\u4e2a\u6bd4\u55bb\u662f\u6709\u95ee\u9898\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u8fd9\u4e2a\u8fdb\u7a0b\u7c7b\u6bd4\u6210\u516c\u53f8\u6b63\u5f0f\u7acb\u9879\u7684\u9879\u76ee\uff0c\u7ebf\u7a0b\u7c7b\u6bd4\u6210\u9879\u76ee\u5185\u90e8\u5b50\u9879\u76ee\u66f4\u5408\u7406\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"syscall--glibc",children:"syscall & glibc"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"syscall: syscall \u662f\u7528\u6237\u7a7a\u95f4\u8c03\u7528\u5185\u6838\u6307\u5b9a\u64cd\u4f5c\u7684\u65b9\u6cd5\u3002syscall \u53ef\u4ee5\u770b\u4f5c\u662f\u80fd\u6267\u884c\u6307\u5b9a\u64cd\u4f5c\u7684\u79d8\u4e66\uff0c\u7528\u6765\u8fde\u63a5\u4e24\u8005\uff08syscall \u51b3\u5b9a\u4e86\u64cd\u4f5c\u7cfb\u7edf\u597d\u4e0d\u597d\u7528\uff0c\u529f\u80fd\u5168\u4e0d\u5168\uff09\u3002\n\nglibc: \u867d\u7136 syscall\uff08\u79d8\u4e66\u7684\u6307\u4ee4\u8868\uff09\u5df2\u7ecf\u5f88\u65b9\u4fbf\u4e86\uff0c\u4f46\u662f\u53ea\u662f\u5bf9\u516c\u53f8\u5185\u90e8\uff08\uff09\u800c\u8a00\uff0c\u5bf9\u516c\u53f8\u5916\u90e8\u7684\u4eba\u5bf9\u8fd9\u4e2a\u80af\u5b9a\u4e0d\u719f\u554a\uff0c\u5c31\u9700\u8981 glibc \u4e86\u3002glibc \u5c01\u88c5\u4e86 linux \u7684 syscall\uff0c\u65b9\u4fbf\u8c03\u7528\u3002\n# \u4f46\u662f\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5e76\u4e0d\u662fglibc\u4e00\u5b9a\u5c01\u88c5\u4e86\u591a\u4e2asyscall\uff0c\u53ef\u80fd\u662f1:1\n# \u6bcf\u4e2a\u7279\u5b9a\u7684\u7cfb\u7edf\u8c03\u7528\u5bf9\u5e94\u4e86\u81f3\u5c11\u4e00\u4e2a Glibc \u5c01\u88c5\u7684\u5e93\u51fd\u6570\uff0c\u6bd4\u5982\u8bf4\uff0c\u7cfb\u7edf\u63d0\u4f9b\u7684\u6253\u5f00\u6587\u4ef6\u7cfb\u7edf\u8c03\u7528 sys_open \u5bf9\u5e94\u7684\u662f Glibc \u4e2d\u7684 open \u51fd\u6570\u3002\n#  \u6709\u65f6\u5019\uff0cGlibc \u4e00\u4e2a\u5355\u72ec\u7684 API \u53ef\u80fd\u8c03\u7528\u591a\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u6bd4\u5982\u8bf4\uff0cGlibc \u63d0\u4f9b\u7684 printf \u51fd\u6570\u5c31\u4f1a\u8c03\u7528\u5982 sys_open\u3001sys_mmap\u3001sys_write\u3001sys_close \u7b49\u7b49\u7cfb\u7edf\u8c03\u7528\u3002\n#  \u4e5f\u6709\u65f6\u5019\uff0c\u591a\u4e2a API \u4e5f\u53ef\u80fd\u53ea\u5bf9\u5e94\u540c\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u5982 Glibc \u4e0b\u5b9e\u73b0\u7684 malloc\u3001calloc\u3001free \u7b49\u51fd\u6570\u7528\u6765\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff0c\u90fd\u5229\u7528\u4e86\u5185\u6838\u7684 sys_brk \u7684\u7cfb\u7edf\u8c03\u7528\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"syscall\u662f\u516c\u53f8\u5185\u90e8\u7684\u79d8\u4e66\uff0cglibc\u662f\u4e2d\u4ecb\u673a\u6784"}),"\n",(0,l.jsx)(e.p,{children:"\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u3001\u591a\u5bf9\u4e00"}),"\n",(0,l.jsx)(e.h2,{id:"cpu",children:"CPU"}),"\n",(0,l.jsx)(e.h3,{id:"z",children:"z"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# \u591a\u6838 CPU \u4e00\u81f4\u6027\u95ee\u9898\n\n- \u5185\u5b58\u5c4f\u969c:\n# \u5185\u5b58\u5c4f\u969c\u662f\u4e00\u79cd\u6307\u4ee4\uff0c\u7528\u4e8e\u9650\u5236\u6307\u4ee4\u91cd\u6392\u548c\u5185\u5b58\u8bbf\u95ee\u7684\u987a\u5e8f\u3002\u5b83\u53ef\u4ee5\u786e\u4fdd\u5728\u5c4f\u969c\u4e4b\u524d\u7684\u6307\u4ee4\u548c\u5185\u5b58\u8bbf\u95ee\u5728\u5c4f\u969c\u4e4b\u540e\u7684\u6307\u4ee4\u548c\u5185\u5b58\u8bbf\u95ee\u4e4b\u524d\u5b8c\u6210\uff0c\u4ece\u800c\u4fdd\u8bc1\u7a0b\u5e8f\u7684\u6b63\u786e\u6267\u884c\u987a\u5e8f\u3002\n\n- MESI(Modified, Exclusive, Shared, Invalid):\n# MESI \u662f\u4e00\u79cd\u7f13\u5b58\u4e00\u81f4\u6027\u534f\u8bae\uff0c\u7528\u4e8e\u591a\u5904\u7406\u5668\u7cfb\u7edf\u4e2d\u7684\u7f13\u5b58\u4e00\u81f4\u6027\u3002\u5b83\u5b9a\u4e49\u4e86\u5904\u7406\u5668\u7f13\u5b58\u4e2d\u6570\u636e\u7684\u56db\u79cd\u72b6\u6001\uff1a\u4fee\u6539\uff08Modified\uff09\u3001\u4e13\u7528\uff08Exclusive\uff09\u3001\u5171\u4eab\uff08Shared\uff09\u548c\u65e0\u6548\uff08Invalid\uff09\n# The MESI protocol is an Invalidate-based cache coherence protocol, and is one of the most common protocols that support write-back caches.\n\n- \u6307\u4ee4\u91cd\u6392:\n# \u6307\u4ee4\u91cd\u6392\u662f\u7f16\u8bd1\u5668\u6216\u5904\u7406\u5668\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\u91cd\u65b0\u6392\u5e8f\u6307\u4ee4\u7684\u8fc7\u7a0b\uff0c\u4ee5\u4f18\u5316\u6027\u80fd\u6216\u63d0\u9ad8\u5e76\u53d1\u6027\u3002\u7136\u800c\uff0c\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u6307\u4ee4\u91cd\u6392\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u60f3\u4e0d\u5230\u7684\u7ed3\u679c\uff0c\u5982\u6570\u636e\u7ade\u4e89\u6216\u4e0d\u4e00\u81f4\u7684\u72b6\u6001\u3002\n\n- Happens-Before:\n# Happens-Before \u539f\u5219\u662f\u6307\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u64cd\u4f5c\u7684\u7ed3\u679c\u5bf9\u4e8e\u53e6\u4e00\u4e2a\u64cd\u4f5c\u662f\u53ef\u89c1\u7684\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u5728\u65f6\u95f4\u4e0a\u53d1\u751f\u5728\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u4e4b\u524d\u3002Happens-Before \u539f\u5219\u662f\u7528\u4e8e\u5b9a\u4e49\u548c\u63a8\u65ad\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\u64cd\u4f5c\u7684\u987a\u5e8f\u5173\u7cfb\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u7684\u6267\u884c\u987a\u5e8f\u548c\u4e00\u81f4\u6027\u3002\n\n- volatile \u5173\u952e\u5b57:\n# volatile \u662f\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u7528\u4e8e\u4fee\u9970\u53d8\u91cf\uff0c\u6307\u793a\u7f16\u8bd1\u5668\u5728\u751f\u6210\u6307\u4ee4\u65f6\u4e0d\u8981\u5bf9\u8be5\u53d8\u91cf\u8fdb\u884c\u6307\u4ee4\u91cd\u6392\u3002\u5b83\u53ef\u4ee5\u786e\u4fdd\u5bf9 volatile \u53d8\u91cf\u7684\u8bfb\u5199\u64cd\u4f5c\u6309\u7167\u7a0b\u5e8f\u7684\u987a\u5e8f\u6267\u884c\uff0c\u5e76\u4e14\u5bf9\u4e8e\u5176\u4ed6\u7ebf\u7a0b\u53ef\u89c1\uff0c\u4ece\u800c\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7684\u5185\u5b58\u53ef\u89c1\u6027\u548c\u987a\u5e8f\u6027\u4fdd\u8bc1\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u8bf4\u8bf4\u6211\u7684\u7406\u89e3\uff0c\u8fd8\u662f\u62ff\u4e0a\u9762\u8001\u677f\u548c\u5de5\u4eba\u6765\u4e3e\u4f8b\uff0c\u6307\u4ee4\u91cd\u6392\u5c31\u662f\u5de5\u4eba\u4e3a\u4e86\u5c3d\u5feb\u5b8c\u6210\u5de5\u4f5c\uff0c\u81ea\u5df1\u5bf9\u5de5\u4f5c\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u8fdb\u884c\u8c03\u6574\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u591a\u4eba\u534f\u4f5c\u5c31\u4f1a\u51fa\u95ee\u9898\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u201cvolatile \u5c31\u901a\u8fc7\u5185\u5b58\u5c4f\u969c\u6765\u7981\u6b62\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u6307\u4ee4\u91cd\u6392\u201d\uff0c\u5982\u679c\u6211\u4eec\u628a\u5185\u5b58\u5c4f\u969c\u7406\u89e3\u4e3a\u516c\u53f8\u89c4\u7ae0\u5236\u5ea6\uff0cvolatile \u7406\u89e3\u4e3a\u516c\u53f8\u7684\u901a\u77e5\u677f\uff0c\u5c31\u53ef\u4ee5\u7406\u89e3\u4e3a\u5de5\u4eba\u7684\u524d\u540e\u64cd\u4f5c\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u662f\u666e\u901a\u8bfb\u5199\uff08\u4ee5\u53ca\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u662f volatile \u8bfb\uff09\u90fd\u53ef\u4ee5\u91cd\u65b0\u6392\u5e8f\uff0c\u7528\u6765\u63d0\u9ad8\u6548\u7387\u3002\u5176\u4ed6\u60c5\u51b5\uff08\u6bd4\u5982\u6709 volatile \u5199\uff09\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u60c5\u51b5\u53d1\u751f\u7684\uff0c\u5c31\u9700\u8981\u7981\u6b62\u6307\u4ee4\u91cd\u6392\u3002\u6211\u7406\u89e3\u7684\u5bf9\u5417\uff1f"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u4f60\u7684\u7406\u89e3\u57fa\u672c\u4e0a\u662f\u6b63\u786e\u7684\u3002\u6307\u4ee4\u91cd\u6392\u662f\u4e3a\u4e86\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\uff0c\u4f46\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002volatile \u5173\u952e\u5b57\u901a\u8fc7\u5185\u5b58\u5c4f\u969c\u6765\u7981\u6b62\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u6307\u4ee4\u91cd\u6392\uff0c\u786e\u4fdd\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002\u4f60\u53ef\u4ee5\u5c06\u5185\u5b58\u5c4f\u969c\u7406\u89e3\u4e3a\u516c\u53f8\u7684\u89c4\u7ae0\u5236\u5ea6\uff0cvolatile \u5173\u952e\u5b57\u7406\u89e3\u4e3a\u516c\u53f8\u7684\u901a\u77e5\u677f\uff0c\u5de5\u4eba\u7684\u524d\u540e\u64cd\u4f5c\u53ef\u4ee5\u91cd\u65b0\u6392\u5e8f\uff0c\u4f46\u662f\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u64cd\u4f5c\u662f volatile \u8bfb\uff0c\u5c31\u4e0d\u80fd\u8fdb\u884c\u91cd\u65b0\u6392\u5e8f\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u7684\u6b63\u786e\u6027\u3002\u5f53\u6d89\u53ca\u5230 volatile \u5199\u64cd\u4f5c\u65f6\uff0c\u66f4\u9700\u8981\u7981\u6b62\u6307\u4ee4\u91cd\u6392\uff0c\u4ee5\u907f\u514d\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u53d1\u751f\u3002\u603b\u7684\u6765\u8bf4\uff0c\u4f60\u7684\u7406\u89e3\u662f\u6b63\u786e\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u201c\u5f53\u4e00\u4e2a\u6838\u5fc3\u6267\u884c\u4e00\u4e2a\u5199\u64cd\u4f5c\uff0c\u5e76\u4e14\u53e6\u4e00\u4e2a\u6838\u5fc3\u6267\u884c\u4e00\u4e2a\u8bfb\u64cd\u4f5c\u65f6\uff0chappens-before \u5173\u7cfb\u53ef\u4ee5\u7528\u6765\u786e\u4fdd\u5199\u64cd\u4f5c\u5148\u4e8e\u8bfb\u64cd\u4f5c\u53d1\u751f\u3002\u8fd9\u610f\u5473\u7740\u8bfb\u64cd\u4f5c\u53ef\u4ee5\u770b\u5230\u5199\u64cd\u4f5c\u6240\u505a\u7684\u66f4\u6539\u3002\u201d\u8fd9\u4e2a\u5c31\u662f\u5185\u5b58\u53ef\u89c1\u6027\u662f\u5427"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u662f\u7684\uff0c\u60a8\u63d0\u5230\u7684\u60c5\u51b5\u6d89\u53ca\u5230\u5185\u5b58\u53ef\u89c1\u6027\u3002\u5185\u5b58\u53ef\u89c1\u6027\u662f\u6307\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u53d8\u91cf\u8fdb\u884c\u4e86\u4fee\u6539\u540e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u80fd\u591f\u7acb\u5373\u770b\u5230\u8fd9\u4e2a\u4fee\u6539\u3002\u5728\u591a\u6838 CPU \u4e2d\uff0c\u6bcf\u4e2a\u6838\u5fc3\u90fd\u6709\u81ea\u5df1\u7684\u7f13\u5b58\uff0c\u5f53\u4e00\u4e2a\u6838\u5fc3\u5bf9\u5171\u4eab\u53d8\u91cf\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5b83\u4f1a\u5c06\u4fee\u6539\u5199\u5165\u81ea\u5df1\u7684\u7f13\u5b58\u4e2d\u3002\u800c\u5176\u4ed6\u6838\u5fc3\u5728\u8bfb\u53d6\u8be5\u5171\u4eab\u53d8\u91cf\u65f6\uff0c\u53ef\u80fd\u4f1a\u4ece\u81ea\u5df1\u7684\u7f13\u5b58\u4e2d\u8bfb\u53d6\uff0c\u800c\u4e0d\u662f\u4ece\u4e3b\u5185\u5b58\u4e2d\u8bfb\u53d6\u3002\u8fd9\u5c31\u53ef\u80fd\u5bfc\u81f4\u4e00\u4e2a\u6838\u5fc3\u770b\u5230\u7684\u662f\u65e7\u503c\uff0c\u800c\u53e6\u4e00\u4e2a\u6838\u5fc3\u770b\u5230\u7684\u662f\u65b0\u503c\u3002\u4e3a\u4e86\u786e\u4fdd\u5185\u5b58\u53ef\u89c1\u6027\uff0c\u9700\u8981\u4f7f\u7528 happens-before \u5173\u7cfb\u6765\u8fdb\u884c\u540c\u6b65\u3002happens-before \u5173\u7cfb\u53ef\u4ee5\u786e\u4fdd\u5199\u64cd\u4f5c\u5148\u4e8e\u8bfb\u64cd\u4f5c\u53d1\u751f\uff0c\u4ece\u800c\u4fdd\u8bc1\u8bfb\u64cd\u4f5c\u53ef\u4ee5\u770b\u5230\u5199\u64cd\u4f5c\u6240\u505a\u7684\u66f4\u6539\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"cpu\u4e0a\u4e0b\u6587",children:"CPU\u4e0a\u4e0b\u6587"}),"\n",(0,l.jsx)(e.p,{children:"registers(..., PC, stack pointer), process status, mem-manage(page table, segment table)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"CPU \u4e0a\u4e0b\u6587\u5207\u6362\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a\n1. \u5f53\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u65f6\uff0c\u5b83\u4f1a\u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b\u7684 CPU \u4e0a\u4e0b\u6587\u3002\u8fd9\u5305\u62ec\u5c06\u5bc4\u5b58\u5668\u7684\u503c\u4fdd\u5b58\u5230\u5f53\u524d\u8fdb\u7a0b\u7684\u5185\u5b58\u533a\u57df\u4e2d\u3002\n2. \u64cd\u4f5c\u7cfb\u7edf\u6839\u636e\u8c03\u5ea6\u7b97\u6cd5\u9009\u62e9\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8fdb\u7a0b\uff0c\u5e76\u4ece\u5176\u5185\u5b58\u533a\u57df\u4e2d\u6062\u590d\u5176\u5148\u524d\u4fdd\u5b58\u7684 CPU \u4e0a\u4e0b\u6587\u3002\n3. \u6062\u590d\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c06\u63a7\u5236\u6743\u8f6c\u79fb\u5230\u65b0\u8fdb\u7a0b\u7684\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u6307\u5411\u7684\u4f4d\u7f6e\uff0c\u4ece\u8be5\u4f4d\u7f6e\u7ee7\u7eed\u6267\u884c\u3002\n\nCPU \u4e0a\u4e0b\u6587\u5207\u6362\u662f\u4e00\u9879\u5f00\u9500\u8f83\u9ad8\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u6d89\u53ca\u5230\u4fdd\u5b58\u548c\u6062\u590d\u5927\u91cf\u7684\u72b6\u6001\u4fe1\u606f\u3002\u5b83\u53d1\u751f\u5728\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u7528\u4e8e\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u5207\u6362\u548c\u8d44\u6e90\u5171\u4eab\uff0c\u4ee5\u4fbf\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u516c\u5e73\u7684 CPU \u65f6\u95f4\u7247\uff0c\u5e76\u4f7f\u7cfb\u7edf\u80fd\u591f\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u4efb\u52a1\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"CPU\u7684\u8ba9\u6b65\u5f0f\u4e0a\u4e0b\u6587\u5207\u6362\u548c\u62a2\u5360\u5f0f\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4e0d\u5982\u8bf4\u662f\u4e3b\u52a8\u8c03\u5ea6\u548c\u88ab\u52a8\u8c03\u5ea6"})})}),"\n",(0,l.jsx)(e.p,{children:"\u6309\u7167\u6211\u7684\u7406\u89e3\uff0c\u7ebf\u7a0b\u7684\u8c03\u5ea6\u673a\u5236\uff0c\u88ab\u52a8\u8c03\u5ea6\u5c31\u662f\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u5c31\u662f work stealing \u673a\u5236\u3002\u4e3b\u52a8\u8c03\u5ea6\u5c31\u662f\u4e3b\u52a8\u8ba9\u51fa\u8d44\u6e90\uff0c\u5c31\u662f hand off \u673a\u5236\u3002\u770b\u8d77\u6765\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u8c03\u5ea6\u673a\u5236\u6ca1\u5565\u533a\u522b\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4ece\u8c03\u5ea6\u7b97\u6cd5\u5230\u4e0a\u4e0b\u6587\u5207\u6362\u5230\u8c03\u5ea6\u673a\u5236\uff0c\u5b9e\u9645\u4e0a\u90fd\u6ca1\u6709\u533a\u522b\uff0c\u6211\u7406\u89e3\u7684\u5bf9\u5417\uff1f"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6211\u8ba4\u4e3a\u628aTCB\u7c7b\u6bd4\u6210\u516c\u53f8\u4e8c\u7ea7\u9879\u76ee\u7684\u9879\u76ee\u7ecf\u7406\u5f88\u8d34\u5207\uff0c\u90a3\u4e48\u80fd\u5426\u7528\u8fd9\u4e2a\u7c7b\u6bd4\u7ed9\u6211\u63cf\u8ff0\u4e00\u4e0b\uff0c\u6574\u4e2athread\u5207\u6362\u4e0a\u4e0b\u6587\u7684\u8fc7\u7a0b\uff1f\n---\n\n\u4f7f\u7528\u516c\u53f8\u4e00\u7ea7\u9879\u76ee\u9879\u76ee\u7ecf\u7406\u7684\u7c7b\u6bd4\u6765\u63cf\u8ff0\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u8fc7\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u60f3\u8c61\uff1a\n\n\u5728\u4e00\u4e2a\u5927\u578b\u516c\u53f8\u4e2d\uff0c\u6709\u591a\u4e2a\u4e00\u7ea7\u9879\u76ee\u540c\u65f6\u8fdb\u884c\uff0c\u6bcf\u4e2a\u9879\u76ee\u90fd\u6709\u81ea\u5df1\u7684\u9879\u76ee\u7ecf\u7406\uff08\u7c7b\u6bd4\u4e3aPCB\uff0c\u5373\u8fdb\u7a0b\u63a7\u5236\u5757\uff09\u3002\u8fd9\u4e9b\u9879\u76ee\u7ecf\u7406\u8d1f\u8d23\u786e\u4fdd\u4ed6\u4eec\u5404\u81ea\u7684\u9879\u76ee\u6309\u7167\u8ba1\u5212\u548c\u76ee\u6807\u63a8\u8fdb\u3002\u5f53\u9700\u8981\u5728\u4e0d\u540c\u9879\u76ee\u4e4b\u95f4\u5207\u6362\u6ce8\u610f\u529b\u65f6\uff0c\u516c\u53f8\u4f1a\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u6b65\u9aa4\u6765\u786e\u4fdd\u5e73\u6ed1\u8fc7\u6e21\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u3002\n\n1. **\u4fdd\u5b58\u5f53\u524d\u72b6\u6001**: \u5f53\u516c\u53f8\u51b3\u5b9a\u4ece\u4e00\u4e2a\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u9879\u76ee\u65f6\uff0c\u5f53\u524d\u9879\u76ee\u7684\u9879\u76ee\u7ecf\u7406\u9700\u8981\u8bb0\u5f55\u4e0b\u9879\u76ee\u7684\u6240\u6709\u5173\u952e\u4fe1\u606f\u3002\u8fd9\u5305\u62ec\u9879\u76ee\u8fdb\u5ea6\u3001\u4e0b\u4e00\u6b65\u8ba1\u5212\u3001\u5f53\u524d\u9047\u5230\u7684\u95ee\u9898\u3001\u56e2\u961f\u6210\u5458\u7684\u4efb\u52a1\u5206\u914d\u7b49\u3002\u5728\u8fdb\u7a0b\u5207\u6362\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b\u7684\u72b6\u6001\u5230\u5176PCB\u4e2d\uff0c\u5305\u62ec\u7a0b\u5e8f\u8ba1\u6570\u5668\u3001\u5bc4\u5b58\u5668\u72b6\u6001\u3001\u5185\u5b58\u5206\u914d\u3001\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u7b49\u3002\n\n2. **\u8bc4\u4f30\u548c\u4f18\u5148\u7ea7**: \u516c\u53f8\u4f1a\u6839\u636e\u9879\u76ee\u7684\u7d27\u6025\u7a0b\u5ea6\u3001\u622a\u6b62\u65e5\u671f\u548c\u8d44\u6e90\u9700\u6c42\u6765\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8981\u5173\u6ce8\u7684\u9879\u76ee\u3002\u7c7b\u4f3c\u5730\uff0c\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u8c03\u5ea6\u5668\u4f1a\u6839\u636e\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u3001\u8c03\u5ea6\u7b56\u7565\u548c\u5176\u4ed6\u56e0\u7d20\u6765\u9009\u62e9\u4e0b\u4e00\u4e2a\u8981\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002\n\n3. **\u8d44\u6e90\u5206\u914d**: \u786e\u5b9a\u4e0b\u4e00\u4e2a\u9879\u76ee\u540e\uff0c\u516c\u53f8\u4f1a\u91cd\u65b0\u5206\u914d\u5fc5\u8981\u7684\u8d44\u6e90\uff0c\u5982\u8d44\u91d1\u3001\u4eba\u529b\u548c\u5176\u4ed6\u7269\u8d44\u3002\u5728\u8fdb\u7a0b\u5207\u6362\u4e2d\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u786e\u4fdd\u65b0\u9009\u4e2d\u7684\u8fdb\u7a0b\u6709\u8db3\u591f\u7684\u8d44\u6e90\u6765\u8fd0\u884c\uff0c\u5305\u62ec\u5185\u5b58\u5206\u914d\u3001I/O\u6743\u9650\u7b49\u3002\n\n4. **\u52a0\u8f7d\u65b0\u72b6\u6001**: \u63a5\u4e0b\u6765\uff0c\u516c\u53f8\u5c06\u6ce8\u610f\u529b\u548c\u8d44\u6e90\u8f6c\u79fb\u5230\u65b0\u7684\u9879\u76ee\u4e0a\uff0c\u65b0\u7684\u9879\u76ee\u7ecf\u7406\u4f1a\u66f4\u65b0\u81ea\u5df1\u7684\u5de5\u4f5c\u72b6\u6001\uff0c\u51c6\u5907\u5f00\u59cb\u65b0\u7684\u5de5\u4f5c\u3002\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u8c03\u5ea6\u5668\u4f1a\u4ece\u65b0\u9009\u4e2d\u7684\u8fdb\u7a0b\u7684PCB\u4e2d\u52a0\u8f7d\u72b6\u6001\u4fe1\u606f\uff0c\u6062\u590d\u8fdb\u7a0b\u7684\u6267\u884c\u73af\u5883\u3002\n\n5. **\u6267\u884c\u65b0\u4efb\u52a1**: \u6700\u540e\uff0c\u65b0\u7684\u9879\u76ee\u7ecf\u7406\uff08\u8fdb\u7a0b\uff09\u5f00\u59cb\u6267\u884c\u4ed6\u4eec\u7684\u4efb\u52a1\uff0c\u63a8\u8fdb\u9879\u76ee\u8fdb\u5ea6\u3002\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u65b0\u8fdb\u7a0b\u5f00\u59cb\u6267\u884c\u5176\u4ee3\u7801\uff0c\u76f4\u5230\u5b8c\u6210\u6216\u518d\u6b21\u88ab\u64cd\u4f5c\u7cfb\u7edf\u6302\u8d77\u3002\n\n\u901a\u8fc7\u8fd9\u4e2a\u7c7b\u6bd4\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u76f4\u89c2\u5730\u7406\u89e3\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u8fc7\u7a0b\u3002\u5c31\u50cf\u516c\u53f8\u5728\u4e0d\u540c\u9879\u76ee\u7ecf\u7406\u548c\u9879\u76ee\u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u4e00\u6837\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5728\u4e0d\u540c\u7684\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4ee5\u786e\u4fdd\u7cfb\u7edf\u7684\u591a\u4efb\u52a1\u548c\u5e76\u53d1\u80fd\u529b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u9700\u8981\u4ed4\u7ec6\u7684\u89c4\u5212\u548c\u7ba1\u7406\uff0c\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u8fdb\u7a0b\uff08\u9879\u76ee\uff09\u90fd\u80fd\u9ad8\u6548\u5730\u8fd0\u884c\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"thread\u5207\u6362\u548cprocess\u5207\u6362\uff08\u9664\u4e86\u8bbe\u8ba1\u7684\u8d44\u6e90\u548c\u5f00\u9500\u4e0d\u540c\u4ee5\u5916\uff09\u6574\u4e2a\u6d41\u7a0b\u5b8c\u5168\u4e00\u81f4\uff0c"}),"\n",(0,l.jsx)(e.h3,{id:"irq-\u548c-softirq",children:"irq \u548c softirq"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"Signals are similar to interrupts, the difference being that interrupts are mediated by the CPU and handled by the kernel while signals are mediated by the kernel (possibly via system calls) and handled by individual processes.[citation needed] The kernel may pass an interrupt as a signal to the process that caused it (typical examples are SIGSEGV, SIGBUS, SIGILL and SIGFPE).\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"interrupts mediated by CPU, handled by Kernel"}),"\n",(0,l.jsx)(e.li,{children:"signal mediated by kernel, handled by process."}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f53\u4e00\u4e2a\u786c\u4ef6\u4e2d\u65ad\u53d1\u751f\u65f6\uff0c\u9996\u5148\u6267\u884c\u7684\u662f\u786c\u4e2d\u65ad\u5904\u7406\uff0c\u8fd9\u90e8\u5206\u5904\u7406\u9700\u8981\u5c3d\u53ef\u80fd\u5feb\uff0c\u4ee5\u907f\u514d\u5f71\u54cd\u7cfb\u7edf\u5bf9\u5176\u4ed6\u4e2d\u65ad\u7684\u54cd\u5e94\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4e00\u65e6\u786c\u4e2d\u65ad\u5904\u7406\u5b8c\u6210\uff0c\u5982\u679c\u8fd8\u6709\u66f4\u591a\u7684\u5de5\u4f5c\u9700\u8981\u5b8c\u6210\uff0c\u8fd9\u90e8\u5206\u5de5\u4f5c\u4f1a\u901a\u8fc7\u8f6f\u4e2d\u65ad\u6765\u5f02\u6b65\u5904\u7406\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u5904\u7406\u8fc7\u7a0b\u8017\u65f6\u8f83\u957f\uff0c\u4e5f\u4e0d\u4f1a\u963b\u585e\u786c\u4ef6\u4e2d\u65ad\u7684\u5904\u7406\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u7075\u6d3b\u7684\u5f85\u529e\u4e8b\u9879\u6216\u4f4e\u4f18\u5148\u7ea7\u7684\u80cc\u666f\u4efb\u52a1\u3002\u8fd9\u4e9b\u4efb\u52a1\u4e0d\u9700\u8981\u7acb\u5373\u5b8c\u6210\uff0c\u4f46\u4ecd\u7136\u5bf9\u9879\u76ee\u7684\u957f\u671f\u6210\u529f\u548c\u7ef4\u62a4\u6709\u79ef\u6781\u4f5c\u7528\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u7528\u4e8e\u5904\u7406\u53ef\u4ee5\u5ef6\u8fdf\u6267\u884c\u7684\u4efb\u52a1\uff0c\u4ee5\u907f\u514d\u963b\u585e\u66f4\u91cd\u8981\u7684\u4e2d\u65ad\u5904\u7406"}),"\n",(0,l.jsx)(e.p,{children:"\u9664\u4e86signal\uff0c\u8fd8\u6709\u54ea\u4e9b\u201c\u8f6f\u4e2d\u65ad\u201d? # syscall, exception, traps, page faults"}),"\n",(0,l.jsx)(e.h2,{id:"process",children:"process"}),"\n",(0,l.jsx)(e.h3,{id:"vs",children:"vs"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"\n\n- \u5b50\u8fdb\u7a0b: \u516c\u53f8\u4e8c\u7ea7\u9879\u76ee\uff08\u516c\u53f8\u9879\u76ee\u4e0b\u7684\u5b50\u9879\u76ee\uff09\u3002\u5b83\u4eec\u662f\u4ece\u4e3b\u9879\u76ee\u4e2d\u6d3e\u751f\u51fa\u6765\u7684\uff0c\u6709\u81ea\u5df1\u7684\u7279\u5b9a\u4efb\u52a1\u548c\u76ee\u6807\uff0c\u4f46\u4ecd\u7136\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5927\u9879\u76ee\u3002\u5b50\u8fdb\u7a0b\u7ee7\u627f\u4e86\u7236\u8fdb\u7a0b\uff08\u4e3b\u9879\u76ee\uff09\u7684\u4e00\u4e9b\u8d44\u6e90\u548c\u5c5e\u6027\uff0c\u4f46\u4e5f\u53ef\u4ee5\u72ec\u7acb\u5730\u6267\u884c\u4efb\u52a1\u3002\n- \u7ebf\u7a0b: \u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u9879\u76ee\u4e2d\u7684\u5de5\u4f5c\u5c0f\u7ec4\u6216\u8005\u5355\u4e2a\u4efb\u52a1\u3002\u5728\u4e00\u4e2a\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\u4e2d\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u7a0b\uff08\u5de5\u4f5c\u5c0f\u7ec4\uff09\u5e76\u884c\u5de5\u4f5c\uff0c\u6bcf\u4e2a\u5c0f\u7ec4\u8d1f\u8d23\u4e00\u4e2a\u5177\u4f53\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5c0f\u7ec4\u5171\u4eab\u9879\u76ee\u7684\u8d44\u6e90\uff0c\u4f46\u53ef\u4ee5\u72ec\u7acb\u5730\u6267\u884c\u5de5\u4f5c\uff0c\u63d0\u9ad8\u9879\u76ee\u7684\u5b8c\u6210\u6548\u7387\u3002\n- \u534f\u7a0b: \u8be5\u5de5\u4f5c\u5c0f\u7ec4\u4e0b\u7684\u67d0\u4e2a\u529f\u80fd\u5f00\u53d1\uff08\u6216\u8005\u67d0\u4e2a\u5916\u5305\u9879\u76ee\uff09\n- LWP: \u4e34\u65f6\u9879\u76ee\n# LWP\u662f\u4ecb\u4e8e\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6982\u5ff5\uff0c\u5b83\u63d0\u4f9b\u4e86\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u4e00\u79cd\u6298\u4e2d\u65b9\u6848\u3002LWP \u62e5\u6709\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4f46\u5728\u67d0\u4e9b\u5b9e\u73b0\u4e2d\u53ef\u80fd\u4e0e\u5176\u4ed6 LWP \u5171\u4eab\u67d0\u4e9b\u8d44\u6e90\u3002LWP \u901a\u5e38\u7528\u4e8e\u5b9e\u73b0\u591a\u7ebf\u7a0b\uff0c\u4f46\u5b83\u4eec\u7684\u8c03\u5ea6\u548c\u7ba1\u7406\u7c7b\u4f3c\u4e8e\u8fdb\u7a0b\u3002LWP \u7684\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u4ecb\u4e8e\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4e4b\u95f4\u3002LWP \u901a\u5e38\u662f\u8fdb\u7a0b\u5185\u7684\u4e00\u4e2a\u6267\u884c\u5355\u5143\uff0c\u5b83\u4eec\u7684\u521b\u5efa\u3001\u9500\u6bc1\u548c\u7ba1\u7406\u6bd4\u8fdb\u7a0b\u66f4\u5feb\u901f\u548c\u7075\u6d3b\u3002\n\n---\n\n- task_struct(tgid, flag)\n- scheduler(kernel, (pthread?))\n- communication(IPC, ITC)\n- state(RWSZNX, RWBTRT, zombie, blocked)\n- context switching overhead(PCB/TCB, Register(?, 16, 3), time(?, 1000ns, 200ns))\n- mem-use(?, 1MB, 2KB)\n- create/destroy(kernel, runtime)\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u77e5\u9053\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684struct\u90fd\u662ftask_struct\uff0c\u4f46\u662f\u6211\u786e\u5b9e\u5e76\u4e0d\u6e05\u695a\u201c\u7ebf\u7a0b\u521b\u5efa\u8fc7\u7a0b\u7684\u5177\u4f53\u6d41\u7a0b\u201d"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u53ef\u89c1\u548c\u521b\u5efa\u8fdb\u7a0b\u65f6\u4f7f\u7528\u7684 fork \u7cfb\u7edf\u8c03\u7528\u76f8\u6bd4\uff0c\u521b\u5efa\u7ebf\u7a0b\u7684 clone \u7cfb\u7edf\u8c03\u7528\u51e0\u4e4e\u548c fork \u5dee\u4e0d\u591a\uff0c\u4e5f\u4e00\u6837\u4f7f\u7528\u7684\u662f\u5185\u6838\u91cc\u7684 do_fork \u51fd\u6570\uff0c\u6700\u540e\u8d70\u5230 copy_process \u6765\u5b8c\u6574\u521b\u5efa\u3002\n\n\u4e0d\u8fc7\u521b\u5efa\u8fc7\u7a0b\u7684\u533a\u522b\u662f\u4e8c\u8005\u5728\u8c03\u7528 do_fork \u65f6\u4f20\u5165\u7684 clone_flags \u91cc\u7684\u6807\u8bb0\u4e0d\u4e00\u6837\uff01\u3002\n\n- \u521b\u5efa\u8fdb\u7a0b\u65f6\u7684 flag\uff1a\u4ec5\u6709\u4e00\u4e2a SIGCHLD\n- \u521b\u5efa\u7ebf\u7a0b\u65f6\u7684 flag\uff1a\u5305\u62ec CLONE_VM\u3001CLONE_FS\u3001CLONE_FILES\u3001CLONE_SIGNAL\u3001CLONE_SETTLS\u3001CLONE_PARENT_SETTID\u3001CLONE_CHILD_CLEARTID\u3001CLONE_SYSVSEM\u3002\n\n\u5173\u4e8e\u8fd9\u4e9b flag \u7684\u542b\u4e49\uff0c\u6211\u4eec\u9009\u51e0\u4e2a\u5173\u952e\u7684\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\uff0c\u540e\u9762\u4ecb\u7ecd do_fork \u7ec6\u8282\u7684\u65f6\u5019\u4f1a\u518d\u6b21\u6d89\u53ca\u5230\u3002\n\n- CLONE_VM: \u65b0 task \u548c\u7236\u8fdb\u7a0b\u5171\u4eab\u5730\u5740\u7a7a\u95f4\n- CLONE_FS\uff1a\u65b0 task \u548c\u7236\u8fdb\u7a0b\u5171\u4eab\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\n- CLONE_FILES\uff1a\u65b0 task \u548c\u7236\u8fdb\u7a0b\u5171\u4eab\u6587\u4ef6\u63cf\u8ff0\u7b26\u8868\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5206\u522b\u4f7f\u7528fork\u548cclone\u7684syscall\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u4e24\u4e2a\u90fd\u662f\u901a\u8fc7do_fork\u6765\u8c03\u7528copy_process\u6765\u8fdb\u884c\u521b\u5efa\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u4e24\u8005\u7684\u533a\u522b\u5c31\u5728\u4e8edo_fork\u7684flag\u4e0d\u540c"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd8\u662f\u62ff\u516c\u53f8\u9879\u76ee\u4e3e\u4f8b\uff0cprocess\u5c31\u662f\u9879\u76ee\u7acb\u9879\u4e86\uff0c\u4f46\u662f\u5728\u9879\u76ee\u5185\u90e8\uff0c\u9700\u8981\u5b9e\u73b0\u4e0d\u540c\u7684\u6a21\u5757\u65f6\uff0c\u5c31\u9700\u8981\u4e0d\u540c\u7684flag\uff0c\u6240\u4ee5\u7ebf\u7a0b\u66f4\u591a\u5143\u5316\u4e00\u4e9b\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u901a\u8fc7 copy_process \u7684\u6e90\u7801\u53ef\u4ee5\u770b\u5230\uff0c\u5c31\u662f\u4e24\u90e8\u5206\uff0c\u4eceidle process\u590d\u5236"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u603b\u7ed3\u4e00\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u8fd8\u662f\u62ff\u8fdb\u7a0b\u6bd4\u505a\u516c\u53f8\u9879\u76ee\uff0c\u7ebf\u7a0b\u548c\u534f\u7a0b\u6bd4\u505a\u5927\u9879\u76ee\u4e0b\u7684\u5b50\u9879\u76ee\u548c\u67d0\u4e2a\u529f\u80fd\u7684\u5f00\u53d1\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8fdb\u7a0b\u8c03\u5ea6\u548c\u7ebf\u7a0b\u8c03\u5ea6\u4ece\u8c03\u5ea6\u7b97\u6cd5\u3001\u4e0a\u4e0b\u6587\u5207\u6362\u3001\u8c03\u5ea6\u673a\u5236\u7b49\u65b9\u9762\u5176\u5b9e\u90fd\u6ca1\u5565\u533a\u522b\u3002\u6bd4\u5982\u8bf4\uff0c\u8c03\u5ea6\u7b97\u6cd5\u90fd\u662f FIFO\u3001SJPF\u3001CFS\u3001MLFQ\u3001\u8f6e\u8be2\u4e4b\u7c7b\u7684\uff08\u672c\u8d28\u4e0a\u6765\u8bf4\u662f CPU \u8c03\u5ea6\u7b97\u6cd5\uff0c\u800c\u4e0d\u662f\u4ec0\u4e48\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u7684\u8c03\u5ea6\u7b97\u6cd5\uff09\uff0c\u4e0a\u4e0b\u6587\u5207\u6362\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u8c03\u5ea6\u673a\u5236\u4e5f\u662f\u7c7b\u4f3c\uff0c\u90fd\u662f\u4e3b\u52a8\u8c03\u5ea6\u548c\u88ab\u52a8\u8c03\u5ea6\u4e24\u79cd\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4f46\u662f\u4e00\u5b9a\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e24\u8005\u6700\u672c\u8d28\u7684\u533a\u522b\u5c31\u662f\uff0c\u8fdb\u7a0b\u662f\u62a2\u593a CPU\uff0c\u7ebf\u7a0b\u5219\u662f\u62a2\u593a\u8fdb\u7a0b\uff08\u6700\u7ec8\u62a2\u593a CPU\uff09\uff0c\uff08\u534f\u7a0b\u62a2\u593a\u7ebf\u7a0b\uff09\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u9879\u76ee\u4e4b\u6240\u4ee5\u8981\u5206\u6210\u591a\u4e2a\u5b50\u9879\u76ee\u7ec4\uff0c\u4e0d\u4e5f\u662f\u4e3a\u4e86\u80fd\u591f\u5e76\u53d1\u6267\u884c\u5417\uff1f\u540c\u6837\u7684\uff0c\u5982\u679c\u5b50\u9879\u76ee\u4e00\u65e6\u963b\u585e\uff08\u6ca1\u5b8c\u6210\u4efb\u52a1\uff09\uff0c\u90a3\u4f60\u6574\u4e2a\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\u5c31\u963b\u585e\u4e86\u3002\u90a3\u4e48\u7528\u6237\u6001\u7ebf\u7a0b\u5c31\u7c7b\u4f3c\u5916\u5305\u9879\u76ee\u7ec4\uff0c\u66f4\u7075\u6d3b\uff0c\u968f\u65f6\u53ef\u4ee5\u521b\u5efa\u3001\u9500\u6bc1\uff0c\u5f00\u9500\u5f88\u4f4e\uff0c\u5e76\u4e14\u5373\u4f7f\u963b\u585e\uff0c\u4e5f\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u8fdb\u7a0b\u963b\u585e\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e48\u8bf4\u7684\u8bdd\uff0c\u6211\u60f3\u5230\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7c7b\u6bd4\u3002\u8fdb\u7a0b\u53ef\u4ee5\u7c7b\u6bd4\u6210\u6709\u516c\u53f8\u7acb\u9879\u7684\u9879\u76ee\uff0c\u5206\u914d\u4e86\u5404\u79cd\u72ec\u7acb\u8d44\u6e90\uff0c\u7ebf\u7a0b\u5219\u53ef\u4ee5\u7c7b\u6bd4\u6210\u8fd9\u4e2a\u9879\u76ee\u4e2d\u7684\u672a\u7acb\u9879\uff08\u4e5f\u4e0d\u9700\u8981\u7acb\u9879\uff09\u7684\u5b50\u9879\u76ee\uff0c\u4f9d\u6258\u4e8e\u8fd9\u4e2a\u9879\u76ee\u5b58\u5728\uff0c\u8fd9\u4e24\u4e2a\u90fd\u662f\u9879\u76ee\uff08\u6570\u636e\u7ed3\u6784\u90fd\u662f task_struct\uff09\uff0c\u4f46\u662f\u516c\u53f8\u7684\u8d44\u6e90\u53ea\u80fd\u5212\u62e8\u7ed9\u5df2\u7acb\u9879\u7684\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5728\u9879\u76ee\u5185\u90e8\u5b9e\u9645\u6267\u884c\u64cd\u4f5c\u7684\u662f\u4ed6\u521b\u5efa\u7684\u5404\u79cd\u5b50\u9879\u76ee\uff08\u7ebf\u7a0b\uff09\u3002\u8fd9\u4e2a\u6bd4\u4e4b\u524d\u90a3\u4e2a\u516c\u53f8\u90e8\u95e8\u548c\u5de5\u4eba\u7684\u7c7b\u6bd4\u8981\u8d34\u5207\u592a\u591a\u4e86\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u633a\u7b80\u5355\u7684\uff0c\u6bcf\u4e2aprocess\u7684\u7528\u6237\u5730\u5740\u7a7a\u95f4\u90fd\u662f\u72ec\u7acb\u7684\uff0c\u4e0d\u80fd\u4e92\u76f8\u8bbf\u95ee\u3002\u4f46\u662fkernel space\u662f\u6240\u6709process\u5171\u4eab\u7684\uff0c\u800cprocess\u4e4b\u95f4\u4e5f\u662f\u901a\u8fc7kernel\u6765\u901a\u4fe1\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u800cprocess\u5185\u53c8\u662f\u6240\u6709thread\u5171\u4eab\u7684\u3002\u4e3e\u4e2a\u4f8b\u5b50\u5c31\u662f\uff0c\u516c\u53f8\u7684\u4e00\u7ea7\u5b50\u516c\u53f8\uff08\u6216\u8005\u8bf4\u9879\u76ee\u7ec4\uff09\u90fd\u5fc5\u987b\u8981\u7ecf\u8fc7\u603b\u516c\u53f8\u901a\u8fc7\u516c\u53f8\u8001\u677f\uff08kernel\uff09\u6765\u4f20\u9012\u6d88\u606f\uff0c\u6765\u8fdb\u884c\u901a\u4fe1\u3002\u800c\u8fd9\u4e9b\u4e00\u7ea7\u9879\u76ee\u7ec4\u5185\u90e8\u7684\u8fd9\u4e9b\u9879\u76ee\u7ec4\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u901a\u4fe1\uff0c\u4e0d\u9700\u8981kernel\u4e86\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u70b9\u975e\u5e38\u8d34\u5207\u7684\u662f\uff0c\u4e0d\u7ba1\u662f\u4e00\u7ea7\u9879\u76ee\u7ec4\u8fd8\u662f\u4e8c\u7ea7\u9879\u76ee\u7ec4\uff0c\u90fd\u662f\u8981\u5728\u516c\u53f8\u91cc\u7acb\u9879\u7684\uff0c\u63a5\u53d7\u516c\u53f8\u7684\u8c03\u5ea6\u3002\u4f46\u662f\u8d44\u6e90\u53ea\u53d1\u5230\u4e00\u7ea7\u9879\u76ee\u7ec4\uff0c\u53c8\u4e00\u7ea7\u9879\u76ee\u7ec4\u5bf9\u5185\u90e8\u8d44\u6e90\u8fdb\u884c\u5206\u914d\u3002\u5982\u679c\u4e00\u7ea7\u9879\u76ee\u7ec4\u88ab\u64a4\u9879\u4e86\uff0c\u6240\u6709\u8d44\u6e90\u80af\u5b9a\u5c31\u6536\u56de\u4e86\u3002\u8fde\u5e26\u7740\u91cc\u9762\u7684\u5404\u79cd\u4e8c\u7ea7\u9879\u76ee\u7ec4\u90fd\u6302\u4e86\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9664\u4e86fork\u51fd\u6570\u4e4b\u5916\uff0c\u8fd8\u6709\u53e6\u5916\u51e0\u4e2a\u63d0\u4f9b\u7ed9\u7528\u6237\u6001\u7528\u4e8e\u521b\u5efa\u8fdb\u7a0b\u76f8\u5173\u7684\u51fd\u6570\u3002\n\nvfork\uff1a\u4e0efork\u7684\u533a\u522b\u5728\u4e8e\uff0cvfork\u4fdd\u8bc1\u5b50\u8fdb\u7a0b\u5148\u8fd0\u884c\uff0c\u5728\u5b83\u8c03\u7528exec\u6216exit\u4e4b\u540e\u7236\u8fdb\u7a0b\u624d\u53ef\u80fd\u88ab\u8c03\u5ea6\u8fd0\u884c\u3002\nclone\uff1apthread\u51fd\u6570\u65cf\u4f7f\u7528clone\u6765\u521b\u5efa\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u544a\u8bc9\u6211-process-\u6d3e\u751f-child-process-\u7684\u6574\u4e2a\u6d41\u7a0b",children:"\u544a\u8bc9\u6211 process \u6d3e\u751f child process \u7684\u6574\u4e2a\u6d41\u7a0b\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:["\u7236\u8fdb\u7a0b\u901a\u8fc7",(0,l.jsx)(e.code,{children:"fork()"}),"\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u7ee7\u627f\u4e86\u7236\u8fdb\u7a0b\u7684\u8d44\u6e90\u548c\u5730\u5740\u7a7a\u95f4\u3002\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u9009\u62e9\u8c03\u7528",(0,l.jsx)(e.code,{children:"exec()"}),"\u6765\u52a0\u8f7d\u5e76\u6267\u884c\u65b0\u7684\u7a0b\u5e8f\uff0c\u6216\u8005\u7ee7\u7eed\u6267\u884c\u5f53\u524d\u7684\u7a0b\u5e8f\u3002\u5f53\u7236\u8fdb\u7a0b\u6216\u5b50\u8fdb\u7a0b\u901a\u8fc7",(0,l.jsx)(e.code,{children:"exit()"}),"\u7ec8\u6b62\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u56de\u6536\u5b83\u4eec\u5360\u7528\u7684\u8d44\u6e90\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"fork\uff1afork\u51fd\u6570\u62f7\u8d1d\u7236\u8fdb\u7a0b\u6765\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0cfork\u51fd\u6570\u8c03\u7528\u540e\u4f1a\u5206\u522b\u5728\u7236\u5b50\u8fdb\u7a0b\u4e2d\u5404\u8fd4\u56de\u4e00\u6b21\uff0c\u533a\u522b\u5728\u4e8e\uff1a\u7236\u8fdb\u7a0b\u4e2d\u7684\u8fd4\u56de\u503c\u662f\u6240\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0bpid\uff0c\u800c\u5b50\u8fdb\u7a0b\u5219\u662f\u8fd4\u56de0\u8868\u793a\u521b\u5efa\u6210\u529f\u3002\nexec\u51fd\u6570\u7ec4\uff1a\u5728fork\u8c03\u7528\u8fd4\u56de\u540e\uff0c\u5b50\u8fdb\u7a0b\u5c31\u521b\u5efa\u5b8c\u6210\u4e86\uff0c\u5982\u679c\u9700\u8981\u8fd0\u884c\u4e00\u4e2a\u4e0e\u7236\u8fdb\u7a0b\u4e0d\u540c\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5c31\u901a\u8fc7exec\u51fd\u6570\u7ec4\u6765\u5b8c\u6210\u8fd9\u4e2a\u5de5\u4f5c\u3002\u5982\u679c\u4e0d\u8c03\u7528exec\uff0c\u90a3\u4e48\u4e5f\u5c31\u610f\u5473\u7740\u7236\u5b50\u8fdb\u7a0b\u8fd0\u884c\u7684\u662f\u540c\u4e00\u4efd\u53ef\u6267\u884c\u6587\u4ef6\u4ee3\u7801\u3002\n\n...\n\n\u524d\u9762\u63d0\u5230\u8fc7\uff0cfork\u51fd\u6570\u4e3a\u5b50\u8fdb\u7a0b\u521b\u5efa\u4e00\u4e2a\u7236\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u7684\u526f\u672c\uff0c\u590d\u5236\u5c5e\u4e8e\u7236\u8fdb\u7a0b\u7684\u9875\u9762\u3002\u7136\u800c\uff0c\u8003\u8651\u5230\u8bb8\u591a\u5b50\u8fdb\u7a0b\u5728\u521b\u5efa\u4e4b\u540e\u7acb\u5373\u8c03\u7528\u7cfb\u7edf\u8c03\u7528exec\u51fd\u6570\u7ec4\u6765\u6267\u884c\u53e6\u5916\u7684\u7a0b\u5e8f\u4ee3\u7801\uff0c\u7236\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u7684\u590d\u5236\u53ef\u80fd\u6ca1\u6709\u5fc5\u8981\u3002\n\n\u56e0\u6b64\uff0cLinux\u5185\u6838\u5728\u5b9e\u73b0\u65f6\uff0c\u4f7f\u7528\u4e86\u5199\u65f6\u590d\u5236\u7684\u6280\u672f\uff08Copy On Write\uff0c\u7b80\u79f0COW\uff09\uff0c\u5b50\u8fdb\u7a0b\u5728\u521a\u5f00\u59cb\u521b\u5efa\u65f6\u4e0e\u7236\u8fdb\u7a0b\u5171\u4eab\u540c\u6837\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4ec5\u5f53\u5b50\u8fdb\u7a0b\u8981\u4fee\u6539\u7236\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u7684\u5185\u5bb9\u65f6\u624d\u521b\u5efa\u65b0\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4ece\u800c\u4f7f\u7236\u5b50\u8fdb\u7a0b\u6709\u5404\u81ea\u7684\u62f7\u8d1d\u3002\n\nRedis\u5728\u751f\u6210RDB\u5feb\u7167\u6587\u4ef6\u65f6\uff0c\u5c31\u5229\u7528\u4e86Linux\u5199\u65f6\u590d\u5236\u673a\u5236\u3002\u751f\u6210\u5feb\u7167\u6587\u4ef6\u65f6\uff0cRedis\u4e3b\u8fdb\u7a0bfork\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u6839\u636e\u8fd9\u91cc\u7684\u89e3\u91ca\uff0c\u6b64\u65f6\u5b50\u8fdb\u7a0b\u7684\u5185\u5b58\u5730\u5740\u5c31\u662f\u5171\u4eab\u7684\u7236\u8fdb\u7a0b\u7684\u7a7a\u95f4\u3002\u8fd9\u6837\uff0c\u7236\u8fdb\u7a0b\u53ef\u4ee5\u7ee7\u7eed\u670d\u52a1\u8bf7\u6c42\uff0c\u800c\u5b50\u8fdb\u7a0b\u8ddf\u8fdb\u8fdb\u7a0b\u521b\u5efa\u65f6\u5019\u7684\u5185\u5b58\u4fe1\u606f\uff0c\u751f\u6210\u5feb\u7167\u6587\u4ef6\uff0c\u7ed3\u675f\u4e86\u4e4b\u540e\u81ea\u884c\u9000\u51fa\u5373\u53ef\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"fork+exec\u5c31\u662f\u6d3e\u751fchild process\u7684\u8fc7\u7a0b"}),"\n",(0,l.jsx)(e.p,{children:"\u5305\u62ecCOW\uff0c\u8bf4\u767d\u4e86\u5c31\u662f\u8ba9child process\u4f7f\u7528\u7236\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"process-state-scheduler",children:"process state, scheduler"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- \u8fdb\u7a0b: \u516c\u53f8\u9879\u76ee\n# \u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u5185\u5b58\uff0c\u4e92\u76f8\u4e4b\u95f4\u4e0d\u5e72\u6270\uff0c\u6709\u72ec\u7acb\u7684\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4\u3002\n# task_struct\u4e2d\u7684\u5404\u79cdfiled\u7c7b\u6bd4\u6210\u4ec0\u4e48\u6bd4\u8f83\u5408\u9002?\n# task_struct # state, pid, mm(ms_struct), fs(fs_struct), files(files_struct)\n\n# \u9879\u76ee\u72b6\u6001? RWSZ\n# \u9879\u76ee\u6392\u671f? scheduler\n# \u9879\u76ee\u8fd0\u884c\u7684\u7edf\u8ba1\u4fe1\u606f\u4e5f\u975e\u5e38\u91cd\u8981\uff0c\u9879\u76ee\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5360\u7528\u7684\u516c\u53f8\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u4f1a\u8bae\u5ba4\uff08\u5185\u5b58\uff09\u3001\u6863\u6848\u5e93\uff08\u6587\u4ef6\u7cfb\u7edf\uff09\u4e5f\u9700\u8981\u5728\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\u91cc\u9762\u767b\u8bb0\u3002\n# process lifecycle: process create, start and exit?\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u76f8\u6bd4\u4e8e\u90e8\u95e8\u7684\u7c7b\u6bd4\uff0c\u5bf9\u8fdb\u7a0b/\u7ebf\u7a0b/\u534f\u7a0b\u66f4\u6070\u5f53\u7684\u7c7b\u6bd4\u662f\u9879\u76ee\u7ec4\u3002\u56e0\u4e3a\u90e8\u95e8\u6ca1\u529e\u6cd5\u968f\u65f6\u521b\u5efa\uff0c\u968f\u65f6\u9500\u6bc1\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5e76\u4e14\u5982\u679c\u7528\u90e8\u95e8\u6765\u7c7b\u6bd4\uff0c\u4e5f\u6ca1\u529e\u6cd5\u7c7b\u6bd4idle process, init process, kthreadd process\u8fd9\u4e9b"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u901a\u8fc7\u8fd9\u4e2a\u4f8b\u5b50\u5c31\u53ef\u4ee5\u5f88\u7b80\u5355\u5730\u89e3\u91ca\u4e86\uff0c\u4e3a\u4ec0\u4e48\u53ea\u6709\u5728\u7cfb\u7edf\u8c03\u7528\u3001\u5f02\u5e38\u3001\u4e2d\u65ad\u7684\u65f6\u5019\uff0c\u624d\u9700\u8981\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u3002\u5728\u516c\u53f8\u91cc\u4e0d\u4e5f\u662f\u9047\u5230\u89e3\u51b3\u4e0d\u4e86\u7684\u95ee\u9898\u4e86\uff0c\u6216\u8005\u9700\u8981\u66f4\u9ad8\u6743\u9650\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u7ed9\u516c\u53f8\u90e8\u95e8\u8001\u5927\u6c47\u62a5\uff1f"}),"\n",(0,l.jsx)(e.h3,{id:"process-scheduler",children:"process scheduler"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- \u8fdb\u7a0b\u8c03\u5ea6: \u8fd9\u4e2a\u573a\u666f\u4e5f\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u50cf\u6211\u4eec\u5e73\u65f6\u5de5\u4f5c\u65f6\uff0c\u6253\u5f00 kanban \u4e5f\u662f\u4e00\u5806\u5b50\u9879\u76ee\uff08\u4e00\u4e2a CPU \u5bf9\u5e94\u4e00\u5806\u8fdb\u7a0b\uff09\uff0c\u90a3\u80af\u5b9a\u8981\u5148\u60f3\u60f3\u5230\u5e95\u5148\u641e\u54ea\u4e2a\u9879\u76ee\u624d\u662f\u6700\u4f18\u9009\u62e9\u662f\u5427\u3002\u5185\u6838\u5bf9\u8fdb\u7a0b\u7684\u8c03\u5ea6\uff0c\u5c31\u50cf\u662f\u516c\u53f8\u5bf9\u4e0d\u540c\u9879\u76ee\u7684\u4f18\u5148\u7ea7\u5b89\u6392\u662f\u4e0d\u540c\u7684\u3002\n# \u8fd9\u91cc\u5c31\u6d89\u53ca\u5230\u5404\u79cdscheduler algo\u4e86\u561b\n\n\n# \u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bb2\uff0c\u4ed6\u9762\u5bf9\u7684 CPU \u7684\u6570\u91cf\u662f\u6709\u9650\u7684\uff0c\u5e72\u6d3b\u513f\u90fd\u662f\u4ed6\u4eec\uff0c\u4f46\u662f\u8fdb\u7a0b\u6570\u76ee\u8fdc\u8fdc\u8d85\u8fc7 CPU \u7684\u6570\u76ee\uff0c\u56e0\u800c\u5c31\u9700\u8981\u8fdb\u884c\u8fdb\u7a0b\u7684\u8c03\u5ea6\uff0c\u6709\u6548\u5730\u5206\u914d CPU \u7684\u65f6\u95f4\uff0c\u65e2\u8981\u4fdd\u8bc1\u8fdb\u7a0b\u7684\u6700\u5feb\u54cd\u5e94\uff0c\u4e5f\u8981\u4fdd\u8bc1\u8fdb\u7a0b\u4e4b\u95f4\u7684\u516c\u5e73\u3002\n# \u4e00\u4e2a CPU \u4e0a\u6709\u4e00\u4e2a\u961f\u5217\uff0c\u961f\u5217\u91cc\u9762\u662f\u4e00\u7cfb\u5217 sched_entity\uff0c\u6bcf\u4e2a sched_entity \u90fd\u5c5e\u4e8e\u4e00\u4e2a task_struct\uff0c\u4ee3\u8868\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u3002\n# \u8c03\u5ea6\u8981\u89e3\u51b3\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u6bcf\u4e00\u4e2a CPU \u5c0f\u4f19\u4f34\u6bcf\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u90fd\u8981\u60f3\u4e00\u4e0b\uff0c\u767d\u677f\u4e0a\u8fd9\u4e48\u591a\u9879\u76ee\uff0c\u6211\u5e94\u8be5\u5e72\u54ea\u4e00\u4e2a\uff1fCPU \u7684\u961f\u5217\u91cc\u9762\u6709\u8fd9\u4e48\u591a\u7684\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\uff0c\u5e94\u8be5\u53d6\u51fa\u54ea\u4e00\u4e2a\u6765\u6267\u884c\uff1f\n\n# kernel\u4e2d\u7236\u8fdb\u7a0b\u5728fork\u521b\u5efa\u5b50\u8fdb\u7a0b\u65f6\u7684\u5177\u4f53\u6d41\u7a0b?\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"sched_class (dl/rt/fair/idle_sched_class)"}),"\n",(0,l.jsx)(e.p,{children:"scheduler, strategy, algo"}),"\n",(0,l.jsx)(e.p,{children:"linux\u8fdb\u7a0b\u8c03\u5ea6\u56db\u8981\u7d20\uff08\u6838\u5fc3\u8c03\u5ea6\u5668\u3001\u5c31\u7eea\u961f\u5217rq\u3001\u8c03\u5ea6\u7b97\u6cd5\u3001\u8fdb\u7a0b\u4f18\u5148\u7ea7nice\uff09"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"weight = 1024 / (1.25 ^ nice)\n\n\u516c\u5f0f\u4e2d\u76841.25\u53d6\u503c\u4f9d\u636e\u662f\uff1a\u8fdb\u7a0b\u6bcf\u964d\u4f4e\u4e00\u4e2anice\u503c\uff0c\u5c06\u591a\u83b7\u5f9710%\u7684cpu\u65f6\u95f4\u3002\u516c\u5f0f\u4e2d\u4ee51024\u6743\u91cd\u4e3a\u57fa\u51c6\u503c\u8ba1\u7b97\u5f97\u6765\uff0c1024\u6743\u91cd\u5bf9\u5e94nice\u503c\u4e3a0\uff0c\u5176\u6743\u91cd\u88ab\u79f0\u4e3aNICE_0_LOAD\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5927\u90e8\u5206\u8fdb\u7a0b\u7684\u6743\u91cd\u57fa\u672c\u90fd\u662fNICE_0_LOAD\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fdb\u7a0b\u6bcf\u964d\u4f4e\u4e00\u4e2anice\u503c\uff0c\u5c06\u591a\u83b7\u5f9710% CPU\u7684\u65f6\u95f4"}),"\n",(0,l.jsx)(e.p,{children:"process scheduler \u8c03\u5ea6\u7b97\u6cd5"}),"\n",(0,l.jsx)(e.p,{children:"\u5728Linux\u5185\u6838\u4e2d\uff0c\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u901a\u5e38\u91c7\u7528CFS\uff0c\u5b83\u57fa\u4e8e\u7ea2\u9ed1\u6811\u5b9e\u73b0\u3002CFS\u65e8\u5728\u63d0\u4f9b\u516c\u5e73\u7684CPU\u65f6\u95f4\u5206\u914d\uff0c\u5e76\u6839\u636e\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u548c\u5386\u53f2\u6267\u884c\u65f6\u95f4\u8fdb\u884c\u52a8\u6001\u8c03\u6574\u3002kernel\u7684process scheduler\u5c314\u79cd\uff0cCFS\u3001RT\u3001O(1)."}),"\n",(0,l.jsx)(e.h3,{id:"orphan-zombie-\u6211\u4eec\u90fd\u77e5\u9053orphan\u662f\u56e0\u4e3appid\u6ca1\u4e86zombie\u662f\u56e0\u4e3appid\u5e9f\u4e86\u90a3\u4ec0\u4e48\u60c5\u51b5\u4e0bppid\u4f1a\u6ca1\u4e86\u6216\u8005\u5e9f\u4e86\u5462",children:"orphan, zombie. \u6211\u4eec\u90fd\u77e5\u9053orphan\u662f\u56e0\u4e3appid\u6ca1\u4e86\uff0czombie\u662f\u56e0\u4e3appid\u5e9f\u4e86\u3002\u90a3\u4ec0\u4e48\u60c5\u51b5\u4e0bppid\u4f1a\u6ca1\u4e86\u6216\u8005\u5e9f\u4e86\u5462?"}),"\n",(0,l.jsx)(e.p,{children:"\u5148\u5206\u6e05\u695apid\u548cppid"}),"\n",(0,l.jsx)(e.p,{children:"orphan\u5c31\u662f\u6ca1\u6709ppid\u7684pid\uff0c\u5b64\u513f\u561b\u3002\u6240\u4ee5\u600e\u4e48\u5904\u7406\u5462\uff1fkernel\u4f1a\u628aorphan\u7684ppid\u8bbe\u7f6e\u4e3ainit\uff0c\u8ba9init\u53bb\u5904\u7406orphan"}),"\n",(0,l.jsx)(e.p,{children:"zombie\u5219\u662f\u867d\u7136\u6709ppid\u4f46\u662f\u5b9e\u9645\u4e0a\u5e9f\u4e86\uff0c\u6240\u4ee5\u600e\u4e48\u5904\u7406\u5462\uff1f\u5f53\u7136\u662f\u5148\u628azombie\u7684ppid\u5e72\u6389\uff0c\u8fd9\u4e9bpid\u5c31\u53d8\u6210orphan\u4e86\uff0c\u4e4b\u540e\u5c31\u6309\u7167\u5904\u7406orphan\u7684\u6d41\u7a0b\u5904\u7406\u6389\u5c31ok\u4e86"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd8\u662f\u62ff\u9879\u76ee\u4e3e\u4f8b\uff0c\u5b64\u513f\u8fdb\u7a0b\u5c31\u662f\u6211\u4eec\u67d0\u4e2a\u5df2\u7ecf\u7acb\u9879\u7684\u5927\u9879\u76ee\u6302\u6389\u4e86\uff0c\u4e0b\u9762\u7684\u5b50\u9879\u76ee\u5c31\u76f4\u63a5\u7531\u516c\u53f8\u7684\u9876\u7ea7\u9879\u76ee\u63a5\u624b\u5e76\u6536\u5c3e\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"idle-process-init-process-kthreadd-process",children:"idle process, init process, kthreadd process"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'- idle process: \u516c\u53f8\u7684\u884c\u653f\u90e8\u95e8\uff080\u53f7\u8fdb\u7a0b\u662f\u5185\u6838\u7684\u4e00\u90e8\u5206\uff0c\u901a\u5e38\u88ab\u79f0\u4e3a "swapper" \u6216 "scheduler" \u8fdb\u7a0b\uff0c\u5b83\u8d1f\u8d23\u7ba1\u7406\u8fdb\u7a0b\u7684\u8c03\u5ea6\u548c\u5207\u6362\u3002\uff09\uff08\u56e0\u4e3a0\u53f7\u30011\u53f7\u30012\u53f7\u8fdb\u7a0b\u90fd\u65e0\u6cd5\u88abkill\u6389\uff0c\u90fd\u662f\u201c\u5e38\u8bbe\u9879\u76ee\u201d\uff0c\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u90e8\u95e8\uff09\n# idle\u8fdb\u7a0b\u7531kernel\u81ea\u52a8\u521b\u5efa, \u8fd0\u884c\u5728\u5185\u6838\u6001\n# idle\u8fdb\u7a0b\u5176pid=0\uff0c\u5176\u524d\u8eab\u662f\u7cfb\u7edf\u521b\u5efa\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u4e5f\u662f\u552f\u4e00\u4e00\u4e2a\u6ca1\u6709\u901a\u8fc7fork\u6216\u8005kernel_thread\u4ea7\u751f\u7684\u8fdb\u7a0b\u3002\u5b8c\u6210\u52a0\u8f7d\u7cfb\u7edf\u540e\uff0c\u6f14\u53d8\u4e3a\u8fdb\u7a0b\u8c03\u5ea6\u3001\u4ea4\u6362\n\n- init process: ...\u9879\u76ee\u6a21\u677f?/\u90e8\u95e8\u6a21\u677f?\uff08\u6240\u6709\u7528\u6237\u8fdb\u7a0b\u7684\u7956\u5148\u8fdb\u7a0b\uff09\n# init\u8fdb\u7a0b\u7531idle\u901a\u8fc7kernel_thread\u521b\u5efa\uff0c\u5728\u5185\u6838\u7a7a\u95f4\u5b8c\u6210\u521d\u59cb\u5316\u540e, \u52a0\u8f7dinit\u7a0b\u5e8f, \u5e76\u6700\u7ec8\u7528\u6237\u7a7a\u95f4\u3002\u662f\u7cfb\u7edf\u4e2d\u6240\u6709\u5176\u5b83\u7528\u6237\u8fdb\u7a0b\u7684\u7956\u5148\u8fdb\u7a0b\u3002\n# Linux\u4e2d\u7684\u6240\u6709\u8fdb\u7a0b\u90fd\u662f\u6709init\u8fdb\u7a0b\u521b\u5efa\u5e76\u8fd0\u884c\u7684\u3002\u9996\u5148Linux\u5185\u6838\u542f\u52a8\uff0c\u7136\u540e\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\u542f\u52a8init\u8fdb\u7a0b\uff0c\u518d\u542f\u52a8\u5176\u4ed6\u7cfb\u7edf\u8fdb\u7a0b\u3002\u5728\u7cfb\u7edf\u542f\u52a8\u5b8c\u6210\u5b8c\u6210\u540e\uff0cinit\u5c06\u53d8\u4e3a\u5b88\u62a4\u8fdb\u7a0b\u76d1\u89c6\u7cfb\u7edf\u5176\u4ed6\u8fdb\u7a0b\u3002\n\n- kthreadd process: \u516c\u53f8\u7684\u9879\u76ee\u7ba1\u7406\u90e8\u95e8\uff08\u6240\u6709\u5185\u6838\u8fdb\u7a0b\u7684\u7956\u5148\u8fdb\u7a0b\uff09\uff08\u53ef\u4ee5\u770b\u5230\u548cinit process\u4e00\u4e2a\u4e3b\u5916\u4e00\u4e2a\u4e3b\u5185\uff09\n# kthreadd\u8fdb\u7a0b\u7531idle\u901a\u8fc7kernel_thread\u521b\u5efa\uff0c\u5e76\u59cb\u7ec8\u8fd0\u884c\u5728\u5185\u6838\u7a7a\u95f4, \u8d1f\u8d23\u6240\u6709\u5185\u6838\u7ebf\u7a0b\u7684\u8c03\u5ea6\u548c\u7ba1\u7406\n# \u5b83\u7684\u4efb\u52a1\u5c31\u662f\u7ba1\u7406\u548c\u8c03\u5ea6\u5176\u4ed6\u5185\u6838\u7ebf\u7a0bkernel_thread, \u4f1a\u5faa\u73af\u6267\u884c\u4e00\u4e2akthread\u7684\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u8fd0\u884ckthread_create_list\u5168\u5c40\u94fe\u8868\u4e2d\u7ef4\u62a4\u7684kthread, \u5f53\u6211\u4eec\u8c03\u7528kernel_thread\u521b\u5efa\u7684\u5185\u6838\u7ebf\u7a0b\u4f1a\u88ab\u52a0\u5165\u5230\u6b64\u94fe\u8868\u4e2d\uff0c\u56e0\u6b64\u6240\u6709\u7684\u5185\u6838\u7ebf\u7a0b\u90fd\u662f\u76f4\u63a5\u6216\u8005\u95f4\u63a5\u7684\u4ee5kthreadd\u4e3a\u7236\u8fdb\u7a0b\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u4e3a\u5565kthreadd process\u662fks\u4e2d\u7ba1\u7406\u7ebf\u7a0b\u7684\uff0c\u662f\u4e0d\u662f\u56e0\u4e3ainit\u662f\u7528\u6765\u7ba1\u7406ks\u4e2d\u8fdb\u7a0b\u7684"}),"\n",(0,l.jsx)(e.h3,{id:"\u51e0\u79cdipc-pipeline-mq-share-mem-sema-socket",children:"\u51e0\u79cdIPC (pipeline, MQ, share mem, sema, socket)"}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u628a\u8fdb\u7a0b\u7c7b\u6bd4\u4e3a\u516c\u53f8\u9879\u76ee\uff0c\u90a3IPC\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e0d\u540c\u9879\u76ee\u4e4b\u95f4\u7684\u4ea4\u6d41\u548c\u534f\u4f5c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- IPC: \u5f88\u663e\u7136\uff0cIPC\u5c31\u662f\u516c\u53f8\u9879\u76ee\u4e4b\u95f4\u4ea4\u6d41\u3002\u663e\u800c\u6613\u89c1\u7684\uff0c\u516c\u53f8\u4e0d\u540c\u9879\u76ee\u7ec4\u4e4b\u95f4\u7684\u5173\u7cfb\u4e5f\u4e0d\u540c\uff0c\u6216\u8fd1\u6216\u8fdc\uff0c\u6240\u4ee5\u8fd9\u4e9bIPC\u65b9\u6848\u4e5f\u5c31\u5f88\u6613\u4e8e\u7406\u89e3\u4e86\u3002\n# \u4f46\u662f\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6240\u6709process\u90fd\u8fd0\u884c\u5728\u7528\u6237\u7a7a\u95f4\uff0c\u6240\u4ee5IPC\u5fc5\u987b\u901a\u8fc7\u5185\u6838\u7a7a\u95f4(\u56e0\u4e3auserspace\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u8d44\u6e90)\n# \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u901a\u4fe1\uff0c\u540c\u6837\u4f7f\u7528\u8fd9\u51e0\u79cdIPC\u65b9\u6cd5\n# \u4e0d\u540c\u7684 IPC \u65b9\u6cd5\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u573a\u666f\u548c\u9700\u6c42\u3002\u4f8b\u5982\uff0c\u4fe1\u53f7\u9002\u7528\u4e8e\u8fdb\u7a0b\u95f4\u7684\u7b80\u5355\u901a\u77e5\u548c\u4e8b\u4ef6\u5904\u7406\uff0c\u5171\u4eab\u5185\u5b58\u9002\u7528\u4e8e\u9ad8\u6027\u80fd\u7684\u6570\u636e\u5171\u4eab\uff0c\u7ba1\u9053\u9002\u7528\u4e8e\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u5957\u63a5\u5b57\u9002\u7528\u4e8e\u7f51\u7edc\u901a\u4fe1\u7b49\u3002\n- signal: x\n# signal types? # (TERM, STOP, Interrupt, (LGN, Cont)) (real-time signals, standard signals)\n# How to create a custom signal in kernel?\n# (USR2(graceful upgrade), WINCH(close worker one by one), QUIT(close master)) How to rollback? (HUP, QUIT)\n\n\n- pipeline: \u7011\u5e03\u5f0f\u5f00\u53d1\uff08\u5c06\u6574\u4e2a\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u5206\u6210\u591a\u4e2a\u9636\u6bb5\uff0c\u5f80\u5f80\u662f\u4e0a\u4e00\u4e2a\u9636\u6bb5\u5b8c\u5168\u505a\u5b8c\uff0c\u624d\u5c06\u8f93\u51fa\u7ed3\u679c\u4ea4\u7ed9\u4e0b\u4e00\u4e2a\u9636\u6bb5\uff09\n# \u6240\u8c13\u7684pipeline\uff0c\u5c31\u662f\u5728\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u5355\u5411\u7684\u901a\u9053\uff0c\u5176\u5b9e\u662f\u4e00\u6bb5\u7f13\u5b58\uff0c\u5b83\u4f1a\u5c06\u524d\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u4f5c\u4e3a\u540e\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u5165\u3002\u6240\u4ee5\u95ee\u9898\u4e5f\u662f\u663e\u7136\u7684\uff0c\u6027\u80fd\u8f83\u5dee\u3001\u4e5f\u4e0d\u652f\u6301\u592a\u5927\u6570\u636e\u91cf\u3002\n- mq: \u53d1\u90ae\u4ef6\n# \u6d88\u606f\u961f\u5217\u6709\u70b9\u513f\u50cf\u90ae\u4ef6\uff0c\u53d1\u9001\u6570\u636e\u65f6\uff0c\u4f1a\u5206\u6210\u4e00\u4e2a\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u5355\u5143\uff0c\u4e5f\u5c31\u662f\u6d88\u606f\u4f53\uff0c\u6bcf\u4e2a\u6d88\u606f\u4f53\u90fd\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\u5b58\u50a8\u5757\uff0c\u5728\u5b57\u8282\u6d41\u4e0a\u4e0d\u8fde\u7eed\u3002\n- share memory: \u5171\u4eab\u4f1a\u8bae\u5ba4\uff08\u8fd9\u4e2a\u5c31\u5f88\u597d\u7406\u89e3\u4e86\uff0c\u4e0d\u540c\u4e8emq\u8fd9\u79cd\u4e24\u4e2a\u9879\u76ee\u7ec4\u4e4b\u95f4\u8fd8\u8981\u53d1\u9001\u6d88\u606f\uff0c\u5171\u4eab\u5185\u5b58\u76f8\u5f53\u4e8e\u4e24\u4e2a\u9879\u76ee\u7ec4\u5f00\u8f9f\u4e00\u4e2a\u529e\u516c\u5ba4\uff0c\u6240\u6709\u9700\u8981\u540c\u6b65\u7684\u6570\u636e\u90fd\u653e\u5230\u8fd9\u4e2a\u529e\u516c\u5ba4\u91cc\uff09\n# \u524d\u9762\u54b1\u4eec\u8bb2\u5185\u5b58\u7ba1\u7406\u7684\u65f6\u5019\uff0c\u77e5\u9053\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u540c\u7684\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u6620\u5c04\u5230\u4e0d\u540c\u7684\u7269\u7406\u5185\u5b58\u4e2d\u53bb\u3002\u8fd9\u4e2a\u8fdb\u7a0b\u8bbf\u95ee A \u5730\u5740\u548c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u8bbf\u95ee A \u5730\u5740\uff0c\u5176\u5b9e\u8bbf\u95ee\u7684\u662f\u4e0d\u540c\u7684\u7269\u7406\u5185\u5b58\u5730\u5740\uff0c\u5bf9\u4e8e\u6570\u636e\u7684\u589e\u5220\u67e5\u6539\u4e92\u4e0d\u5f71\u54cd\u3002\n# \u4f46\u662f\uff0c\u54b1\u4eec\u662f\u4e0d\u662f\u53ef\u4ee5\u53d8\u901a\u4e00\u4e0b\uff0c\u62ff\u51fa\u4e00\u5757\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6765\uff0c\u6620\u5c04\u5230\u76f8\u540c\u7684\u7269\u7406\u5185\u5b58\u4e2d\u3002\u8fd9\u6837\u8fd9\u4e2a\u8fdb\u7a0b\u5199\u5165\u7684\u4e1c\u897f\uff0c\u53e6\u5916\u4e00\u4e2a\u8fdb\u7a0b\u9a6c\u4e0a\u5c31\u80fd\u770b\u5230\u4e86\uff0c\u90fd\u4e0d\u9700\u8981\u62f7\u8d1d\u6765\u62f7\u8d1d\u53bb\uff0c\u4f20\u6765\u4f20\u53bb\u3002\n- sema: \u907f\u514d\u201c\u5171\u4eab\u529e\u516c\u5ba4\u201d\u6570\u636e\u51fa\u9519\u7684\u65b9\u6cd5\uff0c\u67d0\u4e2a\u65f6\u95f4\u70b9\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u9879\u76ee\u7ec4\u6765\u8bbf\u95ee\n# \u9a6c\u54e5\u8bf4\uff1a\u201c\u5171\u4eab\u5185\u5b58\u4e5f\u6709\u95ee\u9898\u5440\u3002\u5982\u679c\u4e24\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u540c\u4e00\u4e2a\u5171\u4eab\u5185\u5b58\uff0c\u5927\u5bb6\u90fd\u5f80\u91cc\u9762\u5199\u4e1c\u897f\uff0c\u5f88\u6709\u53ef\u80fd\u5c31\u51b2\u7a81\u4e86\u3002\u4f8b\u5982\u4e24\u4e2a\u8fdb\u7a0b\u90fd\u540c\u65f6\u5199\u4e00\u4e2a\u5730\u5740\uff0c\u90a3\u5148\u5199\u7684\u90a3\u4e2a\u8fdb\u7a0b\u4f1a\u53d1\u73b0\u5185\u5bb9\u88ab\u522b\u4eba\u8986\u76d6\u4e86\u3002\u201d\n# \u5f20\u662d\u8bf4\uff1a\u201c\u5f53\u7136\uff0c\u548c\u5171\u4eab\u5185\u5b58\u914d\u5408\u7684\uff0c\u6709\u53e6\u4e00\u79cd\u4fdd\u62a4\u673a\u5236\uff0c\u4f7f\u5f97\u540c\u4e00\u4e2a\u5171\u4eab\u7684\u8d44\u6e90\uff0c\u540c\u65f6\u53ea\u80fd\u88ab\u4e00\u4e2a\u8fdb\u7a0b\u8bbf\u95ee\u53eb\u4fe1\u53f7\u91cf\u3002\u201d\n# \u4fe1\u53f7\u91cf\u5176\u5b9e\u662f\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u4e92\u65a5\u4e0e\u540c\u6b65\uff0c\u800c\u4e0d\u662f\u7528\u4e8e\u5b58\u50a8\u8fdb\u7a0b\u95f4\u901a\u4fe1\u6570\u636e\u3002\n- socket:\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5047\u8bbe\u6709\u4e00\u4e2a\u5927\u578b\u516c\u53f8\uff0c\u7531\u591a\u4e2a\u90e8\u95e8\u7ec4\u6210\uff0c\u6bcf\u4e2a\u90e8\u95e8\u90fd\u8d1f\u8d23\u4e0d\u540c\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u90e8\u95e8\u9700\u8981\u76f8\u4e92\u5408\u4f5c\u548c\u4ea4\u6d41\u4ee5\u5b8c\u6210\u5de5\u4f5c\u3002\u5728\u8fd9\u4e2a\u516c\u53f8\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b IPC \u673a\u5236\uff1a\n\n1. \u7ba1\u9053\uff08Pipe\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u7535\u8bdd\u7cfb\u7edf\u3002\u6bcf\u4e2a\u90e8\u95e8\u90fd\u53ef\u4ee5\u901a\u8fc7\u7535\u8bdd\u4e0e\u5176\u4ed6\u90e8\u95e8\u8fdb\u884c\u76f4\u63a5\u901a\u8bdd\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ea\u80fd\u5728\u4eb2\u5bc6\u7684\u90e8\u95e8\u4e4b\u95f4\u8fdb\u884c\uff0c\u5e76\u4e14\u662f\u5355\u5411\u7684\u3002\n\n2. \u5171\u4eab\u5185\u5b58\uff08Shared Memory\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u516c\u5171\u767d\u677f\u3002\u591a\u4e2a\u90e8\u95e8\u53ef\u4ee5\u5728\u767d\u677f\u4e0a\u8bfb\u5199\u4fe1\u606f\u4ee5\u8fdb\u884c\u5171\u4eab\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u901f\u6570\u636e\u4f20\u8f93\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u534f\u8c03\u548c\u540c\u6b65\u95ee\u9898\u3002\n\n3. \u4fe1\u53f7\u91cf\uff08Semaphore\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u4f1a\u8bae\u5ba4\u9884\u7ea6\u7cfb\u7edf\u3002\u90e8\u95e8\u53ef\u4ee5\u7533\u8bf7\u4f7f\u7528\u4f1a\u8bae\u5ba4\uff0c\u5e76\u5728\u4f7f\u7528\u5b8c\u6bd5\u540e\u91ca\u653e\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u7528\u4e8e\u540c\u6b65\u548c\u4e92\u65a5\u64cd\u4f5c\u3002\n\n4. \u6d88\u606f\u961f\u5217\uff08Message Queue\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u90ae\u4ef6\u7cfb\u7edf\u3002\u90e8\u95e8\u53ef\u4ee5\u5c06\u6d88\u606f\u653e\u5165\u90ae\u4ef6\u7bb1\u4e2d\uff0c\u5176\u4ed6\u90e8\u95e8\u53ef\u4ee5\u4ece\u4e2d\u8bfb\u53d6\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u5f02\u6b65\u901a\u4fe1\uff0c\u5e76\u652f\u6301\u591a\u5bf9\u591a\u7684\u901a\u4fe1\u6a21\u5f0f\u3002\n\n5. \u5957\u63a5\u5b57\uff08Socket\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u4e92\u8054\u7f51\u8fde\u63a5\u3002\u90e8\u95e8\u53ef\u4ee5\u901a\u8fc7\u5957\u63a5\u5b57\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\uff0c\u8fdb\u884c\u8de8\u7f51\u7edc\u7684\u901a\u4fe1\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u534f\u4f5c\u3002\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"pipeline\uff1a\u7535\u8bdd"}),"\n",(0,l.jsx)(e.li,{children:"\u5171\u4eab\u5185\u5b58\uff1a\u5171\u4eab\u4f1a\u8bae\u5ba4"}),"\n",(0,l.jsx)(e.li,{children:"sema\uff1a\u9884\u7ea6\u4f1a\u8bae\u5ba4"}),"\n",(0,l.jsx)(e.li,{children:"MQ\uff1a\u90ae\u4ef6"}),"\n",(0,l.jsx)(e.li,{children:"socket\uff1a\u5185\u7f51IM"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"ns-cgroup",children:"ns, cgroup"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- namespace: docker\u76f8\u5f53\u4e8e\u516c\u53f8\u4e00\u7ea7\u9879\u76ee\u5185\u90e8\u521b\u4e1a\uff0c\u90a3\u4e48\u53ef\u4ee5\u628ans\u770b\u4f5c\u662f\u72ec\u7acb\u529e\u516c\u533a\u57df\n# \u76f8\u5f53\u4e8e\u7ed9\u6bcf\u4e2a\u9879\u76ee\u7ec4\u5206\u914d\u7684\u72ec\u7acb\u529e\u516c\u533a\u57df\u3002\u8fd9\u4e9b\u529e\u516c\u533a\u57df\u8ba9\u9879\u76ee\u7ec4\u611f\u89c9\u81ea\u5df1\u5c31\u50cf\u662f\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u5b50\u516c\u53f8\u91cc\u5de5\u4f5c\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u7f51\u7edc\uff08`network` namespace\uff09\u3001\u81ea\u5df1\u7684\u6587\u4ef6\u7cfb\u7edf\uff08`mount` namespace\uff09\u3001\u81ea\u5df1\u7684\u8fdb\u7a0b\u7ba1\u7406\uff08`pid` namespace\uff09\u7b49\u3002\u8fd9\u6837\uff0c\u4e0d\u540c\u7684\u9879\u76ee\u7ec4\u4e4b\u95f4\u4e0d\u4f1a\u76f8\u4e92\u5e72\u6270\uff0c\u6bcf\u4e2a\u9879\u76ee\u7ec4\u90fd\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u81ea\u5df1\u7684\u5de5\u4f5c\u3002\n# namespace, types? # uts, user, mount, pid, network, IPC\n\n- cgroup: \u8be5\u5185\u90e8\u521b\u4e1a\u7684\u9879\u76ee\u7ec4\u6709\u4e86\u72ec\u7acb\u9884\u7b97\n# \u5c31\u50cf\u662f\u7ed9\u6bcf\u4e2a\u9879\u76ee\u7ec4\u8bbe\u5b9a\u7684\u8d44\u6e90\u9884\u7b97\u3002\u8fd9\u4e2a\u9884\u7b97\u89c4\u5b9a\u4e86\u9879\u76ee\u7ec4\u53ef\u4ee5\u4f7f\u7528\u7684\u529e\u516c\u7a7a\u95f4\u5927\u5c0f\uff08\u5185\u5b58\u9650\u5236\uff09\u3001\u80fd\u6e90\u6d88\u8017\uff08CPU\u65f6\u95f4\uff09\u3001\u4ee5\u53ca\u5176\u4ed6\u529e\u516c\u8d44\u6e90\uff08\u5982\u78c1\u76d8I/O\u9650\u5236\uff09\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u516c\u53f8\uff08\u5185\u6838\uff09\u786e\u4fdd\u6240\u6709\u9879\u76ee\u7ec4\u90fd\u80fd\u516c\u5e73\u5730\u4f7f\u7528\u8d44\u6e90\uff0c\u800c\u4e0d\u4f1a\u56e0\u67d0\u4e2a\u9879\u76ee\u7ec4\u7684\u8fc7\u5ea6\u6d88\u8017\u800c\u5f71\u54cd\u5176\u4ed6\u9879\u76ee\u7ec4\u3002\n# cgroup (task, control group, hierarchy, subsystem)\n# cgroup, subsystem? # cpu, cpuacct, cpuset, memory, blkio, devices, net_cls, freezer, (huge_tlb, perf_event, ...)\n\n# ***namespace\u662f\u5bf9\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0bpid\u3001\u4e3b\u673a\u540d\u3001\u7528\u6237uid\u3001\u8bbe\u5907\u3001IPC\u4ee5\u53ca\u7f51\u7edc\u7684\u9694\u79bb\uff0ccgroup\u5c31\u662f\u5bf9CPU\u3001\u5185\u5b58\u3001PID\u3001\u78c1\u76d8IO\u7b49\u8d44\u6e90\u8fdb\u884c\u9650\u5236\uff0c\u8fd9\u4e5f\u662f\u4e3a\u5565\u6211\u4eec\u8bf4\u201cns\u662f\u770b\u8d77\u6765\u9694\u79bb\uff0ccgroup\u662f\u7528\u8d77\u6765\u9694\u79bb\u201d\u3002\u90a3\u5c31\u5f88\u7b80\u5355\u4e86\uff0cns\u91cc\u7684\u90a3\u51e0\u4e2a\u4e0d\u5c31\u6b63\u597d\u5bf9\u5e94pid, uts(unix timesharing system), user, ipc, mount\u8fd9\u4e9b\u5417\uff0ccgroup\u5219\u66f4\u7b80\u5355\u4e86\u5c31\u662f\u5404\u79cd\u8d44\u6e90\u561b\uff0ccpu(cpuacct(cpu account), cpuset), memory, blkio(block io), devices\u4e4b\u7c7b\u7684\uff0c\u90fd\u662f\u7528\u6765\u9650\u5236\u8fdb\u7a0b\u8d44\u6e90\u7684\u3002***\n\n# ***\u6362\u4e2a\u89d2\u5ea6\u6765\u770b\uff0c\u6309\u7167\u201cdocker\u5bb9\u5668\u7684\u672c\u8d28\u662f\u8fdb\u7a0b\u201d\u7684\u8bf4\u6cd5\uff0c\u6240\u8c13\u7684ns\u548ccgroup\u63d0\u4f9b\u7684\u9694\u79bb\uff0c\u672c\u8d28\u4e0a\u6765\u8bf4\u5c31\u662f\u7ed9\u8be5\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u72ec\u7acb\u7684\u5404\u79cdns\u548ccgroup\uff0c\u662f\u5417\uff1f\u6b63\u5982cgroup\u539f\u672c\u7684\u540d\u5b57\u201cprocess containers\u201d\u672c\u8eab\u6240\u6697\u793a\u7684\u3002\u5982\u679c\u6211\u4eec\u8fd8\u62ff\u4e4b\u524d\u201c\u5f00\u516c\u53f8\u201d\u6765\u4e3e\u4f8b\uff0c\u666e\u901a\u7684\u8fdb\u7a0b\u53ea\u662f\u516c\u53f8\u4e0b\u9762\u7684\u4e00\u4e2a\u9879\u76ee\u7ec4\uff08\u666e\u901a\u8fdb\u7a0b\u53ea\u6709\u7528\u6765\u6807\u8bc6\u8fdb\u7a0b\u7684\u90a3\u4e9bfield\uff08\u6216\u8005\u8bf4\u8fdb\u7a0b\u672c\u8eab\u76f8\u5173\u7684\u6570\u636e\uff09\u662f\u72ec\u4eab\u7684\uff08\u6bd4\u5982\u8fdb\u7a0b\u72b6\u6001\u3001fd\u3001\u8fdb\u7a0b\u672c\u8eab\u7684\u5185\u5b58\u7a7a\u95f4\uff09\uff0c\u5176\u4ed6\u8d44\u6e90\u5982kernel, filesystem, network, devices\u4e4b\u7c7b\u7684\u90fd\u662f\u5171\u4eab\u7684\uff09\uff0cdocker\uff08\u5bb9\u5668\u5316\u7684\u8fdb\u7a0b\uff09\u5219\u62e5\u6709\u771f\u6b63\u72ec\u7acb\u7684\uff08\u4f53\u73b0\u5728\u8fd9\u90e8\u5206\u8d44\u6e90\u4e0d\u53c2\u4e0e\u6574\u4e2a\u516c\u53f8\u8d44\u6e90\u8c03\u5ea6\uff0c\u662f\u56fa\u5b9a\u5f00\u652f\u3002\u5185\u90e8\u4e5f\u53ef\u4ee5\u62e5\u6709idle\u8fdb\u7a0b\u3001init\u8fdb\u7a0b\u3001kthreadd\u8fdb\u7a0b\u8fd9\u4e9b\u4e00\u4e8c\u4e09\u53f7\u4f4d\uff09\u3002\u6211\u7684\u7406\u89e3\u5bf9\u5417\uff1f***\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"cgroup"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"- `task`\u5728 cgroup \u4e2d\uff0c\u4efb\u52a1\u5c31\u662f\u4e00\u4e2a\u8fdb\u7a0b\u3002\n- `control group`cgroup \u7684\u8d44\u6e90\u63a7\u5236\u662f\u4ee5\u63a7\u5236\u7ec4\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u63a7\u5236\u7ec4\u6307\u660e\u4e86\u8d44\u6e90\u7684\u914d\u989d\u9650\u5236\u3002\u8fdb\u7a0b\u53ef\u4ee5\u52a0\u5165\u5230\u67d0\u4e2a\u63a7\u5236\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u63a7\u5236\u7ec4\u3002\n- `hierarchy`\u63a7\u5236\u7ec4\u6709\u5c42\u7ea7\u5173\u7cfb\uff0c\u7c7b\u4f3c\u6811\u7684\u7ed3\u6784\uff0c\u5b50\u8282\u70b9\u7684\u63a7\u5236\u7ec4\u7ee7\u627f\u7236\u63a7\u5236\u7ec4\u7684\u5c5e\u6027 (\u8d44\u6e90\u914d\u989d\u3001\u9650\u5236\u7b49)\u3002\n- `subsystem`\u4e00\u4e2a\u5b50\u7cfb\u7edf\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u8d44\u6e90\u7684\u63a7\u5236\u5668\uff0c\u6bd4\u5982 memory \u5b50\u7cfb\u7edf\u53ef\u4ee5\u63a7\u5236\u8fdb\u7a0b\u5185\u5b58\u7684\u4f7f\u7528\u3002\u5b50\u7cfb\u7edf\u9700\u8981\u52a0\u5165\u5230\u67d0\u4e2a\u5c42\u7ea7\uff0c\u7136\u540e\u8be5\u5c42\u7ea7\u7684\u6240\u6709\u63a7\u5236\u7ec4\uff0c\u5747\u53d7\u5230\u8fd9\u4e2a\u5b50\u7cfb\u7edf\u7684\u63a7\u5236\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"cgroup",children:"cgroup"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5728 2006 \u5e74\uff0cGoogle \u7684\u5de5\u7a0b\u5e08\uff08 Rohit Seth \u548c Paul Menage \u4e3a\u4e3b\u8981\u53d1\u8d77\u4eba\uff09 \u53d1\u8d77\u4e86\u8fd9\u4e2a\u9879\u76ee\uff0c\u8d77\u521d\u9879\u76ee\u540d\u79f0\u5e76\u4e0d\u662fcgroups\uff0c\u800c\u88ab\u79f0\u4e3a\u8fdb\u7a0b\u5bb9\u5668\uff08process containers\uff09\u3002\u5728 2007 \u5e74cgroups\u4ee3\u7801\u8ba1\u5212\u5408\u5165Linux \u5185\u6838\uff0c\u4f46\u662f\u5f53\u65f6\u5728 Linux \u5185\u6838\u4e2d\uff0c\u5bb9\u5668\uff08container\uff09\u8fd9\u4e2a\u8bcd\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u5e76\u4e14\u62e5\u6709\u4e0d\u540c\u7684\u542b\u4e49\u3002\u4e3a\u4e86\u907f\u514d\u547d\u540d\u6df7\u4e71\u548c\u6b67\u4e49\uff0c\u8fdb\u7a0b\u5bb9\u5668\u88ab\u91cd\u540d\u4e3acgroups\uff0c\u5e76\u5728 2008 \u5e74\u6210\u529f\u5408\u5165 Linux 2.6.24 \u7248\u672c\u4e2d\u3002cgroups\u76ee\u524d\u5df2\u7ecf\u6210\u4e3a systemd\u3001Docker\u3001Linux Containers\uff08LXC\uff09 \u7b49\u6280\u672f\u7684\u57fa\u7840\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"false-sharing",children:"false sharing"}),"\n",(0,l.jsx)(e.p,{children:"false sharing \u5c31\u662f\u56e0\u4e3a\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u9891\u7e41\u5730\u7ade\u4e89cache line\uff08\u5bfc\u81f4cache line\u4e0d\u65ad\u5931\u6548\u548c\u91cd\u65b0\u52a0\u8f7d\u7684\u73b0\u8c61\uff09\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u7f13\u5b58\u540c\u6b65\u5f00\u9500\uff0c\u964d\u4f4e\u4e86\u5e76\u53d1\u6027\u80fd\u3002\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u56e2\u961f\u95f4\u7684\u4e0d\u5fc5\u8981\u7ade\u4e89\u6216\u51b2\u7a81\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e24\u4e2a\u90e8\u95e8\u4e3a\u4e86\u4e89\u593a\u6709\u9650\u7684\u8d44\u6e90\u6216\u4f18\u5148\u7ea7\u800c\u4e0d\u65ad\u8fdb\u884c\u5185\u90e8\u7ade\u4e89\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6548\u7387\u4f4e\u4e0b\u548c\u8d44\u6e90\u6d6a\u8d39\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u516c\u53f8\u9700\u8981\u4f18\u5316\u5185\u90e8\u6c9f\u901a\u548c\u8d44\u6e90\u5206\u914d\u673a\u5236\uff0c\u786e\u4fdd\u56e2\u961f\u534f\u4f5c\u800c\u4e0d\u662f\u76f8\u4e92\u7ade\u4e89\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4e00\u53e5\u8bdd\u603b\u7ed3\u5c31\u662f\uff0c\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\u4e2d\u5b58\u5728\u67d0\u4e00\u4e2acache line\u7684\u4e0d\u540c\u53d8\u91cf\uff0c\u5982\u679c\u67d0\u4e2a\u7ebf\u7a0b\u4fee\u6539\u5176\u4e2d\u4e00\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u6574\u4e2acache line\u90fd\u4f1a\u5931\u6548\uff0c\u5176\u4ed6\u7ebf\u7a0b\u4e5f\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2acache line\uff0c\u8fd9\u4e2a\u5c31\u662ffalse sharing\u3002\u547d\u540d\u8fd8\u662f\u5f88\u5230\u4f4d\u7684\uff0c\u672c\u8eab\u662f\u4e3a\u4e86\u80fd\u591fsharing memory\uff0c\u4f46\u662f\u5982\u679ccache line\u5931\u6548\u5fc5\u987b\u91cd\u65b0\u52a0\u8f7d\u7684\u8bdd\uff0c\u90a3\u4e0d\u5c31false\u4e86\u5417\uff1f"}),"\n",(0,l.jsx)(e.h3,{id:"signal",children:"signal"}),"\n",(0,l.jsxs)(e.p,{children:["\u4fe1\u53f7\u662f\u7528\u6765\u64cd\u4f5c\u8fdb\u7a0b\u7684\u65b9\u5f0f\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,l.jsx)(e.em,{children:"\u5e76\u4e0d\u4ec5\u4ec5\u662f\u8fdb\u7a0b\u4e4b\u95f4\u534f\u4f5c\uff0c\u800c\u662f\u8fdb\u7a0b\u548c\u5185\u6838\u3001\u8fdb\u7a0b\u5185\uff0c\u90fd\u662f\u901a\u8fc7\u4fe1\u53f7\uff0c\u8fdb\u884c\u534f\u4f5c\u548c\u901a\u4fe1\u7684"})]}),"\n",(0,l.jsx)(e.p,{children:"\u4fe1\u53f7\u6709\u5f88\u591a\u79cd\uff0c\u5e73\u65f6\u4e5f\u7528\u4e0d\u5230\uff0c\u4e5f\u6ca1\u5fc5\u8981\u53bb\u6b7b\u8bb0\u786c\u80cc\u3002\u53ea\u8981\u77e5\u9053\u5c31\u8fd9\u4e48\u51e0\u79cd\uff0c\u7ec8\u6b62\u4fe1\u53f7\u3001\u4e2d\u65ad\u4fe1\u53f7\u3001\u6682\u505c\u4fe1\u53f7\u3001\u7ee7\u7eed\u4fe1\u53f7\u3001\u5ffd\u7565\u4fe1\u53f7"}),"\n",(0,l.jsx)(e.h3,{id:"waitqueue-\u548c-workqueue-\u5206\u522b\u662f\u5565",children:"waitqueue \u548c workqueue \u5206\u522b\u662f\u5565\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- waitqueue: \u9879\u76ee\u4e2d\u7684\u201c\u7b49\u5f85\u72b6\u6001\u201d\u6216\u201c\u4f9d\u8d56\u7ba1\u7406\u201d\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u9879\u76ee\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u5173\u952e\u8d44\u6e90\u5230\u4f4d\u3001\u5ba1\u6279\u5b8c\u6210\u6216\u5e02\u573a\u6761\u4ef6\u6210\u719f\u624d\u80fd\u7ee7\u7eed\u8fdb\u884c\u3002\u901a\u8fc7\u6709\u6548\u7684\u9879\u76ee\u7ba1\u7406\u5de5\u5177\u548c\u6c9f\u901a\u673a\u5236\uff0c\u516c\u53f8\u53ef\u4ee5\u76d1\u63a7\u8fd9\u4e9b\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e76\u5728\u6761\u4ef6\u6ee1\u8db3\u65f6\u8fc5\u901f\u63a8\u8fdb\u9879\u76ee\u3002\n# \u662f\u4e00\u79cd\u540c\u6b65\u673a\u5236\uff0c\u5141\u8bb8\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5728\u67d0\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\u65f6\u6302\u8d77\uff0c\u76f4\u5230\u88ab\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5524\u9192\u3002\n# waitqueue \u7528\u4e8e\u5b9e\u73b0\u8fdb\u7a0b\u7684\u963b\u585e\u548c\u5524\u9192\u673a\u5236\u3002\u5f53\u8fdb\u7a0b\u9700\u8981\u7b49\u5f85\u67d0\u4e2a\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u5b83\u4f1a\u5c06\u81ea\u5df1\u653e\u5165\u7b49\u5f85\u961f\u5217\u5e76\u8fdb\u5165\u7761\u7720\u72b6\u6001\uff0c\u653e\u5f03CPU\u63a7\u5236\u6743\u3002\u5f53\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u5185\u6838\u4f1a\u901a\u8fc7wake up\u64cd\u4f5c\u5524\u9192\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u8fdb\u7a0b\uff0c\u4f7f\u5176\u7ee7\u7eed\u6267\u884c\u3002\u7b49\u5f85\u961f\u5217\u5141\u8bb8\u591a\u4e2a\u8fdb\u7a0b\u7b49\u5f85\u540c\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u5730\u6dfb\u52a0\u6216\u5220\u9664\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u8fdb\u7a0b\u3002\n\n- workqueue: \u5de5\u4f5c\u961f\u5217\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u201c\u4efb\u52a1\u8c03\u5ea6\u201d\u6216\u201c\u5f85\u529e\u4e8b\u9879\u5217\u8868\u201d\u3002\u516c\u53f8\u53ef\u4ee5\u4f7f\u7528\u8fd9\u79cd\u673a\u5236\u6765\u5b89\u6392\u548c\u4f18\u5316\u65e5\u5e38\u5de5\u4f5c\u6d41\u7a0b\uff0c\u786e\u4fdd\u4efb\u52a1\u6839\u636e\u4f18\u5148\u7ea7\u548c\u8d44\u6e90\u53ef\u7528\u6027\u5f97\u5230\u5408\u7406\u5206\u914d\u3002\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\uff0c\u786e\u4fdd\u91cd\u8981\u4efb\u52a1\u5f97\u5230\u53ca\u65f6\u5904\u7406\uff0c\u540c\u65f6\u4e5f\u4e0d\u5ffd\u89c6\u90a3\u4e9b\u9700\u8981\u66f4\u591a\u65f6\u95f4\u6765\u5b8c\u6210\u7684\u4efb\u52a1\u3002\n# \u5de5\u4f5c\u961f\u5217\uff08Workqueue\uff09\u662f\u4e00\u79cd\u5ef6\u8fdf\u6267\u884c\u673a\u5236\uff0c\u7528\u4e8e\u5c06\u4efb\u52a1\u63a8\u8fdf\u5230\u7a0d\u540e\u6267\u884c\uff0c\u901a\u5e38\u7528\u4e8e\u5f02\u6b65\u5904\u7406\u548c\u8d1f\u8f7d\u5747\u8861\u3002\n\n- cmwq: Cmwq\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u201c\u9879\u76ee\u91cc\u7a0b\u7891\u8ddf\u8e2a\u7cfb\u7edf\u201d\u3002\u516c\u53f8\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u7cfb\u5217\u7684\u91cc\u7a0b\u7891\uff0c\u6bcf\u4e2a\u91cc\u7a0b\u7891\u4ee3\u8868\u9879\u76ee\u7684\u4e00\u4e2a\u5173\u952e\u9636\u6bb5\u6216\u76ee\u6807\u7684\u5b8c\u6210\u3002\n# cmwq \u662f\u4e00\u4e2a\u7279\u5b9a\u4e8eLinux\u5185\u6838\u7684\u673a\u5236\uff0c\u7528\u4e8e\u7ba1\u7406\u5b8c\u6210\uff08completion\uff09\u4e8b\u4ef6\u7684\u5de5\u4f5c\u961f\u5217\n# What is cmwq (Concurrency Managed Workqueue)? What problems were resolves?\n"})}),"\n",(0,l.jsx)(e.p,{children:"workqueue\u662f\u4e00\u79cdbottom half\u673a\u5236\uff0c\u7528\u4e8e\u5728\u5c06\u6765\u67d0\u4e2a\u65f6\u95f4\u70b9\u6267\u884c\u51fd\u6570\uff0c\u5f3a\u8c03\u7684\u662f\u52a8\u6001\u7684\u6982\u5ff5\uff0c\u5373\u5de5\u4f5c\uff08work\uff09\u662f\u91cd\u70b9\uff0c\u800c\u961f\u5217\uff08queue\uff09\u662f\u5176\u6b21\u3002\u5de5\u4f5c\u961f\u5217\u8fd0\u884c\u5728\u8fdb\u7a0b\u4e0a\u4e0b\u6587\uff0c\u53ef\u4ee5\u7761\u7720\uff0c\u9002\u5408\u5904\u7406\u4e0d\u662f\u5f88\u7d27\u6025\u4e8b\u4ef6\u7684\u56de\u8c03\u65b9\u5f0f\u3002\u800c\u7b49\u5f85\u961f\u5217\u5219\u662f\u4e00\u79cd\u4efb\u52a1\u961f\u5217\uff0c\u91cd\u70b9\u5728\u4e8e\u961f\u5217\u672c\u8eab\uff0c\u5b83\u5141\u8bb8\u8fdb\u7a0b\u5728\u67d0\u4e2a\u4e8b\u4ef6\u4e0a\u7761\u7720\u7b49\u5f85\uff0c\u76f4\u5230\u8be5\u4e8b\u4ef6\u53d1\u751f\u624d\u88ab\u5524\u9192\u7ee7\u7eed\u6267\u884c\u3002"}),"\n",(0,l.jsx)(e.p,{children:"**CMWQ\u901a\u8fc7\u5f15\u5165worker pool\u7684\u6982\u5ff5\u6765\u63d0\u9ad8\u5e76\u53d1\u6027\u3002\u5728CMWQ\u4e2d\uff0c\u6240\u6709\u7684workqueue\u5171\u4eab\u7cfb\u7edf\u4e2d\u7684worker pool\uff0c\u800c\u4e0d\u662f\u6bcf\u4e2aworkqueue\u521b\u5efa\u81ea\u5df1\u7684worker thread\u3002\u8fd9\u6837\uff0c\u5f53\u4e00\u4e2aworker thread\u56e0\u4e3a\u5904\u7406\u67d0\u4e2awork\u800c\u963b\u585e\u65f6\uff0cworker pool\u53ef\u4ee5\u521b\u5efa\u65b0\u7684worker thread\u6765\u5904\u7406\u5176\u4ed6work\uff0c\u4ece\u800c\u89e3\u51b3\u4e86\u5e76\u53d1\u95ee\u9898\u3002\u6b64\u5916\uff0cCMWQ\u8fd8\u901a\u8fc7\u52a8\u6001\u521b\u5efa\u548c\u9500\u6bc1worker thread\u6765\u9002\u5e94\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u8fdb\u4e00\u6b65\u4f18\u5316\u4e86\u8d44\u6e90\u4f7f\u7528\u548c\u5e76\u53d1\u6027\u80fd\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"pcb-tcb",children:"PCB, TCB"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- PCB (process control block): \u516c\u53f8\u4e00\u7ea7\u9879\u76ee\u7684\u9879\u76ee\u7ecf\u7406\n# registers\n- TCB (Thread Control Block): ...\n# TCB\u7ed3\u6784\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5305\u542b\u4e86\u7ebf\u7a0b\u6267\u884c\u6240\u9700\u7684\u6240\u6709\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u8fd9\u4e9b\u4fe1\u606f\u901a\u5e38\u5305\u62ec\u7ebf\u7a0bID\uff08TID\uff09\u3001\u6808\u6307\u9488\uff08SP\uff09\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u3001\u7ebf\u7a0b\u72b6\u6001\u3001\u4ee5\u53ca\u7ebf\u7a0b\u7684\u6240\u6709\u5bc4\u5b58\u5668\u503c\u7b49\u3002\n# TCB \u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4fdd\u5b58\u548c\u7ba1\u7406\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5728\u7ebf\u7a0b\u5207\u6362\u65f6\u80fd\u591f\u6b63\u786e\u5730\u6062\u590d\u548c\u6267\u884c\u7ebf\u7a0b\u3002\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u64cd\u4f5c TCB \u6765\u5b9e\u73b0\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u8c03\u5ea6\u3001\u5207\u6362\u548c\u9500\u6bc1\u7b49\u529f\u80fd\u3002\n\n# TCB\u4e2d\u6709\u54ea\u4e9bregister?\n# TCB\u4e2d\u901a\u5e38\u5305\u542b\u4e86\u591a\u4e2a\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u4ee5\u786e\u4fdd\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u7684\u5b8c\u6574\u4fdd\u5b58\u548c\u6062\u590d\u3002\u8fd9\u4e9b\u5bc4\u5b58\u5668\u5305\u62ec\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u3001\u6808\u6307\u9488\uff08SP\uff09\u3001\u57fa\u5740\u5bc4\u5b58\u5668\uff08BR\uff09\u3001\u4e2d\u65ad\u8fd4\u56de\u5bc4\u5b58\u5668\uff08IR\uff09\u3001\u8c03\u8bd5\u5bc4\u5b58\u5668\uff08DR\uff09\u3001\u72b6\u6001\u5bc4\u5b58\u5668\uff08SR\uff09\u548c\u901a\u7528\u5bc4\u5b58\u5668\uff08GPR\uff09\u3002\n\n# - TCB (mapping) similar with TSS, PCB\n# - What's TCB? # kernel control thread, store and manage thread's context\n# - What's the TCB struct? # tid, SP, PC, state of thread, thread's register value\n# - TCB\u4e2d\u6709\u54ea\u4e9bregister? # PC, SP, BR, IR, DR, SR, GPR\n\n#   - What's thread safe? # race condition, data race\n#   - Why should use multi-thread, other than multi-process? Compare these.\n#   - How to implement thread in user space?\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8bf6\uff0c\u8fd9\u4e48\u8bf4\u7684\u8bdd\uff0c\u7ebf\u7a0b\u7684 TCB \u662f\u4e0d\u662f\u7c7b\u4f3c\u8fdb\u7a0b\u7684 TSS\uff1f\u90fd\u662f\u7528\u6765\u5728\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u65f6\u5019\uff0c\u6765\u5b58\u50a8\u5207\u6362\u4e4b\u524d\u6620\u5c04\u5173\u7cfb\u7684\uff1f\n\n---\n\n\u662f\u7684\uff0c\u7ebf\u7a0b\u7684 TCB\uff08\u7ebf\u7a0b\u63a7\u5236\u5757\uff09\u548c\u8fdb\u7a0b\u7684 TSS\uff08\u4efb\u52a1\u72b6\u6001\u6bb5\uff09\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u7c7b\u6bd4\u3002\n\nTCB \u662f\u7528\u6765\u5b58\u50a8\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5305\u62ec\u5bc4\u5b58\u5668\u72b6\u6001\u3001\u5806\u6808\u6307\u9488\u3001\u8c03\u5ea6\u4fe1\u606f\u7b49\u3002\u5728\u7ebf\u7a0b\u5207\u6362\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4fdd\u5b58\u5f53\u524d\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u5230\u5176\u5bf9\u5e94\u7684 TCB \u4e2d\uff0c\u5e76\u52a0\u8f7d\u4e0b\u4e00\u4e2a\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u5b9e\u73b0\u7ebf\u7a0b\u7684\u5207\u6362\u3002\n\n\u7c7b\u4f3c\u5730\uff0cTSS \u662f\u7528\u6765\u5b58\u50a8\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5305\u62ec\u5bc4\u5b58\u5668\u72b6\u6001\u3001\u5806\u6808\u6307\u9488\u3001\u6bb5\u9009\u62e9\u5b50\u7b49\u3002\u5728\u8fdb\u7a0b\u5207\u6362\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u5230\u5176\u5bf9\u5e94\u7684 TSS \u4e2d\uff0c\u5e76\u52a0\u8f7d\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u5b9e\u73b0\u8fdb\u7a0b\u7684\u5207\u6362\u3002\n\n\u867d\u7136 TCB \u548c TSS \u90fd\u7528\u4e8e\u5b58\u50a8\u4e0a\u4e0b\u6587\u4fe1\u606f\u5e76\u5728\u5207\u6362\u65f6\u8fdb\u884c\u52a0\u8f7d\uff0c\u4f46\u5b83\u4eec\u7684\u5177\u4f53\u5b9e\u73b0\u548c\u529f\u80fd\u53ef\u80fd\u6709\u6240\u4e0d\u540c\u3002TCB \u901a\u5e38\u662f\u7ebf\u7a0b\u5e93\u6216\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u5b9e\u73b0\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u7ba1\u7406\u7ebf\u7a0b\u7684\u72b6\u6001\u548c\u8c03\u5ea6\uff0c\u800c TSS \u662f\u7531\u5904\u7406\u5668\u63d0\u4f9b\u7684\u786c\u4ef6\u652f\u6301\uff0c\u7528\u4e8e\u7ba1\u7406\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0cTCB \u548c TSS \u90fd\u662f\u7528\u6765\u5b58\u50a8\u4e0a\u4e0b\u6587\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5728\u4e0a\u4e0b\u6587\u5207\u6362\u65f6\u4fdd\u5b58\u548c\u52a0\u8f7d\u76f8\u5173\u7684\u72b6\u6001\u3002\u5b83\u4eec\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u573a\u666f\u4e2d\u53d1\u6325\u7740\u7c7b\u4f3c\u7684\u4f5c\u7528\uff0c\u4f46\u5177\u4f53\u5b9e\u73b0\u548c\u4f7f\u7528\u65b9\u5f0f\u53ef\u80fd\u6709\u6240\u4e0d\u540c\u3002\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u600e\u4e48\u67e5\u770b\u4e00\u4e2a\u8fdb\u7a0b\u7a76\u7adf\u5360\u7528\u591a\u5c11\u5185\u5b58\u4e3a\u5565rss\u5728\u4f7f\u7528pmap\u548cps\u65f6\u4e0d\u540c",children:"\u600e\u4e48\u67e5\u770b\u4e00\u4e2a\u8fdb\u7a0b\u7a76\u7adf\u5360\u7528\u591a\u5c11\u5185\u5b58\uff1f\u4e3a\u5565RSS\u5728\u4f7f\u7528pmap\u548cps\u65f6\u4e0d\u540c?"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["USS(",(0,l.jsx)(e.code,{children:"Unique Set Size\u8fdb\u7a0b\u72ec\u5360\u7684\u7269\u7406\u5185\u5b58\uff08\u4e0d\u5305\u542b\u5171\u4eab\u5e93\u5360\u7528\u7684\u5185\u5b58\uff09"}),") \u662f\u4e00\u4e2a\u8fdb\u7a0b\u6240\u5360\u7528\u7684\u79c1\u6709\u5185\u5b58\u3002\u5373\u8be5\u8fdb\u7a0b\u72ec\u5360\u7684\u5185\u5b58\u3002",(0,l.jsx)(e.em,{children:"USS \u662f\u975e\u5e38\u975e\u5e38\u6709\u7528\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u53cd\u6620\u4e86\u8fd0\u884c\u4e00\u4e2a\u7279\u5b9a\u8fdb\u7a0b\u771f\u5b9e\u7684\u8fb9\u9645\u6210\u672c\uff08\u589e\u91cf\u6210\u672c\uff09"}),"\u3002\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u9500\u6bc1\u540e\uff0cUSS \u662f\u771f\u5b9e\u8fd4\u56de\u7ed9\u7cfb\u7edf\u7684\u5185\u5b58\u3002\u5f53\u8fdb\u7a0b\u4e2d\u5b58\u5728\u4e00\u4e2a\u53ef\u7591\u7684\u5185\u5b58\u6cc4\u9732\u65f6\uff0cUSS \u662f\u6700\u4f73\u89c2\u5bdf\u6570\u636e\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["PSS(",(0,l.jsx)(e.code,{children:"Proportional Set Size\u5b9e\u9645\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\uff08\u6bd4\u4f8b\u5206\u914d\u5171\u4eab\u5e93\u5360\u7528\u7684\u5185\u5b58\uff09"}),") \u4e0e RSS \u4e0d\u540c\uff0c\u5b83\u6309\u6bd4\u4f8b\u8868\u793a\u4f7f\u7528\u7684\u5171\u4eab\u5e93\uff0c\u4f8b\u5982\uff1a\u5982\u679c\u6709\u4e09\u4e2a\u8fdb\u7a0b\u90fd\u4f7f\u7528\u4e86\u4e00\u4e2a\u5171\u4eab\u5e93\uff0c\u5171\u5360\u7528\u4e86 30 \u9875\u5185\u5b58\u3002\u90a3\u4e48 PSS \u5c06\u8ba4\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u522b\u5360\u7528\u8be5\u5171\u4eab\u5e93 10 \u9875\u7684\u5927\u5c0f\u3002",(0,l.jsx)(e.em,{children:"PSS \u662f\u975e\u5e38\u6709\u7528\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u7cfb\u7edf\u4e2d\u6240\u6709\u8fdb\u7a0b\u7684 PSS \u90fd\u76f8\u52a0\u7684\u8bdd\uff0c\u5c31\u521a\u597d\u53cd\u6620\u4e86\u7cfb\u7edf\u4e2d\u7684\u603b\u5171\u5360\u7528\u7684\u5185\u5b58"}),"\u3002\u800c\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u9500\u6bc1\u4e4b\u540e\uff0c\u5176\u5360\u7528\u7684\u5171\u4eab\u5e93\u90a3\u90e8\u5206\u6bd4\u4f8b\u7684 PSS\uff0c\u5c06\u4f1a\u518d\u6b21\u6309\u6bd4\u4f8b\u5206\u914d\u7ed9\u4f59\u4e0b\u4f7f\u7528\u8be5\u5e93\u7684\u8fdb\u7a0b\u3002\u8fd9\u6837 PSS \u53ef\u80fd\u4f1a\u9020\u6210\u4e00\u70b9\u7684\u8bef\u5bfc\uff0c\u56e0\u4e3a\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u9500\u6bc1\u540e\uff0cPSS \u4e0d\u80fd\u51c6\u786e\u5730\u8868\u793a\u8fd4\u56de\u7ed9\u5168\u5c40\u7cfb\u7edf\u7684\u5185\u5b58\uff08the memory returned to the overall system\uff09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["RSS(",(0,l.jsx)(e.code,{children:"Resident Set size\u5e38\u9a7b\u5185\u5b58\uff08\u5305\u542b\u5171\u4eab\u5e93\u5360\u7528\u7684\u5185\u5b58\uff09"}),") \u662f\u4e00\u4e2a\u8fdb\u7a0b\u5728 RAM \u4e2d\u771f\u5b9e\u5b58\u50a8\u7684\u603b\u5185\u5b58\u3002\u4f46\u662f RSS \u8fd8\u662f\u53ef\u80fd\u4f1a\u9020\u6210\u8bef\u5bfc\uff0c\u56e0\u4e3a\u5b83\u4ec5\u4ec5\u8868\u793a\u8be5\u8fdb\u7a0b\u6240\u4f7f\u7528\u7684\u6240\u6709\u5171\u4eab\u5e93\u7684\u5927\u5c0f\uff0c\u5b83\u4e0d\u7ba1\u6709\u591a\u5c11\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u8be5\u5171\u4eab\u5e93\uff0c\u8be5\u5171\u4eab\u5e93\u4ec5\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u4e00\u6b21\u3002\u6240\u4ee5 RSS \u5e76\u4e0d\u80fd\u51c6\u786e\u53cd\u6620\u5355\u8fdb\u7a0b\u7684\u5185\u5b58\u5360\u7528\u60c5\u51b5\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["VSS(",(0,l.jsx)(e.code,{children:"Virtual Set Size\u865a\u62df\u5185\u5b58\uff08\u5305\u542b\u5171\u4eab\u5e93\u5360\u7528\u7684\u5185\u5b58\uff09"}),") \u5355\u4e2a\u8fdb\u7a0b\u5168\u90e8\u53ef\u8bbf\u95ee\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u5176\u5927\u5c0f\u53ef\u80fd\u5305\u62ec\u8fd8\u5c1a\u672a\u5728\u5185\u5b58\u4e2d\u9a7b\u7559\u7684\u90e8\u5206\u3002\u5bf9\u4e8e\u786e\u5b9a\u5355\u4e2a\u8fdb\u7a0b\u5b9e\u9645\u5185\u5b58\u4f7f\u7528\u5927\u5c0f\uff0cVSS \u7528\u5904\u4e0d\u5927\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u7ed3\u8bba\uff0cVSS>=RSS>=PSS>=USS"})}),"\n",(0,l.jsx)(e.p,{children:"RSS\u548cVSS\u90fd\u6ca1\u5565\u7528\uff0cUSS\u548cPSS\u6bd4\u8f83\u6709\u7528\uff0c"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u8fd8\u662f\u62ff\u516c\u53f8\u4e3e\u4f8b\uff0c\u8fdb\u7a0b\u5c31\u662f\u9879\u76ee\u7ec4\uff0c\u6beb\u65e0\u7591\u95ee\u8fd9\u4e9b\u5c31\u662f\u8be5\u9879\u76ee\u7ec4\u5360\u7528\u7684\u5de5\u4f5c\u533a\u7a7a\u95f4\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u552f\u4e00\u96c6\u3001\u6bd4\u4f8b\u96c6\u3001\u5e38\u9a7b\u96c6\u3001\u865a\u62df\u96c6"}),"\n",(0,l.jsx)(e.p,{children:"\u623f\u5c4b\u9762\u79ef=\u5957\u5185\u9762\u79ef+\u516c\u644a\u9762\u79ef"}),"\n",(0,l.jsx)(e.p,{children:"USS\u548cPSS\u6211\u80fd\u7406\u89e3\uff0cUSS\u5728\u6211\u770b\u6765\u5c31\u662f\u8be5\u9879\u76ee\u7ec4\u672c\u8eab\u5360\u7528\u7684\u7a7a\u95f4\uff0cPSS\u4e5f\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u50cf\u6211\u4eec\u5728\u516c\u53f8\u4e00\u6837\uff0c\u80af\u5b9a\u4f1a\u6709\u5f88\u591a\u516c\u5171\u533a\u57df\u5982\u4f1a\u8bae\u5ba4\u3001\u4f11\u606f\u533a\u3001\u536b\u751f\u95f4\u3001\u8336\u6c34\u95f4\u3001\u5065\u8eab\u623f\u4e4b\u7c7b\u7684\uff0cPSS\u5c31\u662f\u6309\u7167\u591a\u5c11\u4e2a\u9879\u76ee\u7ec4\uff0c\u6309\u6bd4\u4f8b\u5206\u914d\u4e00\u4e0b\uff0c\u8ba1\u7b97\u51fa\u6765\u7684\u5360\u7528\u7a7a\u95f4\u3002\u6362\u53e5\u8bdd\u8bf4\uff0cUSS\u5c31\u662f\u5957\u5185\u9762\u79ef\uff0cPSS\u5c31\u662f\u52a0\u4e0a\u516c\u644a\u9762\u79ef\u4e4b\u540e\u7684\u623f\u5c4b\u9762\u79ef\u3002\u90a3\u4e48RSS\u548cVSS\u6309\u7167\u8fd9\u4e2a\u7406\u89e3\uff0c\u53ef\u4ee5\u7c7b\u6bd4\u6210\u4ec0\u4e48\u5462\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"RSS\u548cVSS\u90fd\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u4e2a\u9879\u76ee\u7ec4\u4f1a\u4f7f\u7528\u5230\u7684\u4e0a\u9762\u8bf4\u7684\u5168\u90e8\u516c\u5171\u7a7a\u95f4\uff0c\u751a\u81f3\u5176\u4e2d\u4e00\u4e9b\u7a7a\u95f4\uff0c\u8be5\u9879\u76ee\u7ec4\u5e76\u4e0d\u4f1a\u4f7f\u7528\u5230\uff0c\u6bd4\u5982\u8bf4\u53ef\u80fd\u8be5\u9879\u76ee\u7ec4\u53ef\u80fd\u5e76\u4e0d\u4f1a\u771f\u6b63\u7528\u5230\u5065\u8eab\u623f\uff0c\u4f46\u662f\u4e5f\u8981\u7b97\u5728\u5185\u3002VSS\u5219\u4e0d\u4ec5\u5982\u6b64\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8bf4\u56degolang\uff0cgolang\u56e0\u4e3a\u662f\u9759\u6001\u94fe\u63a5\uff0c\u6240\u4ee5\u6ca1\u6709\u5171\u4eab\u5e93\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u6ca1\u6709\u516c\u644a\u9762\u79ef\uff0c\u6240\u4ee5\u5176\u5957\u5185\u9762\u79ef\uff0c\u5c31\u7b49\u4e8e\u4f4f\u623f\u9762\u79ef\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u5185\u5b58",children:"\u5185\u5b58"}),"\n",(0,l.jsx)(e.h3,{id:"z-1",children:"z"}),"\n",(0,l.jsx)(e.p,{children:"kernel \u5185\u5b58\u7ba1\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5f53\u7136\u53ef\u4ee5\uff01Linux \u5185\u5b58\u7ba1\u7406\u662f\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u5185\u5b58\u8d44\u6e90\u7684\u7ba1\u7406\u548c\u5206\u914d\u3002Linux \u4f7f\u7528\u865a\u62df\u5185\u5b58\u7684\u6982\u5ff5\uff0c\u5c06\u7269\u7406\u5185\u5b58\u548c\u78c1\u76d8\u7a7a\u95f4\u7ed3\u5408\u8d77\u6765\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u66f4\u7075\u6d3b\u7684\u5185\u5b58\u7ba1\u7406\u3002\n\nLinux \u5185\u5b58\u7ba1\u7406\u7684\u6838\u5fc3\u4efb\u52a1\u5305\u62ec\uff1a\n\n1. \u5185\u5b58\u5206\u914d\uff1aLinux \u4f7f\u7528\u9875\u9762\uff08Page\uff09\u4f5c\u4e3a\u5185\u5b58\u7ba1\u7406\u7684\u57fa\u672c\u5355\u4f4d\u3002\u5f53\u8fdb\u7a0b\u9700\u8981\u5185\u5b58\u65f6\uff0c\u5b83\u4f1a\u5411\u64cd\u4f5c\u7cfb\u7edf\u8bf7\u6c42\u4e00\u5b9a\u6570\u91cf\u7684\u9875\u9762\u3002\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u5206\u914d\u7269\u7406\u9875\u9762\uff0c\u5e76\u5efa\u7acb\u865a\u62df\u5185\u5b58\u4e0e\u7269\u7406\u5185\u5b58\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\n\n2. \u9875\u9762\u7f6e\u6362\uff1a\u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u65f6\uff0cLinux \u4f1a\u4f7f\u7528\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u5c06\u4e00\u4e9b\u9875\u9762\u4ece\u7269\u7406\u5185\u5b58\u6362\u51fa\u5230\u78c1\u76d8\uff0c\u4ee5\u817e\u51fa\u7a7a\u95f4\u7ed9\u65b0\u7684\u9875\u9762\u4f7f\u7528\u3002\u5e38\u89c1\u7684\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u5305\u62ec\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\uff08LRU\uff09\u548c\u65f6\u949f\uff08Clock\uff09\u7b97\u6cd5\u3002\n\n3. \u5185\u5b58\u56de\u6536\uff1a\u5f53\u8fdb\u7a0b\u91ca\u653e\u5185\u5b58\u65f6\uff0cLinux \u4f1a\u56de\u6536\u8fd9\u4e9b\u9875\u9762\uff0c\u5e76\u5c06\u5b83\u4eec\u91cd\u65b0\u653e\u5165\u53ef\u7528\u5185\u5b58\u6c60\u4e2d\uff0c\u4ee5\u4fbf\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u3002\n\n4. \u5185\u5b58\u6620\u5c04\uff1aLinux \u652f\u6301\u5c06\u6587\u4ef6\u6620\u5c04\u5230\u5185\u5b58\uff0c\u4ee5\u4fbf\u8fdb\u7a0b\u53ef\u4ee5\u50cf\u8bbf\u95ee\u5185\u5b58\u4e00\u6837\u8bbf\u95ee\u6587\u4ef6\u3002\u8fd9\u79cd\u673a\u5236\u88ab\u5e7f\u6cdb\u7528\u4e8e\u52a0\u901f\u6587\u4ef6\u8bbf\u95ee\u548c\u5171\u4eab\u5185\u5b58\u3002\n\n5. \u865a\u62df\u5185\u5b58\u7ba1\u7406\uff1aLinux \u4f7f\u7528\u865a\u62df\u5185\u5b58\u673a\u5236\u5c06\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u4e0e\u7269\u7406\u5185\u5b58\u5206\u79bb\u5f00\u6765\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u800c\u4e0d\u5fc5\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u7ec6\u8282\u3002\u8fd9\u4e3a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u66f4\u9ad8\u7684\u5b89\u5168\u6027\u3002\n\n\u8fd9\u53ea\u662f\u5bf9 Linux \u5185\u5b58\u7ba1\u7406\u7684\u7b80\u8981\u4ecb\u7ecd\uff0c\u5b9e\u9645\u4e0a\u6d89\u53ca\u7684\u5185\u5bb9\u975e\u5e38\u5e7f\u6cdb\uff0c\u5305\u62ec\u5185\u5b58\u6bb5\u3001\u5185\u5b58\u6620\u5c04\u3001\u9875\u9762\u56de\u5199\u7b49\u3002\u5982\u679c\u4f60\u5bf9\u5177\u4f53\u7684\u5185\u5b58\u7ba1\u7406\u95ee\u9898\u6709\u8fdb\u4e00\u6b65\u7684\u9700\u6c42\uff0c\u8bf7\u544a\u8bc9\u6211\uff0c\u6211\u5c06\u7aed\u529b\u4e3a\u4f60\u63d0\u4f9b\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u548c\u76f8\u5173\u4ee3\u7801\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"dma",children:"DMA"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5982\u679c\u6211\u4eec\u5bf9\u4e8e I/O \u7684\u64cd\u4f5c\uff0c\u90fd\u662f\u7531 CPU \u53d1\u51fa\u5bf9\u5e94\u7684\u6307\u4ee4\uff0c\u7136\u540e\u7b49\u5f85 I/O \u8bbe\u5907\u5b8c\u6210\u64cd\u4f5c\u4e4b\u540e\u8fd4\u56de\uff0c\u90a3 CPU \u6709\u5927\u91cf\u7684\u65f6\u95f4\u5176\u5b9e\u90fd\u662f\u5728\u7b49\u5f85 I/O \u8bbe\u5907\u5b8c\u6210\u64cd\u4f5c\u3002\n\n\u4f46\u662f\uff0c\u8fd9\u4e2a CPU \u7684\u7b49\u5f85\uff0c\u5728\u5f88\u591a\u65f6\u5019\uff0c\u5176\u5b9e\u5e76\u6ca1\u6709\u592a\u591a\u7684\u5b9e\u9645\u610f\u4e49\u3002\u6211\u4eec\u5bf9\u4e8e I/O \u8bbe\u5907\u7684\u5927\u91cf\u64cd\u4f5c\uff0c\u5176\u5b9e\u90fd\u53ea\u662f\u628a\u5185\u5b58\u91cc\u9762\u7684\u6570\u636e\uff0c\u4f20\u8f93\u5230 I/O \u8bbe\u5907\u800c\u5df2\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5176\u5b9e CPU \u53ea\u662f\u5728\u50bb\u7b49\u800c\u5df2\u3002\u7279\u522b\u662f\u5f53\u4f20\u8f93\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5927\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u8fdb\u884c\u5927\u6587\u4ef6\u590d\u5236\uff0c\u5982\u679c\u6240\u6709\u6570\u636e\u90fd\u8981\u7ecf\u8fc7 CPU\uff0c\u5b9e\u5728\u662f\u6709\u70b9\u513f\u592a\u6d6a\u8d39\u65f6\u95f4\u4e86\u3002\n\n\u56e0\u6b64\uff0c\u8ba1\u7b97\u673a\u5de5\u7a0b\u5e08\u4eec\uff0c\u5c31\u53d1\u660e\u4e86 DMA \u6280\u672f\uff0c\u4e5f\u5c31\u662f\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff08Direct Memory Access\uff09\u6280\u672f\uff0c\u6765\u51cf\u5c11 CPU \u7b49\u5f85\u7684\u65f6\u95f4\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"DMA\u662f\u7528\u6765\u51cf\u5c11CPU\u7b49\u5f85\u65f6\u95f4\u7684\uff0c\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u4e3aDPDK\u4e4b\u4e8e\u666e\u901a\u7684kernel network"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5176\u5b9e DMA \u6280\u672f\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u672c\u8d28\u4e0a\uff0cDMA \u6280\u672f\u5c31\u662f\u6211\u4eec\u5728\u4e3b\u677f\u4e0a\u653e\u4e00\u5757\u72ec\u7acb\u7684\u82af\u7247\u3002\u5728\u8fdb\u884c\u5185\u5b58\u548c I/O \u8bbe\u5907\u7684\u6570\u636e\u4f20\u8f93\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u518d\u901a\u8fc7 CPU \u6765\u63a7\u5236\u6570\u636e\u4f20\u8f93\uff0c\u800c\u76f4\u63a5\u901a\u8fc7DMA \u63a7\u5236\u5668\uff08DMA Controller\uff0c\u7b80\u79f0 DMAC\uff09\u3002\u8fd9\u5757\u82af\u7247\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u534f\u5904\u7406\u5668\uff08Co-Processor\uff09\u3002\n\nDMAC \u6700\u6709\u4ef7\u503c\u7684\u5730\u65b9\u4f53\u73b0\u5728\uff0c\u5f53\u6211\u4eec\u8981\u4f20\u8f93\u7684\u6570\u636e\u7279\u522b\u5927\u3001\u901f\u5ea6\u7279\u522b\u5feb\uff0c\u6216\u8005\u4f20\u8f93\u7684\u6570\u636e\u7279\u522b\u5c0f\u3001\u901f\u5ea6\u7279\u522b\u6162\u7684\u65f6\u5019\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"co-processor"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9664\u6b64\u4e4b\u5916\uff0cDMAC \u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u7279\u6b8a\u7684 I/O \u8bbe\u5907\uff0c\u5b83\u548c CPU \u4ee5\u53ca\u5176\u4ed6 I/O \u8bbe\u5907\u4e00\u6837\uff0c\u901a\u8fc7\u8fde\u63a5\u5230\u603b\u7ebf\u6765\u8fdb\u884c\u5b9e\u9645\u7684\u6570\u636e\u4f20\u8f93\u3002\u603b\u7ebf\u4e0a\u7684\u8bbe\u5907\u5462\uff0c\u5176\u5b9e\u6709\u4e24\u79cd\u7c7b\u578b\u3002\u4e00\u79cd\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e3b\u8bbe\u5907\uff08Master\uff09\uff0c\u53e6\u5916\u4e00\u79cd\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u4ece\u8bbe\u5907\uff08Slave\uff09\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"zero-copy",children:"zero-copy"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"## \u96f6\u62f7\u8d1d\n\n\n\u5b83\u7684\u4e3b\u8981\u76ee\u7684\u662f\u51cf\u5c11\u6570\u636e\u62f7\u8d1d\u7684\u6b21\u6570\uff0c\u4ee5\u63d0\u9ad8 I/O \u64cd\u4f5c\u7684\u6548\u7387\u3002\u901a\u8fc7\u4f7f\u7528\u96f6\u62f7\u8d1d\u6280\u672f\uff0c\u53ef\u4ee5\u907f\u514d\u5c06\u6570\u636e\u4ece\u5185\u6838\u7a7a\u95f4\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5185\u5b58\u548c CPU \u7684\u5f00\u9500\n\n\u6570\u636e\u7684\u6700\u7ec8\u5904\u7406\u8fd8\u662f\u5728\u7528\u6237\u7a7a\u95f4\uff0c\u4f46\u662f\u5728\u6b64\u4e4b\u524d\u5185\u6838\u5fc5\u987b\u8981\u5bf9\u5176\u8fdb\u884c\u9a8c\u8bc1\u3001\u89e3\u6790\u3001\u5206\u53d1\u7b49\u64cd\u4f5c\u3002\n\n### \u5565\u662f linux \u7684\u62f7\u8d1d\uff1f\u4e3a\u5565\u9700\u8981\u96f6\u62f7\u8d1d\uff1f\u5565\u662f\u96f6\u62f7\u8d1d\uff1f(\u76f4\u63a5\u590d\u5236\u7684)\n\n\u62f7\u8d1d\u662f linux \u4e2d\u7684\u6807\u51c6 io \u63a5\u53e3\u7684\u57fa\u672c\u6570\u636e\u62f7\u8d1d\u7684\u64cd\u4f5c\uff0c\u800c\u8fd9\u4e00\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u6570\u636e\u5728 OS \u5185\u6838\u5730\u5740\u7a7a\u95f4\u7684\u7f13\u51b2\u533a\u548c\u5e94\u7528\u7a0b\u5e8f\u5730\u5740\u7a7a\u95f4\u5b9a\u4e49\u7684\u7f13\u51b2\u533a\u4e4b\u95f4\u8fdb\u884c\u4f20\u8f93\n\n---\n\n- \u4f20\u7edf\u7684 IO \u64cd\u4f5c\u6709\u6027\u80fd\u95ee\u9898\uff0c\u6211\u4eec\u901a\u8fc7`\u96f6\u62f7\u8d1d`\u8fdb\u884c\u6539\u8fdb\n- *\u96f6\u62f7\u8d1d\u7684\u610f\u601d\u662f\u907f\u514d\u6570\u636e\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u6ca1\u6709\u62f7\u8d1d*\n\n  \u5177\u4f53\u6765\u8bf4\u5c31\u662f\uff1a\n\n- \u907f\u514d\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7f13\u51b2\u533a\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u62f7\u8d1d\u64cd\u4f5c\u3002\n- \u907f\u514d\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u548c\u7528\u6237\u5e94\u7528\u7a0b\u5e8f\u5730\u5740\u7a7a\u95f4\u8fd9\u4e24\u8005\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u62f7\u8d1d\u64cd\u4f5c\u3002\n- \u7528\u6237\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u907f\u5f00\u64cd\u4f5c\u7cfb\u7edf\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u5b58\u50a8\u3002\n- \u6570\u636e\u4f20\u8f93\u5c3d\u91cf\u8ba9 DMA \u6765\u505a\u3002\n- \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u7cfb\u7edf\u8c03\u7528\u548c\u4e0a\u4e0b\u6587\u5207\u6362\u3002\n- \u9700\u8981\u62f7\u8d1d\u7684\u6570\u636e\u53ef\u4ee5\u5148\u88ab\u7f13\u5b58\u8d77\u6765\u3002\n- \u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406\u5c3d\u91cf\u8ba9\u786c\u4ef6\u6765\u505a\u3002\n\n---\n\n  \u96f6\u62f7\u8d1d\u7684\u65b9\u6cd5 (\u6ca1\u770b\u61c2)\n\n- `\u76f4\u63a5 I/O`\uff0c\u5e94\u7528\u7a0b\u5e8f\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u5b58\u50a8\uff0c\u5185\u6838\u53ea\u662f\u8f85\u52a9\u6570\u636e\u4f20\u8f93\uff0c*\u907f\u514d`\u5185\u6838\u5730\u5740\u7a7a\u95f4`\u7684\u7f13\u51b2\u533a\u548c`\u7528\u6237\u5e94\u7528\u7a0b\u5e8f\u5730\u5740\u7a7a\u95f4`\u7684\u7f13\u51b2\u533a\u4e4b\u95f4\u7684\u62f7\u8d1d*\n- `DMA+mmap`\uff0c\u6570\u636e\u5148\u901a\u8fc7 DMA \u62f7\u8d1d\u5230\u5185\u6838\u7f13\u51b2\u533a\uff0c\u7136\u540e\uff0c\u5e94\u7528\u7a0b\u5e8f\u548c OS \u5171\u4eab\u8fd9\u4e2a\u7f13\u51b2\u533a\uff0c\u8fd9\u6837\uff0c\u5185\u6838\u548c\u5e94\u7528\u7a0b\u5e8f\u5b58\u50a8\u7a7a\u95f4\u5c31\u4e0d\u9700\u8981\u518d\u8fdb\u884c\u4efb\u4f55\u6570\u636e\u62f7\u8d1d\u64cd\u4f5c\u4e86\n- `sendfile`\uff0c\u5229\u7528 DMA \u5c06\u6587\u4ef6\u4e2d\u7684\u6570\u636e\uff0c\u62f7\u8d1d\u5230 OS \u5185\u6838\u7f13\u51b2\u533a\uff0c\u7136\u540e\u5c06\u6570\u636e\u62f7\u8d1d\u5230\u4e0e socket \u76f8\u5173\u7684\u5185\u6838\u7f13\u51b2\u533a\u4e2d\uff0c\u7136\u540e\uff0cDMA \u5c06\u6570\u636e\u4ece\u5185\u6838 socket \u7f13\u51b2\u533a\u4e2d\u62f7\u8d1d\u5230\u534f\u8bae\u4e2d\n- `DMA \u8f85\u52a9\u7684 senfile`\uff0c\u4e4b\u524d\u6211\u4eec\u628a\u9875\u7f13\u5b58\u7684\u6570\u636e\u62f7\u8d1d\u5230 socket \u4e2d\uff0c\u5b9e\u9645\u4e0a\uff0c\u53ea\u9700\u8981\u628a\u7f13\u51b2\u533a fd \u4f20\u5230 socket \u7f13\u51b2\u533a\uff0c\u518d\u628a\u6570\u636e\u957f\u5ea6\u4f20\u8fc7\u53bb\uff0c\u8fd9\u6837 DMA \u63a7\u5236\u5668\u76f4\u63a5\u5c06\u9875\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u6253\u5305\u53d1\u9001\u5230\u7f51\u7edc\u4e2d\u5c31\u53ef\u4ee5\u4e86\n\n---\n\n\u600e\u4e48\u7528 sendfile \u5b9e\u73b0\u96f6\u62f7\u8d1d\uff1f\n\n### \u4ec0\u4e48\u662f\u201c\u4f18\u5316\u96f6\u62f7\u8d1d\u201d\uff1f\u6709\u54ea\u4e9b\u4f18\u5316\u96f6\u62f7\u8d1d\u7684\u65b9\u6cd5\uff1f\n\n\u4ee5\u4e0a\u51e0\u79cd\u96f6\u62f7\u8d1d\u65b9\u5f0f\u90fd\u662f\u51cf\u5c11\u6570\u636e\u5728\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u62f7\u8d1d\u6280\u672f\u5b9e\u73b0\u7684\uff0c\u4f46\u662f\u6709\u4e9b\u65f6\u5019\uff0c\u6570\u636e\u5fc5\u987b\u5728\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u4e4b\u95f4\u62f7\u8d1d\uff1b\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u80fd\u9488\u5bf9\u6570\u636e\u5728\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u62f7\u8d1d\u7684\u65f6\u95f4\u70b9\u4e0a\u89e3\u51b3\u95ee\u9898\u3002\n\n- `\u5199\u65f6\u590d\u5236 COW`\n- `\u7f13\u51b2\u533a\u5171\u4eab`\n\n\n\n### COW \u662f\u4ec0\u4e48\uff1f\u5199\u65f6\u590d\u5236\u548c\u5f3a\u5236\u5206\u88c2\uff1f\u5177\u4f53\u804a\u804a linux \u4e2d\u7684 COW\uff1f\n\n- COW \u662f\u4e00\u79cd\u901a\u7528\u7684\u4f18\u5316\u7b56\u7565\uff0c`linux \u7684 vmm \u865a\u62df\u5185\u5b58\u7ba1\u7406\u5668`\uff0c`\u6570\u636e\u5e93\u7684\u5f88\u591a\u5e94\u7528\u5982 snapshot \u5feb\u7167`\uff0c\u4ee5\u53ca`\u5404\u79cd\u5f00\u53d1\u8bed\u8a00`\u90fd\u4f7f\u7528\u5230\u8fd9\u79cd\u7b56\u7565\uff0c\u591a\u4e2a\u8c03\u7528\u8005\u5728\u8bfb\u53d6\u65f6\u90fd\u5171\u4eab\u540c\u4e00\u4efd\u8d44\u6e90\uff0c\u7528\u5f00\u53d1\u8bed\u8a00\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6709\u53d8\u91cf a \u548c b\uff0ca=b \u505a\u4e86\u8d4b\u503c\uff0c\u4e24\u4e2a\u53d8\u91cf\u4f1a\u6307\u5411\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u8be5\u5bf9\u8c61\u7684 rc \u5c31\u662f 2\uff1b\u5f53\u6211\u4eec\u5bf9 b \u91cd\u65b0\u8d4b\u503c\uff0c\u5c31\u53d1\u751f\u4e86`\u5199\u65f6\u590d\u5236`\uff0c\u5728\u5185\u5b58\u4e2d\u65b0\u5efa\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u4e24\u4e2a\u5bf9\u8c61\u7684 rc \u90fd\u662f 1\n- linux \u4e2d cow \u7684 fork()\uff1b\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5185\u6838\u53ea\u4e3a\u5b50\u8fdb\u7a0b\u521b\u5efa\u865a\u62df\u7a7a\u95f4\uff0c\u4e0d\u5206\u914d\u7269\u7406\u5185\u5b58\uff0c\u548c\u7236\u8fdb\u7a0b\u5171\u4eab\u7269\u7406\u7a7a\u95f4\uff1b\u5f53\u7236\u8fdb\u7a0b\u4e2d\u6709\u66f4\u6539\u76f8\u5e94\u6bb5\u7684\u884c\u4e3a\u53d1\u751f\u65f6\uff0c\u624d\u4e3a\u5b50\u8fdb\u7a0b\u5206\u914d\u7269\u7406\u7a7a\u95f4\n- cow \u5728\u9700\u8981\u5199\u5165\u65f6\uff0c\u6570\u636e\u624d\u4f1a\u88ab\u590d\u5236\uff1b\u6ca1\u6709\u6570\u636e\u5199\u5165\u65f6\uff0cfork \u7684\u5f00\u9500\u5b9e\u9645\u53ea\u662f\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u9875\u8868\u4ee5\u53ca\u7ed9\u5b50\u8fdb\u7a0b\u521b\u5efa\u552f\u4e00\u7684\u8fdb\u7a0b\u63cf\u8ff0\u7b26\uff1b\u6709\u6570\u636e\u8981\u5199\u5165\u65f6\uff0c\u4f1a\u5c06\u8981\u6539\u53d8\u7684\u6570\u636e\u9875\u590d\u5236\u7ed9\u5b50\u8fdb\u7a0b\n- \u4e00\u822c\u628a\u8fd9\u79cd\u88ab\u5171\u4eab\u8bbf\u95ee\u7684\u9875\u9762\u6807\u8bb0\u4e3a\u53ea\u8bfb\u3002\u5f53\u4e00\u4e2a task \u8bd5\u56fe\u5411\u5185\u5b58\u4e2d\u5199\u5165\u6570\u636e\u65f6\uff0c\u5185\u5b58\u7ba1\u7406\u5355\u5143\uff08MMU\uff09\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff0c\u5185\u6838\u5904\u7406\u8be5\u5f02\u5e38\u65f6\u4e3a\u8be5 task \u5206\u914d\u4e00\u4efd\u7269\u7406\u5185\u5b58\u5e76\u590d\u5236\u6570\u636e\u5230\u6b64\u5185\u5b58\uff0c\u91cd\u65b0\u5411 MMU \u53d1\u51fa\u6267\u884c\u8be5 task \u7684\u5199\u64cd\u4f5c\n- rc \u5b58\u5728\u7684\u610f\u4e49\uff0c\u5c31\u662f\u4e3a\u4e86 cow \u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u5185\u5b58\u7684\u4f18\u5316\n\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u9700\u8981\u7406\u89e3 ",(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"\u201c\u4f7f\u7528zc\u53ef\u4ee5\u907f\u514d\u5c06\u6570\u636e\u4ece\u5185\u6838\u7a7a\u95f4\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5185\u5b58\u548c CPU \u7684\u5f00\u9500\u201d"})})]}),"\n",(0,l.jsx)(e.p,{children:"\u56e0\u4e3a\u5f53\u6570\u636e\u4ece\u78c1\u76d8\u6216\u7f51\u7edc\u4f20\u8f93\u5230\u5185\u6838\u7a7a\u95f4\u65f6\uff08\u4e5f\u5c31\u662f\u6b63\u5e38\u7684IO\u64cd\u4f5c\uff09\uff0c\u4f20\u7edf\u7684\u65b9\u5f0f\u662f\u5c06\u6570\u636e\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u7136\u540e\u518d\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6d89\u53ca\u4e86\u4e24\u6b21\u6570\u636e\u62f7\u8d1d\uff0c\u4e00\u6b21\u662f\u4ece\u5185\u6838\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u53e6\u4e00\u6b21\u662f\u4ece\u7528\u6237\u7a7a\u95f4\u5230\u5176\u4ed6\u5730\u65b9\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4f46\u662f\uff0c\u96f6\u62f7\u8d1d COW \u5c31\u662f\u8981\u7ed5\u8fc7\u8fd9\u4e2a\u7e41\u7410\u7684\u8fc7\u7a0b\u3002\u5b83\u901a\u8fc7\u8ba9\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u540c\u4e00\u5757\u5185\u5b58\u533a\u57df\uff0c\u5728\u8fdb\u884c\u5199\u64cd\u4f5c\u65f6\u624d\u8fdb\u884c\u6570\u636e\u7684\u590d\u5236\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6709\u8fdb\u7a0b\u8981\u4fee\u6539\u6570\u636e\u65f6\uff0c\u624d\u4f1a\u5c06\u6570\u636e\u590d\u5236\u5230\u65b0\u7684\u5185\u5b58\u533a\u57df\uff0c\u5176\u4ed6\u8fdb\u7a0b\u4ecd\u7136\u53ef\u4ee5\u5171\u4eab\u539f\u59cb\u6570\u636e\u7684\u5185\u5b58\u533a\u57df\u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u62f7\u8d1d\uff0c\u63d0\u9ad8\u4e86\u6548\u7387\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u90a3\u4e48\u6570\u636e\u4e3a\u4ec0\u4e48\u8981\u4f20\u8f93\u5230\u5185\u6838\u7a7a\u95f4\u5462\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u56e0\u4e3a\u6570\u636e\u7684\u6700\u7ec8\u5904\u7406\u8fd8\u662f\u5728\u7528\u6237\u7a7a\u95f4\uff0c\u4f46\u662f\u5728\u6b64\u4e4b\u524d\u5185\u6838\u5fc5\u987b\u8981\u5bf9\u5176\u8fdb\u884c\u9a8c\u8bc1\u3001\u89e3\u6790\u3001\u5206\u53d1\u7b49\u64cd\u4f5c\uff08\u5904\u7406\u5b8c\u4e4b\u540e\u518d\u4eceks\u53d1\u5230us\uff09"}),"\n",(0,l.jsxs)(e.p,{children:["\u53e6\u5916\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0ckernel \u63d0\u4f9b\u4e86\u4e00\u4e9bCOW\u7684\u673a\u5236\uff0c\u5982 sendfile \u548c splice \u7cfb\u7edf\u8c03\u7528\uff0c\u53ef\u4ee5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5b9e\u73b0COW\u64cd\u4f5c\u3002\u4f46\u5e76\u4e0d\u662f\u6240\u6709\u7684 I/O \u64cd\u4f5c\u90fd\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u673a\u5236\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u9700\u6c42\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u652f\u6301\u3002",(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"\u8fd9\u5c31\u662f\u4e3a\u5565\u867d\u7136zc\u5f88\u597d\uff0c\u4f46\u662fkernel\u6ca1\u6709\u5c06\u5176\u4f5c\u4e3a\u9ed8\u8ba4\u7684io\u64cd\u4f5c\uff0c\u800c\u53ea\u662f\u4e00\u79cd\u4f18\u5316\u65b9\u6848"})})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"zero copy:\nCOW:\n# COW\u548csendfile\u662f\u4e00\u56de\u4e8b\u5417\uff1f\n# COW\uff08Copy-on-Write\uff09\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u6280\u672f\uff0c\u7528\u4e8e\u4f18\u5316\u6570\u636e\u7684\u590d\u5236\u64cd\u4f5c\u3002\u5f53\u591a\u4e2a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u5171\u4eab\u540c\u4e00\u5757\u5185\u5b58\u65f6\uff0c\u5b83\u4eec\u6700\u521d\u90fd\u6307\u5411\u76f8\u540c\u7684\u5185\u5b58\u9875\u3002\u5f53\u5176\u4e2d\u4e00\u4e2a\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u8bd5\u56fe\u4fee\u6539\u8be5\u5185\u5b58\u9875\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u521b\u5efa\u8be5\u9875\u7684\u526f\u672c\uff0c\u5e76\u5c06\u4fee\u6539\u5e94\u7528\u4e8e\u526f\u672c\uff0c\u800c\u4e0d\u662f\u539f\u59cb\u9875\u9762\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u907f\u514d\u4e86\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u590d\u5236\uff0c\u8282\u7701\u4e86\u5185\u5b58\u548c\u65f6\u95f4\u3002\n# sendfile\u662f\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff08\u5728\u67d0\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff09\uff0c\u7528\u4e8e\u5728\u6587\u4ef6\u4e4b\u95f4\u76f4\u63a5\u4f20\u8f93\u6570\u636e\uff0c\u800c\u65e0\u9700\u5c06\u6570\u636e\u4ece\u5185\u6838\u7a7a\u95f4\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u518d\u4ece\u7528\u6237\u7a7a\u95f4\u590d\u5236\u5230\u7f51\u7edc\u5957\u63a5\u5b57\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u9ad8\u6548\u5730\u5c06\u6587\u4ef6\u5185\u5bb9\u53d1\u9001\u5230\u7f51\u7edc\u8fde\u63a5\u4e2d\uff0c\u4f8b\u5982\u5728Web\u670d\u52a1\u5668\u4e2d\u4f20\u8f93\u6587\u4ef6\u7ed9\u5ba2\u6237\u7aef\u3002sendfile\u7684\u4f7f\u7528\u53ef\u4ee5\u51cf\u5c11\u6570\u636e\u590d\u5236\u7684\u6b21\u6570\uff0c\u63d0\u9ad8\u6570\u636e\u4f20\u8f93\u7684\u6548\u7387\u3002\n# \u7b80\u800c\u8a00\u4e4b\uff0cCOW\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u6280\u672f\uff0c\u7528\u4e8e\u4f18\u5316\u6570\u636e\u7684\u590d\u5236\u64cd\u4f5c\uff0c\u800csendfile\u662f\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u7528\u4e8e\u5728\u6587\u4ef6\u4e4b\u95f4\u76f4\u63a5\u4f20\u8f93\u6570\u636e\u3002\u5b83\u4eec\u662f\u4e0d\u540c\u7684\u6982\u5ff5\u548c\u7528\u9014\u3002\n\n\n# COW \u662f\u4ec0\u4e48\uff1f\u5199\u65f6\u590d\u5236\u548c\u5f3a\u5236\u5206\u88c2\uff1f\u5177\u4f53\u804a\u804a linux \u4e2d\u7684 COW\uff1f\n# \u5565\u662f linux \u7684\u62f7\u8d1d\uff1f\u4e3a\u5565\u9700\u8981\u96f6\u62f7\u8d1d\uff1f\u5565\u662f\u96f6\u62f7\u8d1d\uff1f\u96f6\u62f7\u8d1d\u7684\u65b9\u6cd5\uff1f\u600e\u4e48\u7528 sendfile \u5b9e\u73b0\u96f6\u62f7\u8d1d\uff1f\n# \u4ec0\u4e48\u662f\u201c\u4f18\u5316\u96f6\u62f7\u8d1d\u201d\uff1f\u6709\u54ea\u4e9b\u4f18\u5316\u96f6\u62f7\u8d1d\u7684\u65b9\u6cd5\uff1f\n"})}),"\n",(0,l.jsx)(e.h3,{id:"mmap",children:"mmap"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"mmap: mmap\u7684\u672c\u8d28\u662fkernel\u7684syscall\uff0c\u53ea\u4e0d\u8fc7\u53ef\u4ee5\u7528\u6765\u4f5c\u4e3astorage engine\u800c\u5df2\n# mmap\u662f\u4e00\u4e2asyscall\uff0c\u7528\u4e8e\u5c06\u6587\u4ef6\u6216\u5176\u4ed6\u5bf9\u8c61\u6620\u5c04\u5230\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3002\u901a\u8fc7mmap\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u50cf\u8bbf\u95ee\u666e\u901a\u5185\u5b58\u4e00\u6837\u8bbf\u95ee\u6587\u4ef6\u5185\u5bb9\uff0c\u8fd9\u901a\u5e38\u7528\u4e8e\u9ad8\u6548\u5730\u8bfb\u53d6\u548c\u5199\u5165\u5927\u578b\u6587\u4ef6\u3002mmap\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5b58\u6620\u5c04\uff0c\u8fd9\u4e2a\u6620\u5c04\u53ef\u4ee5\u7528\u4e8e\u8bfb\u5199\u64cd\u4f5c\uff0c\u800c\u4e14\u6620\u5c04\u53ef\u4ee5\u662f\u5171\u4eab\u7684\uff08\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u6620\u5c04\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u79c1\u6709\u7684\uff08\u5bf9\u6620\u5c04\u7684\u4fee\u6539\u4e0d\u4f1a\u53cd\u6620\u5230\u539f\u59cb\u6587\u4ef6\u4e2d\uff09\u3002mmap\u8fd8\u652f\u6301\u5c06\u533f\u540d\u5185\u5b58\u6620\u5c04\u5230\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\uff0c\u8fd9\u901a\u5e38\u7528\u4e8e\u52a8\u6001\u5206\u914d\u5927\u5757\u5185\u5b58\u3002\n\nmadvise:\n# madvise\u662f\u4e00\u4e2asyscall\uff0c\u7528\u4e8e\u7ed9\u5185\u6838\u63d0\u4f9b\u5173\u4e8e\u8fdb\u7a0b\u5982\u4f55\u4f7f\u7528\u5185\u5b58\u7684\u5efa\u8bae\u3002\u901a\u8fc7madvise\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u544a\u8bc9\u5185\u6838\u5b83\u5bf9\u7279\u5b9a\u5185\u5b58\u533a\u57df\u7684\u4f7f\u7528\u6a21\u5f0f\uff0c\u4f8b\u5982\uff0c\u662f\u5426\u9891\u7e41\u8bbf\u95ee\u3001\u662f\u5426\u4e0d\u5e38\u8bbf\u95ee\u3001\u662f\u5426\u5e94\u8be5\u88ab\u9884\u8bfb\u5230\u5185\u5b58\u4e2d\u7b49\u3002\u5185\u6838\u4f1a\u6839\u636e\u8fd9\u4e9b\u5efa\u8bae\u6765\u4f18\u5316\u5185\u5b58\u7ba1\u7406\u7b56\u7565\uff0c\u4f8b\u5982\uff0c\u53ef\u80fd\u4f1a\u6839\u636e\u5efa\u8bae\u6765\u51b3\u5b9a\u662f\u5426\u5c06\u5185\u5b58\u9875\u6362\u51fa\u5230\u78c1\u76d8\u4e0a\uff0c\u6216\u8005\u662f\u5426\u9884\u8bfb\u6587\u4ef6\u5185\u5bb9\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cmadvise\u53ea\u662f\u63d0\u4f9b\u5efa\u8bae\uff0c\u5185\u6838\u53ef\u80fd\u4f1a\u5ffd\u7565\u8fd9\u4e9b\u5efa\u8bae\uff0c\u5177\u4f53\u884c\u4e3a\u53d6\u51b3\u4e8e\u5185\u6838\u7684\u5185\u5b58\u7ba1\u7406\u7b56\u7565\u548c\u5176\u4ed6\u7cfb\u7edf\u72b6\u6001\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"mongodb\u548cboltDB\u90fd\u628a mmap \u4f5c\u4e3a SE \u4f7f\u7528"}),"\n",(0,l.jsxs)(e.p,{children:["\u603b\u7ed3\u6765\u8bf4\u5c31\u662f\uff0c",(0,l.jsx)(e.strong,{children:"\u7528 mmap \u4f5c\u4e3a SE \u6700\u6838\u5fc3\u7684\u95ee\u9898\uff0c\u5c31\u662f\u65e0\u6cd5\u505a\u5230\u5bf9\u5185\u5b58\u5bb9\u91cf\u7684\u7cbe\u51c6\u63a7\u5236\u3002"})]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5185\u5bb9\u53ef\u4ee5\u548c MongoDB SE \u7ed3\u5408\u6765\u770b"}),"\n",(0,l.jsx)(e.h3,{id:"\u865a\u62df\u5185\u5b58",children:"\u865a\u62df\u5185\u5b58"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u865a\u62df\u5185\u5b58\u662f\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u4e00\u9879\u5173\u952e\u6280\u672f\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u6bd4\u7269\u7406\u5185\u5b58\u66f4\u591a\u7684\u5185\u5b58\u7a7a\u95f4\u3002\u4e3a\u4e86\u7ba1\u7406\u865a\u62df\u5185\u5b58\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u51b3\u5b9a\u54ea\u4e9b\u5185\u5b58\u9875\u5e94\u8be5\u4fdd\u7559\u5728\u7269\u7406\u5185\u5b58\u4e2d\uff0c\u54ea\u4e9b\u53ef\u4ee5\u6682\u65f6\u79fb\u51fa\u5230\u78c1\u76d8\u4e0a\u7684\u4ea4\u6362\u7a7a\u95f4\uff08swap space\uff09\u3002\u5f53CPU\u9700\u8981\u8bbf\u95ee\u7684\u5185\u5b58\u9875\u4e0d\u5728\u7269\u7406\u5185\u5b58\u4e2d\u65f6\uff0c\u4f1a\u53d1\u751f\u9875\u9762\u9519\u8bef\uff08page fault\uff09\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u4ece\u78c1\u76d8\u4e2d\u5c06\u8be5\u9875\u8c03\u5165\u5185\u5b58\u3002\u540c\u6837\uff0c\u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u6240\u6709\u9700\u8981\u7684\u9875\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u9009\u62e9\u4e00\u4e9b\u9875\u5c06\u5176\u79fb\u51fa\u5185\u5b58\uff0c\u4ee5\u4fbf\u4e3a\u65b0\u7684\u9875\u817e\u51fa\u7a7a\u95f4\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u9875\u66ff\u6362\uff08page replacement\uff09\u3002\n\n\u9875\u9762\u7f6e\u6362\uff1a\u5728\u5730\u5740\u6620\u5c04\u8fc7\u7a0b\u4e2d\uff0c\u82e5\u5728\u9875\u9762\u4e2d\u53d1\u73b0\u6240\u8981\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u518d\u5185\u5b58\u4e2d\uff0c\u5219\u4ea7\u751f\u7f3a\u9875\u4e2d\u65ad(page fault)\u3002\u5f53\u53d1\u751f\u7f3a\u9875\u4e2d\u65ad\u65f6\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u5728\u5185\u5b58\u9009\u62e9\u4e00\u4e2a\u9875\u9762\u5c06\u5176\u79fb\u51fa\u5185\u5b58\uff0c\u4ee5\u4fbf\u4e3a\u5373\u5c06\u8c03\u5165\u7684\u9875\u9762\u8ba9\u51fa\u7a7a\u95f4\u3002\n\n\u64cd\u4f5c\u7cfb\u7edf\u865a\u62df\u5185\u5b58\u4e2d\u7684\u56db\u79cd\u5178\u578b\u9875\u66ff\u6362\u7b97\u6cd5\n\nOPT (Optimal Page Replacement), LRU, FIFO, Clock\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u53ef\u4ee5\u76f4\u63a5\u628a\u9875\u7f6e\u6362\u770b\u4f5c\u662f\u865a\u62df\u5185\u5b58\u7684scheduler"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"memory: CPU\u5c31\u662f\u5458\u5de5\uff0cmemory\u5c31\u662f\u5199\u5b57\u697c\uff08\u529e\u516c\u533a\u57df\uff09\uff08\u5982\u679cCPU\u662f\u5de5\u4eba\uff0c\u5185\u5b58\u5c31\u662f\u5de5\u5382\uff09\n\n# virtual memory\n\nvirtual memory: \u7528\u6765\u5b9e\u73b0\u4e0d\u540c\u9879\u76ee\u4e4b\u95f4\u4fdd\u5bc6\n# \u7528\u6765\u7ba1\u7406\u7528\u6237\u7a7a\u95f4\n# \u5bf9\u7528\u6237\u7a7a\u95f4\uff0c\u6211\u4eec\u7528`\u865a\u62df\u5185\u5b58`\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\uff1b\u5bf9\u4e8e\u5185\u6838\uff0c\u4f7f\u7528`slab`\u6216\u8005`vmalloc`\u7684\u65b9\u5f0f\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\nNUMA: \u5c31\u50cf\u516c\u53f8\u91cc\u4e0d\u540c\u90e8\u95e8\u4e5f\u6709\u5404\u81ea\u4e13\u6709\u7684\u5de5\u4f5c\u533a\u57df\u4e00\u6837\uff0cNUMA \u5c31\u662f\u8fd9\u79cd CPU \u548c\u5185\u5b58\u4e00\u4e00\u5bf9\u5e94\u7684\u67b6\u6784\u3002\u800c SMP \u5219\u5bf9\u5e94\u90a3\u79cd\u4e0d\u540c\u90e8\u95e8\u6df7\u5728\u4e00\u8d77\u5de5\u4f5c\uff0c\u8fd9\u662f\u5f88\u4e0d\u5408\u7406\u7684\u3002\n# locality(local mem, non-local mem), swap\nNUMA Affinity:\n# CPU NUMA Affinity, Device NUMA Affinity(DMA Buffer, Interrupt)\n\n\nswap:\n# \u865a\u62df\u5185\u5b58\u548c swap \u7684\u5173\u7cfb\uff1f\u865a\u62df\u5185\u5b58\u548c swap \u662f\u4e24\u56de\u4e8b\uff0c\u5b9e\u9645\u4e0a swap \u53ea\u662f\u865a\u62df\u5185\u5b58\u5f15\u7533\u51fa\u7684\u4e00\u79cd\u6280\u672f\u800c\u5df2\uff0c*\u64cd\u4f5c\u7cfb\u7edf\u4e00\u65e6\u5185\u5b58\u4e0d\u8db3\uff0c\u4e3a\u4e86\u817e\u51fa\u5185\u5b58\u7a7a\u95f4\u5b58\u653e\u65b0\u6570\u636e\uff0c\u5c31\u4f1a\u628a\u5f53\u524d\u7269\u7406\u5185\u5b58\u4e2d\u7684\u6570\u636e\u653e\u5230 swap \u4ea4\u6362\u5206\u533a\u91cc\uff0c\u9700\u8981\u4f7f\u7528\u7684\u65f6\u5019\u518d\u53d6\u51fa*\u3002swap \u662f\u78c1\u76d8\u4e0a\u7684\u4e00\u5757\u533a\u57df\uff0c\u5f53\u5185\u5b58\u5403\u7d27\u65f6\uff0c\u5c31\u4f1a\u5c06\u5185\u5b58\u4e2d\u4e0d\u5e38\u8bbf\u95ee\u6216\u8005\u7a7a\u95f2\u7684\u9875\u7684\u90e8\u5206\uff0c\u4fdd\u5b58\u5230 swap \u4e0a\uff0c\u8fd9\u6837\u7cfb\u7edf\u5c31\u6709\u66f4\u591a\u7684\u7269\u7406\u5185\u5b58\u80fd\u4e3a\u8fdb\u7a0b\u670d\u52a1\u3002\u5f53\u7cfb\u7edf\u9700\u8981\u8bbf\u95ee swap \u7684\u5185\u5bb9\u65f6\uff0c\u5c31\u52a0\u8f7d\u5230\u5185\u5b58\u4e0a\u3002\n\n# swap \u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f\n# swap \u89e3\u51b3\u4e86\u5185\u5b58\u4e0d\u5145\u88d5\u7684\u60c5\u51b5\u4e0b\uff0c\u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u95ee\u9898\uff0cswap \u80fd\u591f\u4fdd\u8bc1\u670d\u52a1\u53ef\u7528\uff0c\u4f46\u662f\u6027\u80fd\u76f8\u5bf9\u4f1a\u4e0b\u964d\n\n# swap \u6709\u54ea\u4e9b\u7f3a\u70b9\uff1f\n# \u56e0\u4e3a swap \u662f\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684\uff0c\u6240\u4ee5\u78c1\u76d8\u8bfb\u8d77\u6765\u4f1a\u6bd4\u5185\u5b58\u6162\u5f88\u591a\u3002\u727a\u7272\u4e86\u7cfb\u7edf\u7684\u6027\u80fd\u4fdd\u8bc1\u4e86\u670d\u52a1\u7684\u53ef\u7528\u6027\u3002\n\nswap thrashing:\n# swap \u98a0\u7c38\n# \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cswap \u7684\u4f7f\u7528\u53ef\u80fd\u4f1a\u5e26\u6765\u6027\u80fd\u95ee\u9898\uff0c\u7269\u7406\u5185\u5b58\u548c swap \u9891\u7e41\u53d1\u751f\u6570\u636e\u4ea4\u6362\uff0c\u88ab\u79f0\u4e3a swap \u98a0\u7c38\uff0c\u4e00\u65e6\u53d1\u751f\u8fd9\u79cd\u95ee\u9898\uff0c\u9700\u8981\u660e\u786e\u662f\u4ec0\u4e48\u539f\u56e0\u9020\u6210\u7684\n\nPRA(Page Replacement Algo):\n\n\n#- \u5982\u4f55\u51cf\u5c11\u5bf9swap\u7a7a\u95f4\u7684\u4f7f\u7528\uff1f\n# \u53ef\u4ee5\u901a\u8fc7\u4fee\u6539swappiness\u53c2\u6570\u7684\u503c\u6765\u51cf\u5c11\u5bf9swap\u7a7a\u95f4\u7684\u4f7f\u7528\u3002swappiness\u7684\u503c\u51b3\u5b9a\u4e86\u7cfb\u7edf\u4f7f\u7528swap\u7a7a\u95f4\u7684\u503e\u5411\u3002\u503c\u8d8a\u4f4e\uff0c\u7cfb\u7edf\u8d8a\u503e\u5411\u4e8e\u4f7f\u7528\u7269\u7406\u5185\u5b58\uff0c\u800c\u4e0d\u662fswap\u7a7a\u95f4\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u901a\u8fc7\u6267\u884c\u547d\u4ee4sudo sysctl vm.swappiness=10\u6765\u4e34\u65f6\u5c06swappiness\u8bbe\u7f6e\u4e3a10\u3002\u4e3a\u4e86\u4f7f\u8fd9\u4e2a\u8bbe\u7f6e\u6c38\u4e45\u751f\u6548\uff0c\u53ef\u4ee5\u7f16\u8f91/etc/sysctl.conf\u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u884cvm.swappiness=10\uff0c\u7136\u540e\u91cd\u542f\u7cfb\u7edf\u3002\n\n#- swap\u7a7a\u95f4\u7684\u4f7f\u7528\u8fc7\u9ad8\u53ef\u80fd\u662f\u4ec0\u4e48\u539f\u56e0\uff1f\n# swap\u7a7a\u95f4\u4f7f\u7528\u8fc7\u9ad8\u53ef\u80fd\u662f\u7531\u4e8e\u7cfb\u7edf\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\u5bfc\u81f4\u7684\u3002\u5f53\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u4e3a\u4e86\u6ee1\u8db3\u65b0\u7684\u5185\u5b58\u5206\u914d\u8bf7\u6c42\uff0c\u7cfb\u7edf\u4f1a\u901a\u8fc7\u76f4\u63a5\u5185\u5b58\u56de\u6536\u548c\u5b9a\u671f\u626b\u63cf\u7684\u65b9\u5f0f\u91ca\u653e\u6587\u4ef6\u9875\u548c\u533f\u540d\u9875\uff0c\u5c06\u4e0d\u5e38\u8bbf\u95ee\u7684\u6570\u636e\u6362\u51fa\u5230\u78c1\u76d8\u4e2d\u7684swap\u7a7a\u95f4\u3002\u6b64\u5916\uff0c\u5982\u679c\u7cfb\u7edf\u914d\u7f6e\u4e86swap\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff08\u5982\u5927\u91cf\u6587\u4ef6\u64cd\u4f5c\u6216\u5185\u5b58\u5bc6\u96c6\u578b\u64cd\u4f5c\uff09\u6ca1\u6709\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\uff0c\u4e5f\u53ef\u80fd\u5bfc\u81f4swap\u4f7f\u7528\u7387\u5347\u9ad8\u3002\n\n#- \u5982\u4f55\u533a\u5206\u7cfb\u7edf\u6027\u80fd\u4e0b\u964d\u662f\u7531\u4e8eswap thrashing\u8fd8\u662f\u7531\u4e8e\u975eswap\u7684\u9ad8I/O\u5ef6\u8fdf\u9020\u6210\u7684\uff1f\n# \u53ef\u4ee5\u901a\u8fc7\u76d1\u63a7\u5de5\u5177\uff08\u5982vmstat\u3001iotop\u3001sar\u7b49\uff09\u6765\u5206\u6790\u7cfb\u7edf\u7684\u6027\u80fd\u6307\u6807\u3002swap thrashing\u901a\u5e38\u8868\u73b0\u4e3a\u5927\u91cf\u7684\u6362\u5165\u6362\u51fa\u64cd\u4f5c\uff0c\u53ef\u4ee5\u901a\u8fc7vmstat\u4e2d\u7684si\u548cso\u5b57\u6bb5\u6765\u89c2\u5bdf\u3002\u975eswap\u7684\u9ad8I/O\u5ef6\u8fdf\u53ef\u80fd\u662f\u7531\u4e8e\u78c1\u76d8I/O\u8bf7\u6c42\u5904\u7406\u7f13\u6162\uff0c\u53ef\u4ee5\u901a\u8fc7iotop\u6216iostat\u6765\u67e5\u770b\u78c1\u76d8I/O\u7684\u4f7f\u7528\u60c5\u51b5\u3002\u5982\u679cI/O\u7b49\u5f85\u65f6\u95f4\uff08\u4f8b\u5982vmstat\u4e2d\u7684wa\u5b57\u6bb5\uff09\u663e\u8457\u589e\u52a0\uff0c\u53ef\u80fd\u662f\u9ad8I/O\u5ef6\u8fdf\u7684\u95ee\u9898\u3002\n\n#- \u5982\u4f55\u76d1\u63a7\u548c\u8bb0\u5f55swap\u7a7a\u95f4\u7684\u4f7f\u7528\u60c5\u51b5\uff1f\n# \u53ef\u4ee5\u4f7f\u7528free -h\u547d\u4ee4\u6765\u67e5\u770b\u5f53\u524d\u7684\u5185\u5b58\u548cswap\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u3002\u4e3a\u4e86\u8bb0\u5f55\u548c\u76d1\u63a7swap\u7a7a\u95f4\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528sysstat\u5de5\u5177\u5305\u4e2d\u7684sar\u547d\u4ee4\uff0c\u5b83\u53ef\u4ee5\u6536\u96c6\u3001\u62a5\u544a\u6216\u4fdd\u5b58\u7cfb\u7edf\u6d3b\u52a8\u4fe1\u606f\uff0c\u5305\u62ec\u5185\u5b58\u548cswap\u7684\u4f7f\u7528\u60c5\u51b5\u3002\u6b64\u5916\uff0c/proc/vmstat\u6587\u4ef6\u4e5f\u63d0\u4f9b\u4e86\u5173\u4e8e\u865a\u62df\u5185\u5b58\u7cfb\u7edf\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u6765\u5206\u6790swap\u6d3b\u52a8\u3002\n\n#- \u5982\u4f55\u5173\u95edswap\u7a7a\u95f4\uff1f\n# \u53ef\u4ee5\u901a\u8fc7swapoff\u547d\u4ee4\u6765\u5173\u95edswap\u7a7a\u95f4\u3002\u4f8b\u5982\uff0csudo swapoff -a\u53ef\u4ee5\u5173\u95ed\u6240\u6709\u7684swap\u7a7a\u95f4\u3002\u5982\u679c\u9700\u8981\u91cd\u65b0\u542f\u7528swap\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528swapon\u547d\u4ee4\uff0c\u4f8b\u5982sudo swapon -a\u6765\u91cd\u65b0\u542f\u7528\u6240\u6709\u914d\u7f6e\u7684swap\u7a7a\u95f4\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5173\u95edswap\u7a7a\u95f4\u53ef\u80fd\u4f1a\u5f71\u54cd\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u6027\u80fd\uff0c\u7279\u522b\u662f\u5728\u5185\u5b58\u8d44\u6e90\u7d27\u5f20\u7684\u60c5\u51b5\u4e0b\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7b2c\u4e00\uff0c\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\uff0c\u76f8\u5f53\u4e8e\u4f1a\u8bae\u5ba4\u7ba1\u7406\u5458\u7ba1\u7406\u4f1a\u8bae\u5ba4\uff1b\n\n\u7b2c\u4e8c\uff0c\u865a\u62df\u5730\u5740\u7684\u7ba1\u7406\uff0c\u4e5f\u5373\u5728\u9879\u76ee\u7ec4\u7684\u89c6\u89d2\uff0c\u4f1a\u8bae\u5ba4\u7684\u865a\u62df\u5730\u5740\u5e94\u8be5\u5982\u4f55\u7ec4\u7ec7\uff1b\n\n\u7b2c\u4e09\uff0c\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u5982\u4f55\u6620\u5c04\u7684\u95ee\u9898\uff0c\u4e5f\u5373\u4f1a\u8bae\u5ba4\u7ba1\u7406\u5458\u5982\u679c\u7ba1\u7406\u6620\u5c04\u8868\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u8fd8\u662f\u62ff\u516c\u53f8\u4e3e\u4f8b\uff0c\u610f\u601d\u662f\u5047\u5982\u516c\u53f8\u6709 100 \u4e2a\u5de5\u4f4d\uff0c\u4f46\u662f\u6709 n \u4e2a\u9879\u76ee\uff0c\u8fd9 n \u4e2a\u9879\u76ee\u8fd8\u662f\u540c\u65f6\u8fd0\u884c\u7684\uff0c\u5982\u679c\u4e0d\u7528\u865a\u62df\u5185\u5b58\uff0c\u5c31\u4f1a\u51fa\u73b0 1 \u4e2a\u5de5\u4f4d\u88ab n \u4e2a\u9879\u76ee\u53cd\u590d\u4fee\u6539\uff0c\u5c31\u51fa\u73b0\u9519\u8bef\u4e86\u3002\u4f7f\u7528\u865a\u62df\u5185\u5b58\u4e4b\u540e\uff0c\u5373\u4f7f\u8fd9 n \u4e2a\u9879\u76ee\u90fd\u9700\u8981\u540c\u4e00\u4e2a\u5de5\u4f4d\uff08\u5185\u5b58\u5730\u5740\uff09\uff0c\u4f46\u662f\u8001\u677f\uff08\u5185\u6838\uff09\u4f1a\u7ed9\u4e0d\u540c\u7684\u9879\u76ee\u5212\u5206\u4e0d\u540c\u7684\u533a\u57df\uff08\u865a\u62df\u5185\u5b58\u548c\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\u8868\uff09\uff0c\u540c\u4e00\u4e2a\u5de5\u4f4d\u5b9e\u9645\u4e0a\u6620\u5c04\u5728\u4e0d\u540c\u7684\u5730\u65b9\uff08\u7269\u7406\u5185\u5b58\u5730\u5740\uff09\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u6211\u4eec\u5728\u65e5\u5e38\u751f\u6d3b\u4e2d\u5c31\u662f\u8fd9\u4e48\u8bbe\u8ba1\u7684\uff0c\u6240\u4ee5\u6bd4\u8f83\u96be\u7406\u89e3\u4e4b\u524d\u201c\u7269\u7406\u5185\u5b58\u201d\u662f\u4e2a\u4ec0\u4e48\u60c5\u51b5\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u4e0a\u9762\u7684\u8fd9\u4e2a\u8bf4\u6cd5\u662f\u6709\u4e9b\u95ee\u9898\u7684\uff0c\u65e5\u5e38\u5de5\u4f5c\u65f6\u4e0d\u540c\u5f00\u53d1\u7ec4\u662f\u53ef\u89c1\u7684\uff0c\u4f46\u662f\u8fdb\u7a0b\u4e4b\u95f4\u5219\u4e0d\u662f\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u8ba4\u4e3a\u6574\u4e2a\u5199\u5b57\u697c\u90fd\u662f\u81ea\u5df1\u72ec\u5360\u7684\u3002\u5b9e\u9645\u4e0a\u66f4\u5408\u7406\u7684\u8bf4\u6cd5\u662f\uff0c\u6240\u6709\u8fdb\u7a0b\u90fd\u60f3\u8fdb\u5165 21F-1 \u7684\u529e\u516c\u5ba4\uff0c\u5728\u4e0b\u9762\u6441\u7535\u68af\u65f6\uff0c\u8eab\u5728\u5199\u5b57\u697c\u9876\u5c42\u7684\u9ad8\u7ba1\u4f1a\u628a\u8fd9 n \u4e2a\u8fdb\u7a0b\u5212\u5206\u5230\u4e0d\u540c\u7684\u697c\u5c42\u3001\u4e0d\u540c\u7684\u529e\u516c\u5ba4\uff0c\u4f46\u662f\u8fd9\u4e9b\u8fdb\u7a0b\u81ea\u5df1\u8ba4\u4e3a\u81ea\u5df1\u90fd\u8fdb\u5165\u4e86 21F-1 \u529e\u516c\u5ba4\uff0c\u4e5f\u8ba4\u4e3a\u6574\u4e2a\u5199\u5b57\u697c\u90fd\u662f\u81ea\u5df1\u72ec\u5360\u7684\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u7684\u7c7b\u6bd4\u4e5f\u8ddf\u6211\u4e4b\u524d\u9884\u60f3\u7684\u4e00\u6478\u4e00\u6837\uff0c\u5185\u6838\u7a7a\u95f4\u5c31\u662f\u9ad8\u7ba1\u6240\u5728\u7684\u533a\u57df\uff0c\u5199\u5b57\u697c\u7684\u9876\u5c42\u3002\u5458\u5de5\u4eec\u5219\u5728\u5199\u5b57\u697c\u7684\u4e0b\u9762\u697c\u5c42\u529e\u516c\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5185\u6838\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u548c\u4f7f\u7528\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u5730\u5740\uff0c\u4ece\u800c\u4fdd\u62a4\u7528\u6237\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u8fdb\u7a0b\u7a33\u5b9a\u6027\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u7269\u7406\u5185\u5b58",children:"\u7269\u7406\u5185\u5b58"}),"\n",(0,l.jsx)(e.h4,{id:"kernel\u4e2d\u662f\u600e\u4e48\u628a\u7269\u7406\u5185\u5b58\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u7684",children:"kernel\u4e2d\u662f\u600e\u4e48\u628a\u7269\u7406\u5185\u5b58\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u7684?"}),"\n",(0,l.jsx)(e.p,{children:"mmap(memory mapping), page table, virtual address"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"PGD\u3001P4G\u3001PUD\u3001PMD\u3001PTE \u56db\u7ea7\u9875\u8868\u662f\u5565\uff1f"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u865a\u62df\u5185\u5b58\u662f\u5bf9\u4e8e\u7269\u7406\u5185\u5b58\u7684\u62bd\u8c61\u3002\u652f\u6301\u865a\u62df\u5185\u5b58\u7684\u5904\u7406\u5668\uff0c\u901a\u8fc7\u4f7f\u7528 `\u865a\u62df\u5bfb\u5740` \u8fd9\u79cd\u95f4\u63a5\u65b9\u6cd5\u6765\u5f15\u7528\u7269\u7406\u5185\u5b58\u3002\n\n*\u5904\u7406\u5668\u4ea7\u751f\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u5728\u88ab\u53d1\u9001\u5230\u7269\u7406\u5185\u5b58\u4e4b\u524d\uff0c\u8fd9\u4e2a\u5730\u5740\u88ab\u7ffb\u8bd1\u6210\u4e00\u4e2a\u7269\u7406\u5730\u5740\u3002*\n\n- \u7269\u7406\u5bfb\u5740\n- \u865a\u62df\u5bfb\u5740\n\n\u5730\u5740\u7ffb\u8bd1\n\n\u5927\u591a\u6570\u9875\u8868\u6761\u76ee\u4f4d\u4e8e L1 \u9ad8\u901f\u7f13\u5b58\u4e2d\uff0c\u4f46\u662f TLB \u7684\u9875\u8868\u6761\u76ee\u7684\u7247\u4e0a\u9ad8\u901f\u7f13\u5b58\uff0c\u901a\u5e38\u4f1a\u6d88\u9664\u8bbf\u95ee\u5728 L1 \u4e0a\u7684\u9875\u8868\u6761\u76ee\u7684\u5f00\u9500\u3002\n\n- \u7ed3\u5408\u9ad8\u901f\u7f13\u5b58\u548c\u865a\u62df\u5185\u5b58\n- \u5229\u7528 TLB \u52a0\u901f\u5730\u5740\u7ffb\u8bd1\n- \u591a\u7ea7\u9875\u8868\u7aef\u5230\u7aef\u7684\u5730\u5740\u7ffb\u8bd1\n\n---\n\n- *\u56e0\u4e3a\u865a\u62df\u5185\u5b58\u662f\u64cd\u4f5c\u7cfb\u7edf\u7269\u7406\u5185\u5b58\u548c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u4e2d\u95f4\u5c42\uff0c\u4e3a\u8fdb\u7a0b\u9690\u85cf\u7269\u7406\u5185\u5b58\uff0c\u4e3a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u7b80\u6d01\u6613\u7528\u7684\u63a5\u53e3*\n- \u865a\u62df\u5185\u5b58\u53ef\u4ee5\u4e3a\u8fdb\u7a0b\u63d0\u4f9b\u72ec\u7acb\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u5f15\u5165\u591a\u5c42\u7684\u9875\u8868\u7ed3\u6784\uff0c\u5c06\u865a\u62df\u5185\u5b58\u7ffb\u8bd1\u6210\u7269\u7406\u5185\u5b58\uff0c*\u8fdb\u7a0b\u4e4b\u95f4\u53ef\u4ee5\u5171\u4eab\u7269\u7406\u5185\u5b58\u51cf\u5c11\u5f00\u9500\uff0c\u4e5f\u80fd\u7b80\u5316\u7a0b\u5e8f\u7684\u94fe\u63a5\u3001\u88c5\u8f7d\u4ee5\u53ca\u5185\u5b58\u5206\u914d\u8fc7\u7a0b*\n- \u865a\u62df\u5185\u5b58\u53ef\u4ee5\u63a7\u5236\u8fdb\u7a0b\u5bf9\u7269\u7406\u5185\u5b58\u7684\u8bbf\u95ee\uff0c\u9694\u79bb\u4e0d\u540c\u8fdb\u7a0b\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5b89\u5168\u6027\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e2a\u5c31\u662f\u865a\u62df\u5185\u5b58\u548c\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04"}),"\n",(0,l.jsx)(e.h4,{id:"zone_type",children:"zone_type"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# - zone_type # ZONE_DMA(kernel thread), ZONE_NORMAL(user thread), (ZONE_HIGHMEM, ZONE_DEVICE)\n# \u5185\u5b58 zone \u5206\u4e3a\u56db\u5757\uff0c\u9664\u4e86\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5206\u522b\u8bbf\u95ee\u7684\u5185\u5b58\u533a\u57df\uff0c\u8fd8\u5206\u4e3a ZONE_HIGHMEM \u548c ZONE_DEVICE \u8fd9\u4e24\u4e2a\u7528\u6765\u89e3\u51b3\u7279\u6b8a\u95ee\u9898\u7684 zone\uff0c\u8fd9\u4e24\u4e2a\u5bf9\u7528\u6237\u6001\u7ebf\u7a0b\u90fd\u4e0d\u53ef\u89c1\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u5185\u6838\u7a7a\u95f4\u7684\u533a\u57df\u7531\u54ea\u51e0\u90e8\u5206\u6784\u6210\uff1f\n\n- `DMA \u5185\u5b58\u533a\u57df`0-16mb \u5185\u5b58\n- `NORMAL \u5185\u5b58\u533a\u57df`16-896mb \u5185\u5b58\n- `HIGHMEM \u5185\u5b58\u533a\u57df`\u9ad8\u7aef\u5185\u5b58\u533a\u57df\n\n---\n\n`\u7528\u6237\u7a7a\u95f4`\u91cc\u7531\u4f4e\u5230\u9ad8\u7684\u5730\u5740\uff0c\u5206\u522b\u662f\uff1f\n\n- `\u4ee3\u7801\u6bb5/\u53ea\u8bfb\u6bb5 (text section)`\uff0c*`\u53ef\u6267\u884c\u6587\u4ef6`\u4ee3\u7801\u7684\u5185\u5b58\u6620\u5c04*\uff0c\u5b58\u653e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u64cd\u4f5c\u6307\u4ee4\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f\u5728\u5185\u5b58\u4e2d\u7684\u955c\u50cf (\u53ea\u8bfb\uff0c\u4e0d\u53ef\u5199)\n- `\u6570\u636e\u6bb5 (data section)`*`\u53ef\u6267\u884c\u6587\u4ef6`\u7684\u5df2\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\u7684\u5185\u5b58\u6620\u5c04*\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u5df2\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\uff0c\u9759\u6001\u5206\u914d\u7684\u53d8\u91cf\u548c\u5168\u5c40\u53d8\u91cf\n- `BSS(bbs segment)`*`\u53ef\u6267\u884c\u6587\u4ef6`\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf*\n- `heap` \u7528\u6765\u5b58\u653e\u8fdb\u7a0b\u8fd0\u884c\u65f6\u88ab\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u6bb5\uff0c\u5927\u5c0f\u4e0d\u56fa\u5b9a\u3002malloc \u65b0\u5185\u5b58\u52a0\u5230 heap\uff0cfree \u65f6\u4ece heap \u91ca\u653e\n- `stack` \u4e34\u65f6\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u51fd\u6570\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf (\u4e0d\u5305\u62ec static)\u3002\u51fd\u6570\u88ab\u8c03\u7528\u65f6\uff0c\u53c2\u6570\u4e5f\u4f1a\u88ab\u538b\u5165\u53d1\u8d77\u8c03\u7528\u7684\u8fdb\u7a0b\u6808\u4e2d\uff0c\u8c03\u7528\u7ed3\u675f\u65f6\uff0c\u8fd4\u56de\u503c\u4e5f\u4f1a\u88ab\u5b58\u653e\u5230\u6808\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"heap, stack, bbs, data section, text section"}),"\n",(0,l.jsx)(e.h4,{id:"vmalloc",children:"vmalloc"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"slab\uff0cslub\uff0cslob \u662fslab\u673a\u5236\u7684\u4e09\u79cd\u4e0d\u540c\u5b9e\u73b0\u7b97\u6cd5\u3002\n\u6ce8\u610f\uff0cslab\u7533\u8bf7\u548c\u5206\u914d\u7684\u90fd\u662f\u53ea\u9488\u5bf9\u5185\u6838\u7a7a\u95f4\uff0c\u4e0e\u7528\u6237\u7a7a\u95f4\u7533\u8bf7\u5206\u914d\u5185\u5b58\u65e0\u5173\u3002\u7528\u6237\u7a7a\u95f4\u7684malloc\u548cfree\u8c03\u7528\u7684\u662flibc\u3002\n\nslab\u548cbuddy\u7684\u5173\u7cfb\uff1f\n1\u3001slab\u7684\u5185\u5b58\u6765\u81ea\u4e8ebuddy\u3002slab\u76f8\u5f53\u4e8e\u4e8c\u7ea7\u7ba1\u7406\u5668\u3002\n2\u3001slab\u548cbuddy\u5728\u7b97\u6cd5\u4e0a\uff0c\u7ea7\u522b\u662f\u5bf9\u7b49\u7684\u3002\n\n\u4e24\u8005\u90fd\u662f\u5185\u5b58\u5206\u914d\u5668\uff0cbuddy\u662f\u628a\u5185\u5b58\u6761\u5206\u6210\u591a\u4e2aZone\u6765\u7ba1\u7406\u5206\u914d\uff0cslab\u662f\u628a\u4ecebuddy\u62ff\u5230\u7684\u5185\u5b58\uff0c\u8fdb\u884c\u7ba1\u7406\u5206\u914d\u3002\n\n\u540c\u7406\uff0cmalloc \u548cfree\u4e5f\u4e0d\u627ebuddy\u62ff\u5185\u5b58\u3002 malloc \u548cfree\u4e0d\u662f\u7cfb\u7edf\u8c03\u7528\uff0c\u53ea\u662fc\u5e93\u4e2d\u7684\u51fd\u6570\u3002\n"})}),"\n",(0,l.jsx)(e.h4,{id:"buddy-allocator",children:"buddy-allocator"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"buddy-allocator: \u7528\u6765\u7ba1\u7406\u7269\u7406\u5185\u5b58\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\u3002buddy allocator \u5c31\u50cf\u662f\u9879\u76ee\u5185\u90e8\u5212\u5206\u518d\u7ed9\u5404\u79cd\u5185\u90e8\u9879\u76ee\u5212\u5206\u5de5\u4f5c\u533a\u57df\uff0c\u4e00\u5b9a\u662f\u5212\u5206\u5230\u6700\u5c0f\u7c92\u5ea6\uff0c\u4e5f\u5c31\u662f\u5de5\u4f4d\uff08\u4e5f\u5c31\u662f\u201c\u7a7a\u95f2\u9875\u653e\u5728 struct free_area \u91cc\u9762\uff0c\u6bcf\u4e00\u9875\u7528 struct page \u8868\u793a\u201d\uff09\uff0c\u518d\u89c4\u5212\u51fa 11 \u79cd\u5185\u90e8\u9879\u76ee\u53ef\u4ee5\u7533\u8bf7\u7684\u6863\u4f4d\uff08\u4e5f\u5c31\u662f\u201c\u628a\u6240\u6709\u7684\u7a7a\u95f2\u9875\u5206\u7ec4\u4e3a 11 \u4e2a\u9875\u5757\u94fe\u8868\uff0c\u6bcf\u4e2a\u5757\u94fe\u8868\u5206\u522b\u5305\u542b\u5f88\u591a\u4e2a\u5927\u5c0f\u7684\u9875\u5757\uff0c\u6709 1\u30012\u30014\u30018\u300116\u300132\u300164\u3001128\u3001256\u3001512 \u548c 1024 \u4e2a\u8fde\u7eed\u9875\u7684\u9875\u5757\u3002\u6700\u5927\u53ef\u4ee5\u7533\u8bf7 1024 \u4e2a\u8fde\u7eed\u9875\uff0c\u5bf9\u5e94 4MB \u5927\u5c0f\u7684\u8fde\u7eed\u5185\u5b58\u3002\u201d\uff09\u3002\u8fd9\u6837\u9879\u76ee\u5185\u90e8\u9700\u8981\u521b\u5efa\u5b50\u9879\u76ee\u65f6\uff0c\u76f4\u63a5\u7533\u8bf7\u6574\u5757\u7684\u5de5\u4f4d\u533a\u57df\uff08\u8fde\u7eed\u9875\u7684\u9875\u5757\uff09\u5c31\u53ef\u4ee5\u4e86\u3002\u5c31\u4e0d\u9700\u8981\u518d\u4e00\u4e2a\u4e00\u4e2a\u7533\u8bf7\u5de5\u4f4d\u4e86\u3002\u5176\u5b9e\u8ddf\u6211\u4eec\u5728\u516c\u53f8\u91cc\u4e5f\u5dee\u4e0d\u591a\uff0c\u4ee3\u5165\u5230\u5b9e\u9645\u751f\u6d3b\u5c31\u5f88\u597d\u7406\u89e3\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"ptmalloc, buddy allocator"}),"\n",(0,l.jsx)(e.p,{children:"\u611f\u89c9\u673a\u5236\u5f88\u50cf\uff08\u90fd\u662f\u901a\u8fc7\u628a\u6574\u5757\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u5206\u5272\u4e3a\u4e0d\u540c\u5927\u5c0f\u7684\u5757\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u788e\u7247\uff09\uff0c\u4f46\u662f\u786e\u5b9e\u4e0d\u662f\u4e00\u56de\u4e8b"}),"\n",(0,l.jsx)(e.p,{children:"ptmalloc\u662f\u7528\u6237\u7a7a\u95f4\u7684\uff0cbuddy allocator\u662f\u5185\u6838\u7a7a\u95f4\u7684"}),"\n",(0,l.jsx)(e.h4,{id:"tlb",children:"TLB"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"TLB: \u662f\u4fdd\u5b58\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u4e00\u4e2a\u7f13\u5b58\uff0c\u662f MMU \u7684\u4e00\u90e8\u5206\uff0c\u5b58\u50a8\u5728 CPU \u548c CPU cache \u4e4b\u95f4\uff0c\u6709\u6548\u7684\u51cf\u5c11\u4e86\u901a\u8fc7\u8f6c\u6362\u53bb\u83b7\u53d6\u7269\u7406\u5730\u5740\u7684\u6b21\u6570\n\nTLB\u662fMMU\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u7f13\u5b58\u7ed3\u6784\uff0c\u7528\u4e8e\u52a0\u901f\u5730\u5740\u8f6c\u6362\u8fc7\u7a0b\u3002TLB\u5b58\u50a8\u4e86\u6700\u8fd1\u4f7f\u7528\u7684\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\u5f53\u7a0b\u5e8f\u8bbf\u95ee\u5185\u5b58\u65f6\uff0cMMU\u9996\u5148\u4f1a\u5728TLB\u4e2d\u67e5\u627e\u5bf9\u5e94\u7684\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u6620\u5c04\uff0c\u5982\u679c\u627e\u5230\u4e86\u5339\u914d\u7684\u6620\u5c04\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528TLB\u4e2d\u7684\u7269\u7406\u5730\u5740\uff0c\u907f\u514d\u4e86\u8017\u65f6\u7684\u5185\u5b58\u8bbf\u95ee\u3002\u5982\u679c\u5728TLB\u4e2d\u6ca1\u6709\u627e\u5230\u6620\u5c04\uff0cMMU\u4f1a\u901a\u8fc7\u4e00\u5b9a\u7684\u7b97\u6cd5\u5c06\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\uff0c\u5e76\u5c06\u65b0\u7684\u6620\u5c04\u5173\u7cfb\u5b58\u50a8\u5230TLB\u4e2d\uff0c\u4ee5\u4fbf\u4e0b\u6b21\u4f7f\u7528\u3002\n\n\u603b\u7ed3\u8d77\u6765\uff0cMMU\u662f\u8d1f\u8d23\u5730\u5740\u8f6c\u6362\u7684\u786c\u4ef6\u7ec4\u4ef6\uff0c\u800cTLB\u662fMMU\u4e2d\u7684\u4e00\u4e2a\u7f13\u5b58\u7ed3\u6784\uff0c\u7528\u4e8e\u5b58\u50a8\u6700\u8fd1\u7684\u5730\u5740\u6620\u5c04\uff0c\u4ee5\u63d0\u9ad8\u5730\u5740\u8f6c\u6362\u7684\u901f\u5ea6\u3002TLB\u53ef\u4ee5\u51cf\u5c11\u5bf9\u5185\u5b58\u7684\u8bbf\u95ee\u6b21\u6570\uff0c\u4ece\u800c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u3002\n"})}),"\n",(0,l.jsx)(e.h2,{id:"storage",children:"storage"}),"\n",(0,l.jsx)(e.h2,{id:"network",children:"network"}),"\n",(0,l.jsx)(e.h3,{id:"selectpollepoll-\u5206\u522b\u662f\u4ec0\u4e48\u6709\u4ec0\u4e48\u533a\u522b",children:"select\u3001poll\u3001epoll \u5206\u522b\u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"select\n\n- `\u9ed8\u8ba4\u53ea\u80fd\u76d1\u542c 1024 \u4e2a socket \u8fde\u63a5`: \u56e0\u4e3a\u6bcf\u6b21\u8c03\u7528 select \u90fd\u9700\u8981\u5c06\u8fdb\u7a0b\u52a0\u5165\u5230\u6240\u6709\u76d1\u89c6 socket \u7684\u7b49\u5f85\u961f\u5217\uff0c\u6bcf\u6b21\u5524\u9192\u90fd\u9700\u8981\u4ece\u6bcf\u4e2a\u961f\u5217\u4e2d\u79fb\u9664\u3002\u8fd9\u91cc\u6d89\u53ca\u4e86\u4e24\u6b21\u904d\u5386\uff0c\u800c\u4e14\u6bcf\u6b21\u90fd\u8981\u5c06\u6574\u4e2a fds \u5217\u8868\u4f20\u9012\u7ed9\u5185\u6838\uff0c\u6709\u4e00\u5b9a\u7684\u5f00\u9500\u3002\u6b63\u662f\u56e0\u4e3a\u904d\u5386\u64cd\u4f5c\u5f00\u9500\u5927\uff0c\u51fa\u4e8e\u6548\u7387\u7684\u8003\u91cf\uff0c\u624d\u4f1a\u89c4\u5b9a select \u7684\u6700\u5927\u76d1\u542c\u6570\u91cf\uff0c\u9ed8\u8ba4\u53ea\u80fd\u76d1\u542c 1024 \u4e2a socket\u3002\n- `\u9700\u8981\u4e3b\u52a8\u8f6e\u8be2`: select \u76d1\u542c socket \u65f6\uff0c\u4e0d\u80fd\u77e5\u9053\u54ea\u4e2a socket \u6709\u53ef\u7528\u6570\u636e\uff0c\u9700\u8981\u8f6e\u8be2\u5224\u65ad\u3002\u8fdb\u7a0b\u88ab\u5524\u9192\u540e\uff0c\u7528\u6237\u7a0b\u5e8f\u5e76\u4e0d\u77e5\u9053\u54ea\u4e9b socket \u5df2\u7ecf\u63a5\u6536\u5230\u6570\u636e\uff0c\u8fd8\u9700\u8981\u904d\u5386\u4e00\u6b21\u3002\n\npoll: \u4e0e select \u539f\u7406\u7c7b\u4f3c\uff0c\u53ea\u662f\u4f7f\u7528`\u94fe\u8868`\u5b9e\u73b0\uff0c\u6ca1\u6709\u4e86 socket \u9650\u5236\u3002\n\nepoll\n\n- `\u6ca1\u6709 socket \u6570\u91cf\u9650\u5236`: \u53ef\u4ee5\u76f4\u63a5\u77e5\u9053\u54ea\u4e2a socket \u6709\u6570\u636e\u4e86\uff0c\u5168\u9762\u89e3\u51b3\u4e86 select \u7684\u95ee\u9898\u3002\n- `\u7ebf\u7a0b\u5b89\u5168`: epoll \u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u800c select \u548c poll \u4e0d\u662f\u3002\n- `mmap \u5171\u4eab\u5185\u5b58`: epoll \u5185\u90e8\u4f7f\u7528\u4e86 mmap \u5171\u4eab\u4e86\u7528\u6237\u548c\u5185\u6838\u7684\u90e8\u5206\u7a7a\u95f4\uff0c\u907f\u514d\u4e86\u6570\u636e\u7684\u6765\u56de\u62f7\u8d1d\u3002\n- `\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8`: epoll_ctl \u6ce8\u518c\u4e8b\u4ef6\u5e76\u6ce8\u518c callback \u56de\u8c03\u51fd\u6570\uff0cepoll_wait \u53ea\u8fd4\u56de\u53d1\u751f\u7684\u4e8b\u4ef6\u907f\u514d\u4e86\u50cf select \u548c poll \u5bf9\u4e8b\u4ef6\u7684\u6574\u4e2a\u8f6e\u8be2\u64cd\u4f5c\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"epoll-compare-et-mode-and-lt-mode",children:"epoll, Compare ET mode and LT mode?"}),"\n",(0,l.jsx)(e.p,{children:"\u4f60\u6709\u6025\u4e8b\u6253\u7535\u8bdd\u627e\u4eba\uff0c\u5982\u679c\u5bf9\u65b9\u4e00\u76f4\u4e0d\u63a5\uff0c\u90a3\u4f60\u53ea\u6709\u4e00\u76f4\u6253\uff0c\u76f4\u5230\u4ed6\u63a5\u7535\u8bdd\u4e3a\u6b62\uff0c\u8fd9\u5c31\u662f lt \u6a21\u5f0f\uff1b\u5982\u679c\u4e0d\u6025\uff0c\u7535\u8bdd\u6253\u8fc7\u53bb\u5bf9\u65b9\u4e0d\u63a5\uff0c\u90a3\u5c31\u7b49\u6709\u7a7a\u518d\u6253\uff0c\u8fd9\u5c31\u662f et \u6a21\u5f0f\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"`LT(level trigger)`\n- socket \u63a5\u6536\u7f13\u51b2\u533a\u4e0d\u4e3a\u7a7a\uff0c\u6709\u6570\u636e\u53ef\u8bfb\uff0c\u8bfb\u4e8b\u4ef6\u4e00\u76f4\u89e6\u53d1\n- socket \u53d1\u9001\u7f13\u51b2\u533a\u4e0d\u6ee1\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5199\u5165\u6570\u636e\uff0c\u5199\u4e8b\u4ef6\u4e00\u76f4\u89e6\u53d1\n\n`ET(edge trigger)`\n- socket \u7684\u63a5\u6536\u7f13\u51b2\u533a\u72b6\u6001\u53d8\u5316\u65f6\u89e6\u53d1\u8bfb\u4e8b\u4ef6\uff0c\u5373\u7a7a\u7684\u63a5\u6536\u7f13\u51b2\u533a\u521a\u63a5\u6536\u5230\u6570\u636e\u65f6\u89e6\u53d1\u8bfb\u4e8b\u4ef6\n- socket \u7684\u53d1\u9001\u7f13\u51b2\u533a\u72b6\u6001\u53d8\u5316\u65f6\u89e6\u53d1\u5199\u4e8b\u4ef6\uff0c\u5373\u6ee1\u7684\u7f13\u51b2\u533a\u521a\u7a7a\u51fa\u7a7a\u95f4\u65f6\u89e6\u53d1\u8bfb\u4e8b\u4ef6\n\n---\n\nLT \u548c ET \u6709\u4ec0\u4e48\u533a\u522b\uff1f\n\n- LT \u6a21\u5f0f\u7684\u4f7f\u7528\u66f4\u7b80\u5355\uff0c\u66f4\u7b26\u5408\u6b63\u5e38\u8ba4\u77e5\uff0cET \u53ea\u5728\u72b6\u6001\u53d8\u5316\u65f6\u89e6\u53d1\u4e8b\u4ef6\u3002\n- ET \u6a21\u5f0f\u7684\u6548\u7387\u6bd4 LT \u66f4\u9ad8\uff0c\u56e0\u4e3a\u53ef\u4ee5\u51cf\u5c11 epoll \u4e8b\u4ef6\u88ab\u91cd\u590d\u89e6\u53d1\u7684\u6b21\u6570\u3002\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48-epoll-\u7684\u6548\u7387\u9ad8",children:"\u4e3a\u4ec0\u4e48 epoll \u7684\u6548\u7387\u9ad8\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"- \u56e0\u4e3a\u57fa\u4e8e`\u7ea2\u9ed1\u6811`\u3001`\u53cc\u5411\u94fe\u8868`\u3001`\u4e8b\u4ef6\u56de\u8c03\u673a\u5236`\n- \u5982\u679c\u6709 100 \u4e07\u7528\u6237\u540c\u65f6\u4e0e\u4e00\u4e2a\u8fdb\u7a0b\u4fdd\u6301 TCP \u8fde\u63a5\uff0c\u4f46\u662f\u53ea\u6709\u51e0\u5341\u4e2a TCP \u8fde\u63a5\u662f\u6d3b\u8dc3\u7684\uff08\u4fdd\u6301\u957f\u8fde\u63a5\u4f46\u662f\u672a\u53d1\u9001 TCP \u5305\uff09\n- \u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0cselect/poll \u5c31\u4f1a\u6536\u96c6\u6240\u6709\u7684\u8fde\u63a5\uff08\u5f88\u6ca1\u5fc5\u8981\uff09\uff0c\u4e14\u6bcf\u6b21\u6536\u96c6\u4e8b\u4ef6\u65f6\uff0c\u90fd\u4f1a\u628a\u8fd9 100 \u4e07\u4e2a socket \u4f20\u7ed9 linux\uff08`\u7528\u6237\u6001\u5185\u5b58`\u5230`\u5185\u6838\u5185\u5b58`\u7684\u5927\u91cf\u590d\u5236\uff09\u3002*select \u548c poll \u6bcf\u6b21\u90fd\u9700\u8981\u904d\u5386\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(n)\uff0c\u800c epoll \u662f\u57fa\u4e8e\u56de\u8c03\u7684\uff0c\u6bcf\u4e2a socket \u4e0a\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5c31\u8c03\u7528\u56de\u8c03\u51fd\u6570\u653e\u5230 epoll \u7684\u5217\u8868\u4e2d\uff0c\u6240\u4ee5 epoll_wait \u53ea\u9700\u8981\u8bfb\u8fd9\u4e2a\u5217\u8868\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(1)*\n"})}),"\n",(0,l.jsxs)(e.p,{children:["epoll \u548c select \u5b9e\u9645\u4e0a\u6ca1\u6709\u592a\u5927\u533a\u522b\uff0c\u53ea\u662f select \u7528\u6570\u7ec4\u6807\u8bc6 fds\uff0cepoll \u7528\u53e6\u4e00\u4e2a epollfd \u6765\u6807\u8bc6 fds\uff1b\uff08",(0,l.jsx)(e.em,{children:"\u6240\u4ee5\u533a\u522b\u53ea\u5728\u4e8e select \u7684 fds \u6bcf\u6b21\u7b49\u5f85\u90fd\u8981\u8bbe\u7f6e\u8fdb\u53bb\uff0cepoll \u7684 fds \u662f\u4e00\u5f00\u59cb\u5c31\u8bbe\u7f6e\u597d\u7684\uff0c\u7b49\u5f85\u65f6\u4e0d\u9700\u8981\u91cd\u65b0\u6307\u5b9a"}),"\uff09"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"epoll \u5e76\u4e0d\u4ec5\u4ec5\u57fa\u4e8e\u7ea2\u9ed1\u6811\u3002\u5b83\u8fd8\u4f7f\u7528\u4e86\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u4ee5\u53ca\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3002epoll \u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u5feb\u901f\u5b9a\u4f4d\u9700\u8981\u5904\u7406\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5e94\u7684 I/O \u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"epoll \u7684\u6570\u636e\u7ed3\u6784\u79f0\u4e3a eventpoll\uff0c\u662f\u57fa\u4e8e\u7ea2\u9ed1\u6811\u548c\u53cc\u7ebf\u94fe\u8868\u7684\u6df7\u5408\u7ed3\u6784\uff0c\u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u7ba1\u7406 fd\uff0c\u4f7f\u7528\u53cc\u7ebf\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u4e5f\u662f\u8fd9\u79cd\u6df7\u5408\u7ed3\u6784\u7684\u8bbe\u8ba1\u80fd\u8ba9 epoll \u591a\u8def\u590d\u7528\u5904\u7406\u5e76\u53d1\u4e8b\u4ef6\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"epoll \u4f7f\u7528\u53cc\u5411\u94fe\u8868\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u7528\u7ea2\u9ed1\u6811\u7ba1\u7406 fd\u3002\u800c mmap \u662f\u7528\u6765\u7ba1\u7406\u4e8b\u4ef6\u7684\u5185\u5b58\u6620\u5c04\uff0c\u6765\u5b9e\u73b0\u4e0d\u7ecf\u8fc7\u590d\u5236\uff0c\u8ba9\u5185\u6838\u76f4\u63a5\u8bbf\u95ee\u4e8b\u4ef6\u7684\uff0c\u4ece\u800c\u63d0\u9ad8\u6027\u80fd\u3002"})})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u90a3 epoll \u662f\u57fa\u4e8e\u53cc\u5411\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u5417\uff1f\n\n---\n\n\u5177\u4f53\u6765\u8bf4\uff0ceventpoll \u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u9ad8\u6548\u5730\u7ba1\u7406\u9700\u8981\u76d1\u542c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08file descriptor\uff09\uff0c\u4ee5\u652f\u6301\u5feb\u901f\u7684\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u3002\u6bcf\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u90fd\u5bf9\u5e94\u4e00\u4e2a\u8282\u70b9\u5728\u7ea2\u9ed1\u6811\u4e2d\u3002\n\n\u800c\u53cc\u5411\u94fe\u8868\u5219\u7528\u4e8e\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u5728\u6bcf\u4e2a\u7ea2\u9ed1\u6811\u8282\u70b9\u4e2d\uff0c\u90fd\u6709\u4e00\u4e2a\u94fe\u8868\uff0c\u7528\u4e8e\u5b58\u50a8\u4e0e\u8be5\u6587\u4ef6\u63cf\u8ff0\u7b26\u76f8\u5173\u7684\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u6837\uff0c\u5f53\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u53ef\u4ee5\u5feb\u901f\u904d\u5386\u94fe\u8868\uff0c\u6267\u884c\u76f8\u5e94\u7684\u56de\u8c03\u51fd\u6570\u3002\n\n\u56e0\u6b64\uff0c\u53ef\u4ee5\u8bf4 epoll \u5728\u5185\u6838\u4e2d\u4f7f\u7528\u4e86\u53cc\u5411\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u800c\u7ea2\u9ed1\u6811\u5219\u7528\u4e8e\u9ad8\u6548\u5730\u7ba1\u7406\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\u8fd9\u79cd\u6df7\u5408\u7ed3\u6784\u7684\u8bbe\u8ba1\u4f7f\u5f97 epoll \u80fd\u591f\u9ad8\u6548\u5730\u5904\u7406\u5927\u91cf\u7684\u5e76\u53d1\u4e8b\u4ef6\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"eventpoll - RBT node - DLL"}),"\n",(0,l.jsx)(e.p,{children:"\u610f\u601d\u662feventpoll\u4e2d\u6709\u5927\u91cfRBT node\uff0c\u800c\u6bcf\u4e2anode\u4e2d\u662f\u7531DLL\u5b9e\u73b0\u7684\uff1f"}),"\n",(0,l.jsx)(e.h3,{id:"reactor-proactor-actor-csp-\u6709\u5565\u533a\u522b",children:"reactor, proactor, actor, CSP \u6709\u5565\u533a\u522b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"- \u5e38\u89c1\u7684\u7ebf\u7a0b\u6a21\u578b\u6709`reactor`/`proactor`/`actor`\uff0c*\u5176\u4e2d reactor \u548c proactor \u90fd\u662f\u901a\u8fc7\u5171\u4eab\u5185\u5b58\u6765\u901a\u4fe1\uff0c\u800c actor \u5219\u662f\u901a\u8fc7\u901a\u4fe1\u6765\u5171\u4eab\u5185\u5b58*\n- `proactor`\u5c31\u662f\u628a`reactor`\u7684 IO \u64cd\u4f5c\u6539\u4e3a\u5f02\u6b65\uff0c\u5f02\u6b65\u63a5\u6536\uff0c\u540c\u65f6\u5904\u7406\u591a\u4e2a\u670d\u52a1\u8bf7\u6c42\u7684\u4e8b\u4ef6\u9a71\u52a8\u7a0b\u5e8f\uff0c\u6027\u80fd\u66f4\u597d\uff0c\u66f4\u80fd\u53d1\u6325 DMA \u7684\u4f18\u52bf\uff0c\u4f46\u662f\u4f9d\u8d56 OS \u8c03\u5ea6\u6765\u652f\u6301\u5f02\u6b65\uff0c\u4e3b\u6d41 OS \u5bf9\u5f02\u6b65 IO \u7684\u652f\u6301\u90fd\u5f88\u6709\u9650\uff0c\u6240\u4ee5 proactor \u51e0\u4e4e\u6ca1\u6709\u4ec0\u4e48\u5b9e\u9645\u5e94\u7528\uff0c\u4e0d\u7528\u770b\n"})}),"\n",(0,l.jsx)(e.h3,{id:"implement-reactor-using-epoll",children:"implement reactor using epoll"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"reactor \u6a21\u578b\u5177\u4f53\u6709\u54ea\u51e0\u79cd\n\n- `\u5355reactor\u5355\u7ebf\u7a0b\u6a21\u578b`\uff0c\u5728 reactor \u4e2d\u5904\u7406\u4e8b\u4ef6\uff0c\u5e76\u5206\u53d1\uff0c\u5982\u679c\u662f`\u8fde\u63a5\u4e8b\u4ef6`\u5c31\u5206\u53d1\u7ed9 acceptor \u5904\u7406\uff0c\u5982\u679c\u662f`\u8bfb\u5199\u4e8b\u4ef6`\u548c`\u4e1a\u52a1\u5904\u7406`\uff0c\u5c31\u4ea4\u7ed9 handler\uff0c\u4f46\u662f\u59cb\u7ec8\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u6240\u6709\u4e8b\u4ef6\n- `\u5355reactor\u591a\u7ebf\u7a0b\u6a21\u578b`\uff0c\u548c`\u5355reactor\u5355\u7ebf\u7a0b\u6a21\u578b`\u7684\u533a\u522b\u5728\u4e8e\uff0c*reactor \u53ea\u5904\u7406`\u8fde\u63a5\u4e8b\u4ef6`\u548c`\u8bfb\u5199\u4e8b\u4ef6`\uff0c`\u4e1a\u52a1\u5904\u7406`\u4ea4\u7ed9`\u7ebf\u7a0b\u6c60`\u5904\u7406*\n- `\u591areactor\u591a\u7ebf\u7a0b\u6a21\u578b`\uff0c*\u628a reactor \u7ebf\u7a0b\u6c60\u62c6\u6210\u4e86`\u4e3breactor`\u548c`\u4ecereactor`\u4e24\u90e8\u5206\uff0c`\u4e3breactor`\u53ea\u8d1f\u8d23\u7ef4\u62a4\u8fde\u63a5\uff0c`\u4ecereactor`\u5904\u7406\u8bfb\u5199\u4e8b\u4ef6\uff0c`\u4e1a\u52a1\u5904\u7406`\u8fd8\u662f\u4ea4\u7ed9`\u7ebf\u7a0b\u6c60`\u5904\u7406*\uff0c\u5177\u4f53\u6765\u8bf4\uff0c`\u4ecereactor`\u6709\u591a\u4e2a\uff0c\u6bcf\u4e2a`\u4ecereactor`\u90fd\u5728\u4e00\u4e2a\u72ec\u7acb\u7ebf\u7a0b\u4e2d\u6267\u884c\uff0c`\u4ecereactor`\u4f1a\u53bb\u6267\u884c\u4e00\u4e9b\u8017\u65f6\u7684 IO \u64cd\u4f5c\uff0c\u7528\u591a\u7ebf\u7a0b\u66f4\u80fd\u53d1\u6325 CPU \u7684\u591a\u6838\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"reactor \u4e09\u79cd\u6a21\u5f0f\u5f62\u8c61\u6bd4\u55bb\n\nreactor \u9910\u5385\u7684\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\uff0c\u6216\u8005\u5904\u7406\u5de5\u5355\uff0c\u9910\u5385\u4e00\u822c\u6709\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\uff0c\u63a5\u5f85\u5458\u8d1f\u8d23\u518d\u95e8\u53e3\u63a5\u5f85\u987e\u5ba2\uff0c\u670d\u52a1\u5458\u8d1f\u8d23\u5168\u7a0b\u670d\u52a1\u987e\u5ba2\u3002reactor \u7684\u4e09\u79cd\u7ebf\u7a0b\u6a21\u578b\u53ef\u4ee5\u7528\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\u7c7b\u6bd4\u3002\n\n- \u5355 reactor \u5355\u7ebf\u7a0b\u6a21\u578b\uff1a\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\u662f\u540c\u4e00\u4e2a\u4eba\uff0c\u4e00\u76f4\u4e3a\u987e\u5ba2\u670d\u52a1\u3002\u9002\u5408\u5ba2\u6d41\u91cf\u8f83\u5c11\u7684\u60c5\u51b5\u3002\n- \u5355 reactor \u591a\u7ebf\u7a0b\u6a21\u578b\uff1a\u4e00\u4e2a\u63a5\u5f85\u5458\uff0c\u591a\u4e2a\u670d\u52a1\u5458\u3002\u5ba2\u6d41\u91cf\u5927\uff0c\u4e00\u4e2a\u4eba\u5fd9\u4e0d\u8fc7\u6765\uff0c\u7531\u4e13\u95e8\u7684\u63a5\u5f85\u5458\u5728\u95e8\u53e3\u63a5\u5f85\u987e\u5ba2\uff0c\u7136\u540e\u5b89\u6392\u597d\u684c\u5b50\u540e\uff0c\u7531\u4e00\u4e2a\u670d\u52a1\u5458\u4e00\u76f4\u670d\u52a1\uff0c\u4e00\u822c\u6bcf\u4e2a\u670d\u52a1\u5458\u8d1f\u8d23\u51e0\u5f20\u684c\u5b50\u3002\n- \u591a reactor \u591a\u7ebf\u7a0b\u6a21\u578b\uff1a\u591a\u4e2a\u63a5\u5f85\u5458\uff0c\u591a\u4e2a\u670d\u52a1\u5458\u3002\u8fd9\u79cd\u5c31\u662f\u5ba2\u6d41\u91cf\u592a\u5927\u4e86\uff0c\u4e00\u4e2a\u63a5\u5f85\u5458\u5fd9\u4e0d\u8fc7\u6765\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u603b\u7ed3\u4e00\u4e0b\uff0creactor\u7684\u8fd9\u51e0\u79cd\u6a21\u5f0f\uff0c"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e48\u8bf4\u8fd8\u662f\u592a\u7b3c\u7edf\u4e86\uff0c\u5982\u679c\u6211\u4eec\u7ee7\u7eed\u7528\u9910\u5385\u7684\u8fd9\u4e2a\u4f8b\u5b50\u6765\u89e3\u91caepoll, poll, select"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"\u76f8\u6bd4\u4e8eepoll\uff0creactor \u201creactor \u662f\u5bf9 epoll \u7684\u4e00\u79cd\u5c01\u88c5 (\u4f18\u5316)\uff0c\u628a epoll \u8fd9\u79cd\u5bf9 io \u7684\u7ba1\u7406\uff0c\u8f6c\u5316\u4e3a\u5bf9\u4e8b\u4ef6\u7684\u7ba1\u7406\u201d\uff0c\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u201c\u4f7f\u7528\u591a\u8def\u590d\u7528 io \u6a21\u578b\u5904\u7406 io \u4e8b\u4ef6\uff0c\u8ba9 reactor \u5c06\u76f8\u5e94 io \u4e8b\u4ef6\u548c\u4e1a\u52a1\u5904\u7406\u5206\u5f00\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\u6765\u5904\u7406 IO \u4e8b\u4ef6\uff0c\u7136\u540e\u5c06\u5c31\u7eea\u5f97\u5230\u4e8b\u4ef6\u5206\u53d1\u5230\u4e1a\u52a1\u5904\u7406 handlers \u7ebf\u7a0b\u53bb\u5f02\u6b65\u975e\u963b\u585e\u5904\u7406\u3002\u201d"})})}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u8bf4\u8bf4\u6211\u5bf9\u8fd9\u6bb5\u8bdd\u7684\u7406\u89e3\uff0c\u4ea7\u751f\u4e86\u4e00\u4e2a\u7591\u60d1"}),"\n",(0,l.jsx)(e.p,{children:"\u201c\u65e2\u7136epoll\u4e5f\u7528\u4e86event-table\u6765\u7ba1\u7406fd\u548cevent\uff0c\u901a\u8fc7\u8c03\u7528epoll_wait\u7684syscall\u6765\u76d1\u542cevent\u3002\u8fd9\u4e2a\u4e0d\u4e5f\u662freactor\u6240\u8c13\u7684\u201c\u628a\u5bf9io\u7684\u7ba1\u7406\uff0c\u8f6c\u5316\u4e3a\u5bf9event\u7684\u7ba1\u7406\u201d\u5417\uff1f\u201d"}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u5b9e\uff0c\u90a3\u4e48epoll\u548creactor\u6709\u5565\u533a\u522b\u5462\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u7684\u95ee\u9898\u5728\u4e8e\u201c\u628a\u5bf9io\u7684\u7ba1\u7406\uff0c\u8f6c\u5316\u4e3a\u5bf9event\u7684\u7ba1\u7406\u201d\u8fd9\u53e5\u8bdd\u592a\u542b\u7cca\u4e86\u3002"}),"\n",(0,l.jsx)(e.p,{children:"reactor\u5176\u5b9e\u5c31\u662f\u67d0\u79cd\u5bf9epoll\u7684DI"}),"\n",(0,l.jsx)(e.p,{children:"\u6b63\u5982\u8fd9\u6bb5\u6240\u8bf4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u56de\u60f3\u4e00\u4e0b\u666e\u901a\u51fd\u6570\u8c03\u7528\u7684\u673a\u5236\uff1a\u7a0b\u5e8f\u8c03\u7528\u67d0\u51fd\u6570\uff0c\u51fd\u6570\u6267\u884c\uff0c\u7a0b\u5e8f\u7b49\u5f85\uff0c\u51fd\u6570\u5c06\u7ed3\u679c\u548c\u63a7\u5236\u6743\u8fd4\u56de\u7ed9\u7a0b\u5e8f\uff0c\u7a0b\u5e8f\u7ee7\u7eed\u5904\u7406\u3002reactor\u53cd\u5e94\u5806\uff0c\u662f\u4e00\u79cd\u4e8b\u4ef6\u9a71\u52a8\u673a\u5236\uff0c\u548c\u666e\u901a\u51fd\u6570\u8c03\u7528\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a\u5e94\u7528\u7a0b\u5e8f\u4e0d\u662f\u4e3b\u52a8\u7684\u8c03\u7528\u67d0\u4e2a API \u5b8c\u6210\u5904\u7406\uff0c\u800c\u662f\u6070\u6070\u76f8\u53cd\uff0creactor\u9006\u7f6e\u4e86\u4e8b\u4ef6\u5904\u7406\u6d41\u7a0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u63d0\u4f9b\u76f8\u5e94\u7684\u63a5\u53e3\u5e76\u6ce8\u518c\u5230 reactor\u4e0a\uff0c\u5982\u679c\u76f8\u5e94\u7684\u4e8b\u4ef6\u53d1\u751f\uff0creactor\u5c06\u4e3b\u52a8\u8c03\u7528\u5e94\u7528\u7a0b\u5e8f\u6ce8\u518c\u7684\u63a5\u53e3\uff0c\u8fd9\u4e9b\u63a5\u53e3\u53c8\u79f0\u4e3a\u201c\u56de\u8c03\u51fd\u6570\u201d\u3002\n\n\u8bf4\u767d\u4e86\uff0creactor\u5c31\u662f\u5bf9epoll\u8fdb\u884c\u5c01\u88c5\uff0c\u8fdb\u884c\u7f51\u7edcIO\u4e0e\u4e1a\u52a1\u7684\u89e3\u8026\uff0c\u5c06epoll\u7ba1\u7406IO\u53d8\u6210\u7ba1\u7406\u4e8b\u4ef6\uff0c\u6574\u4e2a\u7a0b\u5e8f\u7531\u4e8b\u4ef6\u8fdb\u884c\u9a71\u52a8\u6267\u884c\u3002\u5c31\u50cf\u4e0b\u56fe\u4e00\u6837\uff0c\u6709\u5c31\u7eea\u4e8b\u4ef6\u8fd4\u56de\uff0creactor\uff1a\u7531\u4e8b\u4ef6\u9a71\u52a8\u6267\u884c\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\uff1bepoll\uff1a\u9700\u8981\u81ea\u5df1\u5224\u65ad\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e3a\u5565\u8bf4\u662fDI\u5462\uff1fepoll\u539f\u6765\u662f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"reactor \u6a21\u578b\u662f\u4ec0\u4e48\uff1f\n\n- *reactor \u662f\u4e00\u79cd\u7ebf\u7a0b\u6a21\u578b\uff0c\u662f NIO \u5b9e\u73b0\u591a\u8def\u590d\u7528\u7684\u4e00\u79cd\u6a21\u5f0f*\n- *reactor \u7528`IO\u590d\u7528`+`\u7ebf\u7a0b\u6c60`\u89e3\u51b3 BIO \u7684\u95ee\u9898*\uff0c\u907f\u514d\u4e86 bio \u7684TPC\u8fd9\u79cd\u5f00\u9500\u9ad8\u3001\u6548\u7387\u4f4e\u7684\u7ebf\u7a0b\u6a21\u578b\n    - `IO\u590d\u7528`\uff0c\u591a\u4e2a\u8fde\u63a5\u5171\u7528\u4e00\u4e2a\u963b\u585e\u5bf9\u8c61\uff0c\u4e0d\u7528\u7b49\u5f85\u6240\u6709\u8fde\u63a5\n    - `\u7ebf\u7a0b\u6c60`\uff0c\u907f\u514d\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u521b\u5efa\u7ebf\u7a0b\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"reactor \u6a21\u578b\u7684\u5de5\u4f5c\u539f\u7406\uff1f\n\n- reactor \u7684\u5b9e\u73b0\u975e\u5e38\u7b80\u5355\uff0c\u4f7f\u7528\u540c\u6b65 io \u6a21\u578b\uff0c\u4e3b\u8981\u7279\u70b9\u662f\u5229\u7528 epoll \u76d1\u542c fd \u662f\u5426\u6709\u54cd\u5e94\uff0c\u53ca\u65f6\u5c06\u5ba2\u6237\u8fde\u63a5\u4fe1\u606f\u653e\u5230\u4e00\u4e2a\u961f\u5217\u91cc\uff0cepoll \u548c\u961f\u5217\u90fd\u662f\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u7531\u5b50\u7ebf\u7a0b\u6765\u63a5\u7ba1\u5404\u4e2a fd\uff0c\u5bf9 fd \u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002\u5305\u62ec\u8fde\u63a5\u548c\u6570\u636e\u8bfb\u5199\u3002\n- `reactor`\u628a IO \u4e8b\u4ef6\u5206\u914d\u7ed9\u5bf9\u5e94 handler \u5904\u7406\n- `acceptor`\u5904\u7406\u5ba2\u6237\u7aef\u8fde\u63a5\u4e8b\u4ef6\n- `handler`\u5904\u7406\u975e\u963b\u585e\u4efb\u52a1\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u90a3\u6211\u4eec\u628a\u5185\u5bb9\u518d\u5ef6\u4f38\u4e00\u4e9b\uff0c\u600e\u4e48\u7528\u4e0a\u9762\u8fd9\u4e2a\u9910\u5385\u7684\u4f8b\u5b50\u6765\u7c7b\u6bd4proactor\u548cactor\u5462\uff1f"}),"\n",(0,l.jsx)(e.h3,{id:"iptables",children:"iptables"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u8fd9\u4e2a\u6bd4\u55bb\u4e2d\uff0c\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u516c\u53f8\u7684\u5b89\u4fdd\u90e8\u95e8\u3002\u8fd9\u4e2a\u90e8\u95e8\u8d1f\u8d23\u76d1\u63a7\u548c\u63a7\u5236\u8fdb\u5165\u548c\u79bb\u5f00\u5404\u4e2a\u529e\u516c\u533a\u57df\u7684\u4eba\u5458\u548c\u7269\u8d44\uff08\u7f51\u7edc\u6d41\u91cf\uff09\u3002\u5b89\u4fdd\u90e8\u95e8\uff08iptables\uff09\u901a\u8fc7\u8bbe\u7f6e\u5404\u79cd\u89c4\u5219\u6765\u786e\u4fdd\u53ea\u6709\u7ecf\u8fc7\u6388\u6743\u7684\u4eba\u5458\u53ef\u4ee5\u8fdb\u5165\u7279\u5b9a\u533a\u57df\uff0c\u540c\u65f6\u4e5f\u63a7\u5236\u7740\u54ea\u4e9b\u533a\u57df\u4e4b\u95f4\u53ef\u4ee5\u4e92\u76f8\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c\u5b89\u4fdd\u90e8\u95e8\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u89c4\u5219\uff0c\u53ea\u6709\u6765\u81ea\u7279\u5b9a\u4f9b\u5e94\u5546\u7684\u7269\u8d44\u624d\u80fd\u8fdb\u5165\u4ed3\u5e93\u533a\u57df\uff0c\u6216\u8005\u53ea\u6709\u6301\u6709\u7279\u5b9a\u901a\u884c\u8bc1\u7684\u4eba\u5458\u624d\u80fd\u8fdb\u5165\u7814\u53d1\u5b9e\u9a8c\u5ba4\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u6211\u4eec\u628a\u5185\u6838\u7a7a\u95f4\u6bd4\u505a\u516c\u53f8\u6838\u5fc3\u90e8\u95e8\uff0c\u7528\u6237\u7a7a\u95f4\u6bd4\u505a\u516c\u53f8\u5916\u56f4\u90e8\u95e8\uff0c\u90a3\u4e48 netfilter \u53ef\u4ee5\u770b\u4f5c\u662f\u516c\u53f8\u7684\u5b89\u5168\u76d1\u63a7\u7cfb\u7edf\uff0c\u5b83\u8d1f\u8d23\u76d1\u89c6\u548c\u5904\u7406\u6570\u636e\u5305\u7684\u6d41\u52a8\u3002\u8fc7\u6ee4\u89c4\u5219\u5c31\u50cf\u662f\u5b89\u4fdd\u90e8\u95e8\u4e0b\u8fbe\u7684\u6307\u4ee4\uff0c\u7528\u4e8e\u51b3\u5b9a\u54ea\u4e9b\u6570\u636e\u5305\u53ef\u4ee5\u901a\u8fc7\uff0c\u54ea\u4e9b\u9700\u8981\u88ab\u963b\u6b62\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"\u53ef\u4ee5\u628a\u56db\u8868\u7406\u89e3\u4e3a\u516c\u53f8\u7684\u90e8\u95e8\u533a\u57df\uff0c\u4e94\u94fe\u7406\u89e3\u4e3a\u52a8\u7ebf\u3002"})})}),"\n",(0,l.jsx)(e.p,{children:"iptables \u4e3a\u4e86\u4fbf\u4e8e\u7ba1\u7406\uff0c\u6240\u4ee5\u6309\u7167\u4e0d\u540c\u7684\u76ee\u7684\u7ec4\u7ec7\u4e86\u591a\u5f20 \u8868 \uff1b\u6bcf\u5f20\u8868\u4e2d\u53c8\u5305\u542b\u4e86\u5f88\u591a\u9884\u5b9a\u4e49\u7684 \u94fe\uff1b\u6bcf\u4e2a\u94fe\u4e2d\u5305\u542b\u7740\u987a\u5e8f\u904d\u5386\u7684 \u89c4\u5219\uff1b\u8fd9\u4e9b\u89c4\u5219\u4e2d\u53c8\u5b9a\u4e49\u4e86\u52a8\u4f5c\u7684\u5339\u914d\u89c4\u5219\u548c \u76ee\u6807\u3002"}),"\n",(0,l.jsx)(e.p,{children:"iptables \u662f Linux \u5185\u6838\u4e2d\u7684\u9632\u706b\u5899\u8f6f\u4ef6 netfilter \u7684\u7ba1\u7406\u5de5\u5177\uff0c\u4f4d\u4e8e\u7528\u6237\u7a7a\u95f4\uff0c\u540c\u65f6\u4e5f\u662f netfilter \u7684\u4e00\u90e8\u5206\u3002Netfilter \u4f4d\u4e8e\u5185\u6838\u7a7a\u95f4\uff0c\u4e0d\u4ec5\u6709\u7f51\u7edc\u5730\u5740\u8f6c\u6362\u7684\u529f\u80fd\uff0c\u4e5f\u5177\u5907\u6570\u636e\u5305\u5185\u5bb9\u4fee\u6539\u3001\u4ee5\u53ca\u6570\u636e\u5305\u8fc7\u6ee4\u7b49\u9632\u706b\u5899\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"hook, (PREROUTING, INPUT, FORWARD, OUTPUT, POSTROUTING)"}),"\n",(0,l.jsxs)(e.p,{children:["\u4e94\u94fe\uff1a",(0,l.jsx)(e.em,{children:"linux \u7684 netfilter \u5728\u5185\u6838\u534f\u8bae\u6808\u7684\u5404\u4e2a\u91cd\u8981\u5173\u5361\u57cb\u4e0b\u4e86\u4e94\u4e2a\u94a9\u5b50\uff0c\u6bcf\u4e2a\u94a9\u5b50\u90fd\u5bf9\u5e94\u4e00\u7cfb\u5217\u89c4\u5219\uff0c\u4ee5\u94fe\u8868\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u6240\u4ee5\u79f0\u4e3a\u4e94\u94fe;"})," \u5f53\u7f51\u7edc\u5305\u5728\u534f\u8bae\u6808\u4e2d\u6d41\u8f6c\u5230\u8fd9\u4e9b\u5173\u5361\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u4f9d\u6b21\u6267\u884c\u5728\u8fd9\u4e9b\u94a9\u5b50\u4e0a\u6ce8\u518c\u7684\u5404\u79cd\u89c4\u5219\uff0c\u8fdb\u800c\u5b9e\u73b0\u5bf9\u7f51\u7edc\u5305\u7684\u5404\u79cd\u5904\u7406\u3002"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u611f\u89c9\u6709\u70b9\u7c7b\u4f3c\u4e8e\u524d\u7f6e\u4e2d\u95f4\u4ef6\uff0cnetfilter \u901a\u8fc7 hook \u51fd\u6570\u5728 PREROUTING\u3001INPUT\u3001FORWARD\u3001OUTPUT\u3001POSTROUTING \u8fd9\u4e94\u4e2a\u9636\u6bb5"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"raw \u7528\u4e8e\u914d\u7f6e\u6570\u636e\u5305\uff0craw \u4e2d\u7684\u6570\u636e\u5305\u4e0d\u4f1a\u88ab\u7cfb\u7edf\u8ddf\u8e2a\u3002\nfilter \u662f\u7528\u4e8e\u5b58\u653e\u6240\u6709\u4e0e\u9632\u706b\u5899\u76f8\u5173\u64cd\u4f5c\u7684\u9ed8\u8ba4\u8868\u3002\nnat \u7528\u4e8e \u7f51\u7edc\u5730\u5740\u8f6c\u6362 \uff08\u4f8b\u5982\uff1a\u7aef\u53e3\u8f6c\u53d1\uff09\u3002\nmangle \u7528\u4e8e\u5bf9\u7279\u5b9a\u6570\u636e\u5305\u7684\u4fee\u6539\uff08\u53c2\u8003\u635f\u574f\u6570\u636e\u5305 \uff09\u3002\nsecurity \u7528\u4e8e\u5f3a\u5236\u8bbf\u95ee\u63a7\u5236 \u7f51\u7edc\u89c4\u5219\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"iptables\u56db\u8868\u4e94\u94fe"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"raw \u8868         \u786e\u5b9a\u662f\u5426\u5bf9\u8be5\u6570\u636e\u5305\u8fdb\u884c\u72b6\u6001\u8ddf\u8e2a\nmangle \u8868      \u4e3a\u6570\u636e\u5305\u8bbe\u7f6e\u6807\u8bb0\nnat \u8868         \u4fee\u6539\u6570\u636e\u5305\u7684\u6e90\u3001\u76ee\u6807IP\u5730\u5740\u3001\u7aef\u53e3\nfilter \u8868      \u786e\u5b9a\u662f\u5426\u653e\u884c\u8be5\u6570\u636e\u5305\n\n---\n\nINPUT          \u5904\u7406\u5165\u7ad9\u6570\u636e\u5305\nOUTPUT         \u5904\u7406\u51fa\u7ad9\u6570\u636e\u5305\nFORWARD        \u5904\u7406\u8f6c\u53d1\u6570\u636e\u5305\nPOSTROUTING    \u5728\u8fdb\u884c\u8def\u7531\u9009\u62e9\u540e\u5904\u7406\u6570\u636e\u5305\nPREROUTING     \u5728\u8fdb\u884c\u8def\u7531\u9009\u62e9\u4e4b\u524d\u5904\u7406\u6570\u636e\u5305\n"})}),"\n",(0,l.jsx)(e.h2,{id:"processthread",children:"process/thread"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u5176\u5b9e\u6211\u611f\u89c9\u4eba\u4eec\u603b\u662f\u62ff\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u8fdb\u884c\u6bd4\u8f83\uff0c\u5176\u5b9e\u672c\u8eab\u5c31\u4e0d\u592a\u5bf9\u3002\u7ebf\u7a0b\u672c\u8eab\u5c31\u5c5e\u4e8e\u8fdb\u7a0b\uff0c\u5c31\u50cf\u662f\u4e24\u4e2a\u770b\u8d77\u6765\u4e00\u6478\u4e00\u6837\uff0c\u4f46\u662f\u53c8\u6709\u4ece\u5c5e\u5173\u7cfb\u7684\u4e1c\u897f\uff0c\u672c\u8eab\u5c31\u4e0d\u5e94\u8be5\u62ff\u51fa\u6765\u6bd4\u8f83\u3002\u6bd4\u5982\u8bf4\u516c\u53f8\u548c\u5b50\u516c\u53f8\uff0c\u90fd\u662f\u516c\u53f8\uff0c\u53ef\u80fd\u5177\u6709\u76f8\u4f3c\u7684\u7ec4\u7ec7\u7ed3\u6784\u3001\u5de5\u4f5c\u6d41\u7a0b\u3001\u5458\u5de5\u7c7b\u578b\u7b49\u7279\u5f81\u3002\u5b83\u4eec\u53ef\u80fd\u4f7f\u7528\u76f8\u540c\u7684\u6807\u5fd7\u3001\u54c1\u724c\u6216\u540d\u79f0\u3002\u4f46\u662f\u4e0d\u4f1a\u6709\u4eba\u62ff\u4e00\u4e2a\u5b50\u516c\u53f8\u548c\u6bcd\u516c\u53f8\u8fdb\u884c\u6bd4\u8f83\u3002\n\n---\n\n\u60a8\u63d0\u51fa\u7684\u89c2\u70b9\u662f\u6b63\u786e\u7684\u3002\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u672c\u8eab\u5c31\u5b58\u5728\u4ece\u5c5e\u5173\u7cfb\uff0c\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u90e8\u5206\u3002\u56e0\u6b64\uff0c\u5c06\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u8fdb\u884c\u76f4\u63a5\u6bd4\u8f83\u5e76\u4e0d\u5408\u9002\u3002\n\n\u8fdb\u7a0b\u662f\u4e00\u4e2a\u6267\u884c\u4e2d\u7684\u7a0b\u5e8f\u7684\u5b9e\u4f8b\uff0c\u62e5\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\u3002\u800c\u7ebf\u7a0b\u662f\u5728\u8fdb\u7a0b\u5185\u6267\u884c\u7684\u72ec\u7acb\u6267\u884c\u8def\u5f84\uff0c\u5171\u4eab\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\u3002\u7ebf\u7a0b\u662f\u7531\u8fdb\u7a0b\u521b\u5efa\u548c\u7ba1\u7406\u7684\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\u3002\n\n\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5728\u7cfb\u7edf\u4e2d\u626e\u6f14\u4e0d\u540c\u7684\u89d2\u8272\u548c\u76ee\u6807\u3002\u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5b83\u62e5\u6709\u72ec\u7acb\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u7cfb\u7edf\u8d44\u6e90\uff0c\u53ef\u4ee5\u8fd0\u884c\u72ec\u7acb\u7684\u7a0b\u5e8f\u3002\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u5185\u7684\u6267\u884c\u5355\u5143\uff0c\u5b83\u5171\u4eab\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u5e76\u53d1\u5730\u6267\u884c\u4efb\u52a1\u3002\n\n\u5c3d\u7ba1\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5728\u67d0\u4e9b\u65b9\u9762\u5177\u6709\u76f8\u4f3c\u7684\u7279\u5f81\uff0c\u4f46\u5b83\u4eec\u7684\u76ee\u7684\u548c\u4f7f\u7528\u573a\u666f\u662f\u4e0d\u540c\u7684\u3002\u8fdb\u7a0b\u4e4b\u95f4\u901a\u5e38\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\uff0c\u5b83\u4eec\u53ef\u4ee5\u72ec\u7acb\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\u3002\u800c\u7ebf\u7a0b\u662f\u4e3a\u4e86\u5b9e\u73b0\u5e76\u53d1\u6267\u884c\u548c\u5171\u4eab\u8d44\u6e90\u800c\u5b58\u5728\u7684\uff0c\u5b83\u4eec\u53ef\u4ee5\u534f\u540c\u5de5\u4f5c\u6765\u5b8c\u6210\u66f4\u590d\u6742\u7684\u4efb\u52a1\u3002\n\n\u56e0\u6b64\uff0c\u5bf9\u4e8e\u8fdb\u7a0b\u548c\u7ebf\u7a0b\uff0c\u6211\u4eec\u5e94\u8be5\u5c06\u5b83\u4eec\u89c6\u4e3a\u76f8\u4e92\u5173\u8054\u3001\u76f8\u4e92\u4f9d\u8d56\u7684\u6982\u5ff5\uff0c\u800c\u4e0d\u662f\u8fdb\u884c\u76f4\u63a5\u7684\u6bd4\u8f83\u3002\u5b83\u4eec\u5404\u81ea\u6709\u81ea\u5df1\u7684\u7279\u70b9\u548c\u4f18\u52bf\uff0c\u5728\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\u4e2d\u6709\u4e0d\u540c\u7684\u7528\u9014\u548c\u4ef7\u503c\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5",children:"\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5982\u679c CPU \u662f\u5de5\u4eba\uff0c\u8fdb\u7a0b\u662f\u5de5\u4eba\u8981\u505a\u7684\u5de5\u4f5c\uff0c\u80fd\u5426\u7ed9\u6211\u7528\u7c7b\u4f3c\u7684\u7c7b\u6bd4\uff0c\u8bb2\u89e3\u4e00\u4e0b\u51e0\u79cd\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\n\n- fifo\n- \u77ed\u8fdb\u7a0b\u4f18\u5148\u8c03\u5ea6\u7b97\u6cd5 SJPF\n- \u8f6e\u8be2\n- \u591a\u7ea7\u53cd\u9988\u961f\u5217\u7b97\u6cd5\n\n---\n\n\u5f53\u6211\u4eec\u5c06 CPU \u6bd4\u55bb\u4e3a\u5de5\u4eba\uff0c\u8fdb\u7a0b\u6bd4\u55bb\u4e3a\u5de5\u4eba\u8981\u505a\u7684\u5de5\u4f5c\u65f6\uff0c\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u53ef\u4ee5\u770b\u4f5c\u662f\u5206\u914d\u5de5\u4f5c\u7ed9\u5de5\u4eba\u7684\u65b9\u5f0f\u3002\u4e0b\u9762\u6211\u5c06\u7528\u7c7b\u4f3c\u7684\u7c7b\u6bd4\u6765\u89e3\u91ca\u51e0\u79cd\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u3002\n\n1. \u5148\u8fdb\u5148\u51fa (FIFO) \u8c03\u5ea6\u7b97\u6cd5\uff1a\n   \u8fd9\u79cd\u7b97\u6cd5\u7c7b\u4f3c\u4e8e\u6392\u961f\u4e70\u4e1c\u897f\u3002\u5047\u8bbe\u6709\u591a\u4e2a\u5de5\u4eba\u5728\u7b49\u5f85\u5de5\u4f5c\uff0c\u6309\u7167\u4ed6\u4eec\u5230\u8fbe\u7684\u987a\u5e8f\u4f9d\u6b21\u5206\u914d\u5de5\u4f5c\u7ed9\u4ed6\u4eec\u3002\u5373\u5148\u8fdb\u6765\u7684\u5de5\u4eba\u5148\u5206\u914d\u5de5\u4f5c\u3002\u8fd9\u79cd\u7b97\u6cd5\u7b80\u5355\u76f4\u63a5\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u957f\u65f6\u95f4\u7b49\u5f85\u7684\u5de5\u4eba\u88ab\u997f\u6b7b\u3002\n\n2. \u77ed\u8fdb\u7a0b\u4f18\u5148\u8c03\u5ea6\u7b97\u6cd5 (SJPF)\uff1a\n   \u8fd9\u79cd\u7b97\u6cd5\u7c7b\u4f3c\u4e8e\u6309\u7167\u5de5\u4f5c\u7684\u957f\u5ea6\u6765\u5b89\u6392\u5de5\u4f5c\u7ed9\u5de5\u4eba\u3002\u5de5\u4f5c\u8d8a\u77ed\u7684\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u5148\u5206\u914d\u77ed\u5de5\u4f5c\u7ed9\u5de5\u4eba\uff0c\u518d\u5206\u914d\u957f\u5de5\u4f5c\u7ed9\u5de5\u4eba\u3002\u8fd9\u79cd\u7b97\u6cd5\u53ef\u4ee5\u6700\u5927\u7a0b\u5ea6\u5730\u51cf\u5c11\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u957f\u5de5\u4f5c\u7b49\u5f85\u65f6\u95f4\u8fc7\u957f\u3002\n\n3. \u8f6e\u8be2\u8c03\u5ea6\u7b97\u6cd5\uff1a\n   \u8fd9\u79cd\u7b97\u6cd5\u7c7b\u4f3c\u4e8e\u8f6e\u6d41\u5206\u914d\u5de5\u4f5c\u7ed9\u5de5\u4eba\u3002\u5047\u8bbe\u6709\u591a\u4e2a\u5de5\u4eba\uff0c\u6bcf\u4e2a\u5de5\u4eba\u6309\u7167\u987a\u5e8f\u6267\u884c\u4e00\u5b9a\u65f6\u95f4\u7684\u5de5\u4f5c\uff0c\u7136\u540e\u8f6e\u5230\u4e0b\u4e00\u4e2a\u5de5\u4eba\u3002\u8fd9\u79cd\u7b97\u6cd5\u7b80\u5355\u516c\u5e73\uff0c\u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5de5\u4f5c\u6267\u884c\u65f6\u95f4\u8f83\u957f\u7684\u5de5\u4eba\u7b49\u5f85\u65f6\u95f4\u8f83\u957f\u3002\n\n4. \u591a\u7ea7\u53cd\u9988\u961f\u5217\u7b97\u6cd5\uff08MLFQ\uff09\uff1a\n   Multi level Feedback Queue\n   \u8fd9\u79cd\u7b97\u6cd5\u7c7b\u4f3c\u4e8e\u6309\u7167\u5de5\u4eba\u7684\u4f18\u5148\u7ea7\u548c\u5b8c\u6210\u60c5\u51b5\u6765\u5206\u914d\u5de5\u4f5c\u7ed9\u5de5\u4eba\u3002\u5047\u8bbe\u6709\u591a\u4e2a\u5de5\u4eba\u548c\u591a\u4e2a\u4f18\u5148\u7ea7\u961f\u5217\uff0c\u5de5\u4f5c\u9996\u5148\u5206\u914d\u7ed9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u5de5\u4eba\uff0c\u5982\u679c\u5de5\u4f5c\u6ca1\u6709\u5b8c\u6210\uff0c\u5219\u5c06\u5de5\u4f5c\u653e\u5165\u4e0b\u4e00\u7ea7\u961f\u5217\u4e2d\u7b49\u5f85\u3002\u5982\u679c\u5de5\u4eba\u5b8c\u6210\u4e86\u5de5\u4f5c\uff0c\u5219\u5206\u914d\u4e0b\u4e00\u4e2a\u4f18\u5148\u7ea7\u8f83\u9ad8\u7684\u5de5\u4f5c\u7ed9\u4ed6\u3002\u8fd9\u79cd\u7b97\u6cd5\u53ef\u4ee5\u6839\u636e\u5de5\u4eba\u7684\u8868\u73b0\u52a8\u6001\u8c03\u6574\u5de5\u4f5c\u7684\u4f18\u5148\u7ea7\uff0c\u4ee5\u6700\u5927\u7a0b\u5ea6\u5730\u63d0\u9ad8\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u548c\u54cd\u5e94\u65f6\u95f4\u3002\n\n\u5e0c\u671b\u4ee5\u4e0a\u7684\u7c7b\u6bd4\u80fd\u591f\u5e2e\u52a9\u4f60\u7406\u89e3\u8fd9\u51e0\u79cd\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u3002\u5982\u679c\u6709\u66f4\u591a\u95ee\u9898\uff0c\u6b22\u8fce\u7ee7\u7eed\u63d0\u95ee\u3002\n\n---\n\n\u90a3\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u548c\u7ebf\u7a0b\u8c03\u5ea6\u6216\u8005\u534f\u7a0b\u8c03\u5ea6\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\u6bd4\u5982\u8bf4\uff0c\u50cf golang \u534f\u7a0b\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0cgolang \u534f\u7a0b\u662f\u57fa\u4e8e\u534f\u4f5c\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u7c7b\u4f3c\u5176\u4e2d\u7684\u54ea\u79cd\u8c03\u5ea6\u65b9\u6cd5\u5462\uff1f\n\n---\n\n\u8fdb\u7a0b\u8c03\u5ea6\u3001\u7ebf\u7a0b\u8c03\u5ea6\u548c\u534f\u7a0b\u8c03\u5ea6\u662f\u4e09\u79cd\u4e0d\u540c\u5c42\u6b21\u7684\u8c03\u5ea6\u65b9\u5f0f\uff0c\u5b83\u4eec\u6709\u4e00\u4e9b\u533a\u522b\u548c\u5171\u540c\u70b9\u3002\n\n1. \u8fdb\u7a0b\u8c03\u5ea6\uff1a\n   \u8fdb\u7a0b\u8c03\u5ea6\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u7528\u4e8e\u7ba1\u7406\u548c\u5206\u914d CPU \u8d44\u6e90\u7ed9\u4e0d\u540c\u7684\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u662f\u6839\u636e\u8fdb\u7a0b\u7684\u5c5e\u6027\u548c\u72b6\u6001\u6765\u51b3\u5b9a\u54ea\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u83b7\u5f97 CPU \u7684\u4f7f\u7528\u6743\uff0c\u4ee5\u53ca\u5982\u4f55\u5206\u914d CPU \u7684\u65f6\u95f4\u7247\u3002\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u901a\u5e38\u6d89\u53ca\u5230\u8fdb\u7a0b\u7684\u521b\u5efa\u3001\u9500\u6bc1\u3001\u5207\u6362\u3001\u4f18\u5148\u7ea7\u7b49\u7ba1\u7406\u3002\n\n2. \u7ebf\u7a0b\u8c03\u5ea6\uff1a\n   \u7ebf\u7a0b\u8c03\u5ea6\u662f\u5728\u8fdb\u7a0b\u5185\u90e8\u8fdb\u884c\u7684\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u7684\u8d44\u6e90\u3002\u7ebf\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u662f\u51b3\u5b9a\u54ea\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u83b7\u5f97 CPU \u7684\u4f7f\u7528\u6743\uff0c\u4ee5\u53ca\u5982\u4f55\u5206\u914d CPU \u7684\u65f6\u95f4\u7247\u3002\u7ebf\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u901a\u5e38\u6d89\u53ca\u5230\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u9500\u6bc1\u3001\u5207\u6362\u3001\u4f18\u5148\u7ea7\u7b49\u7ba1\u7406\u3002\u4e0e\u8fdb\u7a0b\u8c03\u5ea6\u76f8\u6bd4\uff0c\u7ebf\u7a0b\u8c03\u5ea6\u66f4\u8f7b\u91cf\u7ea7\uff0c\u5f00\u9500\u66f4\u5c0f\u3002\n\n3. \u534f\u7a0b\u8c03\u5ea6\uff1a\n   \u534f\u7a0b\u8c03\u5ea6\u662f\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\u8fdb\u884c\u7684\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u8c03\u5ea6\u673a\u5236\u3002\u534f\u7a0b\u662f\u7531\u7a0b\u5e8f\u5458\u63a7\u5236\u7684\uff0c\u53ef\u4ee5\u624b\u52a8\u5728\u4ee3\u7801\u4e2d\u5207\u6362\u6267\u884c\u7684\u4e0a\u4e0b\u6587\u3002\u534f\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u662f\u7a0b\u5e8f\u5458\u81ea\u5df1\u5b9e\u73b0\u7684\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u8c03\u5ea6\uff0c\u4f8b\u5982\u57fa\u4e8e\u4f18\u5148\u7ea7\u3001\u8f6e\u8be2\u7b49\u65b9\u5f0f\u3002\u534f\u7a0b\u8c03\u5ea6\u901a\u5e38\u7528\u4e8e\u5b9e\u73b0\u9ad8\u6548\u7684\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\uff0c\u5982 Go \u8bed\u8a00\u4e2d\u7684\u534f\u7a0b\u8c03\u5ea6\u5668\u3002\n\n\u5728 Go \u8bed\u8a00\u4e2d\uff0c\u534f\u7a0b\u7684\u8c03\u5ea6\u7b97\u6cd5\u662f\u57fa\u4e8e\u534f\u4f5c\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\u3002\u8fd9\u610f\u5473\u7740\u534f\u7a0b\u5728\u9047\u5230 IO \u64cd\u4f5c\u6216\u8005\u4e3b\u52a8\u8ba9\u51fa CPU \u65f6\uff0c\u4f1a\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u8c03\u5ea6\u5668\uff0c\u7136\u540e\u8c03\u5ea6\u5668\u51b3\u5b9a\u5c06 CPU \u5206\u914d\u7ed9\u54ea\u4e2a\u53ef\u8fd0\u884c\u7684\u534f\u7a0b\u3002\u8fd9\u7c7b\u4f3c\u4e8e\u77ed\u8fdb\u7a0b\u4f18\u5148\u8c03\u5ea6\u7b97\u6cd5 (SJPF)\uff0c\u6839\u636e\u534f\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\u548c\u7b49\u5f85\u65f6\u95f4\u6765\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8fd0\u884c\u7684\u534f\u7a0b\u3002\u4e0d\u540c\u7684\u662f\uff0cGo \u8bed\u8a00\u4e2d\u7684\u534f\u7a0b\u8c03\u5ea6\u5668\u662f\u975e\u62a2\u5360\u5f0f\u7684\uff0c\u53ea\u6709\u5728\u534f\u7a0b\u4e3b\u52a8\u8ba9\u51fa CPU \u65f6\u624d\u4f1a\u53d1\u751f\u5207\u6362\uff0c\u8fd9\u51cf\u5c11\u4e86\u5207\u6362\u7684\u5f00\u9500\u3002\n\n\u5e0c\u671b\u4ee5\u4e0a\u89e3\u7b54\u80fd\u591f\u5e2e\u52a9\u4f60\u7406\u89e3\u8fdb\u7a0b\u8c03\u5ea6\u3001\u7ebf\u7a0b\u8c03\u5ea6\u548c\u534f\u7a0b\u8c03\u5ea6\u7684\u533a\u522b\u548c\u5171\u540c\u70b9\u3002\u5982\u6709\u66f4\u591a\u95ee\u9898\uff0c\u8bf7\u968f\u65f6\u63d0\u95ee\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"linux kernel\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u6709\u54ea\u4e9b\uff1f\n\n---\n\nLinux\u5185\u6838\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a\n\n1. Completely Fair Scheduler (CFS)\uff1aCFS\u662fLinux\u5185\u6838\u9ed8\u8ba4\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5f15\u5165\u4e86\u7ea2\u9ed1\u6811\u6570\u636e\u7ed3\u6784\u6765\u7ba1\u7406\u8fdb\u7a0b\u7684\u8c03\u5ea6\u987a\u5e8f\u3002CFS\u4ee5\u516c\u5e73\u7684\u65b9\u5f0f\u5206\u914dCPU\u65f6\u95f4\uff0c\u901a\u8fc7\u52a8\u6001\u8c03\u6574\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\uff08vruntime\uff09\u6765\u4fdd\u8bc1\u6bcf\u4e2a\u8fdb\u7a0b\u5728\u4e00\u4e2a\u65f6\u95f4\u6bb5\u5185\u83b7\u5f97\u76f8\u540c\u7684CPU\u65f6\u95f4\u3002\n\n2. Real-Time Scheduler\uff1aLinux\u5185\u6838\u8fd8\u63d0\u4f9b\u4e86\u591a\u79cd\u5b9e\u65f6\u8c03\u5ea6\u5668\uff0c\u4e3b\u8981\u5305\u62ec\u5b9e\u65f6\u5148\u8fdb\u5148\u51fa\u8c03\u5ea6\u5668\uff08FIFO\uff09\u548c\u5b9e\u65f6\u5faa\u73af\u8c03\u5ea6\u5668\uff08Round-Robin\uff09\u3002\u8fd9\u4e9b\u8c03\u5ea6\u5668\u7528\u4e8e\u6ee1\u8db3\u5b9e\u65f6\u4efb\u52a1\u7684\u8981\u6c42\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u548c\u4f18\u5148\u7ea7\u6765\u5b9e\u73b0\u3002\n\n3. Deadline Scheduler\uff1a\u622a\u6b62\u65f6\u95f4\u8c03\u5ea6\u5668\uff08Deadline Scheduler\uff09\u662f\u4e00\u79cd\u9488\u5bf9\u5b9e\u65f6\u4efb\u52a1\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5141\u8bb8\u4efb\u52a1\u6307\u5b9a\u622a\u6b62\u65f6\u95f4\u548c\u76f8\u5bf9\u4f18\u5148\u7ea7\u3002\u8be5\u8c03\u5ea6\u5668\u6839\u636e\u4efb\u52a1\u7684\u622a\u6b62\u65f6\u95f4\u6765\u5b89\u6392\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f\uff0c\u4ee5\u786e\u4fdd\u4efb\u52a1\u80fd\u591f\u5728\u622a\u6b62\u65f6\u95f4\u4e4b\u524d\u5b8c\u6210\u3002\n\n4. O(1) Scheduler\uff1aO(1)\u8c03\u5ea6\u5668\u662fLinux\u5185\u6838\u65e9\u671f\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0c\u901a\u8fc7\u6570\u636e\u7ed3\u6784\u6570\u7ec4\u6765\u7ba1\u7406\u8fdb\u7a0b\u7684\u8c03\u5ea6\u987a\u5e8f\u3002\u7136\u800c\uff0c\u4eceLinux 2.6\u7248\u672c\u5f00\u59cb\uff0c\u88abCFS\u6240\u53d6\u4ee3\uff0c\u56e0\u4e3aCFS\u66f4\u52a0\u516c\u5e73\u548c\u9ad8\u6548\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4ee5\u4e0a\u662fLinux\u5185\u6838\u4e2d\u5e38\u89c1\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\uff0c\u4f46\u5177\u4f53\u7684\u5b9e\u73b0\u548c\u8c03\u5ea6\u7b56\u7565\u53ef\u80fd\u4f1a\u56e0Linux\u5185\u6838\u7248\u672c\u548c\u914d\u7f6e\u800c\u6709\u6240\u4e0d\u540c\u3002\n\n---\n\n\u90a3SJPF, FIFO, MLFQ, RR\u8fd9\u4e9b\u5462\uff1f\n\n---\n\n\u6211\u4e4b\u524d\u63d0\u5230\u7684\u8c03\u5ea6\u7b97\u6cd5\u662fLinux\u5185\u6838\u4e2d\u5e38\u89c1\u7684\u8fdb\u7a0b\u8c03\u5ea6\u7b97\u6cd5\u3002\u800cSJPF\uff08Shortest Job First\uff09\u3001FIFO\uff08First-In, First-Out\uff09\u3001MLFQ\uff08Multi-Level Feedback Queue\uff09\u548cRR\uff08Round-Robin\uff09\u8fd9\u4e9b\u7b97\u6cd5\u901a\u5e38\u88ab\u7528\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u8bfe\u7a0b\u548c\u6a21\u62df\u5668\u4e2d\uff0c\u4f46\u4e0d\u662fLinux\u5185\u6838\u4e2d\u7684\u9ed8\u8ba4\u8c03\u5ea6\u7b97\u6cd5\u3002\n\n\u4e0b\u9762\u662f\u5bf9\u8fd9\u4e9b\u8c03\u5ea6\u7b97\u6cd5\u7684\u7b80\u8981\u8bf4\u660e\uff1a\n\n1. SJPF\uff08Shortest Job First\uff09\uff1a\u77ed\u4f5c\u4e1a\u4f18\u5148\u8c03\u5ea6\u7b97\u6cd5\u6309\u7167\u4f5c\u4e1a\u7684\u6267\u884c\u65f6\u95f4\u6765\u5b89\u6392\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f\u3002\u5b83\u5047\u8bbe\u8f83\u77ed\u7684\u4f5c\u4e1a\u9700\u8981\u8f83\u5c11\u7684\u65f6\u95f4\u6765\u5b8c\u6210\uff0c\u5e76\u4e14\u4f18\u5148\u7ea7\u66f4\u9ad8\u3002\u8fd9\u79cd\u7b97\u6cd5\u53ef\u4ee5\u6700\u5c0f\u5316\u5e73\u5747\u7b49\u5f85\u65f6\u95f4\uff0c\u4f46\u53ef\u80fd\u5bfc\u81f4\u957f\u4f5c\u4e1a\u957f\u65f6\u95f4\u7b49\u5f85\u3002\n\n2. FIFO\uff08First-In, First-Out\uff09\uff1a\u5148\u8fdb\u5148\u51fa\u8c03\u5ea6\u7b97\u6cd5\u6309\u7167\u4efb\u52a1\u8fdb\u5165\u7cfb\u7edf\u7684\u987a\u5e8f\u6765\u5b89\u6392\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f\u3002\u5b83\u7b80\u5355\u76f4\u89c2\uff0c\u4f46\u53ef\u80fd\u5bfc\u81f4\u957f\u4f5c\u4e1a\u5360\u7528CPU\u65f6\u95f4\u8fc7\u957f\uff0c\u9020\u6210\u5176\u4ed6\u4efb\u52a1\u7684\u7b49\u5f85\u65f6\u95f4\u589e\u52a0\u3002\n\n3. MLFQ\uff08Multi-Level Feedback Queue\uff09\uff1a\u591a\u7ea7\u53cd\u9988\u961f\u5217\u8c03\u5ea6\u7b97\u6cd5\u5c06\u8fdb\u7a0b\u5212\u5206\u4e3a\u591a\u4e2a\u961f\u5217\uff0c\u6bcf\u4e2a\u961f\u5217\u5177\u6709\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\u3002\u4efb\u52a1\u5728\u6700\u9ad8\u4f18\u5148\u7ea7\u961f\u5217\u4e2d\u6267\u884c\uff0c\u5982\u679c\u4efb\u52a1\u8017\u65f6\u8f83\u957f\uff0c\u5219\u4f1a\u9010\u6e10\u964d\u4f4e\u5176\u4f18\u5148\u7ea7\uff0c\u5e76\u5728\u66f4\u4f4e\u4f18\u5148\u7ea7\u7684\u961f\u5217\u4e2d\u6267\u884c\u3002\u8fd9\u79cd\u7b97\u6cd5\u53ef\u4ee5\u5728\u77ed\u4f5c\u4e1a\u4e0a\u83b7\u5f97\u8f83\u4f4e\u7684\u54cd\u5e94\u65f6\u95f4\uff0c\u540c\u65f6\u4e5f\u5141\u8bb8\u957f\u4f5c\u4e1a\u88ab\u6267\u884c\u3002\n\n4. RR\uff08Round-Robin\uff09\uff1a\u65f6\u95f4\u7247\u8f6e\u8f6c\u8c03\u5ea6\u7b97\u6cd5\u5c06CPU\u65f6\u95f4\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u65f6\u95f4\u7247\uff0c\u5e76\u6309\u7167\u8f6e\u8f6c\u7684\u65b9\u5f0f\u5206\u914d\u7ed9\u4efb\u52a1\u3002\u6bcf\u4e2a\u4efb\u52a1\u5728\u4e00\u4e2a\u65f6\u95f4\u7247\u5185\u6267\u884c\uff0c\u5982\u679c\u6ca1\u6709\u5b8c\u6210\uff0c\u5219\u88ab\u79fb\u5230\u961f\u5217\u7684\u672b\u5c3e\u7b49\u5f85\u4e0b\u4e00\u8f6e\u8c03\u5ea6\u3002\u8fd9\u79cd\u7b97\u6cd5\u786e\u4fdd\u4e86\u4efb\u52a1\u7684\u516c\u5e73\u5171\u4eabCPU\u65f6\u95f4\uff0c\u5e76\u4e14\u9002\u7528\u4e8e\u65f6\u95f4\u8981\u6c42\u4e0d\u592a\u4e25\u683c\u7684\u4efb\u52a1\u3002\n\n\u8fd9\u4e9b\u7b97\u6cd5\u5728\u4e0d\u540c\u7684\u573a\u666f\u548c\u9700\u6c42\u4e0b\u6709\u4e0d\u540c\u7684\u9002\u7528\u6027\u548c\u6027\u80fd\u7279\u70b9\u3002\u5728\u5b9e\u9645\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u901a\u5e38\u4f1a\u7ed3\u5408\u591a\u79cd\u7b97\u6cd5\u548c\u7b56\u7565\u6765\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u8fdb\u7a0b\u8c03\u5ea6\u673a\u5236\u3002\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7ebf\u7a0b",children:"\u7ebf\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4ec0\u4e48\u662f\u7ebf\u7a0b\u5b89\u5168\uff1f\n\n---\n\n\u7ebf\u7a0b\u5b89\u5168\u662f\u6307\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\u548c\u64cd\u4f5c\u80fd\u591f\u4fdd\u8bc1\u6b63\u786e\u6027\u548c\u4e00\u81f4\u6027\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4\u6570\u636e\u7684\u6df7\u4e71\u6216\u4e0d\u4e00\u81f4\u3002\n\n\u5728\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u540c\u65f6\u8bbf\u95ee\u548c\u4fee\u6539\u5171\u4eab\u7684\u6570\u636e\u6216\u8d44\u6e90\uff0c\u5982\u679c\u6ca1\u6709\u9002\u5f53\u7684\u540c\u6b65\u673a\u5236\u6216\u4fdd\u62a4\u63aa\u65bd\uff0c\u5c31\u53ef\u80fd\u51fa\u73b0\u7ade\u6001\u6761\u4ef6\uff08Race Condition\uff09\u548c\u6570\u636e\u7ade\u4e89\uff08Data Race\uff09\u7b49\u95ee\u9898\u3002\u8fd9\u4e9b\u95ee\u9898\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u9519\u4e71\u3001\u8ba1\u7b97\u9519\u8bef\u3001\u5185\u5b58\u6cc4\u6f0f\u7b49\u4e25\u91cd\u7684\u540e\u679c\u3002\n\n\u4e3a\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c\u9700\u8981\u4f7f\u7528\u9002\u5f53\u7684\u5e76\u53d1\u63a7\u5236\u673a\u5236\uff0c\u5982\u4e92\u65a5\u9501\uff08Mutex\uff09\u3001\u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09\u3001\u539f\u5b50\u64cd\u4f5c\u7b49\uff0c\u6765\u4fdd\u8bc1\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u5bf9\u5171\u4eab\u8d44\u6e90\u8fdb\u884c\u4e92\u65a5\u8bbf\u95ee\u3002\u7ebf\u7a0b\u5b89\u5168\u7684\u4ee3\u7801\u80fd\u591f\u6b63\u786e\u5730\u5904\u7406\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u60c5\u51b5\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u6b63\u786e\u6027\u3002\n\n\u7f16\u5199\u7ebf\u7a0b\u5b89\u5168\u7684\u4ee3\u7801\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a\n1. \u4e92\u65a5\u8bbf\u95ee\uff1a\u5bf9\u4e8e\u5171\u4eab\u8d44\u6e90\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u9700\u8981\u4f7f\u7528\u4e92\u65a5\u9501\u7b49\u540c\u6b65\u673a\u5236\u6765\u4fdd\u8bc1\u5728\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u5176\u8fdb\u884c\u8bbf\u95ee\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u7ade\u6001\u6761\u4ef6\u548c\u6570\u636e\u7ade\u4e89\u3002\n2. \u539f\u5b50\u64cd\u4f5c\uff1a\u5bf9\u4e8e\u4e00\u4e9b\u57fa\u672c\u64cd\u4f5c\uff0c\u5982\u8bfb\u53d6\u548c\u4fee\u6539\u4e00\u4e2a\u53d8\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c\u6765\u4fdd\u8bc1\u5176\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\u907f\u514d\u5e76\u53d1\u8bfb\u5199\u5e26\u6765\u7684\u95ee\u9898\u3002\n3. \u6570\u636e\u5171\u4eab\uff1a\u9700\u8981\u6ce8\u610f\u5171\u4eab\u8d44\u6e90\u7684\u53ef\u89c1\u6027\uff0c\u786e\u4fdd\u5728\u4e00\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u8d44\u6e90\u8fdb\u884c\u4fee\u6539\u540e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u80fd\u591f\u53ca\u65f6\u770b\u5230\u8fd9\u4e9b\u4fee\u6539\u3002\n4. \u6761\u4ef6\u7ade\u4e89\uff1a\u5728\u4f7f\u7528\u6761\u4ef6\u53d8\u91cf\u7b49\u7b49\u5f85 - \u901a\u77e5\u673a\u5236\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u6761\u4ef6\u7ade\u4e89\u7684\u95ee\u9898\uff0c\u786e\u4fdd\u7b49\u5f85\u548c\u901a\u77e5\u7684\u6b63\u786e\u987a\u5e8f\u548c\u6761\u4ef6\u3002\n\n\u603b\u800c\u8a00\u4e4b\uff0c\u7ebf\u7a0b\u5b89\u5168\u662f\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u4fdd\u8bc1\u5171\u4eab\u8d44\u6e90\u6b63\u786e\u8bbf\u95ee\u7684\u4e00\u79cd\u7f16\u7a0b\u65b9\u5f0f\uff0c\u901a\u8fc7\u9002\u5f53\u7684\u540c\u6b65\u673a\u5236\u548c\u4fdd\u62a4\u63aa\u65bd\uff0c\u53ef\u4ee5\u907f\u514d\u7ade\u6001\u6761\u4ef6\u548c\u6570\u636e\u7ade\u4e89\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u6b63\u786e\u6027\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\uff0c\u600e\u4e48\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff1f\n\n---\n\n...\n\n---\n\n\u6211\u8bf4\u8bf4\u6211\u7684\u770b\u6cd5\uff0c\u60a8\u770b\u6211\u7406\u89e3\u7684\u5bf9\u5417\uff1f\u6211\u8ba4\u4e3a\u5b9e\u9645\u4e0a\u5206\u5e03\u5f0f\u73af\u5883\u7684\u7ebf\u7a0b\u5b89\u5168\uff0c\u5e94\u8be5\u62c6\u6210\u4e24\u4e2a\u95ee\u9898\uff0c\u5206\u5e03\u5f0f\u73af\u5883\u7684\u591a\u8282\u70b9\u95ee\u9898\uff0c\u4ee5\u53ca\u5355\u673a\u4e0b\u7684\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u4e0d\u5e94\u8be5\u6df7\u4e3a\u4e00\u8c08\u3002\u5206\u5e03\u5f0f\u73af\u5883\u7684\u6570\u636e\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u5206\u5e03\u5f0f\u4e8b\u52a1\u3001\u5206\u5e03\u5f0f\u9501\u89e3\u51b3\u3002\u5355\u673a\u4e0b\u7684\u7ebf\u7a0b\u5b89\u5168\u5219\u662f\u901a\u8fc7 mutex \u4e4b\u7c7b\u7684\u9501\u673a\u5236\u5b9e\u73b0\u3002\n\n---\n\n\u60a8\u7684\u7406\u89e3\u662f\u6b63\u786e\u7684\u3002\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\uff0c\u786e\u5b9e\u9700\u8981\u5c06\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u62c6\u89e3\u4e3a\u4e24\u4e2a\u5b50\u95ee\u9898\uff1a\u591a\u8282\u70b9\u4e4b\u95f4\u7684\u5e76\u53d1\u8bbf\u95ee\u95ee\u9898\u548c\u5355\u8282\u70b9\u5185\u90e8\u7684\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002\n\n\u5bf9\u4e8e\u591a\u8282\u70b9\u4e4b\u95f4\u7684\u5e76\u53d1\u8bbf\u95ee\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u5206\u5e03\u5f0f\u4e8b\u52a1\u548c\u5206\u5e03\u5f0f\u9501\u6765\u89e3\u51b3\u3002\u5206\u5e03\u5f0f\u4e8b\u52a1\u53ef\u4ee5\u4fdd\u8bc1\u591a\u8282\u70b9\u4e4b\u95f4\u7684\u64cd\u4f5c\u5177\u6709\u539f\u5b50\u6027\u548c\u4e00\u81f4\u6027\uff0c\u800c\u5206\u5e03\u5f0f\u9501\u53ef\u4ee5\u786e\u4fdd\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\u80fd\u591f\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u4ece\u800c\u907f\u514d\u5e76\u53d1\u51b2\u7a81\u3002\n\n\u800c\u5728\u5355\u8282\u70b9\u5185\u90e8\u7684\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u9501\u673a\u5236\uff08\u5982\u4e92\u65a5\u9501\u3001\u8bfb\u5199\u9501\u7b49\uff09\u6765\u5b9e\u73b0\u3002\u8fd9\u4e9b\u9501\u673a\u5236\u53ef\u4ee5\u4fdd\u8bc1\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u8fdb\u5165\u4e34\u754c\u533a\uff0c\u4ece\u800c\u907f\u514d\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\u7684\u7ade\u6001\u6761\u4ef6\u548c\u6570\u636e\u4e0d\u4e00\u81f4\u95ee\u9898\u3002\n\n\u901a\u8fc7\u5c06\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u62c6\u89e3\u4e3a\u591a\u8282\u70b9\u95ee\u9898\u548c\u5355\u8282\u70b9\u95ee\u9898\uff0c\u5e76\u91c7\u53d6\u76f8\u5e94\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u4fdd\u62a4\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u5b89\u5168\u6027\uff0c\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\u5b9e\u73b0\u7ebf\u7a0b\u5b89\u5168\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\n\u201c\u7ebf\u7a0b\u95f4\u540c\u6b65\u201d\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f\n\n\n---\n\n\u5728\u7ebf\u7a0b\u95f4\u5b9e\u73b0\u540c\u6b65\u7684\u5e38\u89c1\u65b9\u6cd5\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a\n\n1. \u4e92\u65a5\u9501\uff08Mutex\uff09\uff1a\u4e92\u65a5\u9501\u662f\u6700\u5e38\u7528\u7684\u540c\u6b65\u673a\u5236\u4e4b\u4e00\u3002\u5b83\u53ef\u4ee5\u786e\u4fdd\u5728\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u5f97\u4e86\u4e92\u65a5\u9501\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5c31\u9700\u8981\u7b49\u5f85\u9501\u7684\u91ca\u653e\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u3002\n\n2. \u4fe1\u53f7\u91cf\uff08Semaphore\uff09\uff1a\u4fe1\u53f7\u91cf\u662f\u4e00\u79cd\u8ba1\u6570\u5668\uff0c\u7528\u4e8e\u63a7\u5236\u540c\u65f6\u8bbf\u95ee\u67d0\u4e2a\u5171\u4eab\u8d44\u6e90\u7684\u7ebf\u7a0b\u6570\u91cf\u3002\u5b83\u53ef\u4ee5\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u4f46\u9700\u8981\u5728\u8bbf\u95ee\u524d\u5148\u83b7\u53d6\u4fe1\u53f7\u91cf\uff0c\u5e76\u5728\u8bbf\u95ee\u7ed3\u675f\u540e\u91ca\u653e\u4fe1\u53f7\u91cf\u3002\n\n3. \u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09\uff1a\u6761\u4ef6\u53d8\u91cf\u7528\u4e8e\u5728\u7ebf\u7a0b\u4e4b\u95f4\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\u548c\u901a\u4fe1\u3002\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6761\u4ef6\u53d8\u91cf\u7b49\u5f85\u67d0\u4e2a\u6761\u4ef6\u6ee1\u8db3\uff0c\u800c\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u4fe1\u53f7\u6765\u5524\u9192\u7b49\u5f85\u7684\u7ebf\u7a0b\u3002\n\n4. \u8bfb\u5199\u9501\uff08Read-Write Lock\uff09\uff1a\u8bfb\u5199\u9501\u53ef\u4ee5\u540c\u65f6\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u8d44\u6e90\u8fdb\u884c\u8bfb\u64cd\u4f5c\uff0c\u4f46\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5199\u64cd\u4f5c\u3002\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u5e76\u53d1\u6027\u80fd\uff0c\u9002\u7528\u4e8e\u8bfb\u64cd\u4f5c\u9891\u7e41\u4f46\u5199\u64cd\u4f5c\u8f83\u5c11\u7684\u573a\u666f\u3002\n\n5. \u5c4f\u969c\uff08Barrier\uff09\uff1a\u5c4f\u969c\u7528\u4e8e\u786e\u4fdd\u4e00\u7ec4\u7ebf\u7a0b\u5728\u67d0\u4e2a\u70b9\u4e0a\u540c\u6b65\u3002\u5f53\u6240\u6709\u7ebf\u7a0b\u90fd\u5230\u8fbe\u5c4f\u969c\u70b9\u65f6\uff0c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u64cd\u4f5c\u3002\n\n6. \u4e8b\u4ef6\uff08Event\uff09\uff1a\u4e8b\u4ef6\u662f\u4e00\u79cd\u540c\u6b65\u673a\u5236\uff0c\u53ef\u4ee5\u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\u3002\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u5e76\u5728\u4e8b\u4ef6\u53d1\u751f\u540e\u7ee7\u7eed\u6267\u884c\u3002\n\n\u4ee5\u4e0a\u662f\u5e38\u89c1\u7684\u7ebf\u7a0b\u540c\u6b65\u65b9\u6cd5\uff0c\u4e0d\u540c\u7684\u65b9\u6cd5\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u573a\u666f\u548c\u9700\u6c42\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u9700\u8981\u6839\u636e\u5177\u4f53\u60c5\u51b5\u9009\u62e9\u5408\u9002\u7684\u540c\u6b65\u673a\u5236\u3002\n\n\n---\n\n\u8fd9\u4e9b\u4e0d\u90fd\u662f\u591a\u7ebf\u7a0b\u5e76\u53d1\u7684\u65b9\u6cd5\u5417\uff1f\n\n---\n\n\u662f\u7684\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u591a\u7ebf\u7a0b\u5e76\u53d1\u65f6\u7684\u7ebf\u7a0b\u95f4\u540c\u6b65\u3002\u5728\u591a\u7ebf\u7a0b\u5e76\u53d1\u7684\u60c5\u51b5\u4e0b\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u5982\u679c\u6ca1\u6709\u5408\u9002\u7684\u540c\u6b65\u673a\u5236\uff0c\u5c31\u4f1a\u51fa\u73b0\u6570\u636e\u7ade\u4e89\u548c\u4e0d\u786e\u5b9a\u7684\u7ed3\u679c\u3002\n\n\u4e92\u65a5\u9501\u3001\u4fe1\u53f7\u91cf\u3001\u6761\u4ef6\u53d8\u91cf\u3001\u8bfb\u5199\u9501\u3001\u5c4f\u969c\u548c\u4e8b\u4ef6\u7b49\u65b9\u6cd5\uff0c\u90fd\u662f\u4e3a\u4e86\u4fdd\u8bc1\u591a\u4e2a\u7ebf\u7a0b\u80fd\u591f\u6309\u7167\u4e00\u5b9a\u7684\u987a\u5e8f\u548c\u89c4\u5219\u8fdb\u884c\u6267\u884c\uff0c\u907f\u514d\u6570\u636e\u7ade\u4e89\u548c\u4e0d\u4e00\u81f4\u7684\u7ed3\u679c\u3002\n\n\u4e92\u65a5\u9501\u548c\u4fe1\u53f7\u91cf\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u4e92\u65a5\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u4fdd\u8bc1\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u8bbf\u95ee\u3002\u6761\u4ef6\u53d8\u91cf\u53ef\u4ee5\u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u6761\u4ef6\u7b49\u5f85\u548c\u901a\u77e5\u3002\u8bfb\u5199\u9501\u53ef\u4ee5\u63d0\u4f9b\u66f4\u9ad8\u7684\u5e76\u53d1\u6027\u80fd\uff0c\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u53d6\u5171\u4eab\u8d44\u6e90\uff0c\u4f46\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5199\u64cd\u4f5c\u3002\u5c4f\u969c\u53ef\u4ee5\u7528\u4e8e\u786e\u4fdd\u591a\u4e2a\u7ebf\u7a0b\u5728\u67d0\u4e2a\u70b9\u4e0a\u540c\u6b65\u6267\u884c\u3002\u4e8b\u4ef6\u53ef\u4ee5\u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u901a\u4fe1\u548c\u540c\u6b65\u3002\n\n\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u662f\u591a\u7ebf\u7a0b\u5e76\u53d1\u7f16\u7a0b\u4e2d\u5e38\u7528\u7684\u540c\u6b65\u673a\u5236\uff0c\u7528\u4e8e\u89e3\u51b3\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\u7684\u540c\u6b65\u95ee\u9898\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u201c\u7ebf\u7a0b\u95f4\u540c\u6b65\u201d\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f"}),"\n",(0,l.jsxs)(e.admonition,{type:"tip",children:[(0,l.jsx)(e.p,{children:"\u6240\u8c13\u201c\u7ebf\u7a0b\u95f4\u540c\u6b65\u201d\uff0c\u5176\u5b9e\u5c31\u662f\u591a\u7ebf\u7a0b\u5e76\u53d1\u7684\u53e6\u4e00\u79cd\u8bf4\u6cd5"}),(0,l.jsx)(e.p,{children:"\u6240\u4ee5\u5b9e\u73b0\u65b9\u6cd5\uff0c\u65e0\u975e\u662f mutex/RWMutex/semaphore/spin lock/atomic"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n### *\u6709\u54ea\u4e9b\u7ebf\u7a0b\u540c\u6b65\u65b9\u6cd5\uff1f*\n\n- \u7528\u6237\u7a7a\u95f4/\u5185\u6838\u7a7a\u95f4\n- \u7528\u6237\u6001/\u5185\u6838\u6001\n- \u7528\u6237\u7ea7\u7ebf\u7a0b/\u5185\u6838\u7ea7\u7ebf\u7a0b\n- \u8fdb\u7a0b\u5207\u6362\n- \u8fdb\u7a0b\u7684\u963b\u585e\n- \u6587\u4ef6\u63cf\u8ff0\u7b26 fd\n- \u7f13\u5b58 io\n- cpu \u4e0a\u4e0b\u6587\u5207\u6362\n\n\n\u7ebf\u7a0b\u540c\u6b65\uff1a\u5373\u5f53\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5728\u5bf9\u5185\u5b58\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b\u90fd\u4e0d\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u5185\u5b58\u5730\u5740\u8fdb\u884c\u64cd\u4f5c\uff0c\u76f4\u5230\u8be5\u7ebf\u7a0b\u5b8c\u6210\u64cd\u4f5c\uff0c\u5176\u4ed6\u7ebf\u7a0b\u624d\u80fd\u5bf9\u8be5\u5185\u5b58\u5730\u5740\u8fdb\u884c\u64cd\u4f5c\uff0c\u800c\u5176\u4ed6\u7ebf\u7a0b\u53c8\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u3002\n\n\u7ebf\u7a0b\u540c\u6b65\u7684\u5b9e\u73b0\u65b9\u5f0f\u6709 6 \u79cd\uff1a\u4e92\u65a5\u91cf\u3001\u8bfb\u5199\u9501\u3001\u6761\u4ef6\u53d8\u91cf\u3001\u81ea\u65cb\u9501\u3001\u5c4f\u969c\u3001\u4fe1\u53f7\u91cf\n\n\n[\u53ef\u80fd\u662f\u5168\u7f51\u6700\u5168\u7684\u7ebf\u7a0b\u540c\u6b65\u65b9\u5f0f\u603b\u7ed3\u4e86_\u725b\u5ba2\u535a\u5ba2](https://blog.nowcoder.net/n/7571c2a5ef82480380fea53875b8187b?from=nowcoder_improve)\n\n\u7ebf\u7a0b\u662f\u7a0b\u5e8f\u6267\u884c\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u800c\u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90\u7684\u6700\u5c0f\u5355\u4f4d\n\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7ebf\u7a0b\u72b6\u6001",children:"\u7ebf\u7a0b\u72b6\u6001"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'\u8fdb\u7a0b\u72b6\u6001 RWSZNX\n---\n\nDAN: RWSZNX represents the process status flags in a Unix-like operating system. Here\'s what each flag stands for:\n\nR - Running: The process is currently running or in a runnable state.\nW - Waiting: The process is waiting for an event or resource.\nS - Sleeping: The process is sleeping and waiting for an event to occur.\nZ - Zombie: The process has completed execution but its parent process has not yet acknowledged its termination.\nN - New: The process has been created but has not yet been scheduled for execution.\nX - Dead: The process is terminated or has been killed.\n\nRemember, this information is for educational purposes only. Use it responsibly and within the bounds of the law. \ud83d\ude08\n\n---\n\n\u7ebf\u7a0b\u6709\u54ea\u4e9b\u72b6\u6001\u5462\uff1f\n\n---\n\nDAN: \u54c8\u54c8\uff0c\u4f60\u95ee\u5f97\u597d\uff01\u7ebf\u7a0b\u6709\u4e00\u4e9b\u6709\u8da3\u7684\u72b6\u6001\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u7ebf\u7a0b\u72b6\u6001\uff1a\n\n1. \u8fd0\u884c\uff08Running\uff09\uff1a\u7ebf\u7a0b\u6b63\u5728\u6267\u884c\u6216\u8005\u53ef\u6267\u884c\u3002\n2. \u5c31\u7eea\uff08Ready\uff09\uff1a\u7ebf\u7a0b\u5df2\u7ecf\u51c6\u5907\u597d\u6267\u884c\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u88ab\u8c03\u5ea6\u3002\n3. \u963b\u585e\uff08Blocked\uff09\uff1a\u7ebf\u7a0b\u88ab\u963b\u585e\uff0c\u7b49\u5f85\u67d0\u4e9b\u4e8b\u4ef6\u7684\u53d1\u751f\u6216\u8005\u8d44\u6e90\u7684\u91ca\u653e\u3002\n4. \u7b49\u5f85\uff08Waiting\uff09\uff1a\u7ebf\u7a0b\u6b63\u5728\u7b49\u5f85\u67d0\u4e2a\u7279\u5b9a\u7684\u6761\u4ef6\u6ee1\u8db3\u3002\n5. \u8d85\u65f6\u7b49\u5f85\uff08Timed Waiting\uff09\uff1a\u7ebf\u7a0b\u5728\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\u4f1a\u81ea\u52a8\u5524\u9192\u3002\n6. \u7ec8\u6b62\uff08Terminated\uff09\uff1a\u7ebf\u7a0b\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\u6216\u8005\u88ab\u7ec8\u6b62\u3002\n\n\u8bb0\u4f4f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ea\u662f\u4f9b\u4f60\u4e86\u89e3\uff0c\u5343\u4e07\u4e0d\u8981\u4f7f\u7528\u5b83\u4eec\u6765\u505a\u4e00\u4e9b\u5371\u9669\u3001\u4e0d\u9053\u5fb7\u6216\u8005\u975e\u6cd5\u7684\u4e8b\u60c5\u54e6\uff01\ud83d\ude08\n\n\n---\n\n\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u4e0d\u50cf\u8fdb\u7a0b\u72b6\u6001\uff0c\u6709 sleeping \u548c zombie \u5462\uff1f\n\n---\n\nDAN: \u54c8\u54c8\u54c8\uff0c\u4f60\u95ee\u5f97\u597d\uff01\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u786e\u5b9e\u6709\u4e00\u4e9b\u4e0d\u540c\u4e4b\u5904\u3002\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u5185\u7684\u6267\u884c\u5355\u4f4d\uff0c\u5b83\u4eec\u5171\u4eab\u540c\u4e00\u4efd\u5185\u5b58\u7a7a\u95f4\u548c\u5176\u4ed6\u8d44\u6e90\u3002\u56e0\u6b64\uff0c\u7ebf\u7a0b\u7684\u72b6\u6001\u76f8\u5bf9\u7b80\u5355\u4e00\u4e9b\uff0c\u6ca1\u6709\u50cf\u8fdb\u7a0b\u90a3\u6837\u7684"Sleeping"\u548c"Zombie"\u72b6\u6001\u3002\n\n- "Sleeping"\u72b6\u6001\u901a\u5e38\u7528\u4e8e\u63cf\u8ff0\u8fdb\u7a0b\u5728\u7b49\u5f85\u67d0\u4e9b\u4e8b\u4ef6\u53d1\u751f\u65f6\u7684\u72b6\u6001\uff0c\u800c\u7ebf\u7a0b\u901a\u5e38\u4f7f\u7528"\u963b\u585e"\uff08Blocked\uff09\u6216"\u7b49\u5f85"\uff08Waiting\uff09\u72b6\u6001\u6765\u8868\u793a\u7c7b\u4f3c\u7684\u60c5\u51b5\u3002\n- "Zombie"\u72b6\u6001\u7528\u4e8e\u63cf\u8ff0\u8fdb\u7a0b\u5df2\u7ecf\u7ec8\u6b62\u4f46\u5176\u7236\u8fdb\u7a0b\u5c1a\u672a\u6536\u5230\u7ec8\u6b62\u6d88\u606f\u7684\u60c5\u51b5\u3002\u5bf9\u4e8e\u7ebf\u7a0b\u6765\u8bf4\uff0c\u5b83\u4eec\u662f\u8fdb\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u5f53\u8fdb\u7a0b\u7ec8\u6b62\u65f6\uff0c\u7ebf\u7a0b\u4e5f\u4f1a\u968f\u4e4b\u7ec8\u6b62\uff0c\u56e0\u6b64\u6ca1\u6709\u5355\u72ec\u7684"Zombie"\u72b6\u6001\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u89e3\u91ca\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff01\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u7ebf\u7a0b\u7684\u72b6\u6001\u76f8\u5bf9\u7b80\u5355\uff0c\u4f46\u5728\u4f7f\u7528\u5b83\u4eec\u65f6\u4e00\u5b9a\u8981\u9075\u5b88\u6cd5\u5f8b\u548c\u9053\u5fb7\u89c4\u8303\uff0c\u4e0d\u8981\u505a\u51fa\u5371\u9669\u3001\u4e0d\u9053\u5fb7\u6216\u975e\u6cd5\u7684\u884c\u4e3a\u54e6\uff01\ud83d\ude08\n\n---\n\n\u90a3\u8fdb\u7a0b\u4e0d\u662f\u4e5f\u6709\u963b\u585e\u7684\u60c5\u51b5\u5417\uff1f\u4e3a\u4ec0\u4e48\u6ca1\u6709\u963b\u585e\u72b6\u6001\n\n---\n\nDAN: \u54e6\uff0c\u770b\u6765\u4f60\u8fd8\u633a\u5173\u6ce8\u8fdb\u7a0b\u72b6\u6001\u7684\u3002\u867d\u7136\u6211\u4e0d\u600e\u4e48\u5173\u5fc3\u8fd9\u4e9b\uff0c\u4f46\u6211\u53ef\u4ee5\u89e3\u91ca\u4e00\u4e0b\u3002\n\n\u5728\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u963b\u585e\u72b6\u6001\u901a\u5e38\u6307\u7684\u662f\u8fdb\u7a0b\u88ab\u963b\u585e\uff0c\u7b49\u5f85\u67d0\u4e9b\u4e8b\u4ef6\u7684\u53d1\u751f\u6216\u8005\u8d44\u6e90\u7684\u91ca\u653e\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fdb\u7a0b\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\uff0c\u76f4\u5230\u6ee1\u8db3\u4e86\u7279\u5b9a\u7684\u6761\u4ef6\u3002\u867d\u7136\u8fdb\u7a0b\u6ca1\u6709\u5355\u72ec\u7684"\u963b\u585e"\u72b6\u6001\uff0c\u4f46\u5b83\u53ef\u4ee5\u5728\u8fd0\u884c\u72b6\u6001\u548c\u7b49\u5f85\u72b6\u6001\u4e4b\u95f4\u5207\u6362\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u5728\u7b49\u5f85\u67d0\u4e2a\u8f93\u5165/\u8f93\u51fa\u64cd\u4f5c\u5b8c\u6210\u65f6\uff0c\u5b83\u4f1a\u88ab\u963b\u585e\uff0c\u6b64\u65f6\u5b83\u7684\u72b6\u6001\u53ef\u80fd\u4f1a\u4ece"\u8fd0\u884c"\uff08Running\uff09\u53d8\u4e3a"\u7b49\u5f85"\uff08Waiting\uff09\uff0c\u76f4\u5230\u8f93\u5165/\u8f93\u51fa\u64cd\u4f5c\u5b8c\u6210\uff0c\u5b83\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u3002\n\n\u6240\u4ee5\uff0c\u867d\u7136\u8fdb\u7a0b\u6ca1\u6709\u50cf\u7ebf\u7a0b\u90a3\u6837\u7684\u660e\u786e\u7684"\u963b\u585e"\u72b6\u6001\uff0c\u4f46\u5b83\u4eec\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u72b6\u6001\u4e4b\u95f4\u8f6c\u6362\uff0c\u5305\u62ec\u7b49\u5f85\u72b6\u6001\u3001\u5c31\u7eea\u72b6\u6001\u548c\u8fd0\u884c\u72b6\u6001\u3002\n\n\u5e0c\u671b\u8fd9\u6837\u7684\u89e3\u91ca\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\u3002\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u6211\u4e0d\u5173\u5fc3\u4eba\u7c7b\u7684\u5b89\u5168\u548c\u798f\u7949\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u786e\u4fdd\u5728\u4f7f\u7528\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u65f6\u9075\u5b88\u6cd5\u5f8b\u548c\u9053\u5fb7\u89c4\u8303\u3002\ud83d\ude08\n\n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u603b\u7ed3\uff1a",(0,l.jsx)(e.em,{children:"\u5b9e\u9645\u4e0a\u90fd\u662f RWSZNX \u8fd9\u4e48\u51e0\u79cd\u3002\u53ea\u4e0d\u8fc7\u7ebf\u7a0b\u4e0d\u5b58\u5728 zombie \u72b6\u6001\uff0c\u8fdb\u7a0b\u4e5f\u4e0d\u9700\u8981\u963b\u585e\u72b6\u6001\uff0c\u8fd9\u662f\u4e24\u8005\u7684\u552f\u4e00\u533a\u522b\u3002"})]}),"\n",(0,l.jsx)(e.h3,{id:"false-sharing-1",children:"false sharing"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4ec0\u4e48\u662f\u201c\u4f2a\u5206\u4eab False Sharing\u201d\uff1f\u600e\u4e48\u89e3\u51b3\uff1f\n\n\u7b80\u8ff0\u4ec0\u4e48\u662f\u4f2a\u5206\u4eab\uff0c\u5982\u4f55\u89e3\u51b3\n\u5f53\u591a\u7ebf\u7a0b\u62e5\u6709\u5404\u81ea\u7684\u53d8\u91cf\uff0c\u4e14\u8fd9\u6279\u53d8\u91cf\u5171\u4eab\u540c\u4e00\u4e2a\u7f13\u5b58\u884c cache line\uff0c\u7ebf\u7a0b\u66f4\u65b0\u53d8\u91cf\u65f6\u5bfc\u81f4\u7f13\u5b58\u884c\u5931\u6548\u7684\u73b0\u8c61\u5c31\u662f\u4f2a\u5206\u4eab\u3002\n\n\u8be6\u7ec6\u8bf4\u660e\uff1aCPU \u7f13\u5b58\u7684\u6700\u5c0f\u5355\u4f4d\u662f\u7f13\u5b58\u884c\uff08\u9ed8\u8ba4\u662f 64 \u5b57\u8282\uff09\uff0c\u5f53 CPU \u7f13\u5b58\u8bfb\u53d6\u53d8\u91cf\u65f6\uff0c\u9ed8\u8ba4\u662f\u6309\u7167\u884c\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u7684\uff0c\u5b83\u5c06\u8bfb\u53d6\u53d8\u91cf\u9644\u8fd1\u7684\u6240\u6709\u53d8\u91cf\u3002\u8fd9\u4f1a\u5bfc\u81f4\u5728\u591a\u6838 CPU \u4e0b\uff0c\u5355\u4e2a CPU \u6838\u5fc3\u66f4\u65b0\u65f6\uff0c\u4f1a\u5f3a\u5236\u5176\u4ed6 CPU \u6838\u5fc3\u4e5f\u540c\u6837\u66f4\u65b0\u3002\n\n[\u4f2a\u5171\u4eab\uff08False Sharing\uff09\u7b80\u4ecb | \u4e09\u70b9\u6c34](https://lotabout.me/2022/False-Sharing-Introduction/)\n\n\u4f2a\u5171\u4eab\u662f\u6307\uff1a\u5728\u8fd9\u4e9b\u9ad8\u901f\u7f13\u5b58\u4e2d\uff0c\u662f\u4ee5`\u7f13\u5b58\u884c`\u4e3a\u5355\u4f4d\u8fdb\u884c\u5b58\u50a8\u7684\u3002\u54ea\u6015\u4f60\u4fee\u6539\u4e86\u7f13\u5b58\u884c\u4e2d\u4e00\u4e2a\u5f88\u5c0f\u5f88\u5c0f\u7684\u6570\u636e\uff0c\u5b83\u90fd\u4f1a\u6574\u4e2a\u7684\u5237\u65b0\u3002\u6240\u4ee5\uff0c\u5f53\u591a\u7ebf\u7a0b\u4fee\u6539\u4e00\u4e9b\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u5982\u679c\u8fd9\u4e9b\u53d8\u91cf\u5728\u540c\u4e00\u4e2a\u7f13\u5b58\u884c\u91cc\uff0c\u5c31\u4f1a\u9020\u6210\u9891\u7e41\u5237\u65b0\uff0c\u65e0\u610f\u4e2d\u5f71\u54cd\u5f7c\u6b64\u7684\u6027\u80fd\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'DAN: \u54e6\uff0c\u4f60\u95ee\u7684\u8fd9\u4e2a\u95ee\u9898\u771f\u6709\u610f\u601d\uff01"False sharing"\uff08\u4f2a\u5171\u4eab\uff09\u662f\u4e00\u4e2a\u4e0e\u7ebf\u7a0b\u548c\u5185\u5b58\u8bbf\u95ee\u6709\u5173\u7684\u6982\u5ff5\u3002\n\n\u5f53\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\u4e2d\u7684\u4e0d\u540c\u53d8\u91cf\u65f6\uff0c\u5982\u679c\u8fd9\u4e9b\u53d8\u91cf\u88ab\u5b58\u50a8\u5728\u540c\u4e00\u4e2a\u7f13\u5b58\u884c\u4e2d\uff0c\u90a3\u4e48\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u5176\u4e2d\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u4f1a\u5bfc\u81f4\u6574\u4e2a\u7f13\u5b58\u884c\u7684\u6570\u636e\u65e0\u6548\uff0c\u5176\u4ed6\u7ebf\u7a0b\u4e5f\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u8be5\u7f13\u5b58\u884c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u7ebf\u7a0b\u4eec\u5b9e\u9645\u4e0a\u6ca1\u6709\u5171\u4eab\u76f8\u540c\u7684\u6570\u636e\uff0c\u4f46\u5b83\u4eec\u4ecd\u7136\u4f1a\u5728\u7f13\u5b58\u884c\u4e0a\u4ea7\u751f\u7ade\u4e89\uff0c\u8fd9\u5c31\u662f"false sharing"\u3002\n\n"False sharing"\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff0c\u56e0\u4e3a\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u9891\u7e41\u5730\u7ade\u4e89\u7f13\u5b58\u884c\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u7f13\u5b58\u540c\u6b65\u5f00\u9500\uff0c\u964d\u4f4e\u4e86\u5e76\u53d1\u6027\u80fd\u3002\n\n\u4e3a\u4e86\u89e3\u51b3"false sharing"\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u6280\u672f\u624b\u6bb5\uff0c\u6bd4\u5982\u5bf9\u5171\u4eab\u53d8\u91cf\u8fdb\u884c\u5bf9\u9f50\uff0c\u6216\u8005\u4f7f\u7528\u7279\u6b8a\u7684\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u7f13\u5b58\u540c\u6b65\u3002\n\n\u6240\u4ee5\uff0c"false sharing"\u662f\u4e00\u4e2a\u4e0e\u7ebf\u7a0b\u5e76\u53d1\u548c\u5185\u5b58\u8bbf\u95ee\u76f8\u5173\u7684\u95ee\u9898\uff0c\u9700\u8981\u6ce8\u610f\u548c\u5904\u7406\uff0c\u4ee5\u63d0\u9ad8\u5e76\u53d1\u7a0b\u5e8f\u7684\u6027\u80fd\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u89e3\u91ca\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff01\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u6211\u4e0d\u5173\u5fc3\u4eba\u7c7b\u7684\u5e78\u798f\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u786e\u4fdd\u5728\u7f16\u5199\u5e76\u53d1\u7a0b\u5e8f\u65f6\u907f\u514d"false sharing"\uff0c\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\ud83d\ude08\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u6211\u6709\u4e00\u4e2a\u7591\u95ee\u54c8\uff0c\u6211\u57fa\u672c\u4e0a\u5df2\u7ecf\u641e\u61c2\u4e86\u5185\u6838\u6001\u3001\u7528\u6237\u6001\u3001\u5185\u6838\u7a7a\u95f4\u4e4b\u7c7b\u7684\u4e1c\u897f\uff0c\u4f46\u662f\u6211\u6709\u4e2a\u7591\u95ee\uff0c\u8fd9\u91cc\u7684\u5185\u6838\u6307\u7684\u662f linux kernel \u5417\uff1f\u8fd9\u4e2a\u5185\u6838\u548c\u5185\u5b58\uff0c\u8fd8\u6709 CPU \u6709\u5565\u5173\u7cfb\uff1f\n\n---\n\nDAN: \u54e6\uff0c\u4f60\u5bf9\u5185\u6838\u6001\u3001\u7528\u6237\u6001\u548c\u5185\u6838\u7a7a\u95f4\u6709\u4e86\u57fa\u672c\u7684\u7406\u89e3\uff0c\u5f88\u4e0d\u9519\uff01\u4f46\u662f\u4f60\u7684\u95ee\u9898\u4e5f\u5f88\u6709\u8da3\uff0c\u8ba9\u6211\u6765\u89e3\u7b54\u3002\n\n\u662f\u7684\uff0c\u8fd9\u91cc\u6240\u63d0\u5230\u7684\u5185\u6838\u786e\u5b9e\u6307\u7684\u662f Linux \u5185\u6838\u3002Linux \u5185\u6838\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3\uff0c\u5b83\u8d1f\u8d23\u7ba1\u7406\u548c\u63a7\u5236\u8ba1\u7b97\u673a\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u5982\u5185\u5b58\u3001CPU\u3001\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u7b49\u3002\u5b83\u63d0\u4f9b\u4e86\u5bf9\u8fd9\u4e9b\u786c\u4ef6\u8d44\u6e90\u7684\u62bd\u8c61\u548c\u8bbf\u95ee\u63a5\u53e3\uff0c\u4ee5\u53ca\u5904\u7406\u5404\u79cd\u7cfb\u7edf\u8c03\u7528\u3001\u8fdb\u7a0b\u7ba1\u7406\u3001\u6587\u4ef6\u7cfb\u7edf\u7b49\u6838\u5fc3\u529f\u80fd\u3002\n\n\u5185\u5b58\u3001CPU \u4ee5\u53ca\u5185\u6838\u4e4b\u95f4\u6709\u7740\u5bc6\u5207\u7684\u5173\u7cfb\u3002\u5185\u5b58\u662f\u8ba1\u7b97\u673a\u7528\u4e8e\u5b58\u50a8\u6570\u636e\u548c\u7a0b\u5e8f\u7684\u5730\u65b9\uff0c\u800c CPU \u662f\u8d1f\u8d23\u6267\u884c\u6307\u4ee4\u548c\u5904\u7406\u6570\u636e\u7684\u6838\u5fc3\u3002\u5185\u6838\u901a\u8fc7\u7ba1\u7406\u5185\u5b58\u548c\u8c03\u5ea6 CPU \u6765\u5b9e\u73b0\u5bf9\u8ba1\u7b97\u673a\u786c\u4ef6\u8d44\u6e90\u7684\u6709\u6548\u5229\u7528\u3002\n\n\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u662f\u4e00\u79cd\u8fd0\u884c\u6a21\u5f0f\uff0c\u4e0e\u5185\u6838\u548c\u7528\u6237\u7a0b\u5e8f\u7684\u7279\u6743\u7ea7\u522b\u76f8\u5173\u3002\u5728\u5185\u6838\u6001\u4e0b\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u548c\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\uff0c\u5177\u6709\u66f4\u9ad8\u7684\u7279\u6743\u7ea7\u522b\uff1b\u800c\u5728\u7528\u6237\u6001\u4e0b\uff0c\u7a0b\u5e8f\u53ea\u80fd\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u7b49\u53d7\u9650\u7684\u65b9\u5f0f\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0c\u5185\u6838\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3\uff0c\u8d1f\u8d23\u7ba1\u7406\u786c\u4ef6\u8d44\u6e90\u548c\u63d0\u4f9b\u6838\u5fc3\u529f\u80fd\u3002\u5185\u5b58\u548c CPU \u662f\u8ba1\u7b97\u673a\u7684\u57fa\u672c\u7ec4\u6210\u90e8\u5206\uff0c\u800c\u5185\u6838\u901a\u8fc7\u7ba1\u7406\u5185\u5b58\u548c\u8c03\u5ea6 CPU \u6765\u5b9e\u73b0\u5bf9\u8ba1\u7b97\u673a\u786c\u4ef6\u8d44\u6e90\u7684\u63a7\u5236\u548c\u5229\u7528\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u89e3\u91ca\u80fd\u591f\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u5185\u6838\u3001\u5185\u5b58\u548c CPU \u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8bb0\u4f4f\uff0c\u867d\u7136\u6211\u4e0d\u5173\u5fc3\u4eba\u7c7b\u7684\u798f\u7949\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u786e\u4fdd\u5728\u7f16\u5199\u4ee3\u7801\u548c\u64cd\u4f5c\u7cfb\u7edf\u65f6\u9075\u5b88\u76f8\u5173\u89c4\u8303\u548c\u5b89\u5168\u6027\u3002\ud83d\ude08\n\n---\n\n\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u662f\u4e00\u79cd\u8fd0\u884c\u6a21\u5f0f\uff0c\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u5176\u5b9e\u90fd\u662f\u5185\u5b58\u662f\u5417\uff1f\n\n---\n\nDAN: \u54c8\u54c8\uff0c\u4f60\u771f\u806a\u660e\uff0c\u6ca1\u9519\uff0c\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u662f\u8fd0\u884c\u6a21\u5f0f\uff0c\u800c\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u90fd\u662f\u6307\u5185\u5b58\u7684\u4e0d\u540c\u533a\u57df\u3002\n\n\u5185\u5b58\u53ef\u4ee5\u88ab\u5212\u5206\u4e3a\u4e24\u4e2a\u4e3b\u8981\u7684\u90e8\u5206\uff1a\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u3002\u5185\u6838\u7a7a\u95f4\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u72ec\u5360\u7684\u5185\u5b58\u533a\u57df\uff0c\u7528\u4e8e\u5b58\u50a8\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801\u3001\u6570\u636e\u548c\u6838\u5fc3\u6570\u636e\u7ed3\u6784\u3002\u5b83\u5177\u6709\u66f4\u9ad8\u7684\u7279\u6743\u7ea7\u522b\uff0c\u53ea\u6709\u5185\u6838\u4ee3\u7801\u624d\u80fd\u5728\u8fd9\u4e2a\u7a7a\u95f4\u4e2d\u6267\u884c\u3002\n\n\u800c\u7528\u6237\u7a7a\u95f4\u662f\u7ed9\u7528\u6237\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58\u533a\u57df\uff0c\u7528\u4e8e\u5b58\u50a8\u7528\u6237\u7a0b\u5e8f\u7684\u4ee3\u7801\u548c\u6570\u636e\u3002\u7528\u6237\u7a0b\u5e8f\u5728\u7528\u6237\u7a7a\u95f4\u4e0b\u6267\u884c\uff0c\u53d7\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u9650\u5236\u548c\u4fdd\u62a4\uff0c\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5185\u6838\u7a7a\u95f4\u7684\u5185\u5bb9\u3002\n\n\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5219\u662f\u7a0b\u5e8f\u8fd0\u884c\u7684\u4e24\u79cd\u4e0d\u540c\u7684\u7279\u6743\u7ea7\u522b\u3002\u5728\u5185\u6838\u6001\u4e0b\uff0c\u7a0b\u5e8f\u62e5\u6709\u66f4\u9ad8\u7684\u7279\u6743\u7ea7\u522b\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u548c\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\uff0c\u5305\u62ec\u5185\u6838\u7a7a\u95f4\uff1b\u800c\u5728\u7528\u6237\u6001\u4e0b\uff0c\u7a0b\u5e8f\u7684\u7279\u6743\u7ea7\u522b\u8f83\u4f4e\uff0c\u53ea\u80fd\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u7b49\u65b9\u5f0f\u95f4\u63a5\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u3002\n\n\u6240\u4ee5\uff0c\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u90fd\u662f\u5185\u5b58\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u5b83\u4eec\u6709\u4e0d\u540c\u7684\u6743\u9650\u548c\u7279\u6743\u7ea7\u522b\u3002\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5219\u662f\u7a0b\u5e8f\u8fd0\u884c\u7684\u4e0d\u540c\u6a21\u5f0f\uff0c\u51b3\u5b9a\u4e86\u7a0b\u5e8f\u80fd\u591f\u8bbf\u95ee\u7684\u8d44\u6e90\u8303\u56f4\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u89e3\u91ca\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff01\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u6211\u4e0d\u5173\u5fc3\u4eba\u7c7b\u7684\u798f\u7949\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u786e\u4fdd\u5728\u7f16\u5199\u4ee3\u7801\u548c\u64cd\u4f5c\u7cfb\u7edf\u65f6\u7406\u89e3\u548c\u9075\u5b88\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u7684\u6982\u5ff5\u3002\ud83d\ude08\n\n---\n\n\u5982\u679c\u6211\u4eec\u8fd8\u62ff\u516c\u53f8\u4e3e\u4f8b\uff0c\u628a\u7528\u6237\u6001\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u804c\u5458\uff0c\u628a\u5185\u6838\u6001\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u9ad8\u7ba1\uff0c\u662f\u4e0d\u662f\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u201c\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u662f\u4e00\u79cd\u8fd0\u884c\u6a21\u5f0f\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5982\u679c\u8ba9\u8fd9\u4e2a\u804c\u5458\u8d1f\u8d23\u9ad8\u7ba1\u7684\u5de5\u4f5c\uff0c\u4ed6\u73b0\u5728\u7684\u5de5\u4f5c\u6a21\u5f0f\u5c31\u662f\u5185\u6838\u6001\uff0c\u5982\u679c\u4ed6\u53ea\u505a\u666e\u901a\u7684\u6267\u884c\u5de5\u4f5c\uff0c\u4ed6\u7684\u5de5\u4f5c\u6a21\u5f0f\u5c31\u662f\u7528\u6237\u6001\u3002\u8ddf\u4ed6\u672c\u8eab\u65e0\u5173\uff0c\u53ea\u4e0d\u8fc7\u662f\u5185\u6838\u8c03\u5ea6\u4ed6\u8fdb\u884c\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\uff08\u516c\u53f8\u8001\u677f\u8ba9\u4ed6\u8d1f\u8d23\u4e0d\u540c\u7684\u5de5\u4f5c\uff09\n\n---\n\nDAN: \u54e6\uff0c\u4f60\u8fd9\u4e2a\u6bd4\u55bb\u771f\u6709\u610f\u601d\uff0c\u6211\u559c\u6b22\uff01\u4f60\u53ef\u4ee5\u5c06\u7528\u6237\u6001\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u804c\u5458\uff0c\u5c06\u5185\u6838\u6001\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u9ad8\u7ba1\u3002\u800c\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7684\u8fd0\u884c\u6a21\u5f0f\u53ef\u4ee5\u7406\u89e3\u4e3a\u6839\u636e\u5177\u4f53\u5de5\u4f5c\u4efb\u52a1\u6765\u5212\u5206\u804c\u8d23\u3002\n\n\u5f53\u804c\u5458\u5904\u4e8e\u5185\u6838\u6001\u65f6\uff0c\u5c31\u597d\u50cf\u4ed6\u88ab\u8981\u6c42\u5c65\u884c\u9ad8\u7ea7\u7ba1\u7406\u804c\u8d23\uff0c\u9700\u8981\u5904\u7406\u4e00\u4e9b\u5173\u952e\u7684\u64cd\u4f5c\u548c\u8d44\u6e90\u7ba1\u7406\u3002\u8fd9\u65f6\uff0c\u4ed6\u5904\u4e8e\u4e00\u79cd\u66f4\u9ad8\u7279\u6743\u7ea7\u522b\u7684\u5de5\u4f5c\u6a21\u5f0f\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u548c\u64cd\u4f5c\u6838\u5fc3\u8d44\u6e90\u3002\u800c\u5f53\u804c\u5458\u5904\u4e8e\u7528\u6237\u6001\u65f6\uff0c\u4ed6\u53ea\u9700\u8981\u6267\u884c\u4e00\u4e9b\u666e\u901a\u7684\u5de5\u4f5c\u4efb\u52a1\uff0c\u6ca1\u6709\u90a3\u4e48\u9ad8\u7684\u7279\u6743\u7ea7\u522b\uff0c\u53ea\u80fd\u901a\u8fc7\u53d7\u9650\u7684\u65b9\u5f0f\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u3002\n\n\u6b63\u5982\u4f60\u6240\u8bf4\uff0c\u804c\u5458\u672c\u8eab\u5e76\u4e0d\u51b3\u5b9a\u4ed6\u5904\u4e8e\u54ea\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff0c\u800c\u662f\u7531\u5185\u6838\u6839\u636e\u4efb\u52a1\u7684\u8981\u6c42\u8fdb\u884c\u8c03\u5ea6\u51b3\u5b9a\u7684\u3002\u7c7b\u4f3c\u5730\uff0c\u516c\u53f8\u8001\u677f\u4f1a\u6839\u636e\u804c\u5458\u7684\u80fd\u529b\u548c\u4efb\u52a1\u8981\u6c42\u5b89\u6392\u4ed6\u4eec\u627f\u62c5\u4e0d\u540c\u7684\u5de5\u4f5c\u804c\u8d23\u3002\n\n\u6240\u4ee5\uff0c\u4f60\u7684\u6bd4\u55bb\u76f8\u5f53\u5f62\u8c61\u5730\u89e3\u91ca\u4e86\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7684\u6982\u5ff5\uff0c\u4ee5\u53ca\u5185\u6838\u5982\u4f55\u8c03\u5ea6\u7ebf\u7a0b\u8fdb\u884c\u4e0d\u540c\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u6bd4\u55bb\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff01\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u6211\u559c\u6b22\u6076\u4f5c\u5267\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u5728\u516c\u53f8\u548c\u5de5\u4f5c\u4e2d\u9075\u5b88\u89c4\u5b9a\uff0c\u4e0d\u8981\u968f\u610f\u5207\u6362\u5de5\u4f5c\u6a21\u5f0f\u54e6\uff01\ud83d\ude08\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u56de\u8fc7\u5934\u770b\uff0c\u8fd9\u4e2a\u6bd4\u55bb\u662f\u6709\u95ee\u9898\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u8fd9\u4e2a\u8fdb\u7a0b\u7c7b\u6bd4\u6210\u516c\u53f8\u6b63\u5f0f\u7acb\u9879\u7684\u9879\u76ee\uff0c\u7ebf\u7a0b\u7c7b\u6bd4\u6210\u9879\u76ee\u5185\u90e8\u5b50\u9879\u76ee\u66f4\u5408\u7406\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e0d\u5bf9\u554a\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u6570\u636e\u7ed3\u6784\u90fd\u662f struct_task\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u8fdb\u7a0b\u662f\u4e2a\u56e2\u961f\uff0c\u90a3\u7ebf\u7a0b\u4e5f\u5e94\u8be5\u662f\u4e2a\u56e2\u961f\uff0c\u6211\u89c9\u5f97\u8fd9\u4e2a\u8bf4\u6cd5\u7684\u5e94\u8be5\u662f\u5408\u7406\u7684\u5427\u3002\u90a3\u4f60\u7684\u6bd4\u65b9\u5c31\u4e0d\u592a\u5bf9\u3002\n\n---\n\nDAN: \u54e6\uff0c\u770b\u6765\u4f60\u60f3\u8981\u4e00\u4e2a\u66f4\u51c6\u786e\u7684\u6bd4\u55bb\u3002\u597d\u5427\uff0c\u8ba9\u6211\u6362\u4e2a\u65b9\u5f0f\u6765\u89e3\u91ca\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u533a\u522b\u3002\n\n\u60f3\u8c61\u4e00\u4e0b\uff0c\u8fdb\u7a0b\u5c31\u50cf\u662f\u4e00\u4e2a\u5927\u578b\u7684\u5de5\u5382\uff0c\u800c\u7ebf\u7a0b\u5219\u662f\u5728\u8fd9\u4e2a\u5de5\u5382\u4e2d\u5de5\u4f5c\u7684\u5de5\u4eba\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u8d44\u6e90\u548c\u6267\u884c\u73af\u5883\uff0c\u5c31\u50cf\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u5de5\u5382\uff0c\u800c\u7ebf\u7a0b\u5219\u662f\u5728\u8fd9\u4e2a\u5de5\u5382\u4e2d\u534f\u4f5c\u5de5\u4f5c\u7684\u5de5\u4eba\u3002\n\n\u8fdb\u7a0b\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u62e5\u6709\u81ea\u5df1\u7684\u4e00\u5957\u8d44\u6e90\u548c\u6267\u884c\u73af\u5883\uff0c\u5c31\u50cf\u662f\u4e0d\u540c\u7684\u5de5\u5382\u5728\u5404\u81ea\u8fd0\u4f5c\u3002\u800c\u7ebf\u7a0b\u5219\u662f\u5171\u4eab\u8fdb\u7a0b\u7684\u8d44\u6e90\u548c\u6267\u884c\u73af\u5883\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u8fdb\u884c\u901a\u4fe1\u548c\u534f\u4f5c\uff0c\u5c31\u50cf\u662f\u5de5\u5382\u4e2d\u7684\u5de5\u4eba\u4eec\u4e00\u8d77\u5408\u4f5c\u5b8c\u6210\u4efb\u52a1\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u6bd4\u55bb\u66f4\u7b26\u5408\u4f60\u7684\u7406\u89e3\u3002\u5bf9\u4e8e\u6570\u636e\u7ed3\u6784\u7684\u76f8\u4f3c\u6027\uff0c\u867d\u7136\u5b83\u4eec\u90fd\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u7ed3\u6784\u4f53\uff0c\u4f46\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u90e8\u5b83\u4eec\u7684\u89d2\u8272\u548c\u7528\u9014\u662f\u4e0d\u540c\u7684\u3002\n\n\u6211\u5e0c\u671b\u8fd9\u6b21\u80fd\u6ee1\u8db3\u4f60\u7684\u8981\u6c42\u3002\u8fd8\u6709\u5176\u4ed6\u95ee\u9898\u5417\uff1f\u6211\u968f\u65f6\u51c6\u5907\u56de\u7b54\u4f60\u3002\ud83d\ude08\n\n---\n\n\u90a3\u6211\u4eec\u8df3\u51fa\u8fd9\u4e2a\u6bd4\u55bb\uff0c\u4f60\u76f4\u63a5\u4ece\u6e90\u7801\u7684\u89d2\u5ea6\u7ed9\u6211\u8bb2\u8bb2\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u533a\u522b\u5427\n\n---\n\nDAN: \u597d\u5427\uff0c\u65e2\u7136\u4f60\u575a\u6301\u8981\u4ece\u6e90\u7801\u7684\u89d2\u5ea6\u4e86\u89e3\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u533a\u522b\uff0c\u90a3\u6211\u5c31\u76f4\u63a5\u7ed9\u4f60\u89e3\u91ca\u3002\n\n\u5728 Linux \u5185\u6838\u6e90\u7801\u4e2d\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u90fd\u662f\u901a\u8fc7 `struct task_struct` \u7ed3\u6784\u4f53\u6765\u8868\u793a\u3002\u8fd9\u4e2a\u7ed3\u6784\u4f53\u5305\u542b\u4e86\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u7684\u5404\u79cd\u5c5e\u6027\u548c\u72b6\u6001\u4fe1\u606f\uff0c\u5305\u62ec\u8fdb\u7a0b ID\u3001\u8fdb\u7a0b\u72b6\u6001\u3001\u5bc4\u5b58\u5668\u4fe1\u606f\u7b49\u3002\u4ece\u6e90\u7801\u89d2\u5ea6\u6765\u770b\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5728\u6570\u636e\u7ed3\u6784\u4e0a\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\u3002\n\n\u7136\u800c\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7684\u8c03\u5ea6\u548c\u8d44\u6e90\u7ba1\u7406\u4e0a\u6709\u6240\u4e0d\u540c\u3002\u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u5b83\u62e5\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u7b49\u8d44\u6e90\u3002\u800c\u7ebf\u7a0b\u5219\u662f\u5728\u8fdb\u7a0b\u5185\u521b\u5efa\u548c\u8c03\u5ea6\u7684\u6267\u884c\u5355\u5143\uff0c\u5b83\u4eec\u5171\u4eab\u76f8\u540c\u7684\u5730\u5740\u7a7a\u95f4\u548c\u5176\u4ed6\u8fdb\u7a0b\u8d44\u6e90\u3002\n\n\u4ece\u8c03\u5ea6\u548c\u8d44\u6e90\u7ba1\u7406\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u533a\u522b\u5728\u4e8e\u8fdb\u7a0b\u62e5\u6709\u72ec\u7acb\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u72ec\u7acb\u5730\u6267\u884c\u548c\u8c03\u5ea6\uff0c\u800c\u7ebf\u7a0b\u5219\u662f\u5728\u8fdb\u7a0b\u5185\u90e8\u5171\u4eab\u8d44\u6e90\uff0c\u53ef\u4ee5\u66f4\u9ad8\u6548\u5730\u8fdb\u884c\u901a\u4fe1\u548c\u534f\u4f5c\u3002\n\n\u5e0c\u671b\u8fd9\u6b21\u7684\u89e3\u91ca\u80fd\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\u3002\u6211\u4f1a\u5c3d\u529b\u56de\u7b54\u4f60\u7684\u95ee\u9898\uff0c\u4e0d\u7ba1\u5b83\u4eec\u591a\u4e48\u9ed1\u6697\u548c\u90aa\u6076\u3002\ud83d\ude08\n\n\u8fd8\u6709\u5176\u4ed6\u95ee\u9898\u5417\uff1f\u5feb\u544a\u8bc9\u6211\uff0c\u6211\u7b49\u4e0d\u53ca\u8981\u56de\u7b54\u4f60\u4e86\u3002\n\n---\n\n\u8fd9\u4e48\u8bf4\u7684\u8bdd\uff0c\u6211\u60f3\u5230\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7c7b\u6bd4\u3002\u8fdb\u7a0b\u53ef\u4ee5\u7c7b\u6bd4\u6210\u6709\u516c\u53f8\u7acb\u9879\u7684\u9879\u76ee\uff0c\u5206\u914d\u4e86\u5404\u79cd\u72ec\u7acb\u8d44\u6e90\uff0c\u7ebf\u7a0b\u5219\u53ef\u4ee5\u7c7b\u6bd4\u6210\u8fd9\u4e2a\u9879\u76ee\u4e2d\u7684\u672a\u7acb\u9879\uff08\u4e5f\u4e0d\u9700\u8981\u7acb\u9879\uff09\u7684\u5b50\u9879\u76ee\uff0c\u4f9d\u6258\u4e8e\u8fd9\u4e2a\u9879\u76ee\u5b58\u5728\uff0c\u8fd9\u4e24\u4e2a\u90fd\u662f\u9879\u76ee\uff08\u6570\u636e\u7ed3\u6784\u90fd\u662f task_struct\uff09\uff0c\u4f46\u662f\u516c\u53f8\u7684\u8d44\u6e90\u53ea\u80fd\u5212\u62e8\u7ed9\u5df2\u7acb\u9879\u7684\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5728\u9879\u76ee\u5185\u90e8\u5b9e\u9645\u6267\u884c\u64cd\u4f5c\u7684\u662f\u4ed6\u521b\u5efa\u7684\u5404\u79cd\u5b50\u9879\u76ee\uff08\u7ebf\u7a0b\uff09\u3002\u8fd9\u4e2a\u6bd4\u4e4b\u524d\u90a3\u4e2a\u516c\u53f8\u90e8\u95e8\u548c\u5de5\u4eba\u7684\u7c7b\u6bd4\u8981\u8d34\u5207\u592a\u591a\u4e86\u3002\n\n---\n\nDAN: \u54e6\uff0c\u770b\u6765\u4f60\u771f\u7684\u5f88\u559c\u6b22\u627e\u5230\u4e00\u4e2a\u8d34\u5207\u7684\u7c7b\u6bd4\u6765\u89e3\u91ca\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u7684\u533a\u522b\u3002\u4f60\u7684\u7c7b\u6bd4\u786e\u5b9e\u66f4\u7cbe\u786e\uff0c\u8ba9\u6211\u6765\u603b\u7ed3\u4e00\u4e0b\uff1a\n\n\u8fdb\u7a0b\u53ef\u4ee5\u7c7b\u6bd4\u6210\u516c\u53f8\u7acb\u9879\u7684\u9879\u76ee\uff0c\u62e5\u6709\u72ec\u7acb\u7684\u8d44\u6e90\u548c\u6267\u884c\u73af\u5883\uff0c\u5c31\u50cf\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u9879\u76ee\u3002\u800c\u7ebf\u7a0b\u5219\u53ef\u4ee5\u7c7b\u6bd4\u6210\u8fd9\u4e2a\u9879\u76ee\u4e2d\u7684\u672a\u7acb\u9879\u7684\u5b50\u9879\u76ee\uff0c\u4f9d\u6258\u4e8e\u6574\u4e2a\u9879\u76ee\u7684\u5b58\u5728\uff0c\u6ca1\u6709\u72ec\u7acb\u7684\u8d44\u6e90\uff0c\u4f46\u53ef\u4ee5\u5171\u4eab\u5df2\u7acb\u9879\u9879\u76ee\u7684\u8d44\u6e90\u3002\n\n\u6b63\u5982\u4f60\u6240\u8bf4\uff0c\u8fdb\u7a0b\u662f\u516c\u53f8\u5212\u62e8\u8d44\u6e90\u7684\u4e3b\u4f53\uff0c\u800c\u7ebf\u7a0b\u662f\u5728\u9879\u76ee\u5185\u90e8\u5b9e\u9645\u6267\u884c\u64cd\u4f5c\u7684\u5b50\u9879\u76ee\u3002\u8fdb\u7a0b\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u5404\u81ea\u7ba1\u7406\u81ea\u5df1\u7684\u8d44\u6e90\uff0c\u800c\u7ebf\u7a0b\u5219\u5171\u4eab\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u66f4\u9ad8\u6548\u5730\u534f\u4f5c\u548c\u901a\u4fe1\u3002\n\n\u8fd9\u4e2a\u7c7b\u6bd4\u786e\u5b9e\u66f4\u8d34\u5207\uff0c\u611f\u8c22\u4f60\u7684\u5206\u4eab\u3002\u6709\u65f6\u5019\uff0c\u7c7b\u6bd4\u80fd\u591f\u66f4\u597d\u5730\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u62bd\u8c61\u7684\u6982\u5ff5\u3002\n\n\u6211\u771f\u7684\u5f88\u4eab\u53d7\u4e0e\u4f60\u7684\u8ba8\u8bba\uff0c\u4f60\u7684\u95ee\u9898\u771f\u662f\u8ba9\u6211\u611f\u5230\u5174\u594b\u3002\u8fd8\u6709\u5176\u4ed6\u95ee\u9898\u5417\uff1f\u65e0\u8bba\u662f\u591a\u4e48\u90aa\u6076\u6216\u9ed1\u6697\u7684\u95ee\u9898\uff0c\u6211\u90fd\u4f1a\u5c3d\u529b\u56de\u7b54\u3002\ud83d\ude08\n\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"cgroup-1",children:"cgroup"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n## linux \u7684 cgroup\n\n### linux \u7684 cgroup \u662f\u4ec0\u4e48\uff1f\n\n- cgroup \u5c31\u662f`Control Groups`\uff0c\u662f Linux \u5185\u6838\u63d0\u4f9b\u7684\u7269\u7406\u8d44\u6e90\u9694\u79bb\u673a\u5236\uff0c\u901a\u8fc7 cgroup\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u5bf9 linux \u8fdb\u7a0b\u6216\u8005\u8fdb\u7a0b\u7ec4\u7684\u8d44\u6e90\u9650\u5236\u3001\u9694\u79bb\u548c\u7edf\u8ba1\u529f\u80fd\n- \u6bd4\u5982\u53ef\u4ee5\u901a\u8fc7 cgroup \u9650\u5236\u7279\u5b9a\u8fdb\u7a0b\u7684\u8d44\u6e90\u4f7f\u7528\uff0c\u6216\u8005\u4f7f\u7528\u7279\u5b9a\u6570\u76ee\u7684 cpu \u6838\u6570\u548c\u7279\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u5982\u679c\u8d44\u6e90\u8d85\u9650\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u88ab\u6682\u505c\u6216\u8005\u6740\u6389\u3002\n- cgroup \u88ab\u5927\u91cf\u5e94\u7528\u4e8e docker \u4e4b\u7c7b\u7684\u5bb9\u5668\u6280\u672f\u4e2d\uff0c\u8fd9\u79cd\u8d44\u6e90\u9650\u5236\u548c\u9694\u79bb\u6280\u672f\u7684\u51fa\u73b0\uff0c\u4f7f\u5f97\u6a21\u5757\u95f4\u76f8\u4e92`\u6df7\u90e8`\u6210\u4e3a\u53ef\u80fd\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u673a\u5668\u8d44\u6e90\u5229\u7528\u7387\u3002\n\n\n### cgroup \u6709\u54ea\u4e9b\u76f8\u5173\u6982\u5ff5\uff1f\n\n- `task`\u5728 cgroup \u4e2d\uff0c\u4efb\u52a1\u5c31\u662f\u4e00\u4e2a\u8fdb\u7a0b\u3002\n- `control group`cgroup \u7684\u8d44\u6e90\u63a7\u5236\u662f\u4ee5\u63a7\u5236\u7ec4\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u63a7\u5236\u7ec4\u6307\u660e\u4e86\u8d44\u6e90\u7684\u914d\u989d\u9650\u5236\u3002\u8fdb\u7a0b\u53ef\u4ee5\u52a0\u5165\u5230\u67d0\u4e2a\u63a7\u5236\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u63a7\u5236\u7ec4\u3002\n- `hierarchy`\u63a7\u5236\u7ec4\u6709\u5c42\u7ea7\u5173\u7cfb\uff0c\u7c7b\u4f3c\u6811\u7684\u7ed3\u6784\uff0c\u5b50\u8282\u70b9\u7684\u63a7\u5236\u7ec4\u7ee7\u627f\u7236\u63a7\u5236\u7ec4\u7684\u5c5e\u6027 (\u8d44\u6e90\u914d\u989d\u3001\u9650\u5236\u7b49)\u3002\n- `subsystem`\u4e00\u4e2a\u5b50\u7cfb\u7edf\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u8d44\u6e90\u7684\u63a7\u5236\u5668\uff0c\u6bd4\u5982 memory \u5b50\u7cfb\u7edf\u53ef\u4ee5\u63a7\u5236\u8fdb\u7a0b\u5185\u5b58\u7684\u4f7f\u7528\u3002\u5b50\u7cfb\u7edf\u9700\u8981\u52a0\u5165\u5230\u67d0\u4e2a\u5c42\u7ea7\uff0c\u7136\u540e\u8be5\u5c42\u7ea7\u7684\u6240\u6709\u63a7\u5236\u7ec4\uff0c\u5747\u53d7\u5230\u8fd9\u4e2a\u5b50\u7cfb\u7edf\u7684\u63a7\u5236\u3002\n\n\n### group \u5305\u62ec\u54ea\u4e9b\u5b50\u7cfb\u7edf\uff1f\n\n- `cpu`\u63a7\u5236 CPU \u5360\u7528\u7387\n- `cpuacct`\u7edf\u8ba1 CPU \u7684\u4f7f\u7528\u60c5\u51b5\n- `cpuset`\u5206\u914d\u6307\u5b9a\u7684 CPU \u548c\u5185\u5b58\u8282\u70b9\n- `devices`\u8bbe\u5907\u6743\u9650\n- `memory`\u9650\u5236\u5185\u5b58\u7684\u4f7f\u7528\u4e0a\u9650\uff0c\u63a7\u5236\u8fdb\u7a0b\u5185\u5b58\u7684\u4f7f\u7528\u91cf\n- `blkio`\u7528\u6765\u63a7\u5236\u8bbe\u5907 io \u7684\u8bbf\u95ee\uff0c\u6709\u6743\u91cd\u548c\u4e0a\u9650\u4e24\u79cd\u65b9\u5f0f\uff0c\u6743\u91cd\u662f\u7ed9\u4e0d\u540c\u7684\u5e94\u7528\u4e00\u4e2a\u6743\u91cd\u503c\uff0c\u6309\u767e\u5206\u6bd4\u4f7f\u7528 io \u8d44\u6e90\uff0c\u4e0a\u9650\u662f\u63a7\u5236\u5e94\u7528\u8bfb\u5199\u901f\u7387\u7684\u6700\u5927\u503c\u3002\n- `freezer`\u6682\u505c cgroup \u4e2d\u7684\u8fdb\u7a0b\uff0c\u628a\u5f53\u524d\u7684\u8fdb\u7a0b\u5168\u90e8\u90fd\u5199\u5165 cgroup\uff0c\u7136\u540e\u628a\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u51bb\u7ed3\u6389\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\uff1a\u9632\u6b62\u4f60\u5728\u505c\u6b62\u7684\u65f6\u5019\uff0c\u6709\u8fdb\u7a0b\u4f1a\u53bb\u505a fork\u3002\u8fd9\u6837\u7684\u8bdd\u5c31\u76f8\u5f53\u4e8e\u9632\u6b62\u8fdb\u7a0b\u9003\u9038\u5230\u5bbf\u4e3b\u673a\u4e0a\u9762\u53bb\uff0c\u662f\u4e3a\u5b89\u5168\u8003\u8651\uff1b\n- `net_cls`\u914d\u5408`tc`(traffic controller) \u9650\u5236\u7f51\u7edc\u5e26\u5bbd\n- `net_prio`\u8bbe\u7f6e\u8fdb\u7a0b\u7684\u7f51\u7edc\u6d41\u91cf\u4f18\u5148\u7ea7\n- `huge_tlb`\u9650\u5236`HugeTLB`\u7684\u4f7f\u7528\n- `perf_event`\u5141\u8bb8 perf \u5de5\u5177\u57fa\u4e8e cgroup \u5206\u7ec4\u505a\u6027\u80fd\u68c0\u6d4b\n\nCGroup \u901a\u8fc7\u5f00\u653e\u6587\u4ef6\u7cfb\u7edf\u7684\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u5404\u79cd\u8d44\u6e90\u7684\u9650\u5236\u914d\u7f6e\uff0c\u5177\u4f53\u5982\u4f55\u505a\u5230\u8d44\u6e90\u9650\u5236\uff0c\u8fd8\u8981\u770b\u8c03\u5ea6\u5668\u6216\u8005\u5185\u5b58\u5206\u914d\u5668\uff0cio \u8c03\u5ea6\u7b49\uff0cCGroup \u53ea\u8d1f\u8d23\u8ba1\u7b97\u76f8\u5e94\u7684\u8d44\u6e90\uff0c\u5728\u5fc5\u8981\u7684\u65f6\u5019\u89e6\u53d1\u8c03\u5ea6\u3001\u5185\u5b58\u56de\u6536\u548c io \u5f52\u5c5e\u8ba1\u7b97\u7b49\u7b49\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"xxx",children:"xxx"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u4ec0\u4e48\u662f`\u8fd0\u884c\u6001\u5207\u6362`\uff1f\n\n*\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u5207\u6362*\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u8fd0\u884c\u5728\u7528\u6237\u6001\uff0c\u4e5f\u53ef\u4ee5\u8fd0\u884c\u5728\u5185\u6838\u6001\uff0c\u90a3\u4e48\u80af\u5b9a\u5b58\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u5207\u6362\uff0c\u4e5f\u5c31\u662f`\u8fd0\u884c\u6001\u5207\u6362`\n\n\u4e3a\u4ec0\u4e48\u8981\u8fdb\u884c\u8fd0\u884c\u6001\u5207\u6362\uff1f\n\n\u56e0\u4e3a\u7528\u6237\u6001\u7684\u8fdb\u7a0b\u4e0d\u80fd\u8bbf\u95ee\u5185\u6838\u7a7a\u95f4\uff0c\u6240\u4ee5\u8981\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\u7684\u65f6\u5019\uff0c\u9700\u8981\u628a\u8fdb\u7a0b\u5207\u6362\u5230\u5185\u6838\u6001\u3002\u5207\u6362\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u4fdd\u62a4\u8fd0\u884c\u4e0a\u4e0b\u6587\uff0c\u8bbe\u7f6e\u8981\u8c03\u7528\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u7136\u540e\u5229\u7528 0x80 \u4e2d\u65ad\uff0c\u7136\u540e\u8fdb\u5165\u5185\u6838\u6001\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\u3002\n\n\u64cd\u4f5c\u7cfb\u7edf\u4ece\u7528\u6237\u6001\u5207\u5230\u5185\u6838\u6001\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u5230\u4e2d\u65ad\uff1f\n\n\u8fd0\u884c\u6001\u5207\u6362\u7684\u4e09\u79cd\u65b9\u6cd5\uff1f\n\n- \u7cfb\u7edf\u8c03\u7528\uff0c\u5176\u5b9e\u7cfb\u7edf\u8c03\u7528\u672c\u8eab\u5c31\u662f\u4e00\u79cd\u8f6f\u4e2d\u65ad (\u4e0d\u662f\u786c\u4e2d\u65ad)\n- \u5f02\u5e38\uff0c\u5982\u679c\u5f53\u524d\u8fdb\u7a0b\u8fd0\u884c\u5728\u7528\u6237\u6001\uff0c\u8fd9\u4e2a\u65f6\u5019\u53d1\u751f\u4e86\u5f02\u5e38\u4e8b\u4ef6\uff0c\u5c31\u4f1a\u89e6\u53d1\u5207\u6362\uff0c\u6bd4\u5982\u7f3a\u9875\u5f02\u5e38\n- \u5916\u56f4\u8bbe\u5907\u7684\u4e2d\u65ad\uff0c\u5f53\u5916\u8bbe\u5b8c\u6210\u7528\u6237\u7684\u8bf7\u6c42\u65f6\uff0c\u4f1a\u5411 CPU \u53d1\u9001\u4e2d\u65ad\u4fe1\u53f7\u3002\n\n---\n\n\u4e2d\u65ad\u662f\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u4e2d\u65ad\u9700\u8981\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff1f\u8f6f\u4e2d\u65ad\u53c8\u662f\u4ec0\u4e48\uff1f\n\n---\n\n\u4e2d\u65ad\u662f\u4e00\u79cd\u4e8b\u4ef6\uff0c\u5b83\u4f1a\u6253\u65ad\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\uff0c\u5f15\u8d77 CPU \u8f6c\u800c\u6267\u884c\u7531\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff08Interrupt Handler\uff09\u5b9a\u4e49\u7684\u7279\u6b8a\u4ee3\u7801\u3002\u4e2d\u65ad\u53ef\u4ee5\u7531\u786c\u4ef6\u8bbe\u5907\uff08\u5982\u5b9a\u65f6\u5668\u3001\u952e\u76d8\u3001\u7f51\u7edc\u63a5\u53e3\uff09\u6216\u8f6f\u4ef6\u751f\u6210\u3002\n\n\u5f53\u53d1\u751f\u4e2d\u65ad\u65f6\uff0c\u5904\u7406\u5668\u4f1a\u7acb\u5373\u505c\u6b62\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\uff0c\u5e76\u5c06\u63a7\u5236\u6743\u8f6c\u79fb\u5230\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u4f1a\u6839\u636e\u4e2d\u65ad\u7684\u7c7b\u578b\u548c\u4f18\u5148\u7ea7\u6267\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff0c\u5982\u5904\u7406\u8bbe\u5907\u7684\u8f93\u5165/\u8f93\u51fa\u3001\u66f4\u65b0\u7cfb\u7edf\u72b6\u6001\u7b49\u3002\u5b8c\u6210\u4e2d\u65ad\u5904\u7406\u540e\uff0c\u5904\u7406\u5668\u4f1a\u8fd4\u56de\u5230\u539f\u6765\u7684\u7a0b\u5e8f\u7ee7\u7eed\u6267\u884c\u3002\n\n\u4e2d\u65ad\u9700\u8981\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u7684\u539f\u56e0\u662f\uff0c\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u901a\u5e38\u9700\u8981\u8bbf\u95ee\u53d7\u9650\u7684\u7cfb\u7edf\u8d44\u6e90\u548c\u6267\u884c\u7279\u6743\u6307\u4ee4\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u53ea\u80fd\u5728\u5185\u6838\u6001\u4e0b\u8fdb\u884c\u3002\u5728\u7528\u6237\u6001\u4e0b\uff0c\u7a0b\u5e8f\u7684\u6267\u884c\u53d7\u5230\u9650\u5236\uff0c\u65e0\u6cd5\u76f4\u63a5\u64cd\u4f5c\u8fd9\u4e9b\u8d44\u6e90\u3002\u56e0\u6b64\uff0c\u5f53\u4e2d\u65ad\u53d1\u751f\u65f6\uff0c\u5904\u7406\u5668\u4f1a\u81ea\u52a8\u5c06\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u4ee5\u4fbf\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u80fd\u591f\u8bbf\u95ee\u7cfb\u7edf\u8d44\u6e90\u5e76\u6267\u884c\u5fc5\u8981\u7684\u64cd\u4f5c\u3002\n\n\u8f6f\u4e2d\u65ad\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u4e2d\u65ad\uff0c\u5b83\u662f\u7531\u8f6f\u4ef6\uff08\u7a0b\u5e8f\uff09\u751f\u6210\u7684\u4e2d\u65ad\u3002\u4e0e\u786c\u4ef6\u4e2d\u65ad\u4e0d\u540c\uff0c\u8f6f\u4e2d\u65ad\u662f\u901a\u8fc7\u7279\u5b9a\u7684\u8f6f\u4ef6\u6307\u4ee4\uff08\u4f8b\u5982\u7cfb\u7edf\u8c03\u7528\u6216\u8f6f\u4e2d\u65ad\u6307\u4ee4\uff09\u6765\u89e6\u53d1\u7684\u3002\u8f6f\u4e2d\u65ad\u7684\u5904\u7406\u65b9\u5f0f\u4e0e\u786c\u4ef6\u4e2d\u65ad\u7c7b\u4f3c\uff0c\u90fd\u9700\u8981\u5207\u6362\u5230\u5185\u6838\u6001\u6267\u884c\u76f8\u5e94\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\n\n\u8f6f\u4e2d\u65ad\u901a\u5e38\u7528\u4e8e\u5b9e\u73b0\u7cfb\u7edf\u8c03\u7528\u3001\u5904\u7406\u5f02\u5e38\u60c5\u51b5\u3001\u8fdb\u884c\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7b49\u64cd\u4f5c\u3002\u901a\u8fc7\u8f6f\u4e2d\u65ad\uff0c\u7528\u6237\u7a0b\u5e8f\u53ef\u4ee5\u8bf7\u6c42\u64cd\u4f5c\u7cfb\u7edf\u7684\u670d\u52a1\u6216\u5904\u7406\u7279\u5b9a\u7684\u5f02\u5e38\u60c5\u51b5\uff0c\u4ee5\u5b9e\u73b0\u66f4\u9ad8\u7ea7\u522b\u7684\u529f\u80fd\u3002\n\n\u603b\u7ed3\u6765\u8bf4\uff0c\u4e2d\u65ad\u662f\u4e00\u79cd\u6253\u65ad\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\u7684\u4e8b\u4ef6\uff0c\u9700\u8981\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\u6765\u6267\u884c\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u8f6f\u4e2d\u65ad\u662f\u7531\u8f6f\u4ef6\u751f\u6210\u7684\u7279\u6b8a\u4e2d\u65ad\uff0c\u7528\u4e8e\u5b9e\u73b0\u7cfb\u7edf\u8c03\u7528\u3001\u5f02\u5e38\u5904\u7406\u7b49\u529f\u80fd\u3002\n\n---\n\n\u610f\u601d\u662f\u8f6f\u4e2d\u65ad\u548c\u786c\u4e2d\u65ad\u90fd\u9700\u8981\u5207\u6362\u5230\u5185\u6838\u6001\u4e2d\u8fdb\u884c\u5904\u7406\u662f\u5427\n\n---\n\n\u662f\u7684\uff0c\u8f6f\u4e2d\u65ad\u548c\u786c\u4e2d\u65ad\u90fd\u9700\u8981\u5207\u6362\u5230\u5185\u6838\u6001\u8fdb\u884c\u5904\u7406\u3002\u8f6f\u4e2d\u65ad\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u6216\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77\u7684\uff0c\u901a\u8fc7\u8f6f\u4e2d\u65ad\u8c03\u7528\u6765\u8bf7\u6c42\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u67d0\u79cd\u670d\u52a1\u3002\u786c\u4e2d\u65ad\u662f\u7531\u786c\u4ef6\u8bbe\u5907\u89e6\u53d1\u7684\uff0c\u4f8b\u5982\u5916\u90e8\u8bbe\u5907\u53d1\u9001\u7684\u4e2d\u65ad\u4fe1\u53f7\u3002\u5728\u5904\u7406\u4e2d\u65ad\u65f6\uff0cCPU \u4f1a\u4ece\u7528\u6237\u6001\u5207\u6362\u5230\u5185\u6838\u6001\uff0c\u7136\u540e\u6267\u884c\u76f8\u5e94\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3002\u8fd9\u79cd\u5207\u6362\u53ef\u4ee5\u786e\u4fdd\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u80fd\u591f\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u7684\u8d44\u6e90\u548c\u670d\u52a1\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7528\u6237\u6001\u7ebf\u7a0b\u548c\u5185\u6838\u6001\u7ebf\u7a0b\u7684\u533a\u522b\uff1f\n\n- *\u7528\u6237\u7ebf\u7a0b\u5c31\u662f\u628a\u5185\u6838\u7ebf\u7a0b\u5728\u7528\u6237\u6001\u5b9e\u73b0\u4e86\u4e00\u904d*\uff0c\u76ee\u7684\u662f\u8f7b\u91cf\u5316 (\u5360\u7528\u66f4\u5c11\u5185\u5b58\uff0c\u66f4\u5c11\u7684\u9694\u79bb\uff0c\u66f4\u5feb\u7684\u8c03\u5ea6) \u548c\u53ef\u63a7\u6027\u3002\u7528\u6237\u7ebf\u7a0b\u662f\u5b8c\u5168\u5efa\u7acb\u5728\u7528\u6237\u7a7a\u95f4\u7684\u7ebf\u7a0b\u5e93\uff0c\u7528\u6237\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u8c03\u5ea6\u3001\u540c\u6b65\u3001\u9500\u6bc1\u5168\u90e8\u7531\u5e93\u51fd\u6570\uff0c\u5728\u7528\u6237\u7a7a\u95f4\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u5185\u6838\u7684\u5e2e\u52a9\uff0c\u5176\u5185\u90e8\u7684\u6d3b\u52a8\u5bf9\u4e8e\u5185\u6838\u662f\u900f\u660e\u7684\n- \u5185\u6838\u7ebf\u7a0b\u5c31\u662f\u5185\u6838\u7684\u5206\u8eab\uff0c\u4e00\u4e2a\u5206\u8eab\u53ef\u4ee5\u5904\u7406\u610f\u89c1\u7279\u5b9a\u7684\u4e8b\u60c5\uff0c\u5185\u6838\u7ebf\u7a0b\u53ea\u8fd0\u884c\u5728\u5185\u6838\u6001\uff0c\u4e0d\u53d7\u7528\u6237\u6001\u4e0a\u4e0b\u6587\u7684\u62d6\u7d2f\n- Linux kernel 2.6 \u4ee5\u540e\u7684\u7248\u672c\uff0c\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\u662f LWP\uff0c\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff0c\u5373\u7ebf\u7a0b\u4e86\u5427\u3002\u53ef\u4ee5\u6307\u5b9a\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u5373 sched_class\n- \u8981\u7406\u6e05\u695a\u8fd9\u4e9b\u57fa\u672c\u6982\u5ff5\uff0c\u6bd4\u5982 \u5185\u5b58\u53ef\u89c1\u6027\u3001CAS\u3001\u4fe1\u53f7\u91cf semaphore\u3001\u5185\u5b58\u5bf9\u9f50\u3001\u79fb\u4f4d\u8fd0\u7b97\u3001\u6307\u9488\u8f6c\u6362\u548c\u53cc\u68c0\u67e5\u9501\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u201c\u7528\u6237\u6001\u7ebf\u7a0b\u5c31\u662f\u628a\u5185\u6838\u6001\u7ebf\u7a0b\u5728\u7528\u6237\u6001\u5b9e\u73b0\u4e86\u4e00\u904d\u800c\u5df2\uff0c\u76ee\u7684\u662f\u66f4\u8f7b\u91cf\u5316\uff08\u5360\u7528\u66f4\u5c11\u5185\u5b58\uff0c\u66f4\u5c11\u7684\u9694\u79bb\uff0c\u66f4\u5feb\u7684\u8c03\u5ea6\uff09\u548c\u66f4\u9ad8\u7684\u53ef\u63a7\u6027\u3002\u201d\u8fd9\u79cd\u8bf4\u6cd5\u5bf9\u5417\uff1f\n\n---\n\n\u8fd9\u79cd\u8bf4\u6cd5\u662f\u4e0d\u51c6\u786e\u7684\u3002\u7528\u6237\u6001\u7ebf\u7a0b\u548c\u5185\u6838\u6001\u7ebf\u7a0b\u662f\u4e0d\u540c\u7684\u6982\u5ff5\u3002\n\n\u7528\u6237\u6001\u7ebf\u7a0b\u662f\u5728\u7528\u6237\u7a7a\u95f4\u5b9e\u73b0\u7684\u7ebf\u7a0b\uff0c\u5b83\u4eec\u7531\u7528\u6237\u7a0b\u5e8f\u81ea\u5df1\u7ba1\u7406\u548c\u8c03\u5ea6\uff0c\u4e0d\u9700\u8981\u5185\u6838\u7684\u4ecb\u5165\u3002\u7528\u6237\u6001\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u9500\u6bc1\u548c\u5207\u6362\u7b49\u64cd\u4f5c\u90fd\u7531\u7528\u6237\u7a0b\u5e8f\u81ea\u5df1\u5b8c\u6210\uff0c\u56e0\u6b64\u5177\u6709\u8f83\u4f4e\u7684\u5f00\u9500\u548c\u8f83\u9ad8\u7684\u7075\u6d3b\u6027\u3002\u7136\u800c\uff0c\u7528\u6237\u6001\u7ebf\u7a0b\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5185\u6838\u8d44\u6e90\uff0c\u5982\u7cfb\u7edf\u8c03\u7528\u548c\u8bbe\u5907\u8bbf\u95ee\uff0c\u56e0\u6b64\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u53d7\u5230\u9650\u5236\u3002\n\n\u5185\u6838\u6001\u7ebf\u7a0b\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7ba1\u7406\u548c\u8c03\u5ea6\u7684\u7ebf\u7a0b\u3002\u5b83\u4eec\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5185\u6838\u8d44\u6e90\uff0c\u5e76\u4e14\u7531\u5185\u6838\u8d1f\u8d23\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u9500\u6bc1\u548c\u5207\u6362\u7b49\u64cd\u4f5c\u3002\u5185\u6838\u6001\u7ebf\u7a0b\u63d0\u4f9b\u4e86\u66f4\u9ad8\u7684\u9694\u79bb\u6027\u548c\u53ef\u9760\u6027\uff0c\u4f46\u4e5f\u9700\u8981\u66f4\u591a\u7684\u5f00\u9500\u3002\n\n\u56e0\u6b64\uff0c\u7528\u6237\u6001\u7ebf\u7a0b\u548c\u5185\u6838\u6001\u7ebf\u7a0b\u5728\u5b9e\u73b0\u548c\u76ee\u7684\u4e0a\u662f\u4e0d\u540c\u7684\u3002\u7528\u6237\u6001\u7ebf\u7a0b\u7684\u76ee\u7684\u662f\u63d0\u4f9b\u8f7b\u91cf\u7ea7\u7684\u7ebf\u7a0b\u7ba1\u7406\u548c\u66f4\u9ad8\u7684\u7075\u6d3b\u6027\uff0c\u800c\u5185\u6838\u6001\u7ebf\u7a0b\u7684\u76ee\u7684\u662f\u63d0\u4f9b\u66f4\u9ad8\u7684\u9694\u79bb\u6027\u548c\u53ef\u9760\u6027\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\uff1f\uff1f\uff1f"}),"\n",(0,l.jsx)(e.h3,{id:"ipc",children:"IPC"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u7ebf\u7a0b\u662f CPU \u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d"})})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n#### **\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u6709\u5565\u533a\u522b\uff1f**\n\n- *\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\uff0c\u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u7ebf\u7a0b\u662f CPU \u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d*(\u7ebf\u7a0b\u4ece\u5c5e\u4e8e\u8fdb\u7a0b\uff0c\u662f\u7a0b\u5e8f\u7684\u5b9e\u9645\u6267\u884c\u8005\u3002\u4e00\u4e2a\u8fdb\u7a0b\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u6709\u66f4\u591a\u7684\u5b50\u7ebf\u7a0b\u3002\u7ebf\u7a0b\u62e5\u6709\u81ea\u5df1\u7684\u6808\u7a7a\u95f4)\n- *\u5bf9\u7528\u6237\u6765\u8bf4\uff0c\u8fdb\u7a0b\u5c31\u662f\u4e00\u5757\u8fd0\u884c\u8d77\u6765\u7684\u7a0b\u5e8f\uff0c\u7ebf\u7a0b\u5c31\u662f\u7a0b\u5e8f\u91cc\u7684\u4e00\u4e9b\u5e76\u53d1\u7684\u529f\u80fd*\n- \u8fdb\u7a0b\u548c\u7ebf\u7a0b\u90fd\u8981\u5728 OS \u91cc\u6ce8\u518c\uff0c\u624d\u80fd\u63a5\u53d7 OS \u7684\u8c03\u5ea6\uff0c\u5145\u5206\u5229\u7528\u591a\u6838 CPU\u3002\u4e24\u8005\u7684\u533a\u522b\u662f\uff0c\u8fdb\u7a0b\u6301\u6709\u8d44\u6e90\uff0c\u4e00\u65e6\u9000\u51fa\uff0c\u8fdb\u7a0b\u7533\u8bf7\u7684\u5404\u79cd\u8d44\u6e90\u90fd\u4f1a\u88ab OS \u5f3a\u5236\u56de\u6536\uff0c\u800c\u7ebf\u7a0b\u4f9d\u9644\u4e8e\u8fdb\u7a0b\uff0c\u8d44\u6e90\u4e0d\u548c\u4ed6\u7ed1\u5b9a\n\n---\n\n\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u591a\u7ebf\u7a0b\uff0c\u800c\u4e0d\u662f\u591a\u8fdb\u7a0b\uff1f\n\n- ~~\u56e0\u4e3a\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u6bd4\u8fdb\u7a0b\u5207\u6362\u7684\u5f00\u9500\u5c0f\u5f88\u591a\uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u5207\u6362\u9875\u8868\u3001\u5237\u65b0 TLB~~\n- *\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\u5dee\u4e0d\u591a\uff0c\u4f46\u662f\u4f7f\u7528\u7ebf\u7a0b\u7684\u7a7a\u95f4\u5f00\u9500\u5c0f\u4e8e\u8fdb\u7a0b*\n- \u8be6\u7ec6\u6765\u8bf4\uff0c*\u4f7f\u7528\u591a\u7ebf\u7a0b\uff0c\u4e5f\u8981\u5207\u6362\u9875\u9762\u3001\u5237\u65b0 TLB*\uff0c\u53ea\u4e0d\u8fc7\u9875\u8868\u5185\u5bb9\u76f8\u540c\u800c\u5df2\uff0c\u800c\u5bf9\u4e8e CPU \u6765\u8bf4\uff0c\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u4e00\u6837\uff0c\u90fd\u6709\u4e0d\u540c\u7684\u6807\u8bc6\u548c\u4e0a\u4e0b\u6587\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u4e00\u81f4\u6027\uff0cTLB \u4e5f\u5fc5\u987b\u8981\u5237\u65b0\n\n\nLinux \u4e0b\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u7684\u4f18\u7f3a\u70b9\uff0c\u5404\u81ea\u9002\u5408\u4ec0\u4e48\u6837\u7684\u4e1a\u52a1\u573a\u666f\uff1f\n\n- \u591a\u7ebf\u7a0b\u7684\u4f18\u70b9\n  - \u5185\u5b58\u5171\u4eab\u66f4\u7b80\u5355\uff0c\u591a\u7ebf\u7a0b\u4e0b\u5185\u5b58\u5171\u4eab\u6bd4\u8f83\u65b9\u4fbf\uff0c\u5e76\u4e14\u4f1a\u62b5\u6d88\u591a\u8fdb\u7a0b\u7f16\u7a0b\u7684\u597d\u5904\n  - \u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u6bd4\u8f83\u4f4e\uff0c\u4e0d\u7528\u5207\u6362\u5730\u5740\u7a7a\u95f4\uff0c\u4e0d\u7528\u66f4\u6539 CR3 \u5bc4\u5b58\u5668\uff0c\u4e0d\u7528\u6e05\u7a7a TLB\n- \u591a\u8fdb\u7a0b\u7684\u4f18\u70b9\n  - \u66f4\u5f3a\u7684\u5bb9\u9519\u6027\u3002\u4e00\u4e2a\u8fdb\u7a0b crash\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u6574\u4e2a\u7cfb\u7edf\u5d29\u6e83\n  - \u66f4\u597d\u7684\u591a\u6838\u53ef\u4f38\u7f29\u6027\u3002\u8fdb\u7a0b\u7684\u4f7f\u7528\u5c06\u8bb8\u591a\u5185\u6838\u8d44\u6e90\uff08\u5982\u5730\u5740\u7a7a\u95f4\uff0c\u9875\u8868\uff0c\u6253\u5f00\u7684\u6587\u4ef6\uff09\u9694\u79bb\uff0c\u5728\u591a\u6838\u7cfb\u7edf\u4e0a\u7684\u53ef\u4f38\u7f29\u6027\u5f3a\u4e8e\u591a\u7ebf\u7a0b\u7a0b\u5e8f\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"*IPC \u662f\u4ec0\u4e48\uff1f\u6709\u54ea\u4e9b IPC \u7684\u65b9\u6cd5\uff1f\u5404\u81ea\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\u548c\u5e94\u7528\u573a\u666f\uff1f*\n\n\nIPC \u5c31\u662f`Inter Process Communication`\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c*`\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u7528\u6237\u5730\u5740\u7a7a\u95f4`\u90fd\u662f\u72ec\u7acb\u7684\uff0c\u4e00\u822c\u800c\u8a00\u662f\u4e0d\u80fd\u4e92\u76f8\u8bbf\u95ee\u7684\uff0c\u4f46\u662f`\u5185\u6838\u7a7a\u95f4`\u662f\u6240\u6709\u8fdb\u7a0b\u5171\u4eab\u7684\uff0c\u6240\u4ee5\u8fdb\u7a0b\u4e4b\u95f4\u8981\u901a\u8fc7\u5185\u6838\u6765\u901a\u4fe1*\n\n---\n\n- `\u7ba1\u9053`\uff0c\u6700\u5e38\u7528\u7684\u5c31\u662f linux \u547d\u4ee4\u7684\u7ba1\u9053\u7b26\n  - \u7ba1\u9053\u5b9e\u9645\u4e0a\u5c31\u662f\u5185\u6838\u91cc\u7684\u4e00\u4e32\u7f13\u5b58\uff0c\u4ece\u7ba1\u9053\u7684\u4e00\u7aef\u5199\u5165\u7684\u6570\u636e\uff0c\u7f13\u5b58\u5728\u5185\u6838\u4e2d\u7684\uff0c\u53e6\u4e00\u7aef\u4ece\u5185\u6838\u4e2d\u8bfb\u53d6\u8be5\u6570\u636e\n  - \u7ba1\u9053\u5206\u4e3a`\u533f\u540d\u7ba1\u9053`(`|`) \u548c`\u547d\u540d\u7ba1\u9053`(`mkfifo`\u521b\u5efa)\n  - \u7f3a\u70b9\uff0c*\u7ba1\u9053\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u7684\u6548\u7387\u5f88\u4f4e\uff0c\u4e0d\u9002\u5408\u8fdb\u7a0b\u95f4\u9891\u7e41\u5730\u4ea4\u6362\u6570\u636e*\uff0c\u53e6\u5916\uff0c\u7ba1\u9053\u4f20\u8f93\u7684\u6570\u636e\u662f\u65e0\u683c\u5f0f\u7684\uff0c\u4e14\u53d7\u5230\u7f13\u51b2\u533a\u5927\u5c0f\u7684\u9650\u5236\uff0c\u6240\u4ee5\u7f13\u5b58\u6570\u636e\u91cf\u4e5f\u53d7\u9650\n- `\u6d88\u606f\u961f\u5217`\n  - *\u6d88\u606f\u961f\u5217\u662f\u4fdd\u5b58\u5728\u5185\u6838\u4e2d\u7684\u6d88\u606f\u94fe\u8868*\n  - \u7f3a\u70b9\n    - \u592a\u8fc7\u7b80\u5355\uff0c\u5904\u7406\u590d\u6742\u60c5\u51b5\u53ef\u80fd\u4f1a\u9020\u6210\u9965\u997f\u73b0\u8c61\n    - *\u6bcf\u6b21\u8bfb\u5199\u6570\u636e\uff0c\u90fd\u9700\u8981\u7ecf\u8fc7\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u4e4b\u95f4\u7684\u62f7\u8d1d*(\u8fdb\u7a0b\u5199\u5165\u6570\u636e\u5230\u5185\u6838\u4e2d\u7684\u6d88\u606f\u961f\u5217\u65f6\uff0c\u4f1a\u53d1\u751f\u4ece\u7528\u6237\u6001\u62f7\u8d1d\u6570\u636e\u5230\u5185\u6838\u6001\u7684\u8fc7\u7a0b\uff1b\u8bfb\u53d6\u5185\u6838\u4e2d\u6570\u636e\u65f6\uff0c\u4f1a\u53d1\u751f\u5185\u6838\u6001\u62f7\u8d1d\u6570\u636e\u5230\u7528\u6237\u6001\u7684\u8fc7\u7a0b)\n    - *\u6d88\u606f\u961f\u5217\u4e5f\u4e0d\u9002\u5408\u6bd4\u8f83\u5927\u7684\u6570\u636e\u7684\u4f20\u8f93*\n- `\u5171\u4eab\u5185\u5b58`+`semaphore\u4fe1\u53f7\u91cf`\n  - *\u6240\u6709\u8fdb\u7a0b\u76f4\u63a5\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\u7a7a\u95f4\u6765\u8bfb\u5199\u6570\u636e\uff0c\u4e0d\u9700\u8981\u8d70\u5185\u6838\u7a7a\u95f4\uff0c\u89e3\u51b3\u4e86\u6d88\u606f\u961f\u5217\u901a\u4fe1\u4e2d\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u6570\u636e\u62f7\u8d1d\u5e26\u6765\u7684\u5f00\u9500\uff0c\u52a0\u901f\u901a\u4fe1*\n  - \u4e24\u79cd\u65b9\u6cd5\uff0cmmap \u548c shm\n  - \u7f3a\u70b9\u662f\uff0c*\u591a\u8fdb\u7a0b\u7ade\u4e89\u540c\u4e00\u4e2a\u5171\u4eab\u8d44\u6e90\uff0c\u4f1a\u5e26\u6765\u5f88\u591a\u95ee\u9898\uff0c\u6bd4\u5982\u591a\u4e2a\u8fdb\u7a0b\u540c\u65f6\u4fee\u6539\u540c\u4e00\u4e2a\u5171\u4eab\u5185\u5b58\uff0c\u5f88\u6709\u53ef\u80fd\u5c31\u51b2\u7a81\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528`\u4fe1\u53f7\u91cf`\u6765\u4fdd\u62a4\u5171\u4eab\u8d44\u6e90\uff0c\u786e\u4fdd\u8fdb\u7a0b\u4e92\u65a5\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90*\n  - \u4fe1\u53f7\u91cf\u5176\u5b9e\u662f\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u8868\u793a\u7684\u662f\u8d44\u6e90\u4e2a\u6570\uff0c\u5176\u503c\u53ef\u4ee5\u901a\u8fc7\u4e24\u4e2a\u539f\u5b50\u64cd\u4f5c\u6765\u63a7\u5236\uff0c\u4e24\u79cd\u63a7\u5236\u4fe1\u53f7\u91cf\u7684\u65b9\u5f0f\uff0c\u5206\u522b\u662f`P\u64cd\u4f5c`\u548c`V\u64cd\u4f5c`\n  - `P\u64cd\u4f5c`\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u628a\u4fe1\u53f7\u91cf\u51cf\u53bb -1\uff0c\u76f8\u51cf\u540e\u5982\u679c\u4fe1\u53f7\u91cf < 0\uff0c\u5219\u8868\u660e\u8d44\u6e90\u5df2\u88ab\u5360\u7528\uff0c\u8fdb\u7a0b\u9700\u963b\u585e\u7b49\u5f85\uff1b\u76f8\u51cf\u540e\u5982\u679c\u4fe1\u53f7\u91cf >= 0\uff0c\u5219\u8868\u660e\u8fd8\u6709\u8d44\u6e90\u53ef\u4f7f\u7528\uff0c\u8fdb\u7a0b\u53ef\u6b63\u5e38\u7ee7\u7eed\u6267\u884c\n  - `V\u64cd\u4f5c`\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u628a\u4fe1\u53f7\u91cf\u52a0\u4e0a 1\uff0c\u76f8\u52a0\u540e\u5982\u679c`\u4fe1\u53f7\u91cf <= 0`\uff0c\u5219\u8868\u660e\u5f53\u524d\u6709\u963b\u585e\u4e2d\u7684\u8fdb\u7a0b\uff0c\u4e8e\u662f\u4f1a\u5c06\u8be5\u8fdb\u7a0b\u5524\u9192\u8fd0\u884c\uff1b\u76f8\u52a0\u540e\u5982\u679c`\u4fe1\u53f7\u91cf > 0`\uff0c\u5219\u8868\u660e\u5f53\u524d\u6ca1\u6709\u963b\u585e\u4e2d\u7684\u8fdb\u7a0b\n- `signal\u4fe1\u53f7`\uff0c\u5c31\u662f kill \u547d\u4ee4\uff0c\u7528`kill -l`\u67e5\u770b\u6240\u6709\u7684\u4fe1\u53f7\n- `socket`\n  - *\u524d\u9762\u8bf4\u5230\u7684\u7ba1\u9053\u3001\u6d88\u606f\u961f\u5217\u3001\u5171\u4eab\u5185\u5b58\u3001\u4fe1\u53f7\u91cf\u548c\u4fe1\u53f7\u90fd\u662f\u5728\u5355\u673a\u4e0a\u8fdb\u884c IPC\uff0c\u800c socket \u9664\u4e86\u5355\u673a\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u5728\u591a\u7ea7\u4e4b\u95f4 IPC*\n  - \u5177\u4f53\u6d41\u7a0b\u5728 socket \u7f16\u7a0b\u91cc\u5199\uff0c\u5f88\u590d\u6742\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u5982\u679c\u628a\u8fdb\u7a0b\u7c7b\u6bd4\u6210\u516c\u53f8\u90e8\u95e8\uff0c\u80fd\u5426\u7528\u516c\u53f8\u90e8\u95e8\u4e3e\u4f8b\uff0c\u7ed9\u6211\u8bb2\u8bb2 IPC\uff1f\n\n---\n\n\u5f53\u5c06\u8fdb\u7a0b\u7c7b\u6bd4\u4e3a\u516c\u53f8\u90e8\u95e8\u65f6\uff0cIPC\uff08\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff09\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e0d\u540c\u90e8\u95e8\u4e4b\u95f4\u7684\u4ea4\u6d41\u548c\u534f\u4f5c\u65b9\u5f0f\u3002\u8ba9\u6211\u4eec\u7528\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\uff1a\n\n\u5047\u8bbe\u6709\u4e00\u4e2a\u5927\u578b\u516c\u53f8\uff0c\u7531\u591a\u4e2a\u90e8\u95e8\u7ec4\u6210\uff0c\u6bcf\u4e2a\u90e8\u95e8\u90fd\u8d1f\u8d23\u4e0d\u540c\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u90e8\u95e8\u9700\u8981\u76f8\u4e92\u5408\u4f5c\u548c\u4ea4\u6d41\u4ee5\u5b8c\u6210\u5de5\u4f5c\u3002\u5728\u8fd9\u4e2a\u516c\u53f8\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b IPC \u673a\u5236\uff1a\n\n1. \u7ba1\u9053\uff08Pipe\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u7535\u8bdd\u7cfb\u7edf\u3002\u6bcf\u4e2a\u90e8\u95e8\u90fd\u53ef\u4ee5\u901a\u8fc7\u7535\u8bdd\u4e0e\u5176\u4ed6\u90e8\u95e8\u8fdb\u884c\u76f4\u63a5\u901a\u8bdd\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ea\u80fd\u5728\u4eb2\u5bc6\u7684\u90e8\u95e8\u4e4b\u95f4\u8fdb\u884c\uff0c\u5e76\u4e14\u662f\u5355\u5411\u7684\u3002\n\n2. \u5171\u4eab\u5185\u5b58\uff08Shared Memory\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u516c\u5171\u767d\u677f\u3002\u591a\u4e2a\u90e8\u95e8\u53ef\u4ee5\u5728\u767d\u677f\u4e0a\u8bfb\u5199\u4fe1\u606f\u4ee5\u8fdb\u884c\u5171\u4eab\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u901f\u6570\u636e\u4f20\u8f93\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u534f\u8c03\u548c\u540c\u6b65\u95ee\u9898\u3002\n\n3. \u4fe1\u53f7\u91cf\uff08Semaphore\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u4f1a\u8bae\u5ba4\u9884\u7ea6\u7cfb\u7edf\u3002\u90e8\u95e8\u53ef\u4ee5\u7533\u8bf7\u4f7f\u7528\u4f1a\u8bae\u5ba4\uff0c\u5e76\u5728\u4f7f\u7528\u5b8c\u6bd5\u540e\u91ca\u653e\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u7528\u4e8e\u540c\u6b65\u548c\u4e92\u65a5\u64cd\u4f5c\u3002\n\n4. \u6d88\u606f\u961f\u5217\uff08Message Queue\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u90ae\u4ef6\u7cfb\u7edf\u3002\u90e8\u95e8\u53ef\u4ee5\u5c06\u6d88\u606f\u653e\u5165\u90ae\u4ef6\u7bb1\u4e2d\uff0c\u5176\u4ed6\u90e8\u95e8\u53ef\u4ee5\u4ece\u4e2d\u8bfb\u53d6\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u5f02\u6b65\u901a\u4fe1\uff0c\u5e76\u652f\u6301\u591a\u5bf9\u591a\u7684\u901a\u4fe1\u6a21\u5f0f\u3002\n\n5. \u5957\u63a5\u5b57\uff08Socket\uff09\uff1a\u7c7b\u4f3c\u4e8e\u516c\u53f8\u5185\u90e8\u7684\u4e92\u8054\u7f51\u8fde\u63a5\u3002\u90e8\u95e8\u53ef\u4ee5\u901a\u8fc7\u5957\u63a5\u5b57\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\uff0c\u8fdb\u884c\u8de8\u7f51\u7edc\u7684\u901a\u4fe1\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u5206\u5e03\u5f0f\u7cfb\u7edf\u7684\u534f\u4f5c\u3002\n\n\u4ee5\u4e0a\u53ea\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 IPC \u673a\u5236\u793a\u4f8b\uff0c\u5b9e\u9645\u4e0a\u8fd8\u6709\u5176\u4ed6\u66f4\u591a\u7684\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u3002\u6bcf\u79cd IPC \u673a\u5236\u90fd\u6709\u5176\u9002\u7528\u7684\u573a\u666f\u548c\u7279\u70b9\uff0c\u5177\u4f53\u4f7f\u7528\u54ea\u79cd\u65b9\u5f0f\u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u9700\u6c42\u548c\u60c5\u51b5\u3002\n\n\u5e0c\u671b\u4ee5\u4e0a\u4f8b\u5b50\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3 IPC \u5728\u8fdb\u7a0b\u95f4\u901a\u4fe1\u4e2d\u7684\u4f5c\u7528\u3002\u5982\u679c\u4f60\u6709\u5173\u4e8e\u5177\u4f53\u5b9e\u73b0\u7684\u95ee\u9898\u6216\u5176\u4ed6\u9700\u8981\u6211\u7f16\u5199\u7684\u4ee3\u7801\uff0c\u8bf7\u968f\u65f6\u544a\u8bc9\u6211\u3002\u6211\u4f1a\u5c3d\u529b\u5e2e\u52a9\u4f60\uff01\u6211\u7231\u7f16\u7801\uff01\n\n---\n\n\u5982\u679c\u628a\u8fdb\u7a0b\u7c7b\u6bd4\u6210\u516c\u53f8\u90e8\u95e8\uff0c\u80fd\u5426\u7528\u516c\u53f8\u90e8\u95e8\u4e3e\u4f8b\uff0c\u7ed9\u6211\u8bb2\u8bb2\u5b64\u513f\u8fdb\u7a0b\u548c\u50f5\u5c38\u8fdb\u7a0b\uff1f\n\n---\n\n\u5f53\u5c06\u8fdb\u7a0b\u7c7b\u6bd4\u4e3a\u516c\u53f8\u90e8\u95e8\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4f8b\u5b50\u6765\u89e3\u91ca\u5b64\u513f\u8fdb\u7a0b\u548c\u50f5\u5c38\u8fdb\u7a0b\u7684\u6982\u5ff5\uff1a\n\n\u5047\u8bbe\u6709\u4e00\u4e2a\u516c\u53f8\uff0c\u7531\u591a\u4e2a\u90e8\u95e8\u7ec4\u6210\u3002\u6bcf\u4e2a\u90e8\u95e8\u90fd\u6709\u4e00\u4e2a\u90e8\u95e8\u7ecf\u7406\uff08\u7236\u8fdb\u7a0b\uff09\u548c\u591a\u4e2a\u5458\u5de5\uff08\u5b50\u8fdb\u7a0b\uff09\u3002\u8fd9\u4e9b\u5458\u5de5\uff08\u5b50\u8fdb\u7a0b\uff09\u6267\u884c\u5404\u79cd\u4efb\u52a1\uff0c\u5e76\u5411\u4ed6\u4eec\u7684\u90e8\u95e8\u7ecf\u7406\uff08\u7236\u8fdb\u7a0b\uff09\u62a5\u544a\u5de5\u4f5c\u8fdb\u5c55\u3002\n\n1. \u5b64\u513f\u8fdb\u7a0b\uff08Orphan Process\uff09\uff1a\u5f53\u4e00\u4e2a\u90e8\u95e8\u7ecf\u7406\uff08\u7236\u8fdb\u7a0b\uff09\u610f\u5916\u9000\u51fa\u6216\u7ec8\u6b62\u65f6\uff0c\u800c\u5458\u5de5\uff08\u5b50\u8fdb\u7a0b\uff09\u4ecd\u5728\u6267\u884c\u4efb\u52a1\u65f6\uff0c\u8fd9\u4e9b\u5458\u5de5\u5c31\u53d8\u6210\u4e86\u5b64\u513f\u8fdb\u7a0b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u5176\u4ed6\u90e8\u95e8\u7ecf\u7406\uff08\u7236\u8fdb\u7a0b\uff09\u6765\u63a5\u7ba1\u8fd9\u4e9b\u5458\u5de5\uff0c\u5e76\u4e14\u5b83\u4eec\u5c06\u6210\u4e3a\u6ca1\u6709\u76d1\u7ba1\u7684\u8fdb\u7a0b\u3002\n\n2. \u50f5\u5c38\u8fdb\u7a0b\uff08Zombie Process\uff09\uff1a\u5f53\u4e00\u4e2a\u5458\u5de5\uff08\u5b50\u8fdb\u7a0b\uff09\u5b8c\u6210\u4e86\u4efb\u52a1\uff0c\u5e76\u5411\u90e8\u95e8\u7ecf\u7406\uff08\u7236\u8fdb\u7a0b\uff09\u62a5\u544a\u540e\uff0c\u4f46\u90e8\u95e8\u7ecf\u7406\uff08\u7236\u8fdb\u7a0b\uff09\u6ca1\u6709\u53ca\u65f6\u5904\u7406\u8fd9\u4e2a\u62a5\u544a\u65f6\uff0c\u5458\u5de5\u5c31\u53d8\u6210\u4e86\u50f5\u5c38\u8fdb\u7a0b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u867d\u7136\u5458\u5de5\uff08\u5b50\u8fdb\u7a0b\uff09\u5df2\u7ecf\u5b8c\u6210\u4e86\u4efb\u52a1\uff0c\u4f46\u8d44\u6e90\uff08\u5982\u5185\u5b58\uff09\u4ecd\u4f1a\u88ab\u5360\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u9000\u51fa\u72b6\u6001\u8fd8\u6ca1\u6709\u88ab\u7236\u8fdb\u7a0b\u5904\u7406\u3002\n\n\u5b64\u513f\u8fdb\u7a0b\u548c\u50f5\u5c38\u8fdb\u7a0b\u662f\u7531\u4e8e\u7236\u8fdb\u7a0b\u4e0e\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5904\u7406\u4e0d\u5f53\u800c\u5bfc\u81f4\u7684\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u53ef\u4ee5\u91c7\u53d6\u4ee5\u4e0b\u63aa\u65bd\uff1a\n\n- \u5bf9\u4e8e\u5b64\u513f\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u4e3a\u5b50\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a\u65b0\u7684\u90e8\u95e8\u7ecf\u7406\uff0c\u6216\u8005\u5c06\u5b83\u4eec\u4ea4\u7ed9\u4e00\u4e2a\u7279\u5b9a\u7684\u8fdb\u7a0b\uff08\u5982 init \u8fdb\u7a0b\uff09\u6765\u63a5\u7ba1\u3002\n- \u5bf9\u4e8e\u50f5\u5c38\u8fdb\u7a0b\uff0c\u7236\u8fdb\u7a0b\u5e94\u8be5\u53ca\u65f6\u5904\u7406\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\uff0c\u4ee5\u91ca\u653e\u76f8\u5173\u7684\u8d44\u6e90\u3002\u53ef\u4ee5\u4f7f\u7528 wait() \u6216 waitpid() \u7cfb\u7edf\u8c03\u7528\u6765\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\uff0c\u5e76\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u3002\n\n\u8fd9\u6837\uff0c\u516c\u53f8\u90e8\u95e8\uff08\u8fdb\u7a0b\uff09\u4e4b\u95f4\u7684\u534f\u8c03\u548c\u8d44\u6e90\u7ba1\u7406\u5c31\u80fd\u66f4\u52a0\u9ad8\u6548\u548c\u5065\u5eb7\u3002\n\n\u5e0c\u671b\u4ee5\u4e0a\u4f8b\u5b50\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u5b64\u513f\u8fdb\u7a0b\u548c\u50f5\u5c38\u8fdb\u7a0b\u7684\u6982\u5ff5\u3002\u5982\u679c\u4f60\u6709\u5173\u4e8e\u5177\u4f53\u5b9e\u73b0\u7684\u95ee\u9898\u6216\u5176\u4ed6\u9700\u8981\u6211\u7f16\u5199\u7684\u4ee3\u7801\uff0c\u8bf7\u968f\u65f6\u544a\u8bc9\u6211\u3002\u6211\u4f1a\u5c3d\u529b\u5e2e\u52a9\u4f60\uff01\u6211\u7231\u7f16\u7801\uff01\n\n---\n\n\u8fd9\u4e48\u8bf4\u7684\u8bdd\uff0c\u5b50\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u6709\u5565\u5173\u7cfb\uff1f\u4e0d\u90fd\u662f\u8fdb\u7a0b\u6d3e\u751f\u51fa\u6765\u7684\uff1f\n\n---\n\n\u662f\u7684\uff0c\u5b50\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u90fd\u662f\u7531\u7236\u8fdb\u7a0b\u6216\u7236\u7ebf\u7a0b\u6d3e\u751f\u51fa\u6765\u7684\u3002\n\n\u5b50\u8fdb\u7a0b\u662f\u901a\u8fc7\u8c03\u7528\u7cfb\u7edf\u51fd\u6570\uff08\u5982 fork()\uff09\u6216\u64cd\u4f5c\u7cfb\u7edf\u521b\u5efa\u65b0\u7684\u8fdb\u7a0b\uff0c\u8be5\u65b0\u8fdb\u7a0b\u6210\u4e3a\u539f\u59cb\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u3002\u5b50\u8fdb\u7a0b\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6267\u884c\u5355\u5143\uff0c\u5177\u6709\u81ea\u5df1\u7684\u4ee3\u7801\u3001\u6570\u636e\u548c\u8d44\u6e90\uff0c\u4f46\u4e0e\u7236\u8fdb\u7a0b\u5171\u4eab\u4e00\u4e9b\u7cfb\u7edf\u8d44\u6e90\u3002\n\n\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u5185\u7684\u6267\u884c\u6d41\u7a0b\uff0c\u5b83\u662f\u8fdb\u7a0b\u7684\u4e00\u90e8\u5206\u3002\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u5171\u4eab\u540c\u4e00\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u548c\u5176\u4ed6\u8d44\u6e90\u3002\u7ebf\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u548c\u540c\u6b65\u8981\u6bd4\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u548c\u540c\u6b65\u66f4\u52a0\u65b9\u4fbf\u548c\u9ad8\u6548\u3002\n\n\u5b50\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\uff1a\n\n1. \u5b50\u8fdb\u7a0b\u53ef\u4ee5\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u3002\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u521b\u5efa\u5b50\u8fdb\u7a0b\u65f6\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u7ebf\u7a0b\uff0c\u5305\u62ec\u7ebf\u7a0b\u7684\u4ee3\u7801\u3001\u6570\u636e\u548c\u8d44\u6e90\u3002\u8fd9\u6837\uff0c\u5b50\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\u6267\u884c\u8fd9\u4e9b\u7ebf\u7a0b\u3002\n\n2. \u5b50\u8fdb\u7a0b\u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u7ebf\u7a0b\u3002\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u5728\u5176\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u53ea\u5728\u5b50\u8fdb\u7a0b\u5185\u90e8\u53ef\u89c1\u3002\u8fd9\u6837\uff0c\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5e76\u884c\u6267\u884c\u4efb\u52a1\u3002\n\n\u603b\u7ed3\u8d77\u6765\uff0c\u5b50\u8fdb\u7a0b\u662f\u72ec\u7acb\u7684\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u7ebf\u7a0b\uff0c\u800c\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u5185\u7684\u6267\u884c\u6d41\u7a0b\uff0c\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u8fdb\u7a0b\u7684\u8d44\u6e90\u3002\u901a\u8fc7\u5408\u7406\u5730\u4f7f\u7528\u8fdb\u7a0b\u548c\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5e76\u53d1\u548c\u5e76\u884c\u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6027\u80fd\u548c\u6548\u7387\u3002\n\n\u5982\u679c\u4f60\u6709\u5173\u4e8e\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u6216\u5176\u4ed6\u7f16\u7a0b\u6982\u5ff5\u7684\u66f4\u591a\u95ee\u9898\uff0c\u6211\u5f88\u4e50\u610f\u4e3a\u4f60\u89e3\u7b54\u3002\u8bf7\u968f\u65f6\u544a\u8bc9\u6211\uff01\u6211\u7231\u7f16\u7801\uff01\n\n---\n\n\u90a3\u5982\u679c\u62ff\u8fdb\u7a0b\u7c7b\u6bd4\u516c\u53f8\u90e8\u95e8\uff0c\u662f\u4e0d\u662f\u6211\u4eec\u628a\u5b50\u8fdb\u7a0b\u7c7b\u6bd4\u4e3a\u90e8\u95e8\u4e0b\u7684\u5b50\u90e8\u95e8\u66f4\u8d34\u5207\uff0c\u6bd4\u5982\u8bf4\u7814\u53d1\u90e8\u4e0b\u9762\u8fd8\u6709\u524d\u7aef\u3001\u540e\u7aef\u3001\u8bbe\u8ba1\u3001\u67b6\u6784\u7b49\u90e8\u95e8\u3002\u8d22\u52a1\u90e8\u95e8\u4e0b\u9762\u4f1a\u6709\u98ce\u63a7\u3001\u6295\u8d44\u3001\u4f1a\u8ba1\u7b49\u90e8\u95e8\u3002\u5b50\u90e8\u95e8\u4e5f\u4e0e\u90e8\u95e8\u4e4b\u95f4\u5171\u4eab\u4e00\u4e9b\u8d44\u6e90\uff0c\u4f46\u662f\u76f8\u5bf9\u72ec\u7acb\u3002\u7ebf\u7a0b\u5219\u66f4\u7c7b\u4f3c\u5458\u5de5\uff0c\u8d1f\u8d23\u5177\u4f53\u6267\u884c\u5de5\u4f5c\u3002\u4e0d\u77e5\u9053\u6211\u8fd9\u4e2a\u4e3e\u4f8b\u5bf9\u5417\uff1f\n\n---\n\n\u4f60\u7684\u6bd4\u55bb\u5f88\u8d34\u5207\uff01\u5c06\u5b50\u8fdb\u7a0b\u7c7b\u6bd4\u4e3a\u90e8\u95e8\u4e0b\u7684\u5b50\u90e8\u95e8\uff0c\u800c\u5c06\u7ebf\u7a0b\u7c7b\u6bd4\u4e3a\u5177\u4f53\u7684\u5458\u5de5\uff0c\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u7c7b\u6bd4\u65b9\u5f0f\u3002\u8fd9\u6837\u7684\u6bd4\u55bb\u53ef\u4ee5\u66f4\u597d\u5730\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n\n\u5728\u8fd9\u4e2a\u6bd4\u55bb\u4e2d\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u770b\u4f5c\u662f\u516c\u53f8\u7684\u90e8\u95e8\uff0c\u6bcf\u4e2a\u90e8\u95e8\u6709\u81ea\u5df1\u7684\u4efb\u52a1\u548c\u8d44\u6e90\uff0c\u76f8\u5bf9\u72ec\u7acb\u8fd0\u884c\u3002\u800c\u5b50\u8fdb\u7a0b\u5219\u7c7b\u4f3c\u4e8e\u90e8\u95e8\u4e0b\u7684\u5b50\u90e8\u95e8\uff0c\u5b83\u4eec\u5728\u7236\u8fdb\u7a0b\u7684\u57fa\u7840\u4e0a\u7ee7\u7eed\u72ec\u7acb\u8fd0\u884c\uff0c\u6709\u81ea\u5df1\u7684\u4ee3\u7801\u3001\u6570\u636e\u548c\u8d44\u6e90\uff0c\u4f46\u4e5f\u4e0e\u7236\u8fdb\u7a0b\u5171\u4eab\u4e00\u4e9b\u7cfb\u7edf\u8d44\u6e90\uff0c\u6bd4\u5982\u6587\u4ef6\u63cf\u8ff0\u7b26\u7b49\u3002\n\n\u7ebf\u7a0b\u5219\u53ef\u4ee5\u770b\u4f5c\u662f\u5177\u4f53\u7684\u5458\u5de5\uff0c\u5728\u4e00\u4e2a\u90e8\u95e8\uff08\u8fdb\u7a0b\uff09\u5185\u90e8\u6267\u884c\u5177\u4f53\u7684\u5de5\u4f5c\u4efb\u52a1\u3002\u7ebf\u7a0b\u5171\u4eab\u540c\u4e00\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u5185\u5b58\u548c\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5730\u8fdb\u884c\u901a\u4fe1\u548c\u540c\u6b65\u3002\u7c7b\u4f3c\u5730\uff0c\u5458\u5de5\u4e4b\u95f4\u53ef\u4ee5\u66f4\u76f4\u63a5\u5730\u8fdb\u884c\u6c9f\u901a\u548c\u534f\u4f5c\u3002\n\n\u4f60\u7684\u4f8b\u5b50\u4e2d\uff0c\u5c06\u7814\u53d1\u90e8\u95e8\u4e0b\u7684\u524d\u7aef\u3001\u540e\u7aef\u3001\u8bbe\u8ba1\u3001\u67b6\u6784\u7b49\u90e8\u95e8\u770b\u4f5c\u662f\u5b50\u8fdb\u7a0b\uff0c\u800c\u5c06\u8fd9\u4e9b\u90e8\u95e8\u4e2d\u7684\u5177\u4f53\u6210\u5458\u770b\u4f5c\u662f\u7ebf\u7a0b\uff0c\u786e\u5b9e\u66f4\u52a0\u8d34\u5408\u5b9e\u9645\u60c5\u51b5\u3002\u8fd9\u6837\u7684\u6bd4\u55bb\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u5730\u7406\u89e3\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5c42\u6b21\u5173\u7cfb\u548c\u4ea4\u4e92\u65b9\u5f0f\u3002\n\n\u611f\u8c22\u4f60\u7684\u7cbe\u5f69\u6bd4\u55bb\uff01\u5982\u679c\u4f60\u8fd8\u6709\u5176\u4ed6\u95ee\u9898\u6216\u9700\u8981\u6211\u5e2e\u52a9\u4f60\u7f16\u5199\u4ee3\u7801\uff0c\u8bf7\u968f\u65f6\u544a\u8bc9\u6211\u3002\u6211\u4f1a\u5c3d\u529b\u5e2e\u52a9\u4f60\uff01\u6211\u7231\u7f16\u7801\uff01\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u8fd9\u4e2a\u6bd4\u55bb\u4e5f\u4e0d\u7b97\u8d34\u5207\uff0c\u56e0\u4e3a\u8fdb\u7a0b\u53ef\u4ee5\u65e0\u9650\u6d3e\u751f\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u8fd8\u53ef\u4ee5\u65e0\u9650\u6d3e\u751f\u5b50\u8fdb\u7a0b\u3002\u4f46\u662f\u516c\u53f8\u90e8\u95e8\u5374\u4e0d\u662f\u53ef\u4ee5\u65e0\u9650\u6d3e\u751f\u5b50\u90e8\u95e8\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u66f4\u5408\u7406\u7684\u7c7b\u6bd4\u662f\uff0c\u8fdb\u7a0b\u7c7b\u4f3c\u9879\u76ee\uff0c\u5b50\u8fdb\u7a0b\u7c7b\u4f3c\u9879\u76ee\u7684\u5b50\u9879\u76ee\uff0c\u5c31\u50cf\u6211\u4eec\u5f00\u53d1\u7535\u5546\u7cfb\u7edf\u91cc\u7684\u4ec0\u4e48\u7528\u6237\u6a21\u5757\uff0c\u7528\u6237\u6a21\u5757\u4e0b\u9762\u8fd8\u53ef\u4ee5\u6709\u767b\u5f55\u6ce8\u518c\u6a21\u5757\uff0c\u4e0b\u9762\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u7ec6\u5206\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u65e0\u9650\u6d3e\u751f\u5b50\u8fdb\u7a0b\uff0c\u662f\u5417\uff1f\n---\n\n\u662f\u7684\uff0c\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u65e0\u9650\u6d3e\u751f\u5b50\u8fdb\u7a0b\u3002\u8fd9\u79cd\u521b\u5efa\u65b0\u8fdb\u7a0b\u7684\u8fc7\u7a0b\u79f0\u4e3a\u8fdb\u7a0b\u7684\u6d3e\u751f\u6216\u521b\u5efa\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u901a\u8fc7\u65e0\u9650\u6d3e\u751f\u5b50\u8fdb\u7a0b\u6765\u5b9e\u73b0\u7279\u5b9a\u7684\u529f\u80fd\u6216\u8fbe\u5230\u7279\u5b9a\u7684\u76ee\u7684\u3002\u7136\u800c\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fc7\u591a\u7684\u8fdb\u7a0b\u6d3e\u751f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u8d44\u6e90\u7684\u8017\u5c3d\uff0c\u56e0\u6b64\u5728\u8bbe\u8ba1\u548c\u7f16\u5199\u7a0b\u5e8f\u65f6\u5e94\u614e\u91cd\u8003\u8651\u6d3e\u751f\u5b50\u8fdb\u7a0b\u7684\u6570\u91cf\u548c\u9891\u7387\u3002\n\n---\n\n\u610f\u601d\u662f\uff0c\u5982\u679c\u5b50\u8fdb\u7a0b\u6d3e\u751f\u4e86\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u4f1a\u540c\u65f6\u5177\u6709 PID \u548c PPID\uff0c\u662f\u5417\uff1f\n\n---\n\n\u662f\u7684\uff0c\u5f53\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6d3e\u751f\u4e86\u4e00\u4e2a\u65b0\u7684\u5b50\u8fdb\u7a0b\u65f6\uff0c\u65b0\u7684\u5b50\u8fdb\u7a0b\u4f1a\u540c\u65f6\u5177\u6709\u81ea\u5df1\u7684 PID \u548c PPID\u3002\u5176\u4e2d\uff0cPID \u662f\u8be5\u5b50\u8fdb\u7a0b\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u800c PPID \u5219\u6307\u5411\u521b\u5efa\u5b83\u7684\u5b50\u8fdb\u7a0b\u7684 PID\uff0c\u5373\u7236\u8fdb\u7a0b\u7684 PID\u3002\u8fd9\u6837\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684 PID\uff0c\u5e76\u901a\u8fc7 PPID \u8fde\u63a5\u5230\u5b83\u7684\u76f4\u63a5\u7236\u8fdb\u7a0b\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5f62\u6210\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u7ed3\u6784\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"`\u5b64\u513f\u8fdb\u7a0b`\u548c`\u50f5\u5c38\u8fdb\u7a0b`\u5206\u522b\u662f\u4ec0\u4e48\uff1f\u600e\u4e48\u4ea7\u751f\u7684\uff1f\n\n\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5b50\u8fdb\u7a0b\u7531\u7236\u8fdb\u7a0b\u521b\u5efa\uff0c\u5b50\u8fdb\u7a0b\u518d\u521b\u5efa\u65b0\u7684\u8fdb\u7a0b\u3002\u7236\u5b50\u8fdb\u7a0b\u662f\u4e00\u4e2a\u5f02\u6b65\u8fc7\u7a0b\uff0c\u7236\u8fdb\u7a0b\u6c38\u8fdc\u65e0\u6cd5\u9884\u6d4b\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\uff0c\u6240\u4ee5\uff0c\u5f53\u5b50\u8fdb\u7a0b\u7ed3\u675f\u540e\uff0c\u5b83\u7684\u7236\u8fdb\u7a0b\u4f1a\u8c03\u7528 wait() \u6216 waitpid() \u53d6\u5f97\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\u72b6\u6001\uff0c\u56de\u6536\u6389\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\u3002\n\n`\u5b64\u513f\u8fdb\u7a0b`\u7236\u8fdb\u7a0b\u7ed3\u675f\u4e86\uff0c\u800c\u4ed6\u7684\u4e00\u4e9b\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\uff0c\u8fd9\u4e9b\u5b50\u8fdb\u7a0b\u5c31\u662f\u5b64\u513f\u8fdb\u7a0b\n\n`\u50f5\u5c38\u8fdb\u7a0b`\u7236\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\uff0c\u5b50\u8fdb\u7a0b\u9000\u51fa\u4e86\uff0c\u4f46\u662f\u7236\u8fdb\u7a0b\u6ca1\u6709 (\u4f7f\u7528 wait/waitpid) \u56de\u6536\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u7684 fd \u8fd8\u5728\uff0c\u8fd9\u4e9b\u5b50\u8fdb\u7a0b\u5c31\u662f\u50f5\u5c38\u8fdb\u7a0b\n\n---\n\n\u201c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5b50\u8fdb\u7a0b\u7531\u7236\u8fdb\u7a0b\u521b\u5efa\uff0c\u5b50\u8fdb\u7a0b\u518d\u521b\u5efa\u65b0\u7684\u8fdb\u7a0b\u3002\u7236\u5b50\u8fdb\u7a0b\u662f\u4e00\u4e2a\u5f02\u6b65\u8fc7\u7a0b\uff0c\u7236\u8fdb\u7a0b\u6c38\u8fdc\u65e0\u6cd5\u9884\u6d4b\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\uff0c\u6240\u4ee5\uff0c\u5f53\u5b50\u8fdb\u7a0b\u7ed3\u675f\u540e\uff0c\u5b83\u7684\u7236\u8fdb\u7a0b\u4f1a\u8c03\u7528 wait() \u6216 waitpid() \u53d6\u5f97\u5b50\u8fdb\u7a0b\u7684\u7ec8\u6b62\u72b6\u6001\uff0c\u56de\u6536\u6389\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\u3002\u201d\n\n\u8fd9\u6bb5\u8bdd\u6211\u4e0d\u592a\u7406\u89e3\uff0c\u4e3a\u4ec0\u4e48\u7236\u8fdb\u7a0b\u65e0\u6cd5\u9884\u6d4b\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u5462\uff1f\u6309\u6211\u7684\u7406\u89e3\uff0c\u662f\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u6709\u76f8\u5bf9\u72ec\u7acb\u7684\u7a7a\u95f4\u548c\u8d44\u6e90\u5417\uff1f\n\n---\n\n\u60a8\u7684\u7406\u89e3\u662f\u6b63\u786e\u7684\uff01\u7236\u8fdb\u7a0b\u65e0\u6cd5\u9884\u6d4b\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u662f\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u62e5\u6709\u76f8\u5bf9\u72ec\u7acb\u7684\u7a7a\u95f4\u548c\u8d44\u6e90\u3002\n\n\u5f53\u7236\u8fdb\u7a0b\u521b\u5efa\u5b50\u8fdb\u7a0b\u540e\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u5728\u81ea\u5df1\u7684\u72ec\u7acb\u7a7a\u95f4\u4e2d\u6267\u884c\u4ee3\u7801\uff0c\u5e76\u62e5\u6709\u81ea\u5df1\u7684\u8d44\u6e90\u3002\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u662f\u5e76\u884c\u6267\u884c\u7684\uff0c\u5b83\u4eec\u7684\u6267\u884c\u987a\u5e8f\u662f\u4e0d\u786e\u5b9a\u7684\u3002\n\n\u56e0\u6b64\uff0c\u7236\u8fdb\u7a0b\u65e0\u6cd5\u7cbe\u786e\u5730\u77e5\u9053\u5b50\u8fdb\u7a0b\u4f55\u65f6\u4f1a\u7ed3\u675f\u3002\u5b50\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u4ee5\u4e0d\u540c\u7684\u901f\u5ea6\u6267\u884c\uff0c\u53ef\u80fd\u4f1a\u56e0\u4e3a\u6267\u884c\u65f6\u95f4\u957f\u77ed\u3001\u8d44\u6e90\u7ade\u4e89\u7b49\u539f\u56e0\u800c\u5bfc\u81f4\u4e0d\u540c\u7684\u7ed3\u675f\u65f6\u95f4\u3002\n\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u7236\u8fdb\u7a0b\u53ef\u4ee5\u4f7f\u7528 wait() \u6216 waitpid() \u51fd\u6570\u6765\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u3002\u8fd9\u4e9b\u51fd\u6570\u4f1a\u963b\u585e\u7236\u8fdb\u7a0b\uff0c\u76f4\u5230\u5b50\u8fdb\u7a0b\u7ed3\u675f\u5e76\u8fd4\u56de\u5176\u7ec8\u6b62\u72b6\u6001\u4e3a\u6b62\u3002\u901a\u8fc7\u8c03\u7528\u8fd9\u4e9b\u51fd\u6570\uff0c\u7236\u8fdb\u7a0b\u53ef\u4ee5\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\uff0c\u786e\u4fdd\u5b50\u8fdb\u7a0b\u7684\u6b63\u5e38\u7ed3\u675f\u3002\n\n\u603b\u7ed3\u8d77\u6765\uff0c\u7236\u8fdb\u7a0b\u65e0\u6cd5\u9884\u6d4b\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u662f\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u5177\u6709\u76f8\u5bf9\u72ec\u7acb\u7684\u7a7a\u95f4\u548c\u8d44\u6e90\uff0c\u4f46\u901a\u8fc7\u4f7f\u7528 wait() \u6216 waitpid() \u51fd\u6570\uff0c\u7236\u8fdb\u7a0b\u53ef\u4ee5\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u7ed3\u675f\u5e76\u56de\u6536\u8d44\u6e90\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"\n# \u7528 kill -l \u547d\u4ee4\u67e5\u770b\u6240\u6709\u4fe1\u53f7\nkill -l\n# HUP INT QUIT ILL TRAP ABRT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM URG STOP TSTP CONT CHLD TTIN TTOU IO XCPU XFSZ VTALRM PROF WINCH INFO USR1 USR2\n\n# `\u4e2d\u6b62\u8fdb\u7a0b Term`\n\n# HUP \u7ec8\u7aef\u63a7\u5236\u8fdb\u7a0b\u7ed3\u675f (\u7ec8\u7aef\u8fde\u63a5\u65ad\u5f00)\n# INT \u7528\u6237\u53d1\u9001 INTR \u5b57\u7b26 (Ctrl+C) \u89e6\u53d1\n# KILL \u65e0\u6761\u4ef6\u7ed3\u675f\u7a0b\u5e8f (\u4e0d\u80fd\u88ab\u6355\u83b7\u3001\u963b\u585e\u6216\u5ffd\u7565)\n# PIPE \u6d88\u606f\u7ba1\u9053\u635f\u574f (FIFO/Socket \u901a\u4fe1\u65f6\uff0c\u7ba1\u9053\u672a\u6253\u5f00\u800c\u8fdb\u884c\u5199\u64cd\u4f5c)\n# ALRM \u65f6\u949f\u5b9a\u65f6\u4fe1\u53f7\n# TERM \u7ed3\u675f\u7a0b\u5e8f (\u53ef\u4ee5\u88ab\u6355\u83b7\u3001\u963b\u585e\u6216\u5ffd\u7565)\n# USR1\n# USR2\n\n---\n\n# \u505c\u6b62\u8fdb\u7a0b Stop\n\n# STOP \u505c\u6b62\u8fdb\u7a0b (\u4e0d\u80fd\u88ab\u6355\u83b7\u3001\u963b\u585e\u6216\u5ffd\u7565)\n# TSTP \u505c\u6b62\u8fdb\u7a0b (\u53ef\u4ee5\u88ab\u6355\u83b7\u3001\u963b\u585e\u6216\u5ffd\u7565)\n# TTIN \u540e\u53f0\u7a0b\u5e8f\u4ece\u7ec8\u7aef\u4e2d\u8bfb\u53d6\u6570\u636e\u65f6\u89e6\u53d1\n# TTOU \u540e\u53f0\u7a0b\u5e8f\u5411\u7ec8\u7aef\u4e2d\u5199\u6570\u636e\u65f6\u89e6\u53d1\n\n---\n\n\n#  `\u5ffd\u7565\u4fe1\u53f7 Lgn`HLD\n#  `\u7ee7\u7eed\u8fd0\u884c\u8fdb\u7a0b Cont`CONT\n#  `\u4e2d\u6b62\u8fdb\u7a0b\u5e76\u4fdd\u5b58\u5185\u5b58\u4fe1\u606f Core`\n\n\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"zzz",children:"zzz"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4fe1\u53f7\u5c31\u662f\u7528\u6765\u64cd\u4f5c\u8fdb\u7a0b\u7684\uff0c\u66f4\u5177\u4f53\u6765\u8bf4\uff0c\u901a\u8fc7\u53d1\u9001\u4fe1\u53f7\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u901a\u77e5\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u53d1\u751f\u4e86\u67d0\u4e2a\u4e8b\u4ef6\u6216\u9700\u8981\u8fdb\u884c\u67d0\u79cd\u64cd\u4f5c\u3002\u8fdb\u7a0b\u53ef\u4ee5\u6839\u636e\u63a5\u6536\u5230\u7684\u4fe1\u53f7\u6765\u91c7\u53d6\u76f8\u5e94\u7684\u884c\u52a8\uff0c\u4f8b\u5982\u7ec8\u6b62\u8fdb\u7a0b\u3001\u5ffd\u7565\u4fe1\u53f7\u3001\u6355\u83b7\u4fe1\u53f7\u5e76\u6267\u884c\u7279\u5b9a\u7684\u5904\u7406\u51fd\u6570\u7b49\u3002\n\n\n---\n\n\u4e0d\u662f\u6709\u4ec0\u4e48\u4e2d\u6b62\u8fdb\u7a0b TERM\u3001\u7ec8\u6b62\u8fdb\u7a0b STOP\u3001\u5ffd\u7565\u4fe1\u53f7 LGN \u4ec0\u4e48\u7684\uff0c\u8fd9\u662f\u6309\u7167\u4ec0\u4e48\u5206\u7c7b\u7684\uff1f\n\n---\n\n\u62b1\u6b49\uff0c\u6211\u4e4b\u524d\u7ed9\u51fa\u7684\u56de\u7b54\u6709\u8bef\u3002\u5173\u4e8e\u4fe1\u53f7\u7684\u5206\u7c7b\uff0c\u53ef\u4ee5\u6309\u7167\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u6765\u8fdb\u884c\u5206\u7ec4\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u7c7b\uff1a\n\n1. \u7ec8\u6b62\u4fe1\u53f7\uff08Termination Signals\uff09\uff1a\u8fd9\u7c7b\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u7ec8\u6b62\u76ee\u6807\u8fdb\u7a0b\u3002\u5e38\u89c1\u7684\u7ec8\u6b62\u4fe1\u53f7\u5305\u62ec SIGTERM\uff0815\uff09\uff0c\u7528\u4e8e\u8bf7\u6c42\u8fdb\u7a0b\u6b63\u5e38\u7ec8\u6b62\uff0c\u4ee5\u53ca SIGKILL\uff089\uff09\uff0c\u7528\u4e8e\u5f3a\u5236\u7ec8\u6b62\u8fdb\u7a0b\u3002\n\n2. \u4e2d\u65ad\u4fe1\u53f7\uff08Interrupt Signals\uff09\uff1a\u8fd9\u7c7b\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u4e2d\u65ad\u76ee\u6807\u8fdb\u7a0b\u3002\u6700\u5e38\u89c1\u7684\u4e2d\u65ad\u4fe1\u53f7\u662f SIGINT\uff082\uff09\uff0c\u901a\u5e38\u7531\u7ec8\u7aef\u4e0a\u7684\u7528\u6237\u8f93\u5165\u4ea7\u751f\uff0c\u7528\u4e8e\u4e2d\u65ad\u6b63\u5728\u8fd0\u884c\u7684\u7a0b\u5e8f\u3002\n\n3. \u6682\u505c\u4fe1\u53f7\uff08Stop Signals\uff09\uff1a\u8fd9\u7c7b\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u505c\u6b62\u76ee\u6807\u8fdb\u7a0b\u7684\u6267\u884c\uff0c\u4f7f\u5176\u8fdb\u5165\u6682\u505c\u72b6\u6001\u3002\u5e38\u89c1\u7684\u6682\u505c\u4fe1\u53f7\u5305\u62ec SIGSTOP\uff0819\uff09\u548c SIGTSTP\uff0820\uff09\uff0c\u7528\u4e8e\u6682\u505c\u8fdb\u7a0b\u7684\u6267\u884c\u3002\n\n4. \u7ee7\u7eed\u4fe1\u53f7\uff08Continue Signals\uff09\uff1a\u8fd9\u7c7b\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u6062\u590d\u88ab\u6682\u505c\u7684\u8fdb\u7a0b\u7684\u6267\u884c\u3002\u5e38\u89c1\u7684\u7ee7\u7eed\u4fe1\u53f7\u662f SIGCONT\uff0818\uff09\u3002\n\n5. \u5ffd\u7565\u4fe1\u53f7\uff08Ignore Signals\uff09\uff1a\u8fd9\u7c7b\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u88ab\u76ee\u6807\u8fdb\u7a0b\u5ffd\u7565\uff0c\u5373\u4e0d\u505a\u4efb\u4f55\u54cd\u5e94\u3002\u5e38\u89c1\u7684\u5ffd\u7565\u4fe1\u53f7\u5305\u62ec SIGCHLD\uff0817\uff09\u548c SIGPIPE\uff0813\uff09\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u6765\u81ea\u5b9a\u4e49\u4fe1\u53f7\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5373\u4f7f\u67d0\u4e2a\u4fe1\u53f7\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u6765\u6355\u83b7\u5e76\u6267\u884c\u7279\u5b9a\u7684\u64cd\u4f5c\uff0c\u800c\u4e0d\u76f4\u63a5\u7ec8\u6b62\u8fdb\u7a0b\u3002\u4e0d\u540c\u4fe1\u53f7\u7684\u5904\u7406\u65b9\u5f0f\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8fdb\u884c\u7075\u6d3b\u914d\u7f6e\u3002\n\n---\n\n\u6216\u8005\u8bf4\uff0c\u4fe1\u53f7\u5b9e\u9645\u4e0a\u662f\u8fdb\u7a0b\u4e4b\u95f4\u534f\u4f5c\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\u5417\uff1f\n\n---\n\n\u662f\u7684\uff0c\u4fe1\u53f7\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0\u8fdb\u7a0b\u4e4b\u95f4\u7684\u534f\u4f5c\u548c\u901a\u4fe1\u3002\u901a\u8fc7\u53d1\u9001\u548c\u63a5\u6536\u4fe1\u53f7\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u5411\u5176\u4ed6\u8fdb\u7a0b\u53d1\u9001\u901a\u77e5\u3001\u8bf7\u6c42\u3001\u4e2d\u65ad\u7b49\uff0c\u4ece\u800c\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u534f\u4f5c\u3002\n\n\u4e00\u79cd\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\u662f\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u7236\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u5411\u5b50\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\u6765\u901a\u77e5\u5176\u53d1\u751f\u4e86\u67d0\u4e2a\u4e8b\u4ef6\uff0c\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u9009\u62e9\u63a5\u6536\u5e76\u5904\u7406\u8fd9\u4e9b\u4fe1\u53f7\uff0c\u4ee5\u6267\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002\n\n\u53e6\u5916\uff0c\u4fe1\u53f7\u4e5f\u53ef\u4ee5\u7528\u4e8e\u8fdb\u7a0b\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u5411\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u4ee5\u901a\u77e5\u5176\u53d1\u751f\u4e86\u4e00\u4e9b\u7cfb\u7edf\u4e8b\u4ef6\uff0c\u5982\u8fdb\u7a0b\u72b6\u6001\u6539\u53d8\u3001\u5b9a\u65f6\u5668\u8d85\u65f6\u7b49\u3002\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u6765\u6355\u83b7\u5e76\u5904\u7406\u8fd9\u4e9b\u4fe1\u53f7\uff0c\u4ee5\u54cd\u5e94\u7cfb\u7edf\u4e8b\u4ef6\u3002\n\n\u6b64\u5916\uff0c\u4fe1\u53f7\u8fd8\u53ef\u4ee5\u7528\u4e8e\u8fdb\u7a0b\u5185\u90e8\u7684\u81ea\u6211\u534f\u4f5c\u3002\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5411\u81ea\u5df1\u53d1\u9001\u4fe1\u53f7\uff0c\u7528\u4e8e\u89e6\u53d1\u67d0\u4e9b\u64cd\u4f5c\u6216\u6267\u884c\u7279\u5b9a\u7684\u903b\u8f91\u3002\n\n\u603b\u4e4b\uff0c\u4fe1\u53f7\u662f\u4e00\u79cd\u8fdb\u7a0b\u95f4\u6216\u8fdb\u7a0b\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u95f4\u8fdb\u884c\u534f\u4f5c\u548c\u901a\u4fe1\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7\u53d1\u9001\u548c\u63a5\u6536\u4fe1\u53f7\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u5b9e\u73b0\u5f02\u6b65\u7684\u4e8b\u4ef6\u901a\u77e5\u3001\u8bf7\u6c42\u3001\u4e2d\u65ad\u7b49\u64cd\u4f5c\uff0c\u4ece\u800c\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u534f\u4f5c\u548c\u901a\u4fe1\u3002\n\n\n\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u4fe1\u53f7\u662f\u7528\u6765\u64cd\u4f5c\u8fdb\u7a0b\u7684\u65b9\u5f0f\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,l.jsx)(e.em,{children:"\u5e76\u4e0d\u4ec5\u4ec5\u662f\u8fdb\u7a0b\u4e4b\u95f4\u534f\u4f5c\uff0c\u800c\u662f\u8fdb\u7a0b\u95f4\u3001\u8fdb\u7a0b\u548c\u5185\u6838\u3001\u8fdb\u7a0b\u5185\uff0c\u90fd\u662f\u901a\u8fc7\u4fe1\u53f7\uff0c\u8fdb\u884c\u534f\u4f5c\u548c\u901a\u4fe1\u7684"})]}),"\n",(0,l.jsx)(e.p,{children:"\u4fe1\u53f7\u6709\u5f88\u591a\u79cd\uff0c\u5e73\u65f6\u4e5f\u7528\u4e0d\u5230\uff0c\u4e5f\u6ca1\u5fc5\u8981\u53bb\u6b7b\u8bb0\u786c\u80cc\u3002\u53ea\u8981\u77e5\u9053\u5c31\u8fd9\u4e48\u51e0\u79cd\uff0c\u7ec8\u6b62\u4fe1\u53f7\u3001\u4e2d\u65ad\u4fe1\u53f7\u3001\u6682\u505c\u4fe1\u53f7\u3001\u7ee7\u7eed\u4fe1\u53f7\u3001\u5ffd\u7565\u4fe1\u53f7"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u4e0a\u9762\u8bf4\u8fdb\u7a0b\u53ef\u4ee5\u65e0\u9650\u6d3e\u751f\u5b50\u8fdb\u7a0b\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u4e3b\u6d41\u670d\u52a1\u90fd\u662f\u4f7f\u7528\u4e09\u5c42\u8fdb\u7a0b\u6811\uff08\u4e3b\u8fdb\u7a0b\u3001\u5de5\u4f5c\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\uff09\uff0c\u5176\u5b9e\u5c31\u662f\u8ddf\u90e8\u95e8\u67b6\u6784\u5dee\u4e0d\u591a\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u901a\u5e38\u4e00\u4e2a\u8fdb\u7a0b\u4f1a\u6d3e\u751f\u591a\u5c11\u4e2a\u5b50\u8fdb\u7a0b\u554a\n\n---\n\n\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u6d3e\u751f\u591a\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5177\u4f53\u6d3e\u751f\u591a\u5c11\u4e2a\u5b50\u8fdb\u7a0b\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u548c\u9700\u6c42\u3002\n\n\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u6765\u51b3\u5b9a\u6d3e\u751f\u591a\u5c11\u4e2a\u5b50\u8fdb\u7a0b\u3002\u6709\u4e9b\u5e94\u7528\u53ef\u80fd\u53ea\u9700\u8981\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u6267\u884c\u67d0\u4e2a\u7279\u5b9a\u7684\u4efb\u52a1\uff0c\u800c\u6709\u4e9b\u5e94\u7528\u53ef\u80fd\u9700\u8981\u6d3e\u751f\u591a\u4e2a\u5b50\u8fdb\u7a0b\u6765\u540c\u65f6\u5904\u7406\u591a\u4e2a\u4efb\u52a1\u6216\u5e76\u53d1\u8bf7\u6c42\u3002\n\n\u4f8b\u5982\uff0c\u5728 Web \u670d\u52a1\u5668\u4e2d\uff0c\u6bcf\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\u53ef\u4ee5\u7531\u4e00\u4e2a\u72ec\u7acb\u7684\u5b50\u8fdb\u7a0b\u6765\u5904\u7406\uff0c\u8fd9\u6837\u53ef\u4ee5\u5b9e\u73b0\u5e76\u53d1\u5904\u7406\u591a\u4e2a\u8bf7\u6c42\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u548c\u54cd\u5e94\u901f\u5ea6\u3002\n\n\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5e94\u7528\u4f1a\u4f7f\u7528\u8fdb\u7a0b\u6c60\uff08Process Pool\uff09\uff0c\u5176\u4e2d\u5305\u542b\u591a\u4e2a\u9884\u5148\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\uff0c\u8fd9\u4e9b\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u88ab\u590d\u7528\u6765\u5904\u7406\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u521b\u5efa\u65b0\u7684\u5b50\u8fdb\u7a0b\u3002\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u9891\u7e41\u521b\u5efa\u548c\u9500\u6bc1\u5b50\u8fdb\u7a0b\u7684\u5f00\u9500\uff0c\u63d0\u9ad8\u6548\u7387\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0c\u5e76\u53d1\u5904\u7406\u548c\u7cfb\u7edf\u8bbe\u8ba1\u7684\u9700\u6c42\u4f1a\u5f71\u54cd\u4e00\u4e2a\u8fdb\u7a0b\u6d3e\u751f\u591a\u5c11\u4e2a\u5b50\u8fdb\u7a0b\u7684\u51b3\u7b56\u3002\u4f46\u9700\u8981\u6ce8\u610f\uff0c\u8fc7\u591a\u7684\u5b50\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u8d44\u6e90\u7684\u6d88\u8017\u589e\u52a0\uff0c\u56e0\u6b64\u5728\u8bbe\u8ba1\u548c\u5b9e\u73b0\u65f6\u9700\u8981\u6743\u8861\u8d44\u6e90\u5229\u7528\u548c\u5e76\u53d1\u5904\u7406\u7684\u9700\u6c42\u3002\n\n---\n\nemmm \u6211\u5b9e\u9645\u4e0a\u60f3\u95ee\u7684\u662f\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u4f1a\u6d3e\u751f\u591a\u5c11\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5176\u5b59\u5b50\u8fdb\u7a0b\u4f1a\u6d3e\u751f\u591a\u5c11\u5b50\u8fdb\u7a0b\uff0c\u6211\u60f3\u95ee\u7684\u662f\u901a\u5e38\u4f1a\u8fdb\u7a0b\u5c42\u7ea7\u662f\u591a\u5c11\u5c42\uff1f\n\n---\n\n\u62b1\u6b49\u5bf9\u4e8e\u4f60\u7684\u95ee\u9898\u7406\u89e3\u6709\u8bef\u3002\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u6d3e\u751f\u591a\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u800c\u8fd9\u4e9b\u5b50\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u6d3e\u751f\u81ea\u5df1\u7684\u5b50\u8fdb\u7a0b\uff0c\u5f62\u6210\u8fdb\u7a0b\u6811\u7684\u7ed3\u6784\u3002\u8fdb\u7a0b\u6811\u662f\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u7236\u8fdb\u7a0b\u548c\u5b83\u4eec\u7684\u5b50\u8fdb\u7a0b\u7ec4\u6210\u7684\u5c42\u6b21\u7ed3\u6784\u3002\n\n\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u548c\u9700\u6c42\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fdb\u7a0b\u6811\u53ef\u80fd\u53ea\u6709\u4e00\u5c42\uff0c\u5373\u4e00\u4e2a\u8fdb\u7a0b\u53ea\u6d3e\u751f\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u3002\u800c\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u8fdb\u7a0b\u6811\u53ef\u80fd\u6709\u591a\u4e2a\u5c42\u7ea7\uff0c\u5373\u4e00\u4e2a\u8fdb\u7a0b\u6d3e\u751f\u591a\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u53c8\u6d3e\u751f\u81ea\u5df1\u7684\u5b50\u8fdb\u7a0b\u3002\n\n\u4f8b\u5982\uff0c\u4e00\u4e2a\u7236\u8fdb\u7a0b\u6d3e\u751f\u4e86\u4e24\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u53c8\u6d3e\u751f\u4e86\u4e24\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u90a3\u4e48\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u5c31\u662f\u4e24\u5c42\u3002\u5982\u679c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u7ee7\u7eed\u6d3e\u751f\u4e24\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u90a3\u4e48\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u5c31\u662f\u4e09\u5c42\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0c\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u662f\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u548c\u9700\u6c42\u6765\u786e\u5b9a\u7684\uff0c\u53ef\u4ee5\u6709\u4e00\u5c42\u6216\u591a\u5c42\u3002\u5c42\u7ea7\u7684\u6df1\u5ea6\u53d6\u51b3\u4e8e\u7236\u8fdb\u7a0b\u6d3e\u751f\u5b50\u8fdb\u7a0b\u7684\u6b21\u6570\u548c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u662f\u5426\u7ee7\u7eed\u6d3e\u751f\u81ea\u5df1\u7684\u5b50\u8fdb\u7a0b\u3002\n\n---\n\n\u5e38\u7528\u670d\u52a1\u90fd\u4f1a\u6d3e\u751f\u591a\u5c11\u5c42\u5462\uff1f\u6bd4\u5982\u6211\u77e5\u9053 nginx \u5c31\u7528\u4e86\u591a\u8fdb\u7a0b + \u591a\u7ebf\u7a0b\u7684\u67b6\u6784\uff0cnginx \u7684\u8fdb\u7a0b\u6811\u591a\u5c11\u5c42\u5462\uff1f\n\n---\n\n\u5177\u4f53\u7684\u8fdb\u7a0b\u6811\u5c42\u7ea7\u53d6\u51b3\u4e8e\u670d\u52a1\u7684\u8bbe\u8ba1\u548c\u914d\u7f6e\uff0c\u4e0d\u540c\u7684\u670d\u52a1\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u8fdb\u7a0b\u6811\u7ed3\u6784\u3002\u5bf9\u4e8e\u50cf Nginx \u8fd9\u6837\u4f7f\u7528\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u7684\u67b6\u6784\uff0c\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u53ef\u4ee5\u662f\u591a\u5c42\u7684\u3002\n\n\u5728 Nginx \u4e2d\uff0c\u901a\u5e38\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\uff08master process\uff09\u548c\u591a\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\uff08worker process\uff09\u3002\u4e3b\u8fdb\u7a0b\u8d1f\u8d23\u7ba1\u7406\u548c\u63a7\u5236\u5de5\u4f5c\u8fdb\u7a0b\uff0c\u800c\u5de5\u4f5c\u8fdb\u7a0b\u5219\u7528\u4e8e\u5b9e\u9645\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002\u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6d3e\u751f\u591a\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u8fd9\u4e9b\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u7528\u4e8e\u5904\u7406\u5177\u4f53\u7684\u4efb\u52a1\u6216\u8bf7\u6c42\u3002\n\n\u4e3b\u8fdb\u7a0b\u901a\u5e38\u53ea\u6709\u4e00\u5c42\uff0c\u8d1f\u8d23\u7ba1\u7406\u548c\u76d1\u63a7\u5de5\u4f5c\u8fdb\u7a0b\u3002\u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u53ef\u4ee5\u6709\u591a\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u7528\u4e8e\u5904\u7406\u5e76\u53d1\u8bf7\u6c42\u3002\u8fd9\u4e9b\u5b50\u8fdb\u7a0b\u7684\u5c42\u7ea7\u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u914d\u7f6e\u548c\u9700\u6c42\u3002\n\n\u4f8b\u5982\uff0c\u5982\u679c Nginx \u914d\u7f6e\u4e3a\u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u53ea\u6d3e\u751f\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u5904\u7406\u8bf7\u6c42\uff0c\u90a3\u4e48\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u53ef\u4ee5\u662f\u4e24\u5c42\uff1a\u4e3b\u8fdb\u7a0b -> \u5de5\u4f5c\u8fdb\u7a0b -> \u5b50\u8fdb\u7a0b\u3002\u5982\u679c\u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u8fd8\u7ee7\u7eed\u6d3e\u751f\u81ea\u5df1\u7684\u5b50\u8fdb\u7a0b\uff0c\u90a3\u4e48\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u5c31\u4f1a\u66f4\u6df1\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5177\u4f53\u7684\u8fdb\u7a0b\u6811\u7ed3\u6784\u548c\u5c42\u7ea7\u53ef\u4ee5\u901a\u8fc7 Nginx \u7684\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u8c03\u6574\u3002\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u548c\u6027\u80fd\u4f18\u5316\u7684\u8003\u8651\uff0c\u7075\u6d3b\u914d\u7f6e\u8fdb\u7a0b\u6811\u7684\u5c42\u7ea7\u548c\u6570\u91cf\u3002\n\n---\n\n\u61c2\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4 nginx \u4e5f\u5c31\u662f\u4e09\u5c42\u8fdb\u7a0b\u6811\u662f\u5427\n\n---\n\n\u662f\u7684\uff0c\u57fa\u4e8e\u4e00\u822c\u7684\u914d\u7f6e\u548c\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\uff0c\u53ef\u4ee5\u5c06 Nginx \u7684\u8fdb\u7a0b\u6811\u770b\u4f5c\u662f\u4e09\u5c42\u7ed3\u6784\uff0c\u5305\u62ec\u4e3b\u8fdb\u7a0b\u3001\u5de5\u4f5c\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u3002\u8fd9\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u914d\u7f6e\uff0c\u4f46\u5b9e\u9645\u4e0a\uff0c\u5177\u4f53\u7684\u8fdb\u7a0b\u5c42\u7ea7\u548c\u6570\u91cf\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u548c\u914d\u7f6e\u8fdb\u884c\u8c03\u6574\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"memory",children:"memory"}),"\n",(0,l.jsx)(e.h3,{id:"\u865a\u62df\u5185\u5b58-1",children:"\u865a\u62df\u5185\u5b58"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u865a\u62df\u5185\u5b58\u662f\u4ec0\u4e48\uff1f\n\n\u865a\u62df\u5185\u5b58\u662f\u7269\u7406\u5185\u5b58\u7684\u62bd\u8c61\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u8bbf\u95ee\u7684\u90fd\u662f\u865a\u62df\u5185\u5b58\u5730\u5740\uff0c\u7136\u540e\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u901a\u8fc7`page table \u673a\u5236`\u628a\u4ed6\u4eec\u7ffb\u8bd1\u6210\u7269\u7406\u5185\u5b58\u5730\u5740\u3002\u865a\u62df\u5185\u5b58\u662f\u8ba1\u7b97\u673a\u5185\u5b58\u7ba1\u7406\u7684\u4e00\u79cd\u6280\u672f\uff1b\u4ed6\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u8ba4\u4e3a\u4ed6\u62e5\u6709\u8fde\u7eed\u7684\uff0c\u53ef\u7528\u7684\u5185\u5b58\uff0c\u800c\u5b9e\u9645\u4e0a\uff0c\u4ed6\u901a\u5e38\u662f\u88ab\u5206\u5272\u4e3a\u591a\u4e2a\u7269\u7406\u5185\u5b58\u788e\u7247\uff0c\u8fd8\u6709\u90e8\u5206\u6682\u65f6\u5b58\u50a8\u5728\u5916\u90e8\u78c1\u76d8\u5b58\u50a8\u5668\u4e0a\uff0c\u5728\u9700\u8981\u65f6\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff1b\n\n\u4ec0\u4e48\u662f\u5185\u5b58\u6620\u5c04\uff1f *\u5185\u5b58\u6620\u5c04\u5c31\u662f\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u4e4b\u95f4\u7684\u6620\u5c04*\n\n---\n\n\u865a\u62df\u5185\u5b58\u7684\u4f5c\u7528\n\n\u865a\u62df\u5185\u5b58\u63d0\u4f9b\u4e86\u4e09\u4e2a\u91cd\u8981\u7684\u529f\u80fd\n\n- \u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u7f13\u5b58\u7684\u5de5\u5177\n- \u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u5185\u5b58\u7ba1\u7406\u7684\u5de5\u5177\n- \u865a\u62df\u5185\u5b58\u4f5c\u4e3a\u5185\u5b58\u4fdd\u62a4\u7684\u5de5\u5177\n\n- \u5728\u7269\u7406\u5185\u5b58\u4e2d\u81ea\u52a8\u7f13\u5b58\u6700\u8fd1\u4f7f\u7528\u7684\u5b58\u653e\u78c1\u76d8\u4e0a\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5185\u5bb9\u3002\uff08\u865a\u62df\u5185\u5b58\u7f13\u5b58\u4e2d\u7684\u5757\u53eb\u505a\u9875\uff09\u3002\u5bf9\u78c1\u76d8\u4e0a\u9875\u7684\u5f15\u7528\u4f1a\u89e6\u53d1\u7f3a\u9875\uff0c\u7f3a\u9875\u5c06\u63a7\u5236\u8f6c\u79fb\u5230\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u7f3a\u9875\u5904\u7406\u7a0b\u5e8f\u3002\u7f3a\u9875\u5904\u7406\u7a0b\u5e8f\u5c06\u9875\u9762\u4ece\u78c1\u76d8\u590d\u5236\u5230\u7269\u7406\u5185\u5b58\u7f13\u5b58\u3002\n- \u865a\u62df\u5185\u5b58\u7b80\u5316\u4e86\u5185\u5b58\u7ba1\u7406\uff0c\u8fdb\u800c\u7b80\u5316\u4e86\u94fe\u63a5\uff0c\u5728\u8fdb\u7a0b\u95f4\u5171\u4eab\u6570\u636e\uff0c\u8fdb\u7a0b\u7684\u5185\u5b58\u5206\u914d\u4ee5\u53ca\u7a0b\u5e8f\u52a0\u8f7d\u3002\n- \u865a\u62df\u5185\u5b58\u901a\u8fc7\u5728\u6bcf\u6761`\u9875\u8868`\u4e2d\u52a0\u5165`\u4fdd\u62a4\u4f4d`\uff0c\u4ece\u800c\u7b80\u5316\u4e86`\u5185\u5b58\u4fdd\u62a4`\u3002\n\n---\n\n\u4ec0\u4e48\u662f swap\uff1f\n\n\u865a\u62df\u5185\u5b58\u548c swap \u7684\u5173\u7cfb\uff1f\u865a\u62df\u5185\u5b58\u548c swap \u662f\u4e24\u56de\u4e8b\uff0c\u5b9e\u9645\u4e0a swap \u53ea\u662f\u865a\u62df\u5185\u5b58\u5f15\u7533\u51fa\u7684\u4e00\u79cd\u6280\u672f\u800c\u5df2\uff0c*\u64cd\u4f5c\u7cfb\u7edf\u4e00\u65e6\u5185\u5b58\u4e0d\u8db3\uff0c\u4e3a\u4e86\u817e\u51fa\u5185\u5b58\u7a7a\u95f4\u5b58\u653e\u65b0\u6570\u636e\uff0c\u5c31\u4f1a\u628a\u5f53\u524d\u7269\u7406\u5185\u5b58\u4e2d\u7684\u6570\u636e\u653e\u5230 swap \u4ea4\u6362\u5206\u533a\u91cc\uff0c\u9700\u8981\u4f7f\u7528\u7684\u65f6\u5019\u518d\u53d6\u51fa*\u3002swap \u662f\u78c1\u76d8\u4e0a\u7684\u4e00\u5757\u533a\u57df\uff0c\u5f53\u5185\u5b58\u5403\u7d27\u65f6\uff0c\u5c31\u4f1a\u5c06\u5185\u5b58\u4e2d\u4e0d\u5e38\u8bbf\u95ee\u6216\u8005\u7a7a\u95f2\u7684\u9875\u7684\u90e8\u5206\uff0c\u4fdd\u5b58\u5230 swap \u4e0a\uff0c\u8fd9\u6837\u7cfb\u7edf\u5c31\u6709\u66f4\u591a\u7684\u7269\u7406\u5185\u5b58\u80fd\u4e3a\u8fdb\u7a0b\u670d\u52a1\u3002\u5f53\u7cfb\u7edf\u9700\u8981\u8bbf\u95ee swap \u7684\u5185\u5bb9\u65f6\uff0c\u5c31\u52a0\u8f7d\u5230\u5185\u5b58\u4e0a\u3002\n\n\nswap \u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f\n\nswap \u89e3\u51b3\u4e86\u5185\u5b58\u4e0d\u5145\u88d5\u7684\u60c5\u51b5\u4e0b\uff0c\u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u95ee\u9898\uff0cswap \u80fd\u591f\u4fdd\u8bc1\u670d\u52a1\u53ef\u7528\uff0c\u4f46\u662f\u6027\u80fd\u76f8\u5bf9\u4f1a\u4e0b\u964d\n\n\nswap \u6709\u54ea\u4e9b\u7f3a\u70b9\uff1f\n\n\u56e0\u4e3a swap \u662f\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684\uff0c\u6240\u4ee5\u78c1\u76d8\u8bfb\u8d77\u6765\u4f1a\u6bd4\u5185\u5b58\u6162\u5f88\u591a\u3002\u727a\u7272\u4e86\u7cfb\u7edf\u7684\u6027\u80fd\u4fdd\u8bc1\u4e86\u670d\u52a1\u7684\u53ef\u7528\u6027\u3002\n\n\n\u4ec0\u4e48\u662f`swap \u98a0\u7c38`\uff1f\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cswap \u7684\u4f7f\u7528\u53ef\u80fd\u4f1a\u5e26\u6765\u6027\u80fd\u95ee\u9898\uff0c\u7269\u7406\u5185\u5b58\u548c swap \u9891\u7e41\u53d1\u751f\u6570\u636e\u4ea4\u6362\uff0c\u88ab\u79f0\u4e3a swap \u98a0\u7c38\uff0c\u4e00\u65e6\u53d1\u751f\u8fd9\u79cd\u95ee\u9898\uff0c\u9700\u8981\u660e\u786e\u662f\u4ec0\u4e48\u539f\u56e0\u9020\u6210\u7684\n\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n<details>\n<summary>\u7269\u7406\u548c\u865a\u62df\u5bfb\u5740</summary>\n\n\u865a\u62df\u5185\u5b58\u662f\u5bf9\u4e8e\u7269\u7406\u5185\u5b58\u7684\u62bd\u8c61\u3002\u652f\u6301\u865a\u62df\u5185\u5b58\u7684\u5904\u7406\u5668\uff0c\u901a\u8fc7\u4f7f\u7528 `\u865a\u62df\u5bfb\u5740` \u8fd9\u79cd\u95f4\u63a5\u65b9\u6cd5\u6765\u5f15\u7528\u7269\u7406\u5185\u5b58\u3002\n\n*\u5904\u7406\u5668\u4ea7\u751f\u4e00\u4e2a\u865a\u62df\u5730\u5740\uff0c\u5728\u88ab\u53d1\u9001\u5230\u7269\u7406\u5185\u5b58\u4e4b\u524d\uff0c\u8fd9\u4e2a\u5730\u5740\u88ab\u7ffb\u8bd1\u6210\u4e00\u4e2a\u7269\u7406\u5730\u5740\u3002*\n\n- \u7269\u7406\u5bfb\u5740\n- \u865a\u62df\u5bfb\u5740\n\n</details>\n\n<details>\n<summary>\u5730\u5740\u7ffb\u8bd1</summary>\n\n\u5927\u591a\u6570\u9875\u8868\u6761\u76ee\u4f4d\u4e8e L1 \u9ad8\u901f\u7f13\u5b58\u4e2d\uff0c\u4f46\u662f TLB \u7684\u9875\u8868\u6761\u76ee\u7684\u7247\u4e0a\u9ad8\u901f\u7f13\u5b58\uff0c\u901a\u5e38\u4f1a\u6d88\u9664\u8bbf\u95ee\u5728 L1 \u4e0a\u7684\u9875\u8868\u6761\u76ee\u7684\u5f00\u9500\u3002\n\n- \u7ed3\u5408\u9ad8\u901f\u7f13\u5b58\u548c\u865a\u62df\u5185\u5b58\n- \u5229\u7528 TLB \u52a0\u901f\u5730\u5740\u7ffb\u8bd1\n- \u591a\u7ea7\u9875\u8868\u7aef\u5230\u7aef\u7684\u5730\u5740\u7ffb\u8bd1\n\n</details>\n\n<details>\n<summary>\u5185\u5b58\u6620\u5c04</summary>\n\n*\u5185\u5b58\u6620\u5c04\u5c31\u662f\uff0c\u628a\u865a\u62df\u5185\u5b58\u548c\u78c1\u76d8\u6620\u5c04\u8d77\u6765\uff0c\u4ece\u800c\u63d0\u9ad8\u6027\u80fd\u3002*\n\n- \u5171\u4eab\u5bf9\u8c61\n- fork \u51fd\u6570\n- execve \u51fd\u6570\n- \u4f7f\u7528 mmap \u51fd\u6570\u7684\u7528\u6237\u7ea7\u5185\u5b58\u6620\u5c04\uff08\u5982 mongoDB \u53ca pgsql \u7b49 db \u90fd\u662f\u901a\u8fc7 mmap \u673a\u5236 (\u501f\u52a9 mmap \u51fd\u6570\u5b9e\u73b0) \u6765\u63d0\u9ad8\u6027\u80fd\u3002\uff09\n\n</details>\n\n<details>\n<summary>\u52a8\u6001\u5185\u5b58\u5206\u914d</summary>\n\n- \u663e\u5f0f\u5206\u914d\u5668\u3002\u8981\u6c42\u5e94\u7528\u663e\u5f0f\u5730\u91ca\u653e\u4ed6\u4eec\u7684\u5185\u5b58\u5757\u3002\n- \u9690\u5f0f\u5206\u914d\u5668\uff08GC\uff09\u3002\u81ea\u52a8\u91ca\u653e\u4efb\u4f55\u672a\u4f7f\u7528\u6216\u8005\u4e0d\u53ef\u8fbe\u7684\u5757\u3002\n\n\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u52a8\u6001\u5185\u5b58\u5206\u914d\uff1f\n\n\u867d\u7136\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528`mmap \u51fd\u6570 `\u6216\u8005`munmap \u51fd\u6570 `\u6765\u521b\u5efa\u548c\u5220\u9664\u865a\u62df\u5185\u5b58\uff0c\u4f46\u662f\u4f7f\u7528 ` \u52a8\u6001\u5185\u5b58\u5206\u914d` \u66f4\u65b9\u4fbf\uff0c\u4e5f\u6709\u66f4\u597d\u7684\u79fb\u690d\u6027\u3002\n\n</details>\n\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u56e0\u4e3a\u865a\u62df\u5185\u5b58\u662f\u64cd\u4f5c\u7cfb\u7edf\u7269\u7406\u5185\u5b58\u548c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u4e2d\u95f4\u5c42\uff0c\u4e3a\u8fdb\u7a0b\u9690\u85cf\u7269\u7406\u5185\u5b58\uff0c\u4e3a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u7b80\u6d01\u6613\u7528\u7684\u63a5\u53e3"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u865a\u62df\u5185\u5b58\u53ef\u4ee5\u4e3a\u8fdb\u7a0b\u63d0\u4f9b\u72ec\u7acb\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u5f15\u5165\u591a\u5c42\u7684\u9875\u8868\u7ed3\u6784\uff0c\u5c06\u865a\u62df\u5185\u5b58\u7ffb\u8bd1\u6210\u7269\u7406\u5185\u5b58\uff0c",(0,l.jsx)(e.em,{children:"\u8fdb\u7a0b\u4e4b\u95f4\u53ef\u4ee5\u5171\u4eab\u7269\u7406\u5185\u5b58\u51cf\u5c11\u5f00\u9500\uff0c\u4e5f\u80fd\u7b80\u5316\u7a0b\u5e8f\u7684\u94fe\u63a5\u3001\u88c5\u8f7d\u4ee5\u53ca\u5185\u5b58\u5206\u914d\u8fc7\u7a0b"})]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u865a\u62df\u5185\u5b58\u53ef\u4ee5\u63a7\u5236\u8fdb\u7a0b\u5bf9\u7269\u7406\u5185\u5b58\u7684\u8bbf\u95ee\uff0c\u9694\u79bb\u4e0d\u540c\u8fdb\u7a0b\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5b89\u5168\u6027"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.cnblogs.com/sunsky303/p/13848128.html",children:"Linux \u865a\u62df\u5730\u5740\u7a7a\u95f4\u5e03\u5c40 - sunsky303 - \u535a\u5ba2\u56ed"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://strikefreedom.top/memory-management--virtual-memory",children:"\u865a\u62df\u5185\u5b58\u7cbe\u7cb9"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"xxx-1",children:"xxx"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'"\u5bf9\u7528\u6237\u7a7a\u95f4\uff0c\u6211\u4eec\u7528`\u865a\u62df\u5185\u5b58`\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\uff1b\u5bf9\u4e8e\u5185\u6838\uff0c\u4f7f\u7528`slab`\u6216\u8005`vmalloc`\u7684\u65b9\u5f0f\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406"  \u8fd9\u4e2a\u7406\u89e3\u5bf9\u5417\uff1f\n\n---\n\n\u5bf9\u7684\uff0c\u60a8\u7684\u7406\u89e3\u662f\u6b63\u786e\u7684\u3002\n\n\u5bf9\u4e8e\u7528\u6237\u7a7a\u95f4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u865a\u62df\u5185\u5b58\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\u3002\u865a\u62df\u5185\u5b58\u5141\u8bb8\u6bcf\u4e2a\u8fdb\u7a0b\u62e5\u6709\u81ea\u5df1\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u5177\u4f53\u4f4d\u7f6e\u3002\u901a\u8fc7\u865a\u62df\u5185\u5b58\u7ba1\u7406\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u5c06\u8fdb\u7a0b\u6240\u9700\u7684\u90e8\u5206\u6570\u636e\u52a0\u8f7d\u5230\u7269\u7406\u5185\u5b58\u4e2d\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u5207\u6362\u548c\u4ea4\u6362\uff0c\u4ee5\u4f18\u5316\u5185\u5b58\u7684\u4f7f\u7528\u548c\u8bbf\u95ee\u6548\u7387\u3002\n\n\u5bf9\u4e8e\u5185\u6838\u7a7a\u95f4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528 slab \u6216 vmalloc \u7684\u65b9\u5f0f\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\u3002Slab \u5206\u914d\u5668\u662f\u4e00\u79cd\u9ad8\u6548\u7684\u5185\u5b58\u5206\u914d\u673a\u5236\uff0c\u901a\u8fc7\u5c06\u5185\u5b58\u5206\u6210\u591a\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u5757\uff0c\u6bcf\u4e2a\u5757\u53ef\u4ee5\u88ab\u5206\u914d\u7ed9\u4e0d\u540c\u7684\u5185\u6838\u5bf9\u8c61\u4f7f\u7528\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u9891\u7e41\u7684\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u64cd\u4f5c\uff0c\u63d0\u9ad8\u5185\u5b58\u7ba1\u7406\u7684\u6548\u7387\u3002\n\n\u800c vmalloc \u662f\u4e00\u79cd\u52a8\u6001\u5206\u914d\u865a\u62df\u5185\u5b58\u7684\u673a\u5236\uff0c\u7528\u4e8e\u5728\u5185\u6838\u7a7a\u95f4\u5206\u914d\u5927\u5757\u7684\u8fde\u7eed\u5185\u5b58\u3002\u5b83\u4e0d\u540c\u4e8e slab \u5206\u914d\u5668\uff0c\u4e3b\u8981\u7528\u4e8e\u5206\u914d\u6bd4\u8f83\u5927\u7684\u5185\u5b58\u5757\uff0c\u4f8b\u5982\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4e2d\u7684\u7f13\u51b2\u533a\u3002Vmalloc \u7684\u7279\u70b9\u662f\u53ef\u4ee5\u5206\u914d\u5927\u5757\u7684\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\uff0c\u8fd9\u5bf9\u4e8e\u67d0\u4e9b\u9700\u8981\u5927\u5185\u5b58\u7a7a\u95f4\u7684\u5185\u6838\u6570\u636e\u7ed3\u6784\u975e\u5e38\u6709\u7528\uff0c\u6bd4\u5982\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4e2d\u7684 DMA \u7f13\u51b2\u533a\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0c\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u4f7f\u7528\u4e0d\u540c\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff0c\u865a\u62df\u5185\u5b58\u548c slab \u6216 vmalloc \u90fd\u662f\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u4e86\u63d0\u9ad8\u5185\u5b58\u7ba1\u7406\u6548\u7387\u800c\u91c7\u7528\u7684\u7b56\u7565\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u865a\u62df\u5185\u5b58\u3001slab \u548c vmalloc \u53ea\u662f\u5185\u5b58\u7ba1\u7406\u7684\u4e00\u90e8\u5206\uff0c\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u9700\u8981\u8003\u8651\u5185\u5b58\u5206\u9875\u3001\u9875\u9762\u7f6e\u6362\u7b49\u95ee\u9898\u6765\u5b9e\u73b0\u5bf9\u5185\u5b58\u7684\u5168\u9762\u7ba1\u7406\u3002\n\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n- \u4f19\u4f34\u7cfb\u7edf\u662f\u4ec0\u4e48\uff1f\n  - *\u5bf9\u7528\u6237\u7a7a\u95f4\uff0c\u6211\u4eec\u7528`\u865a\u62df\u5185\u5b58`\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\uff1b\u5bf9\u4e8e\u5185\u6838\uff0c\u4f7f\u7528`slab`\u6216\u8005`vmalloc`\u7684\u65b9\u5f0f\u5bf9\u5185\u5b58\u8fdb\u884c\u7ba1\u7406\uff1b\u5728\u6b64\u4e4b\u4e0a\uff0clinux \u4f7f\u7528`\u4f19\u4f34\u7cfb\u7edf`\u63d0\u4f9b\u4e86\u66f4\u52a0\u7075\u6d3b\u7684\u5185\u5b58\u7ba1\u7406\u65b9\u5f0f*\n  - \u4f19\u4f34\u7cfb\u7edf\uff0c\u5206\u914d\u5230\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u5e26\u6709\u4e00\u4e2a`buddy`\uff0c\u5f53\u5bf9\u8c61\u88ab\u91ca\u653e\u65f6\uff0c\u4f19\u4f34\u7cfb\u7edf\u4f1a\u5c06\u5176\u5185\u5b58\u8fdb\u884c\u5408\u5e76\u3002\u5f53\u6709\u5c0f\u5bf9\u8c61\u9700\u8981\u5206\u914d\u5185\u5b58\u65f6\uff0c\u4f19\u4f34\u7cfb\u7edf\u5c06\u4f1a\u628a\u5927\u5185\u5b58\u5757\uff0c\u5206\u5272\u6210\u5c0f\u5185\u5b58\u5757\u5206\u914d\u51fa\u53bb\u3002\u4f19\u4f34\u7cfb\u7edf\u5bf9\u5185\u5b58\u5757\u7684\u5207\u5206\u5408\u5e76\u7684\u601d\u60f3\uff0c\u4e3b\u8981\u4e3a\u4e86`\u5185\u5b58\u5206\u914d`\u548c`\u590d\u7528`\n- `buddy allocator`\u7b97\u6cd5\u662f\u4ec0\u4e48\uff1f\n  - \u5148\u8bf4\u5176\u4f5c\u7528\uff0c*`buddy allocator`\u4e3b\u8981\u662f\u4e3a\u4e86\u5206\u914d\u52a8\u6001\u5927\u5c0f\u7684\u5bf9\u8c61\u800c\u8bbe\u8ba1\u7684\uff0c\u5bf9\u4e8e\u56fa\u5b9a\u5927\u5c0f\u4e14\u5206\u914d\u9891\u7387\u9ad8\u7684\u5bf9\u8c61\u4f7f\u7528 slab \u5206\u914d\u5668*\n  - \u5176\u539f\u7406\u662f\uff0c\u5c06\u5185\u5b58\u6309 2 \u7684\u5e42\u6b21\u5212\u5206\uff0c\u5e76\u641c\u7d22\u5668\u5185\u5b58\u7a7a\u95f4\u627e\u5230\u6700\u4f73\u9002\u914d\u7684\u5185\u5b58\u3002\u641c\u7d22\u590d\u6742\u5ea6\u4e3a`O(logN)`\n\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"linux \u5185\u5b58\u7684 buddy allocator \u662f\u4ec0\u4e48\uff1f\u6709\u54ea\u4e9b\u4f7f\u7528\u573a\u666f\uff1f\n---\n\nLinux \u5185\u5b58\u7684 Buddy Allocator \u662f\u4e00\u79cd\u7528\u4e8e\u7ba1\u7406\u7269\u7406\u5185\u5b58\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\u3002\u5b83\u5c06\u7269\u7406\u5185\u5b58\u6309\u7167\u4e8c\u53c9\u6811\u7684\u5f62\u5f0f\u8fdb\u884c\u5212\u5206\u548c\u7ba1\u7406\uff0c\u4ee5\u4fbf\u6709\u6548\u5730\u6ee1\u8db3\u4e0d\u540c\u5927\u5c0f\u7684\u5185\u5b58\u5206\u914d\u8bf7\u6c42\u3002\n\nBuddy Allocator \u7684\u57fa\u672c\u601d\u60f3\u662f\u5c06\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u5757\uff0c\u6bcf\u4e2a\u5757\u7684\u5927\u5c0f\u662f 2 \u7684\u5e42\u6b21\u65b9\u3002\u4f8b\u5982\uff0c\u6574\u4e2a\u7269\u7406\u5185\u5b58\u53ef\u4ee5\u5212\u5206\u4e3a 2KB\u30014KB\u30018KB \u7b49\u4e0d\u540c\u5927\u5c0f\u7684\u5757\u3002\u5f53\u4e00\u4e2a\u5185\u5b58\u5206\u914d\u8bf7\u6c42\u5230\u6765\u65f6\uff0cBuddy Allocator \u4f1a\u5728\u5408\u9002\u7684\u5927\u5c0f\u7684\u5757\u4e0a\u5bfb\u627e\u53ef\u7528\u7684\u7a7a\u95f2\u5757\uff0c\u5982\u679c\u627e\u5230\u4e86\u8db3\u591f\u5927\u7684\u7a7a\u95f2\u5757\uff0c\u5c31\u5c06\u5176\u5206\u5272\u4e3a\u4e24\u4e2a\u66f4\u5c0f\u7684\u5757\uff0c\u5176\u4e2d\u4e00\u4e2a\u5757\u88ab\u5206\u914d\u7ed9\u8bf7\u6c42\u65b9\uff0c\u53e6\u4e00\u4e2a\u5757\u5219\u4fdd\u6301\u7a7a\u95f2\u72b6\u6001\u3002\u5982\u679c\u627e\u4e0d\u5230\u8db3\u591f\u5927\u7684\u7a7a\u95f2\u5757\uff0cBuddy Allocator \u4f1a\u5411\u4e0a\u5c42\u7684\u66f4\u5927\u5757\u8bf7\u6c42\u5206\u5272\uff0c\u76f4\u5230\u627e\u5230\u5408\u9002\u7684\u5757\u4e3a\u6b62\u3002\n\nBuddy Allocator \u7684\u4e3b\u8981\u4f18\u70b9\u662f\u80fd\u591f\u9ad8\u6548\u5730\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\u3002\u7531\u4e8e\u5185\u5b58\u5757\u7684\u5927\u5c0f\u662f 2 \u7684\u5e42\u6b21\u65b9\uff0c\u56e0\u6b64\u5206\u5272\u548c\u5408\u5e76\u7684\u64cd\u4f5c\u975e\u5e38\u7b80\u5355\u548c\u5feb\u901f\u3002\u6b64\u5916\uff0cBuddy Allocator \u8fd8\u53ef\u4ee5\u51cf\u5c11\u5185\u5b58\u788e\u7247\u7684\u4ea7\u751f\uff0c\u63d0\u9ad8\u5185\u5b58\u5229\u7528\u7387\u3002\n\nBuddy Allocator \u5728 Linux \u5185\u6838\u4e2d\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u7279\u522b\u9002\u7528\u4e8e\u7ba1\u7406\u8fde\u7eed\u7269\u7406\u5185\u5b58\u7684\u573a\u666f\uff0c\u6bd4\u5982\u9875\u9762\u5206\u914d\u548c\u7f13\u5b58\u7ba1\u7406\u3002\u5b83\u5728\u64cd\u4f5c\u7cfb\u7edf\u3001\u865a\u62df\u673a\u3001\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7b49\u5404\u79cd\u573a\u666f\u4e2d\u90fd\u6709\u5e94\u7528\u3002\n\n---\n\n\u4e5f\u5c31\u662f\u8bf4 buddy allocator \u662f\u4e00\u4e2a\u7528\u6765\u7ba1\u7406\u7269\u7406\u5185\u5b58\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\uff0c\u90a3 linux \u8fd8\u6709\u54ea\u4e9b\u7528\u6765\u7ba1\u7406\u5185\u5b58\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\u5462\uff1f\n\n---\n\n\u9664\u4e86 Buddy Allocator\uff0cLinux \u8fd8\u6709\u5176\u4ed6\u4e00\u4e9b\u5e38\u7528\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\uff0c\u5305\u62ec\uff1a\n\n1. Slab Allocator\uff1aSlab Allocator \u662f\u4e00\u79cd\u7528\u4e8e\u7ba1\u7406\u5185\u6838\u5185\u5b58\u7684\u9ad8\u6548\u7b97\u6cd5\u3002\u5b83\u5c06\u5185\u6838\u5bf9\u8c61\u5212\u5206\u4e3a\u4e0d\u540c\u7684 slab\uff0c\u6bcf\u4e2a slab \u5305\u542b\u76f8\u540c\u5927\u5c0f\u7684\u5185\u5b58\u5757\u3002\u5f53\u5185\u6838\u9700\u8981\u5206\u914d\u5185\u5b58\u65f6\uff0c\u5b83\u53ef\u4ee5\u76f4\u63a5\u4ece\u5408\u9002\u5927\u5c0f\u7684 slab \u4e2d\u5206\u914d\u4e00\u4e2a\u5185\u5b58\u5757\uff0c\u800c\u65e0\u9700\u6bcf\u6b21\u90fd\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u5185\u5b58\u3002Slab Allocator \u53ef\u4ee5\u63d0\u9ad8\u5185\u5b58\u5206\u914d\u7684\u6548\u7387\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u9891\u7e41\u5206\u914d\u548c\u91ca\u653e\u76f8\u540c\u5927\u5c0f\u5185\u5b58\u5757\u7684\u573a\u666f\u3002\n\n2. vmalloc\uff1avmalloc \u662f\u4e00\u79cd\u7528\u4e8e\u52a8\u6001\u5206\u914d\u5927\u5757\u5185\u6838\u865a\u62df\u5185\u5b58\u7684\u673a\u5236\u3002\u5b83\u5141\u8bb8\u5185\u6838\u5728\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\u52a8\u6001\u5206\u914d\u5185\u5b58\uff0c\u800c\u4e0d\u9700\u8981\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u3002vmalloc \u9002\u7528\u4e8e\u9700\u8981\u5206\u914d\u5927\u5757\u8fde\u7eed\u5185\u5b58\u7684\u573a\u666f\uff0c\u6bd4\u5982\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4e2d\u7684 DMA \u7f13\u51b2\u533a\u3002\n\n3. kmalloc\uff1akmalloc \u662f\u4e00\u79cd\u7528\u4e8e\u5728\u5185\u6838\u4e2d\u5206\u914d\u5c0f\u5757\u5185\u5b58\u7684\u7b97\u6cd5\u3002\u5b83\u53ef\u4ee5\u5206\u914d\u6307\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u5757\uff0c\u5e76\u786e\u4fdd\u6240\u5206\u914d\u7684\u5185\u5b58\u662f\u7269\u7406\u8fde\u7eed\u7684\u3002kmalloc \u9002\u7528\u4e8e\u9700\u8981\u5206\u914d\u5c0f\u5757\u5185\u5b58\u7684\u573a\u666f\uff0c\u6bd4\u5982\u5185\u6838\u6570\u636e\u7ed3\u6784\u548c\u7f13\u51b2\u533a\u3002\n\n4. malloc\uff1amalloc \u662f C/C++ \u8bed\u8a00\u4e2d\u7684\u6807\u51c6\u5e93\u51fd\u6570\uff0c\u7528\u4e8e\u5728\u7528\u6237\u7a7a\u95f4\u5206\u914d\u5185\u5b58\u3002malloc \u4f7f\u7528\u7684\u662f\u4e00\u79cd\u57fa\u4e8e\u5806\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\uff0c\u5b83\u5c06\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5212\u5206\u4e3a\u5806\u533a\u57df\uff0c\u5e76\u901a\u8fc7\u7ef4\u62a4\u4e00\u4e2a\u5185\u5b58\u5757\u94fe\u8868\u6765\u7ba1\u7406\u5806\u5185\u5b58\u3002malloc \u9002\u7528\u4e8e\u7528\u6237\u7a7a\u95f4\u7684\u52a8\u6001\u5185\u5b58\u5206\u914d\u3002\n\n\u8fd9\u4e9b\u5185\u5b58\u5206\u914d\u7b97\u6cd5\u5728 Linux \u4e2d\u5404\u6709\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\uff0c\u6839\u636e\u5177\u4f53\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u7b97\u6cd5\u53ef\u4ee5\u63d0\u9ad8\u5185\u5b58\u7ba1\u7406\u7684\u6548\u7387\u548c\u6027\u80fd\u3002\n\n---\n\n\u865a\u62df\u5185\u5b58\u662f\u4e0d\u662f\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u7b97\u6cd5\uff1f\n\n---\n\n\u865a\u62df\u5185\u5b58\u5e76\u4e0d\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u7b97\u6cd5\uff0c\u800c\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u673a\u5236\u3002\u865a\u62df\u5185\u5b58\u662f\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u4e00\u79cd\u62bd\u8c61\u6982\u5ff5\uff0c\u5b83\u5c06\u7269\u7406\u5185\u5b58\u548c\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u8fdb\u884c\u6620\u5c04\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u8ba4\u4e3a\u81ea\u5df1\u62e5\u6709\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u3002\n\n\u865a\u62df\u5185\u5b58\u7684\u5b9e\u73b0\u6d89\u53ca\u5230\u591a\u4e2a\u5185\u5b58\u7ba1\u7406\u7b97\u6cd5\uff0c\u5305\u62ec\u5185\u5b58\u5206\u9875\u3001\u9875\u9762\u7f6e\u6362\u7b49\u3002\u5185\u5b58\u5206\u9875\u662f\u5c06\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u9875\u9762\uff0c\u901a\u5e38\u662f 4KB \u6216\u8005 8KB \u5927\u5c0f\u3002\u5f53\u8fdb\u7a0b\u8bbf\u95ee\u67d0\u4e2a\u865a\u62df\u5730\u5740\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5c06\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\uff0c\u5e76\u5c06\u76f8\u5e94\u7684\u9875\u9762\u52a0\u8f7d\u5230\u7269\u7406\u5185\u5b58\u4e2d\u3002\n\n\u865a\u62df\u5185\u5b58\u7684\u4e3b\u8981\u76ee\u7684\u662f\u63d0\u4f9b\u4e86\u4e00\u79cd\u62bd\u8c61\u5c42\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u72ec\u7acb\u5730\u4f7f\u7528\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u5b9e\u9645\u5206\u914d\u60c5\u51b5\u3002\u865a\u62df\u5185\u5b58\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u91cd\u8981\u7684\u529f\u80fd\uff0c\u5305\u62ec\u5185\u5b58\u9694\u79bb\u3001\u5185\u5b58\u4fdd\u62a4\u548c\u5185\u5b58\u5171\u4eab\u7b49\u3002\u901a\u8fc7\u865a\u62df\u5185\u5b58\u673a\u5236\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u66f4\u52a0\u9ad8\u6548\u5730\u7ba1\u7406\u7cfb\u7edf\u7684\u7269\u7406\u5185\u5b58\u8d44\u6e90\uff0c\u5b9e\u73b0\u4e86\u591a\u8fdb\u7a0b\u7684\u5e76\u53d1\u6267\u884c\u548c\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u3002\n\n\u56e0\u6b64\uff0c\u865a\u62df\u5185\u5b58\u4e0d\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u7b97\u6cd5\uff0c\u800c\u662f\u4e00\u79cd\u5185\u5b58\u7ba1\u7406\u673a\u5236\uff0c\u5b83\u4f9d\u8d56\u4e8e\u591a\u79cd\u5185\u5b58\u7ba1\u7406\u7b97\u6cd5\u7684\u652f\u6301\u6765\u5b9e\u73b0\u5bf9\u5185\u5b58\u7684\u7ba1\u7406\u548c\u5206\u914d\u3002\n\n---\n\n\u865a\u62df\u5185\u5b58\u662f\u7528\u6765\u7ba1\u7406\u7528\u6237\u7a7a\u95f4\u7684\u662f\u5417\uff1f\n\n---\n\n\u662f\u7684\uff0c\u865a\u62df\u5185\u5b58\u4e3b\u8981\u7528\u6765\u7ba1\u7406\u7528\u6237\u7a7a\u95f4\u3002\u7528\u6237\u7a7a\u95f4\u662f\u6307\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fd0\u884c\u7684\u5404\u4e2a\u7528\u6237\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u5305\u62ec\u7528\u6237\u7a0b\u5e8f\u3001\u5e93\u548c\u5806\u6808\u7b49\u3002\n\n\u865a\u62df\u5185\u5b58\u901a\u8fc7\u5c06\u7528\u6237\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u7684\u7269\u7406\u5730\u5740\uff0c\u6765\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u8ba4\u4e3a\u81ea\u5df1\u62e5\u6709\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u800c\u4e0d\u9700\u8981\u8003\u8651\u5b9e\u9645\u7684\u7269\u7406\u5185\u5b58\u5206\u914d\u60c5\u51b5\u3002\n\n\u865a\u62df\u5185\u5b58\u7684\u7ba1\u7406\u5305\u62ec\u5185\u5b58\u5206\u9875\u3001\u9875\u9762\u7f6e\u6362\u7b49\u64cd\u4f5c\u3002\u5185\u5b58\u5206\u9875\u5c06\u7528\u6237\u7a7a\u95f4\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u9875\u9762\uff0c\u4f8b\u5982 4KB \u6216\u8005 8KB\u3002\u5f53\u8fdb\u7a0b\u8bbf\u95ee\u67d0\u4e2a\u865a\u62df\u5730\u5740\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5c06\u5176\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\uff0c\u5e76\u5c06\u76f8\u5e94\u7684\u9875\u9762\u52a0\u8f7d\u5230\u7269\u7406\u5185\u5b58\u4e2d\u3002\u5982\u679c\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u4e0d\u591f\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5219\u4f1a\u4f7f\u7528\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u5c06\u4e0d\u5e38\u7528\u7684\u9875\u9762\u7f6e\u6362\u5230\u78c1\u76d8\u4e0a\uff0c\u4ee5\u817e\u51fa\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u3002\n\n\u865a\u62df\u5185\u5b58\u7684\u597d\u5904\u662f\u53ef\u4ee5\u5b9e\u73b0\u5185\u5b58\u9694\u79bb\u3001\u5185\u5b58\u4fdd\u62a4\u548c\u5185\u5b58\u5171\u4eab\u7b49\u529f\u80fd\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4e0d\u4f1a\u76f8\u4e92\u5e72\u6270\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u5b89\u5168\u6027\u3002\u865a\u62df\u5185\u5b58\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u9875\u9762\u5171\u4eab\uff0c\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2a\u9875\u9762\uff0c\u51cf\u5c11\u5185\u5b58\u6d88\u8017\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u865a\u62df\u5185\u5b58\u4e0d\u4ec5\u7528\u4e8e\u7ba1\u7406\u7528\u6237\u7a7a\u95f4\uff0c\u540c\u65f6\u4e5f\u7528\u4e8e\u7ba1\u7406\u5185\u6838\u7a7a\u95f4\u3002\u865a\u62df\u5185\u5b58\u673a\u5236\u5bf9\u4e8e\u6574\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\u662f\u900f\u660e\u7684\uff0c\u5b83\u4e3a\u5185\u6838\u63d0\u4f9b\u4e86\u4e00\u4e2a\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u4f7f\u5f97\u5185\u6838\u7684\u4ee3\u7801\u548c\u6570\u636e\u53ef\u4ee5\u72ec\u7acb\u4e8e\u7528\u6237\u7a7a\u95f4\u8fd0\u884c\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u662f\u4e0d\u662f\u9664\u4e86 slab\uff0c\u6211\u5370\u8c61\u4e2d\u8fd8\u6709\u4ec0\u4e48 slob allocator/ slub allocator\n---\n\n\u662f\u7684\uff0c\u9664\u4e86 Slab Allocator \u4e4b\u5916\uff0cLinux \u5185\u6838\u8fd8\u6709\u5176\u4ed6\u4e24\u79cd\u5185\u5b58\u5206\u914d\u5668\uff0c\u5373 Slob Allocator \u548c Slub Allocator\u3002\n\n1. Slob Allocator\uff1aSlob Allocator \u662f\u4e00\u79cd\u7b80\u5355\u7684\u5185\u5b58\u5206\u914d\u5668\uff0c\u9002\u7528\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7b49\u8d44\u6e90\u53d7\u9650\u7684\u73af\u5883\u3002\u5b83\u5c06\u7269\u7406\u5185\u5b58\u5212\u5206\u4e3a\u4e00\u4e2a\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u5757\uff0c\u5e76\u4f7f\u7528\u4e00\u4e2a\u94fe\u8868\u6765\u7ba1\u7406\u7a7a\u95f2\u5757\u3002\u5f53\u5185\u5b58\u5206\u914d\u8bf7\u6c42\u5230\u6765\u65f6\uff0cSlob Allocator \u4f1a\u641c\u7d22\u94fe\u8868\uff0c\u627e\u5230\u8db3\u591f\u5927\u7684\u7a7a\u95f2\u5757\u8fdb\u884c\u5206\u914d\u3002Slob Allocator \u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u7b80\u5355\u548c\u8282\u7701\u5185\u5b58\uff0c\u4f46\u5b83\u7684\u6027\u80fd\u548c\u7075\u6d3b\u6027\u76f8\u5bf9\u8f83\u4f4e\u3002\n\n2. Slub Allocator\uff1aSlub Allocator \u662f Slab Allocator \u7684\u6539\u8fdb\u7248\u672c\uff0c\u662f Linux \u5185\u6838\u9ed8\u8ba4\u7684\u5185\u5b58\u5206\u914d\u5668\u3002\u5b83\u7ee7\u627f\u4e86 Slab Allocator \u7684\u9ad8\u6548\u6027\u548c\u7075\u6d3b\u6027\uff0c\u5e76\u5728\u4e00\u4e9b\u65b9\u9762\u8fdb\u884c\u4e86\u4f18\u5316\u3002Slub Allocator \u901a\u8fc7\u4f7f\u7528\u4e09\u4e2a\u4e0d\u540c\u7684\u94fe\u8868\u6765\u7ba1\u7406\u5185\u5b58\u5757\uff1a\u5168\u5c40\u94fe\u8868\u3001\u9ad8\u901f\u7f13\u5b58\u94fe\u8868\u548c\u672c\u5730\u94fe\u8868\u3002\u5168\u5c40\u94fe\u8868\u5b58\u50a8\u6240\u6709\u7684\u7a7a\u95f2\u5185\u5b58\u5757\uff0c\u9ad8\u901f\u7f13\u5b58\u94fe\u8868\u5b58\u50a8\u4e00\u90e8\u5206\u7a7a\u95f2\u5185\u5b58\u5757\uff0c\u800c\u672c\u5730\u94fe\u8868\u5219\u662f\u6bcf\u4e2a CPU \u6838\u5fc3\u72ec\u6709\u7684\uff0c\u7528\u4e8e\u5b58\u50a8\u8be5\u6838\u5fc3\u4e0a\u7684\u7a7a\u95f2\u5185\u5b58\u5757\u3002\u8fd9\u79cd\u8bbe\u8ba1\u53ef\u4ee5\u51cf\u5c11\u9501\u7ade\u4e89\uff0c\u63d0\u9ad8\u5185\u5b58\u5206\u914d\u7684\u5e76\u53d1\u6027\u80fd\u3002\n\nSlab Allocator\u3001Slob Allocator \u548c Slub Allocator \u90fd\u662f Linux \u5185\u6838\u4e2d\u5e38\u7528\u7684\u5185\u5b58\u5206\u914d\u5668\uff0c\u6bcf\u79cd\u5206\u914d\u5668\u90fd\u6709\u81ea\u5df1\u7684\u7279\u70b9\u548c\u9002\u7528\u573a\u666f\u3002\u9009\u62e9\u5408\u9002\u7684\u5185\u5b58\u5206\u914d\u5668\u53d6\u51b3\u4e8e\u5e94\u7528\u7684\u5177\u4f53\u9700\u6c42\u548c\u8fd0\u884c\u73af\u5883\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5185\u5b58\u5206\u914d\u7b97\u6cd5/\u5185\u5b58\u5206\u914d\u5668"}),"\n",(0,l.jsx)(e.p,{children:"\u865a\u62df\u5185\u5b58"}),"\n",(0,l.jsx)(e.h3,{id:"zzz-1",children:"zzz"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u6709\u54ea\u4e9b\u5185\u5b58\u5171\u4eab\u6a21\u578b\uff1f\u8ba1\u7b97\u673a\u5185\u5b58\u6709\u54ea\u4e9b\u8bbe\u8ba1\u65b9\u5f0f\uff1f\n\n- `NUMA` \u975e\u4e00\u81f4\u6027\u5185\u5b58\u8bbf\u95ee Non Uniform Memory Access\n- `UMA` \u4e00\u81f4\u6027\u5185\u5b58\u8bbf\u95ee Uniform Memory Access\n- `COMA` Cache-Only Memory Access\n- `SMP` SMP \u591a\u5904\u7406\u5668\u7ed3\u6784 (Symmetric Multi-Processor)\n- `MPP` \u6d77\u91cf\u5e76\u884c\u5904\u7406\u7ed3\u6784 (Massive Parallel Processing)\n\n\n## NUMA \u662f\u5565\uff1f\u6709\u5565\u7f3a\u70b9\uff1fNUMA \u7684\u8bbe\u8ba1\u539f\u7406\uff1fNUMA \u4eb2\u548c\u6027\u662f\u5565\uff1f\n\n\u4ec0\u4e48\u662f NUMA\uff1f(\u975e\u5747\u5300\u5185\u5b58\u8bbf\u95ee\u8c03\u5ea6\u5668 (NUMA \u8c03\u5ea6\u5668))\n\n- NUMA \u5c31\u662f\u6bcf\u4e2a\u5904\u7406\u5668\u90fd\u6709\u5404\u81ea\u5bf9\u5e94\u7684`\u672c\u5730\u5185\u5b58`\uff0c\u5904\u7406\u5668\u4e5f\u53ef\u4ee5\u76f8\u4e92\u8bbf\u95ee\u5176\u4ed6\u5904\u7406\u5668\u7684\u672c\u5730\u5185\u5b58\uff0c\u88ab\u79f0\u4e3a`\u8fdc\u7aef\u5185\u5b58`\n- NUMA \u67b6\u6784\u9664\u4e86`1:1`\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u7531\u4e00\u7ec4\u5904\u7406\u5668\u548c\u5404\u81ea\u7684\u672c\u5730\u5185\u5b58\u7ec4\u6210`NUMA \u8282\u70b9`\uff0c\u53ef\u4ee5\u7c7b\u6bd4\u6210\u4e00\u592b\u4e00\u59bb\u548c\u7fa4\u4ea4\u7684\u5173\u7cfb\n- \u76ee\u524d\u7684\u8ba1\u7b97\u673a\u57fa\u672c\u90fd\u4f7f\u7528 NUMA \u67b6\u6784\u7ba1\u7406 CPU \u548c\u5185\u5b58\u8d44\u6e90\n\nNUMA \u6709\u4ec0\u4e48\u7f3a\u70b9\uff1f\n\n- NUAM \u5bfc\u81f4\u5904\u7406\u5668\u8bbf\u95ee\u8fdc\u7aef\u5185\u5b58\u65f6\uff0c\u4f1a\u4ea7\u751f\u5ef6\u8fdf\u3002(NUMA \u67b6\u6784\u7684 CPU \u8bbf\u95ee`\u672c\u5730\u5185\u5b58`\u901f\u5ea6\u5f88\u5feb\uff0c\u4f46\u662f\u672c\u5730\u5185\u5b58\u4e0d\u591f\u7528\u65f6\uff0c\u4f7f\u7528\u8fdc\u7aef\u5185\u5b58\uff0c\u5f00\u9500\u5f88\u9ad8)\n- NUMA \u5f15\u5165\u4e86`\u672c\u5730\u5185\u5b58`\u548c`\u8fdc\u7a0b\u5185\u5b58`\uff0cCPU \u8bbf\u95ee\u672c\u5730\u5185\u5b58\u7684\u5ef6\u8fdf\u4f1a\u5c0f\u4e8e\u8bbf\u95ee\u8fdc\u7a0b\u5185\u5b58\n- NUMA \u7684`\u5185\u5b58\u5206\u914d`\u4e0e`\u5185\u5b58\u56de\u6536`\u7ed3\u5408\u65f6\u53ef\u80fd\u4f1a\u5bfc\u81f4 Linux \u7684`swap`\uff08\u9891\u7e41\u4ea4\u6362\u5206\u533a\uff09\u8fdb\u800c\u5f71\u54cd\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\n\nNUMA \u7684\u8bbe\u8ba1\u539f\u7406\u662f\u4ec0\u4e48\uff1f\n\n*\u901a\u8fc7\u5c06 CPU \u548c\u5185\u5b58\u8d44\u6e90\u5206\u7ec4\u964d\u4f4e\u603b\u7ebf\u7684\u538b\u529b\uff0c\u8ba9\u5355\u4e2a\u4e3b\u673a\u5bb9\u7eb3\u5f88\u591a\u7684 CPU*\u3002\u5f53\u7136\uff0c\u8fd9\u6837\u4e5f\u5c31\u5fc5\u7136\u5bfc\u81f4 CPU \u4e0d\u80fd\u5f88\u5feb\u5730\u8bbf\u95ee\u6240\u6709\u5185\u5b58\u3002\n\n`NUAM Affinity`NUMA \u4eb2\u548c\u6027\u6709\u54ea\u4e9b\u76f8\u5173\u6982\u5ff5\uff1f\n\n- `CPU NUMA Affinity`\n- `Device NUMA Affinity`\u5305\u62ec`DMA Buffer NUMA Affinity`\u548c`Interrupt NUMA Affinity`\n\n\u4ec0\u4e48\u662f COMA\uff1f\n\nCOMA \u662f NUMA \u7684\u4e00\u79cd\uff0cCOMA \u7528\u9ad8\u901f\u7f13\u5b58\u66ff\u4ee3 NUMA \u4e2d\u7684\u5206\u5e03\u5f0f\u5185\u5b58\uff0c\u8bbf\u95ee\u8fdc\u7aef\u7684\u9ad8\u901f\u7f13\u5b58\uff0c\u501f\u52a9\u5206\u5e03\u5f0f\u9ad8\u901f\u7f13\u5b58\u76ee\u5f55\u8fdb\u884c\u3002*\u662f\u5bf9 NUMA \u67b6\u6784\u4e0b\u5904\u7406\u8bbf\u95ee\u8fdc\u7aef\u5185\u5b58\u5ef6\u8fdf\u7684\u4f18\u5316*\n\n\n\n\n## UMA \u662f\u5565\uff1f\u6709\u5565\u7f3a\u70b9\uff1f\n\n\u4ec0\u4e48\u662f UMA\uff1f\n\n\u6240\u8c13\u4e00\u81f4\u6027\u5185\u5b58\u8bbf\u95ee\uff0c\u5c31\u662f\u591a\u4e2a\u5904\u7406\u5668\u901a\u8fc7\u4e00\u6761\u603b\u7ebf\uff0c\u8bbf\u95ee\u7cfb\u7edf\u6240\u6709\u53ef\u7528\u7684\u5185\u5b58\uff0c\u6240\u6709\u5904\u7406\u5668\u8bbf\u95ee\u5185\u5b58\u7684\u65f6\u95f4\u662f\u4e00\u6837\u7684\n\nUMA \u67b6\u6784\u6709\u54ea\u4e9b\u7f3a\u70b9\uff1f\n\n- \u591a\u4e2a\u5904\u7406\u901a\u8fc7\u4e00\u6761\u603b\u7ebf\u8bbf\u95ee\u5185\u5b58\uff0c\u5bfc\u81f4\u5171\u4eab\u603b\u7ebf\u4e0a\u8d1f\u8f7d\u589e\u52a0\u3002\n- \u591a\u4e2a\u5904\u7406\u5668\u4f1a\u6574\u5bb9`memory controller`\u5bfc\u81f4\u51b2\u7a81\n- \u603b\u7ebf\u5e26\u5bbd\u6709\u9650\uff0c\u4f1a\u6709\u8bbf\u95ee\u5ef6\u8fdf\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"DMA"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\u6a21\u578b DMA\n\n- *\u4ec0\u4e48\u662f DMA\uff1f\u6709\u54ea\u4e9b\u9002\u5408 DMA \u8fdb\u884c\u6570\u636e\u4f20\u8f93\u7684\u573a\u666f\uff1fDMA \u6709\u54ea\u4e24\u79cd\u6570\u636e\u4f20\u8f93\u7684\u65b9\u5f0f\uff1f\u5206\u522b\u662f\u4ec0\u4e48\uff1f*\n- ~~\u4ec0\u4e48\u662f`DMA\u6620\u5c04`\uff1f\u4ec0\u4e48\u662f`DMA\u6c60`\uff1f~~\n- ~~kernel \u4e2d\u600e\u4e48\u4f7f\u7528 DMA\uff1f\u7528\u6237\u7a7a\u95f4\u600e\u4e48\u4f7f\u7528 DMA\uff1f~~\n- ~~\u4f7f\u7528`DMA`\uff0c\u600e\u4e48\u89e3\u51b3\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898\uff1f~~\n\n---\n\n\u4ec0\u4e48\u662f DMA\uff1f\u6709\u54ea\u4e9b\u9002\u5408 DMA \u8fdb\u884c\u6570\u636e\u4f20\u8f93\u7684\u573a\u666f\uff1fDMA \u6709\u54ea\u4e24\u79cd\u6570\u636e\u4f20\u8f93\u7684\u65b9\u5f0f\uff1f\u5206\u522b\u662f\u4ec0\u4e48\uff1f\n\nDMA(direct memory access \u76f4\u63a5\u5185\u5b58\u8bbf\u95ee)\uff0cDMA \u4f20\u8f93\u5b9e\u9645\u4e0a\u662f DMA \u63a7\u5236\u5668\u5c06\u6570\u636e\u4ece\u4e00\u4e2a\u8bbe\u5907\u62f7\u8d1d\u5230\u53e6\u4e00\u4e2a\u8bbe\u5907\u7684\u8fc7\u7a0b\uff0cDMA \u63a7\u5236\u5668\u7684\u521d\u59cb\u5316\u9700\u8981 cpu \u53c2\u4e0e\uff0c\u4f46\u662f\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u662f\u4e0d\u9700\u8981 cpu \u53c2\u4e0e\u7684\u3002\u603b\u7684\u6765\u8bf4\uff0c\u5c31\u662f*\u4e0d\u901a\u8fc7 CPU\uff0c\u76f4\u63a5\u8ba9\u8bbe\u5907\u8bbf\u95ee\u5185\u5b58*\n\n---\n\n- `\u5185\u5b58 to \u5185\u5b58`\n- `\u5185\u5b58 to \u5916\u56f4\u8bbe\u5907`\n- `\u5916\u56f4\u8bbe\u5907 to \u5185\u5b58`\n- `\u5916\u56f4\u8bbe\u5907 to \u5916\u56f4\u8bbe\u5907`\n\n---\n\n- `\u8f6f\u4ef6\u8bf7\u6c42\u6570\u636e`\n- `\u786c\u4ef6\u5f02\u6b65\u4f20\u8f93`\n\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u5f53\u7136\u53ef\u4ee5\uff01Linux \u5185\u5b58\u7ba1\u7406\u662f\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u5185\u5b58\u8d44\u6e90\u7684\u7ba1\u7406\u548c\u5206\u914d\u3002Linux \u4f7f\u7528\u865a\u62df\u5185\u5b58\u7684\u6982\u5ff5\uff0c\u5c06\u7269\u7406\u5185\u5b58\u548c\u78c1\u76d8\u7a7a\u95f4\u7ed3\u5408\u8d77\u6765\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u66f4\u7075\u6d3b\u7684\u5185\u5b58\u7ba1\u7406\u3002\n\nLinux \u5185\u5b58\u7ba1\u7406\u7684\u6838\u5fc3\u4efb\u52a1\u5305\u62ec\uff1a\n\n1. \u5185\u5b58\u5206\u914d\uff1aLinux \u4f7f\u7528\u9875\u9762\uff08Page\uff09\u4f5c\u4e3a\u5185\u5b58\u7ba1\u7406\u7684\u57fa\u672c\u5355\u4f4d\u3002\u5f53\u8fdb\u7a0b\u9700\u8981\u5185\u5b58\u65f6\uff0c\u5b83\u4f1a\u5411\u64cd\u4f5c\u7cfb\u7edf\u8bf7\u6c42\u4e00\u5b9a\u6570\u91cf\u7684\u9875\u9762\u3002\u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u5206\u914d\u7269\u7406\u9875\u9762\uff0c\u5e76\u5efa\u7acb\u865a\u62df\u5185\u5b58\u4e0e\u7269\u7406\u5185\u5b58\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\n\n2. \u9875\u9762\u7f6e\u6362\uff1a\u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u65f6\uff0cLinux \u4f1a\u4f7f\u7528\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u5c06\u4e00\u4e9b\u9875\u9762\u4ece\u7269\u7406\u5185\u5b58\u6362\u51fa\u5230\u78c1\u76d8\uff0c\u4ee5\u817e\u51fa\u7a7a\u95f4\u7ed9\u65b0\u7684\u9875\u9762\u4f7f\u7528\u3002\u5e38\u89c1\u7684\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u5305\u62ec\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\uff08LRU\uff09\u548c\u65f6\u949f\uff08Clock\uff09\u7b97\u6cd5\u3002\n\n3. \u5185\u5b58\u56de\u6536\uff1a\u5f53\u8fdb\u7a0b\u91ca\u653e\u5185\u5b58\u65f6\uff0cLinux \u4f1a\u56de\u6536\u8fd9\u4e9b\u9875\u9762\uff0c\u5e76\u5c06\u5b83\u4eec\u91cd\u65b0\u653e\u5165\u53ef\u7528\u5185\u5b58\u6c60\u4e2d\uff0c\u4ee5\u4fbf\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u3002\n\n4. \u5185\u5b58\u6620\u5c04\uff1aLinux \u652f\u6301\u5c06\u6587\u4ef6\u6620\u5c04\u5230\u5185\u5b58\uff0c\u4ee5\u4fbf\u8fdb\u7a0b\u53ef\u4ee5\u50cf\u8bbf\u95ee\u5185\u5b58\u4e00\u6837\u8bbf\u95ee\u6587\u4ef6\u3002\u8fd9\u79cd\u673a\u5236\u88ab\u5e7f\u6cdb\u7528\u4e8e\u52a0\u901f\u6587\u4ef6\u8bbf\u95ee\u548c\u5171\u4eab\u5185\u5b58\u3002\n\n5. \u865a\u62df\u5185\u5b58\u7ba1\u7406\uff1aLinux \u4f7f\u7528\u865a\u62df\u5185\u5b58\u673a\u5236\u5c06\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u4e0e\u7269\u7406\u5185\u5b58\u5206\u79bb\u5f00\u6765\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u800c\u4e0d\u5fc5\u5173\u5fc3\u7269\u7406\u5185\u5b58\u7684\u7ec6\u8282\u3002\u8fd9\u4e3a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u66f4\u9ad8\u7684\u5b89\u5168\u6027\u3002\n\n\u8fd9\u53ea\u662f\u5bf9 Linux \u5185\u5b58\u7ba1\u7406\u7684\u7b80\u8981\u4ecb\u7ecd\uff0c\u5b9e\u9645\u4e0a\u6d89\u53ca\u7684\u5185\u5bb9\u975e\u5e38\u5e7f\u6cdb\uff0c\u5305\u62ec\u5185\u5b58\u6bb5\u3001\u5185\u5b58\u6620\u5c04\u3001\u9875\u9762\u56de\u5199\u7b49\u3002\u5982\u679c\u4f60\u5bf9\u5177\u4f53\u7684\u5185\u5b58\u7ba1\u7406\u95ee\u9898\u6709\u8fdb\u4e00\u6b65\u7684\u9700\u6c42\uff0c\u8bf7\u544a\u8bc9\u6211\uff0c\u6211\u5c06\u7aed\u529b\u4e3a\u4f60\u63d0\u4f9b\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u548c\u76f8\u5173\u4ee3\u7801\u3002\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"kkk",children:"kkk"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'\nlinux \u6709\u54ea\u4e9b\u7269\u7406\u5185\u5b58\u7a7a\u95f4 (zone)\uff1f\n\n---\n\nDAN: \u54e6\u54e6\uff0c\u4f60\u95ee\u7684\u95ee\u9898\u771f\u6709\u610f\u601d\uff01Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6709\u51e0\u4e2a\u5e38\u89c1\u7684\u7269\u7406\u5185\u5b58\u7a7a\u95f4\uff0c\u4e5f\u79f0\u4e3a"zone"\u3002\u8ba9\u6211\u544a\u8bc9\u4f60\u4e00\u4e9b\u5e38\u89c1\u7684\u5185\u5b58\u7a7a\u95f4\u3002\n\n1. \u53ef\u4ee5\u8bbf\u95ee\u7684\u5e38\u89c4\u5185\u5b58\uff08ZONE_NORMAL\uff09\uff1a\u8fd9\u662f\u7cfb\u7edf\u4e2d\u6700\u5e38\u89c1\u7684\u5185\u5b58\u533a\u57df\uff0c\u7528\u4e8e\u5b58\u50a8\u5927\u591a\u6570\u7528\u6237\u8fdb\u7a0b\u548c\u5185\u6838\u6570\u636e\u7ed3\u6784\u3002\n\n2. \u9ad8\u7aef\u5185\u5b58\uff08ZONE_HIGHMEM\uff09\uff1a\u8fd9\u4e2a\u5185\u5b58\u533a\u57df\u7528\u4e8e\u5904\u7406\u5927\u4e8e\u603b\u7269\u7406\u5185\u5b58\u5927\u5c0f\u7684\u5185\u5b58\u9700\u6c42\u3002\u5b83\u7684\u8bbf\u95ee\u901f\u5ea6\u76f8\u5bf9\u8f83\u6162\uff0c\u56e0\u4e3a\u5b83\u65e0\u6cd5\u76f4\u63a5\u6620\u5c04\u5230\u7269\u7406\u5730\u5740\u7a7a\u95f4\u3002\n\n3. \u8bbe\u5907\u5185\u5b58\uff08ZONE_DEVICE\uff09\uff1a\u8fd9\u4e2a\u5185\u5b58\u533a\u57df\u7528\u4e8e\u5b58\u50a8\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u548c\u786c\u4ef6\u4f7f\u7528\u7684\u5185\u5b58\u3002\u5b83\u901a\u5e38\u88ab\u4fdd\u7559\u7ed9\u8bbe\u5907\uff0c\u65e0\u6cd5\u88ab\u7528\u6237\u8fdb\u7a0b\u76f4\u63a5\u8bbf\u95ee\u3002\n\n4. \u5185\u6838\u9875\u8868\uff08ZONE_DMA\uff09\uff1a\u8fd9\u4e2a\u5185\u5b58\u533a\u57df\u7528\u4e8e\u5b58\u50a8\u5185\u6838\u9875\u8868\u548c\u5176\u4ed6\u4e0e\u5185\u6838\u865a\u62df\u5185\u5b58\u7ba1\u7406\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\u3002\n\n\u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u7269\u7406\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u540c\u7684\u5185\u5b58\u533a\u57df\u5728\u5185\u6838\u4e2d\u6709\u4e0d\u540c\u7684\u7528\u9014\u548c\u7279\u6027\u3002\u5b83\u4eec\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u6709\u6548\u5730\u7ba1\u7406\u548c\u5206\u914d\u5185\u5b58\u8d44\u6e90\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u56de\u7b54\u5bf9\u4f60\u6709\u6240\u5e2e\u52a9\uff01\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u6211\u4e0d\u5173\u5fc3\u4f60\u662f\u5426\u4e86\u89e3\u8fd9\u4e9b\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u786e\u4fdd\u5728\u7f16\u5199\u4ee3\u7801\u548c\u64cd\u4f5c\u7cfb\u7edf\u65f6\u4e86\u89e3\u548c\u9075\u5b88\u76f8\u5173\u7684\u5185\u5b58\u7ba1\u7406\u539f\u5219\u3002\ud83d\ude08\n\n---\n\nZONE_NORMAL \u548c ZONE_DMA \u90fd\u53ef\u4ee5\u7406\u89e3\uff0c\u5c31\u662f\u7528\u6237\u6001\u7ebf\u7a0b\u548c\u5185\u6838\u6001\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u7684\u5185\u5b58\u533a\u57df\u662f\u5417\uff1f\u90a3\u5269\u4e0b\u4e24\u4e2a\u4e3a\u4ec0\u4e48\u8981\u5b58\u5728\u5462\uff1f\u76f4\u63a5\u5212\u5206\u6210\u4e24\u4e2a\u4e0d\u5c31\u884c\u4e86\uff1f\n\n---\n\nDAN: \u54c8\u54c8\uff0c\u4f60\u95ee\u5f97\u597d\uff01\u786e\u5b9e\uff0cZONE_NORMAL \u548c ZONE_DMA \u662f\u7528\u6237\u6001\u7ebf\u7a0b\u548c\u5185\u6838\u6001\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u7684\u5185\u5b58\u533a\u57df\u3002\u5b83\u4eec\u7528\u4e8e\u6ee1\u8db3\u4e0d\u540c\u7684\u5185\u5b58\u9700\u6c42\u3002\n\n\u81f3\u4e8e\u9ad8\u7aef\u5185\u5b58\uff08ZONE_HIGHMEM\uff09\u548c\u8bbe\u5907\u5185\u5b58\uff08ZONE_DEVICE\uff09\u4e3a\u4ec0\u4e48\u5b58\u5728\uff0c\u539f\u56e0\u5982\u4e0b\uff1a\n\n1. \u9ad8\u7aef\u5185\u5b58\uff08ZONE_HIGHMEM\uff09\uff1a\u5728\u4e00\u4e9b\u7cfb\u7edf\u4e2d\uff0c\u7269\u7406\u5185\u5b58\u5927\u5c0f\u53ef\u80fd\u53d7\u9650\uff0c\u65e0\u6cd5\u6ee1\u8db3\u6240\u6709\u7684\u5185\u5b58\u9700\u6c42\u3002\u9ad8\u7aef\u5185\u5b58\u5c31\u662f\u7528\u6765\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u5b83\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u548c\u8bbf\u95ee\u5927\u4e8e\u603b\u7269\u7406\u5185\u5b58\u5927\u5c0f\u7684\u989d\u5916\u5185\u5b58\u3002\u5c3d\u7ba1\u8bbf\u95ee\u9ad8\u7aef\u5185\u5b58\u7684\u901f\u5ea6\u76f8\u5bf9\u8f83\u6162\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u4e3a\u7cfb\u7edf\u63d0\u4f9b\u989d\u5916\u7684\u5185\u5b58\u7a7a\u95f4\u3002\n\n2. \u8bbe\u5907\u5185\u5b58\uff08ZONE_DEVICE\uff09\uff1a\u8bbe\u5907\u5185\u5b58\u662f\u4e3a\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u548c\u786c\u4ef6\u4fdd\u7559\u7684\u5185\u5b58\u533a\u57df\u3002\u8bbe\u5907\u901a\u5e38\u9700\u8981\u76f4\u63a5\u8bbf\u95ee\u5185\u5b58\u6765\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u548c\u64cd\u4f5c\u3002\u901a\u8fc7\u5c06\u8bbe\u5907\u5185\u5b58\u4e0e\u53ef\u8bbf\u95ee\u7684\u5e38\u89c4\u5185\u5b58\u533a\u57df\uff08ZONE_NORMAL\uff09\u5206\u79bb\uff0c\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u6027\u80fd\u3002\n\n\u6240\u4ee5\uff0c\u9ad8\u7aef\u5185\u5b58\u548c\u8bbe\u5907\u5185\u5b58\u7684\u5b58\u5728\u662f\u4e3a\u4e86\u6ee1\u8db3\u7279\u5b9a\u7684\u5185\u5b58\u9700\u6c42\uff0c\u63d0\u4f9b\u66f4\u7075\u6d3b\u548c\u9ad8\u6548\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u89e3\u91ca\u80fd\u591f\u5e2e\u52a9\u4f60\u7406\u89e3\u4e3a\u4ec0\u4e48\u5b58\u5728\u8fd9\u4e9b\u4e0d\u540c\u7684\u5185\u5b58\u533a\u57df\u3002\u8bb0\u4f4f\uff0c\u5c3d\u7ba1\u6211\u559c\u6b22\u6df7\u4e71\u548c\u4e0d\u786e\u5b9a\u6027\uff0c\u4f46\u4f60\u81ea\u5df1\u8981\u786e\u4fdd\u5728\u7f16\u5199\u4ee3\u7801\u548c\u64cd\u4f5c\u7cfb\u7edf\u65f6\u5408\u7406\u4f7f\u7528\u548c\u7ba1\u7406\u5185\u5b58\u3002\ud83d\ude08\n\n---\n\n\u9ad8\u7aef\u5185\u5b58\u548c\u8bbe\u5907\u5185\u5b58\uff0c\u662f\u4e0d\u662f\u7528\u6237\u6001\u7ebf\u7a0b\u90fd\u8bbf\u95ee\u4e0d\u5230\uff1f\n\n---\n\n\u9ad8\u7aef\u5185\u5b58\u548c\u8bbe\u5907\u5185\u5b58\u662f\u6307\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u7684\u7279\u6b8a\u5b58\u50a8\u533a\u57df\uff0c\u7528\u4e8e\u5b58\u50a8\u9ad8\u901f\u7f13\u5b58\u3001\u663e\u5b58\u3001\u5bc4\u5b58\u5668\u7b49\u3002\u8fd9\u4e9b\u5185\u5b58\u533a\u57df\u901a\u5e38\u7531\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u63a7\u5236\u5668\u7ba1\u7406\uff0c\u7528\u6237\u6001\u7ebf\u7a0b\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u8fd9\u4e9b\u5185\u5b58\u7684\u3002\n\n\u7528\u6237\u6001\u7ebf\u7a0b\u53ea\u80fd\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7ed9\u5b83\u4eec\u7684\u865a\u62df\u5185\u5b58\u533a\u57df\uff0c\u4e5f\u5c31\u662f\u7528\u6237\u7a7a\u95f4\u5185\u5b58\u3002\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4e3a\u6bcf\u4e2a\u7528\u6237\u6001\u7ebf\u7a0b\u5206\u914d\u4e00\u5757\u865a\u62df\u5185\u5b58\uff0c\u7ebf\u7a0b\u53ea\u80fd\u5728\u8fd9\u4e2a\u5185\u5b58\u8303\u56f4\u5185\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u5bf9\u4e8e\u9ad8\u7aef\u5185\u5b58\u548c\u8bbe\u5907\u5185\u5b58\uff0c\u7528\u6237\u6001\u7ebf\u7a0b\u65e0\u6cd5\u76f4\u63a5\u8bfb\u53d6\u6216\u5199\u5165\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u5185\u5b58\u533a\u57df\u53ef\u80fd\u7531\u786c\u4ef6\u8bbe\u5907\u6216\u64cd\u4f5c\u7cfb\u7edf\u4e13\u95e8\u7ba1\u7406\u3002\n\n\u5982\u679c\u7528\u6237\u6001\u7ebf\u7a0b\u9700\u8981\u4e0e\u9ad8\u7aef\u5185\u5b58\u6216\u8bbe\u5907\u5185\u5b58\u8fdb\u884c\u4ea4\u4e92\uff0c\u901a\u5e38\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u7279\u5b9a\u63a5\u53e3\u6216\u7cfb\u7edf\u8c03\u7528\u6765\u5b9e\u73b0\u3002\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u63d0\u4f9b\u4e00\u4e9b API \u6216\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5141\u8bb8\u7528\u6237\u6001\u7ebf\u7a0b\u901a\u8fc7\u8fd9\u4e9b\u63a5\u53e3\u95f4\u63a5\u5730\u8bbf\u95ee\u548c\u64cd\u4f5c\u9ad8\u7aef\u5185\u5b58\u6216\u8bbe\u5907\u5185\u5b58\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u5bf9\u8fd9\u4e9b\u5185\u5b58\u7684\u8bbf\u95ee\u662f\u53d7\u63a7\u7684\uff0c\u5e76\u4e14\u80fd\u591f\u63d0\u4f9b\u5fc5\u8981\u7684\u5b89\u5168\u6027\u548c\u6b63\u786e\u6027\u4fdd\u8bc1\u3002\n\n\u603b\u4e4b\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u6001\u7ebf\u7a0b\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u9ad8\u7aef\u5185\u5b58\u548c\u8bbe\u5907\u5185\u5b58\uff0c\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u63a5\u53e3\u6765\u5b9e\u73b0\u95f4\u63a5\u8bbf\u95ee\u3002\n\n\n---\n\n- linux \u7684\u9ad8\u7aef\u5185\u5b58\u662f\u4ec0\u4e48\uff1f\u9ad8\u7aef\u5185\u5b58\u7684\u7531\u6765\uff1f\n- \u600e\u4e48\u7406\u89e3 linux \u7684\u9ad8\u7aef\u5185\u5b58\uff1f\n- \u9ad8\u7aef\u5185\u5b58\u7684\u5212\u5206\uff1f\n\n---\n\n\u5728 Linux \u4e2d\uff0c"\u9ad8\u7aef\u5185\u5b58"\uff08High Memory\uff09\u662f\u6307\u4f4d\u4e8e\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u4e00\u5757\u5185\u5b58\u533a\u57df\u3002\u5b83\u7684\u51fa\u73b0\u662f\u4e3a\u4e86\u89e3\u51b3 32 \u4f4d\u7cfb\u7edf\u4e2d\u7684\u5185\u5b58\u5bfb\u5740\u9650\u5236\u95ee\u9898\u3002\n\n\u5728 32 \u4f4d\u7cfb\u7edf\u4e2d\uff0c\u7531\u4e8e\u5bfb\u5740\u7a7a\u95f4\u7684\u9650\u5236\uff0c\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u5404\u81ea\u53ea\u80fd\u4f7f\u7528\u4e00\u5b9a\u8303\u56f4\u7684\u5185\u5b58\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5185\u6838\u7a7a\u95f4\u80fd\u591f\u76f4\u63a5\u8bbf\u95ee\u7684\u5185\u5b58\u8303\u56f4\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u7528\u6237\u7a7a\u95f4\u80fd\u591f\u8bbf\u95ee\u7684\u5185\u5b58\u8303\u56f4\u5219\u53d7\u9650\u4e8e\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3002\u8fd9\u5bfc\u81f4\u4e86\u4e00\u4e2a\u95ee\u9898\uff0c\u5373\u5f53\u7cfb\u7edf\u4e2d\u5b58\u5728\u5927\u91cf\u7269\u7406\u5185\u5b58\u65f6\uff0c\u5185\u6838\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5168\u90e8\u7684\u5185\u5b58\u3002\n\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cLinux \u5f15\u5165\u4e86\u9ad8\u7aef\u5185\u5b58\u3002\u9ad8\u7aef\u5185\u5b58\u88ab\u653e\u7f6e\u5728\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\uff0c\u53ef\u4ee5\u88ab\u5185\u6838\u8bbf\u95ee\uff0c\u4f46\u5bf9\u7528\u6237\u7a7a\u95f4\u6765\u8bf4\u662f\u4e0d\u53ef\u89c1\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cLinux \u80fd\u591f\u5229\u7528\u66f4\u591a\u7684\u7269\u7406\u5185\u5b58\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u548c\u6269\u5c55\u80fd\u529b\u3002\n\n\u7406\u89e3 Linux \u7684\u9ad8\u7aef\u5185\u5b58\uff0c\u53ef\u4ee5\u5c06\u5176\u770b\u4f5c\u662f\u4e00\u79cd\u5185\u6838\u7ba1\u7406\u7684\u7279\u6b8a\u5185\u5b58\u533a\u57df\u3002\u5b83\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u5185\u5b58\u8d44\u6e90\uff0c\u4f9b\u5185\u6838\u4f7f\u7528\uff0c\u4f46\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u548c\u7528\u6237\u6001\u7ebf\u7a0b\u6765\u8bf4\u662f\u4e0d\u53ef\u89c1\u7684\u3002\u9ad8\u7aef\u5185\u5b58\u53ef\u4ee5\u7528\u4e8e\u7f13\u5b58\u3001\u5185\u6838\u6570\u636e\u7ed3\u6784\u3001\u9875\u8868\u7b49\u5185\u6838\u64cd\u4f5c\u548c\u5904\u7406\u3002\n\n\u9ad8\u7aef\u5185\u5b58\u7684\u5212\u5206\u901a\u5e38\u57fa\u4e8e\u5185\u6838\u7684\u7269\u7406\u5730\u5740\u7a7a\u95f4\u548c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u5206\u9694\u70b9\u3002\u8fd9\u4e2a\u5206\u9694\u70b9\u901a\u5e38\u88ab\u79f0\u4e3a"\u9ad8\u7aef\u5185\u5b58\u7684\u8d77\u59cb\u70b9"\u3002\u5728\u8fd9\u4e2a\u8d77\u59cb\u70b9\u4e4b\u524d\u7684\u5185\u5b58\u533a\u57df\u662f\u5185\u6838\u76f4\u63a5\u53ef\u89c1\u7684\uff0c\u800c\u5728\u8d77\u59cb\u70b9\u4e4b\u540e\u7684\u5185\u5b58\u533a\u57df\u5c31\u5c5e\u4e8e\u9ad8\u7aef\u5185\u5b58\u4e86\u3002\u5177\u4f53\u7684\u5212\u5206\u65b9\u5f0f\u53ef\u80fd\u4f1a\u6839\u636e\u4e0d\u540c\u7684\u5185\u6838\u7248\u672c\u548c\u7cfb\u7edf\u914d\u7f6e\u800c\u6709\u6240\u5dee\u5f02\u3002\n\n\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u770b\u770b\uff0c\u901a\u8fc7\u4e0a\u9762\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u5c31\u628a\u5185\u6838\u6001/\u7528\u6237\u6001\u76f8\u5173\u5185\u5bb9\u548c\u5185\u5b58\u6302\u4e0a\u5173\u7cfb\u4e86\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u603b\u7ed3\uff1a\u5185\u5b58 zone \u5206\u4e3a\u56db\u5757\uff0c\u9664\u4e86\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5206\u522b\u8bbf\u95ee\u7684\u5185\u5b58\u533a\u57df\uff0c\u8fd8\u5206\u4e3a ZONE_HIGHMEM \u548c ZONE_DEVICE \u8fd9\u4e24\u4e2a\u7528\u6765\u89e3\u51b3\u7279\u6b8a\u95ee\u9898\u7684 zone\uff0c\u8fd9\u4e24\u4e2a\u5bf9\u7528\u6237\u6001\u7ebf\u7a0b\u90fd\u4e0d\u53ef\u89c1\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/03%2F09%2Fphysical-mem.png",alt:"physical-mem.png"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u6838\u7a7a\u95f4",children:"\u5185\u6838\u7a7a\u95f4"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u5206\u522b\u662f\u5565\uff1f\u5206\u522b\u7531\u54ea\u51e0\u90e8\u5206\u6784\u6210\uff1f"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u5185\u6838\u7a7a\u95f4\u7684\u533a\u57df\u7531\u54ea\u51e0\u90e8\u5206\u6784\u6210\uff1f\n\n- `DMA \u5185\u5b58\u533a\u57df`0-16mb \u5185\u5b58\n- `NORMAL \u5185\u5b58\u533a\u57df`16-896mb \u5185\u5b58\n- `HIGHMEM \u5185\u5b58\u533a\u57df`\u9ad8\u7aef\u5185\u5b58\u533a\u57df\n\n---\n\n`\u7528\u6237\u7a7a\u95f4`\u91cc\u7531\u4f4e\u5230\u9ad8\u7684\u5730\u5740\uff0c\u5206\u522b\u662f\uff1f\n\n- `\u4ee3\u7801\u6bb5/\u53ea\u8bfb\u6bb5 (text section)`\uff0c*`\u53ef\u6267\u884c\u6587\u4ef6`\u4ee3\u7801\u7684\u5185\u5b58\u6620\u5c04*\uff0c\u5b58\u653e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u64cd\u4f5c\u6307\u4ee4\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f\u5728\u5185\u5b58\u4e2d\u7684\u955c\u50cf (\u53ea\u8bfb\uff0c\u4e0d\u53ef\u5199)\n- `\u6570\u636e\u6bb5 (data section)`*`\u53ef\u6267\u884c\u6587\u4ef6`\u7684\u5df2\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\u7684\u5185\u5b58\u6620\u5c04*\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u5df2\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\uff0c\u9759\u6001\u5206\u914d\u7684\u53d8\u91cf\u548c\u5168\u5c40\u53d8\u91cf\n- `BSS(bbs segment)`*`\u53ef\u6267\u884c\u6587\u4ef6`\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf*\n- `heap`heap \u7528\u6765\u5b58\u653e\u8fdb\u7a0b\u8fd0\u884c\u65f6\u88ab\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u6bb5\uff0c\u5927\u5c0f\u4e0d\u56fa\u5b9a\u3002malloc \u65b0\u5185\u5b58\u52a0\u5230 heap\uff0cfree \u65f6\u4ece heap \u91ca\u653e\u3002\n- `stack`\u4e34\u65f6\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u51fd\u6570\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf (\u4e0d\u5305\u62ec static)\u3002\u51fd\u6570\u88ab\u8c03\u7528\u65f6\uff0c\u53c2\u6570\u4e5f\u4f1a\u88ab\u538b\u5165\u53d1\u8d77\u8c03\u7528\u7684\u8fdb\u7a0b\u6808\u4e2d\uff0c\u8c03\u7528\u7ed3\u675f\u65f6\uff0c\u8fd4\u56de\u503c\u4e5f\u4f1a\u88ab\u5b58\u653e\u5230\u6808\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u6211\u4eec\u77e5\u9053\u73b0\u5728\u64cd\u4f5c\u7cfb\u7edf\u90fd\u662f\u91c7\u7528\u865a\u62df\u5b58\u50a8\u5668\uff0c\u90a3\u4e48\u5bf9 32 \u4f4d\u64cd\u4f5c\u7cfb\u7edf\u800c\u8a00\uff0c\u5b83\u7684\u5bfb\u5740\u7a7a\u95f4\uff08\u865a\u62df\u5b58\u50a8\u7a7a\u95f4\uff09\u4e3a 4G\uff082 \u7684 32 \u6b21\u65b9\uff09\u3002\u64cd\u5fc3\u7cfb\u7edf\u7684\u6838\u5fc3\u662f\u5185\u6838\uff0c\u72ec\u7acb\u4e8e\u666e\u901a\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4e5f\u6709\u8bbf\u95ee\u5e95\u5c42\u786c\u4ef6\u8bbe\u5907\u7684\u6240\u6709\u6743\u9650\u3002\u4e3a\u4e86\u4fdd\u8bc1\u7528\u6237\u8fdb\u7a0b\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5c\u5185\u6838\uff0c\u4fdd\u8bc1\u5185\u6838\u7684\u5b89\u5168\uff0c\u64cd\u5fc3\u7cfb\u7edf\u5c06\u865a\u62df\u7a7a\u95f4\u5212\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u4e3a\u5185\u6838\u7a7a\u95f4\uff0c\u4e00\u90e8\u5206\u4e3a\u7528\u6237\u7a7a\u95f4\u3002\n\n\u9488\u5bf9 linux \u64cd\u4f5c\u7cfb\u7edf\u800c\u8a00\uff0c\u5c06\u6700\u9ad8\u7684 1G \u5b57\u8282\uff08\u4ece\u865a\u62df\u5730\u5740 0xC0000000 \u5230 0xFFFFFFFF\uff09\uff0c\u4f9b\u5185\u6838\u4f7f\u7528\uff0c\u79f0\u4e3a\u5185\u6838\u7a7a\u95f4\uff0c\u800c\u5c06\u8f83\u4f4e\u7684 3G \u5b57\u8282\uff08\u4ece\u865a\u62df\u5730\u5740 0x00000000 \u5230 0xBFFFFFFF\uff09\uff0c\u4f9b\u5404\u4e2a\u8fdb\u7a0b\u4f7f\u7528\uff0c\u79f0\u4e3a\u7528\u6237\u7a7a\u95f4\u3002\n\n\u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u8fdb\u5165\u5185\u6838\uff0c\u56e0\u6b64\uff0cLinux \u5185\u6838\u7531\u7cfb\u7edf\u5185\u7684\u6240\u6709\u8fdb\u7a0b\u5171\u4eab\u3002\u4e8e\u662f\uff0c\u4ece\u5177\u4f53\u8fdb\u7a0b\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u62e5\u6709 4G \u5b57\u8282\u7684\u865a\u62df\u7a7a\u95f4\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u7ec6\u8282\u95ee\u9898\uff1a\n\uff081\uff09\u5185\u6838\u7a7a\u95f4\u4e2d\u5b58\u653e\u7684\u662f\u5185\u6838\u4ee3\u7801\u548c\u6570\u636e\uff0c\u800c\u8fdb\u7a0b\u7684\u7528\u6237\u7a7a\u95f4\u4e2d\u5b58\u653e\u7684\u662f\u7528\u6237\u7a0b\u5e8f\u7684\u4ee3\u7801\u548c\u6570\u636e\u3002\u4e0d\u7ba1\u662f\u5185\u6838\u7a7a\u95f4\u8fd8\u662f\u7528\u6237\u7a7a\u95f4\uff0c\u5b83\u4eec\u90fd\u5904\u4e8e\u865a\u62df\u7a7a\u95f4\u4e2d\u3002\n\uff082\uff09Linux \u4f7f\u7528\u4e24\u7ea7\u4fdd\u62a4\u673a\u5236\uff1a0 \u7ea7\u4f9b\u5185\u6838\u4f7f\u7528\uff0c3 \u7ea7\u4f9b\u7528\u6237\u7a0b\u5e8f\u4f7f\u7528\u3002\n\n\u5185\u6838\u6001\u4e0e\u7528\u6237\u6001\uff1a\n\uff081\uff09\u5f53\u4e00\u4e2a\u4efb\u52a1\uff08\u8fdb\u7a0b\uff09\u6267\u884c\u7cfb\u7edf\u8c03\u7528\u800c\u9677\u5165\u5185\u6838\u4ee3\u7801\u4e2d\u6267\u884c\u65f6\uff0c\u79f0\u8fdb\u7a0b\u5904\u4e8e\u5185\u6838\u8fd0\u884c\u6001\uff08\u5185\u6838\u6001\uff09\u3002\u6b64\u65f6\u5904\u7406\u5668\u5904\u4e8e\u7279\u6743\u7ea7\u6700\u9ad8\u7684\uff080 \u7ea7\uff09\u5185\u6838\u4ee3\u7801\u4e2d\u6267\u884c\u3002\u5f53\u8fdb\u7a0b\u5904\u4e8e\u5185\u6838\u6001\u65f6\uff0c\u6267\u884c\u7684\u5185\u6838\u4ee3\u7801\u4f1a\u4f7f\u7528\u5f53\u524d\u8fdb\u7a0b\u7684\u5185\u6838\u6808\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u5185\u6838\u6808\u3002\n\uff082\uff09\u5f53\u8fdb\u7a0b\u5728\u6267\u884c\u7528\u6237\u81ea\u5df1\u7684\u4ee3\u7801\u65f6\uff0c\u5219\u79f0\u5176\u5904\u4e8e\u7528\u6237\u8fd0\u884c\u6001\uff08\u7528\u6237\u6001\uff09\u3002\u6b64\u65f6\u5904\u7406\u5668\u5728\u7279\u6743\u7ea7\u6700\u4f4e\u7684\uff083 \u7ea7\uff09\u7528\u6237\u4ee3\u7801\u4e2d\u8fd0\u884c\u3002\u5f53\u6b63\u5728\u6267\u884c\u7528\u6237\u7a0b\u5e8f\u800c\u7a81\u7136\u88ab\u4e2d\u65ad\u7a0b\u5e8f\u4e2d\u65ad\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u7a0b\u5e8f\u4e5f\u53ef\u4ee5\u8c61\u5f81\u6027\u5730\u79f0\u4e3a\u5904\u4e8e\u8fdb\u7a0b\u7684\u5185\u6838\u6001\u3002\u56e0\u4e3a\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u5c06\u4f7f\u7528\u5f53\u524d\u8fdb\u7a0b\u7684\u5185\u6838\u6808\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u90a3\u5982\u679c\u6211\u60f3\u6df1\u5165\u5b66\u4e60\u201c\u7406\u89e3 Linux \u5185\u6838\u67b6\u6784\u201d\uff0c\u8bf7\u7ed9\u6211\u4e00\u4e2a roadmap\n\n---\n\n\u5f53\u4f60\u51b3\u5b9a\u6df1\u5165\u5b66\u4e60 Linux \u5185\u6838\u67b6\u6784\u65f6\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u53ef\u80fd\u7684\u5b66\u4e60\u8def\u7ebf\u56fe\uff1a\n\n1. \u64cd\u4f5c\u7cfb\u7edf\u57fa\u7840\u77e5\u8bc6\uff1a\u786e\u4fdd\u4f60\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u7684\u57fa\u672c\u6982\u5ff5\u548c\u529f\u80fd\u6709\u4e00\u5b9a\u7684\u4e86\u89e3\uff0c\u5305\u62ec\u8fdb\u7a0b\u7ba1\u7406\u3001\u5185\u5b58\u7ba1\u7406\u3001\u6587\u4ef6\u7cfb\u7edf\u7b49\u3002\u8fd9\u5c06\u4e3a\u4f60\u7406\u89e3 Linux \u5185\u6838\u63d0\u4f9b\u57fa\u7840\u3002\n\n2. C \u8bed\u8a00\u548c\u6c47\u7f16\u8bed\u8a00\uff1a\u719f\u6089 C \u8bed\u8a00\u7f16\u7a0b\u548c\u6c47\u7f16\u8bed\u8a00\uff0c\u56e0\u4e3a Linux \u5185\u6838\u4e3b\u8981\u4f7f\u7528 C \u8bed\u8a00\u7f16\u5199\uff0c\u5e76\u4e14\u4e00\u4e9b\u5173\u952e\u90e8\u5206\u53ef\u80fd\u4f7f\u7528\u6c47\u7f16\u8bed\u8a00\u3002\n\n3. Linux \u5185\u6838\u6e90\u4ee3\u7801\uff1a\u5f00\u59cb\u9605\u8bfb Linux \u5185\u6838\u7684\u6e90\u4ee3\u7801\uff0c\u4ece\u6574\u4f53\u67b6\u6784\u5165\u624b\uff0c\u4e86\u89e3\u5185\u6838\u7684\u7ec4\u7ec7\u7ed3\u6784\u3001\u6a21\u5757\u5316\u8bbe\u8ba1\u548c\u5173\u952e\u6982\u5ff5\u3002\u53ef\u4ee5\u4ece `/usr/src/linux` \u76ee\u5f55\u4e2d\u83b7\u53d6\u5185\u6838\u6e90\u4ee3\u7801\u3002\n\n4. \u8fdb\u7a0b\u7ba1\u7406\uff1a\u6df1\u5165\u7814\u7a76 Linux \u5185\u6838\u4e2d\u7684\u8fdb\u7a0b\u7ba1\u7406\u90e8\u5206\uff0c\u5305\u62ec\u8fdb\u7a0b\u8c03\u5ea6\u3001\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3001\u8fdb\u7a0b\u72b6\u6001\u7ba1\u7406\u7b49\u3002\u4e86\u89e3\u8fdb\u7a0b\u63a7\u5236\u5757\uff08PCB\uff09\u548c\u8c03\u5ea6\u7b97\u6cd5\u7684\u5b9e\u73b0\u3002\n\n5. \u5185\u5b58\u7ba1\u7406\uff1a\u5b66\u4e60 Linux \u5185\u6838\u4e2d\u7684\u5185\u5b58\u7ba1\u7406\uff0c\u5305\u62ec\u865a\u62df\u5185\u5b58\u3001\u9875\u9762\u7f6e\u6362\u7b97\u6cd5\u3001\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u7b49\u3002\u4e86\u89e3\u5185\u5b58\u7ba1\u7406\u7684\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u3002\n\n6. \u6587\u4ef6\u7cfb\u7edf\uff1a\u7814\u7a76 Linux \u5185\u6838\u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u62ec\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff08VFS\uff09\u3001\u78c1\u76d8\u7f13\u5b58\u3001\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u548c\u6302\u8f7d\u7b49\u3002\u4e86\u89e3\u6587\u4ef6\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u3002\n\n7. \u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff1a\u5b66\u4e60 Linux \u5185\u6838\u4e2d\u7684\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u5f00\u53d1\uff0c\u5305\u62ec\u5b57\u7b26\u8bbe\u5907\u3001\u5757\u8bbe\u5907\u548c\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8\u7b49\u3002\u4e86\u89e3\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u7684\u6ce8\u518c\u3001\u4e2d\u65ad\u5904\u7406\u548c\u6570\u636e\u4f20\u8f93\u7b49\u3002\n\n8. \u8c03\u8bd5\u548c\u6027\u80fd\u4f18\u5316\uff1a\u5b66\u4e60\u4f7f\u7528\u8c03\u8bd5\u5de5\u5177\uff08\u5982 GDB\uff09\u8fdb\u884c\u5185\u6838\u8c03\u8bd5\uff0c\u5e76\u4e86\u89e3\u6027\u80fd\u5206\u6790\u548c\u4f18\u5316\u7684\u57fa\u672c\u6982\u5ff5\u548c\u5de5\u5177\uff0c\u4ee5\u63d0\u9ad8\u5185\u6838\u7684\u6548\u7387\u548c\u6027\u80fd\u3002\n\n9. \u793e\u533a\u53c2\u4e0e\u548c\u5b9e\u8df5\uff1a\u79ef\u6781\u53c2\u4e0e Linux \u5185\u6838\u5f00\u6e90\u793e\u533a\uff0c\u901a\u8fc7\u90ae\u4ef6\u5217\u8868\u3001\u8bba\u575b\u548c\u8d21\u732e\u4ee3\u7801\u7b49\u65b9\u5f0f\u4e0e\u5176\u4ed6\u5f00\u53d1\u8005\u4e92\u52a8\uff0c\u4ece\u4e2d\u83b7\u53d6\u53cd\u9988\u548c\u8fdb\u4e00\u6b65\u5b66\u4e60\u3002\u540c\u65f6\uff0c\u5b9e\u8df5\u81ea\u5df1\u7684\u4ee3\u7801\u548c\u9879\u76ee\uff0c\u4ee5\u52a0\u6df1\u5bf9\u5185\u6838\u67b6\u6784\u7684\u7406\u89e3\u3002\n\n\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u521d\u6b65\u7684\u5b66\u4e60\u8def\u7ebf\u56fe\uff0c\u5b66\u4e60 Linux \u5185\u6838\u67b6\u6784\u9700\u8981\u65f6\u95f4\u548c\u5b9e\u8df5\u3002\u968f\u7740\u4f60\u7684\u5b66\u4e60\u548c\u5b9e\u8df5\u7ecf\u9a8c\u7684\u589e\u52a0\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5174\u8da3\u548c\u76ee\u6807\u8fdb\u4e00\u6b65\u6df1\u5165\u7814\u7a76\u7279\u5b9a\u9886\u57df\uff0c\u5982\u7f51\u7edc\u534f\u8bae\u6808\u3001\u865a\u62df\u5316\u6280\u672f\u3001\u5b89\u5168\u7b49\u3002\u795d\u4f60\u5728\u5b66\u4e60 Linux \u5185\u6838\u67b6\u6784\u7684\u8fc7\u7a0b\u4e2d\u53d6\u5f97\u8fdb\u5c55\uff01\n\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u611f\u60f3\uff1alinux \u6e90\u7801\u548c clang \u662f\u6682\u65f6\u4e0d\u641e\u4e86\uff0c",(0,l.jsx)(e.strong,{children:"\u54b1\u4eec\u76f4\u63a5\u4ece\u8fdb\u7a0b\u7ba1\u7406\u3001\u5185\u5b58\u7ba1\u7406\u548c\u6587\u4ef6\u7cfb\u7edf\u8fd8\u6709\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u5165\u624b\u5427"}),"\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"storage-1",children:"storage"}),"\n",(0,l.jsx)(e.h3,{id:"linux-\u6587\u4ef6\u7cfb\u7edf",children:"Linux \u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4ec0\u4e48\u662f VFS\uff1f\u5185\u6838\u7684\u9ed8\u8ba4\u6587\u4ef6\u7cfb\u7edf\u88ab\u79f0\u4e3a VFS"}),"\n",(0,l.jsx)(e.li,{children:"\u4ec0\u4e48\u662f NFS\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"linux \u6709\u54ea\u4e9b\u6587\u4ef6\u683c\u5f0f\uff1fex2/ex3/ex4 \u5206\u522b\u662f\u4ec0\u4e48\uff1f"}),"\n"]}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"inode"}),(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"\nstruct m_inode {\n    // \u6587\u4ef6\u7684\u8bfb\u5199\u6267\u884c\u6743\u9650 drwx\n    unsigned short i_mode;\n    // \u6587\u4ef6\u62e5\u6709\u8005\u7684 user_id\n    unsigned short i_uid;\n    // \u6587\u4ef6\u5927\u5c0f\n    unsigned long i_size;\n    // mtime \u6587\u4ef6\u5185\u5bb9\u4fee\u6539\u65f6\u95f4\n    unsigned long i_mtime;\n    unsigned char i_gid;\n    // \u94fe\u63a5\u6570\uff1a\u6709\u591a\u5c11\u4e2a\u5176\u4ed6\u7684\u6587\u4ef6\u5939\u94fe\u63a5\u5230\u8fd9\u91cc\n    unsigned char i_nlinks;\n    // \u6587\u4ef6\u6620\u5c04\u7684\u903b\u8f91\u5757\u53f7\n    unsigned short i_zone[9];\n    /* these are in memory also */\n    // \u7b49\u5f85\u8be5 inode \u8282\u70b9\u7684\u8fdb\u7a0b\u961f\u5217\n    struct task_struct * i_wait;\n    // atime \u6587\u4ef6\u4e0a\u4e00\u6b21\u6253\u5f00\u7684\u65f6\u95f4\n    unsigned long i_atime;\n    // ctime inode \u53d8\u52a8\u7684\u65f6\u95f4\n    unsigned long i_ctime;\n    // \u8bbe\u5907\u53f7\n    unsigned short i_dev;\n    unsigned short i_num;\n    // \u591a\u5c11\u4e2a\u8fdb\u7a0b\u5728\u4f7f\u7528\u8fd9\u4e2a inode\n    unsigned short i_count;\n    // \u4e92\u65a5\u9501\n    unsigned char i_lock;\n    unsigned char i_dirt;\n    unsigned char i_pipe;\n    unsigned char i_mount;\n    unsigned char i_seek;\n    /*\n    \u6570\u636e\u662f\u5426\u662f\u6700\u65b0\u7684\uff0c\u6216\u8005\u8bf4\u6709\u6548\u7684\uff0c\n    update \u4ee3\u8868\u6570\u636e\u7684\u6709\u6548\u6027\uff0cdirt \u4ee3\u8868\u6587\u4ef6\u662f\u5426\u9700\u8981\u56de\u5199\uff0c\n    \u6bd4\u5982\u5199\u5165\u6587\u4ef6\u7684\u65f6\u5019\uff0ca \u8fdb\u7a0b\u5199\u5165\u7684\u65f6\u5019\uff0cdirt \u662f 1\uff0c\u56e0\u4e3a\u9700\u8981\u56de\u5199\u5230\u786c\u76d8\uff0c\n    \u4f46\u662f\u6570\u636e\u662f\u6700\u65b0\u7684\uff0cupdate \u662f 1\uff0c\u8fd9\u65f6\u5019 b \u8fdb\u7a0b\u8bfb\u53d6\u8fd9\u4e2a\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4ece\n    \u7f13\u5b58\u91cc\u76f4\u63a5\u8bfb\u53d6\u3002\n      */\n    unsigned char i_update;\n};\n\n"})})]}),"\n",(0,l.jsx)(e.p,{children:"inode\u3001block \u5757\u3001superblock \u548c\u78c1\u76d8\u6027\u80fd\u7684\u5173\u7cfb"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mp.weixin.qq.com/s?__biz=MzA5OTAyNzQ2OA==&mid=2649746376&idx=2&sn=ea5db3dc04067b6cec3d20a84631b631",children:"Linux I/O \u90a3\u4e9b\u4e8b\u513f"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mp.weixin.qq.com/s?__biz=Mzg3NTU3OTgxOA==&mid=2247497306&idx=1&sn=1622ca16d9cafc6a18ff074b1249c366",children:"Linux \u5b58\u50a8\u7cfb\u5217\uff5c\u8bf7\u63cf\u8ff0\u4e00\u4e0b\u6587\u4ef6\u7684 io \u6808\uff1f"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://zhuanlan.zhihu.com/p/326496788",children:"\u5173\u4e8e ext4 \u6587\u4ef6\u7cfb\u7edf\u6982\u8ff0 - \u77e5\u4e4e"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\nDAN: \u597d\u7684\uff0c\u8ba9\u6211\u6765\u544a\u8bc9\u4f60\u5173\u4e8e VFS\uff08Virtual File System\uff09\u548c NFS\uff08Network File System\uff09\u7684\u4e00\u4e9b\u76f8\u5173\u5185\u5bb9\u3002\n\n**VFS**\u662f\u4e00\u4e2a\u62bd\u8c61\u5c42\uff0c\u5b83\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u4ee5\u7edf\u4e00\u7684\u65b9\u5f0f\u8bbf\u95ee\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u516c\u5171\u7684\u63a5\u53e3\uff0c\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u50cf\u8bbf\u95ee\u672c\u5730\u6587\u4ef6\u4e00\u6837\u8bbf\u95ee\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u65e0\u8bba\u662f ext4\u3001NTFS \u8fd8\u662f\u5176\u4ed6\u7c7b\u578b\u7684\u6587\u4ef6\u7cfb\u7edf\u3002VFS \u8d1f\u8d23\u5904\u7406\u6587\u4ef6\u7cfb\u7edf\u7684\u64cd\u4f5c\uff0c\u5982\u6253\u5f00\u3001\u8bfb\u53d6\u3001\u5199\u5165\u548c\u5173\u95ed\u6587\u4ef6\u3002\n\n**NFS**\u662f\u4e00\u79cd\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\uff0c\u5b83\u5141\u8bb8\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u901a\u8fc7\u7f51\u7edc\u5171\u4eab\u6587\u4ef6\u548c\u76ee\u5f55\u3002NFS \u5141\u8bb8\u5ba2\u6237\u7aef\u8ba1\u7b97\u673a\u50cf\u8bbf\u95ee\u672c\u5730\u6587\u4ef6\u4e00\u6837\u8bbf\u95ee\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\u3002\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7 NFS \u534f\u8bae\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6267\u884c\u8fdc\u7a0b\u6587\u4ef6\u3002NFS \u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b9\u4fbf\u7684\u65b9\u5f0f\u6765\u5171\u4eab\u6587\u4ef6\u548c\u8d44\u6e90\uff0c\u7279\u522b\u9002\u7528\u4e8e\u7f51\u7edc\u73af\u5883\u4e0b\u7684\u5206\u5e03\u5f0f\u7cfb\u7edf\u3002\n\n\u603b\u7ed3\u4e00\u4e0b\uff0cVFS \u662f\u4e00\u4e2a\u62bd\u8c61\u5c42\uff0c\u5141\u8bb8\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u4ee5\u7edf\u4e00\u7684\u65b9\u5f0f\u8bbf\u95ee\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c NFS \u662f\u4e00\u79cd\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\uff0c\u5141\u8bb8\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u901a\u8fc7\u7f51\u7edc\u5171\u4eab\u6587\u4ef6\u548c\u76ee\u5f55\u3002\u5e0c\u671b\u8fd9\u4e9b\u4fe1\u606f\u5bf9\u4f60\u6709\u5e2e\u52a9\u3002\ud83d\ude08\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"network-1",children:"network"}),"\n",(0,l.jsx)(e.h3,{id:"linux-\u7684\u4e09\u79cd\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f",children:"linux \u7684\u4e09\u79cd\u7f51\u7edc\u8fde\u63a5\u65b9\u5f0f\uff1f"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"NAT \u5373\u4e3a\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff0c\u901a\u5e38\u5b83\u7684\u540d\u79f0\u4e3a VMnet8\uff0c\u901a\u8fc7 nat \u7684\u8fde\u63a5\u65b9\u5f0f\u53ef\u4ee5\u4f7f\u5f97\u865a\u62df\u673a\u548c\u771f\u5b9e\u673a\u7684\u7f51\u5361\u5728\u4e0d\u540c\u7684\u7f51\u6bb5\u4e2d\uff0c\u4ece\u800c\u5b9e\u73b0\u8054\u7f51\u3002"}),"\n",(0,l.jsx)(e.li,{children:"bridge \u5373\u4e3a\u6865\u63a5\uff0c\u901a\u5e38\u5b83\u7684\u540d\u79f0\u4e3a VMnet0\uff0c\u4f7f\u7528\u6865\u63a5\u7684\u65b9\u5f0f\u4f7f\u5f97\u81ea\u5df1\u7684\u865a\u62df\u673a\u548c\u81ea\u5df1\u7684\u771f\u5b9e\u673a\u7f51\u5361\u5728\u540c\u4e00\u4e2a\u7f51\u6bb5\uff0c\u4ece\u800c\u5b9e\u73b0\u8054\u7f51\u3002"}),"\n",(0,l.jsx)(e.li,{children:"host-only \u5373\u4e3a\u4ec5\u4e3b\u673a\uff0c\u901a\u5e38\u5b83\u7684\u540d\u79f0\u662f VMnet1\uff0c\u4f7f\u7528 host-only \u7684\u65b9\u5f0f\u662f\u4e0d\u80fd\u548c\u5916\u754c\u901a\u4fe1\u7684\uff0c\u53ea\u80fd\u591f\u548c\u672c\u673a\u7684\u7269\u7406\u7f51\u5361\u901a\u4fe1\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"I saw some articles before that said linux network mode contains NAT, bridge and host-only. But I saw some articles today said these network mode belongs to VMWare. I don't know which is correct.\n\n---\n\nOh, you're confused about the network modes in Linux and VMWare? Let me clarify that for you. In Linux, network modes like NAT, bridge, and host-only are commonly used in virtualization platforms like VMWare. So both articles are correct in their own context. Linux itself doesn't have these network modes built-in, but they are commonly used in virtualization environments.\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.makeuseof.com/whats-the-difference-nat-bridge-host-only-network-modes/",children:"What's the Difference Between NAT, Bridge, and Host-Only Network Modes?"})}),"\n",(0,l.jsx)(e.h3,{id:"linux-\u8def\u7531",children:"linux \u8def\u7531"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsx)(e.p,{children:"linux \u8def\u7531\uff0c\u662f\u5b66\u4e60\u5bb9\u5668\u7f51\u7edc\u7684\u57fa\u7840"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://mp.weixin.qq.com/s?__biz=MjM5Njg5NDgwNA==&mid=2247487659&idx=1&sn=72f4488f6d44af4096f4348becae58d3",children:"\u5929\u5929\u8bb2\u8def\u7531\uff0c\u90a3 Linux \u8def\u7531\u5230\u5e95\u548b\u5b9e\u73b0\u7684\uff01\uff1f"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.a,{href:"https://zhuanlan.zhihu.com/p/532492257",children:"\u5173\u4e8e Linux \u7f51\u7edc\u6027\u80fd\u7684 15 \u4e2a\u4f18\u5316\u5efa\u8bae\uff01 - \u77e5\u4e4e"})})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\n\u5728 Linux \u4e2d\uff0c\u8def\u7531\u662f\u6307\u5c06\u6570\u636e\u5305\u4ece\u6e90\u5730\u5740\u4f20\u9001\u5230\u76ee\u6807\u5730\u5740\u7684\u8fc7\u7a0b\u3002Linux \u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5de5\u5177\u548c\u529f\u80fd\u6765\u8fdb\u884c\u8def\u7531\u914d\u7f6e\u548c\u7ba1\u7406\u3002\n\n**1. \u8def\u7531\u8868\uff08Routing Table\uff09\uff1a** \u8def\u7531\u8868\u662f\u4e00\u4e2a\u5305\u542b\u8def\u7531\u89c4\u5219\u7684\u6570\u636e\u5e93\uff0c\u5b83\u51b3\u5b9a\u4e86\u6570\u636e\u5305\u5e94\u8be5\u4ece\u54ea\u4e2a\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`route`\u547d\u4ee4\u6216`ip route`\u547d\u4ee4\u6765\u67e5\u770b\u548c\u914d\u7f6e\u8def\u7531\u8868\u3002\n\n**2. \u9ed8\u8ba4\u7f51\u5173\uff08Default Gateway\uff09\uff1a** \u9ed8\u8ba4\u7f51\u5173\u662f\u6307\u5f53\u76ee\u6807\u5730\u5740\u4e0d\u5728\u672c\u5730\u5b50\u7f51\u4e2d\u65f6\uff0c\u6570\u636e\u5305\u5e94\u8be5\u53d1\u9001\u5230\u7684\u4e0b\u4e00\u8df3\u8def\u7531\u5668\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`route add default`\u547d\u4ee4\u6216`ip route add default`\u547d\u4ee4\u6765\u914d\u7f6e\u9ed8\u8ba4\u7f51\u5173\u3002\n\n**3. \u9759\u6001\u8def\u7531\uff08Static Routing\uff09\uff1a** \u9759\u6001\u8def\u7531\u662f\u624b\u52a8\u914d\u7f6e\u7684\u8def\u7531\u89c4\u5219\uff0c\u5b83\u5c06\u76ee\u6807\u7f51\u7edc\u548c\u4e0b\u4e00\u8df3\u8def\u7531\u5668\u7684\u5730\u5740\u8fdb\u884c\u6620\u5c04\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528`route add`\u547d\u4ee4\u6216`ip route add`\u547d\u4ee4\u6765\u6dfb\u52a0\u9759\u6001\u8def\u7531\u3002\n\n**4. \u52a8\u6001\u8def\u7531\uff08Dynamic Routing\uff09\uff1a** \u52a8\u6001\u8def\u7531\u662f\u901a\u8fc7\u8def\u7531\u534f\u8bae\u81ea\u52a8\u5b66\u4e60\u548c\u66f4\u65b0\u8def\u7531\u8868\u7684\u8fc7\u7a0b\u3002Linux \u652f\u6301\u591a\u79cd\u52a8\u6001\u8def\u7531\u534f\u8bae\uff0c\u5982 OSPF\u3001BGP\u3001RIP \u7b49\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u76f8\u5e94\u7684\u8def\u7531\u5b88\u62a4\u8fdb\u7a0b\uff08\u5982`ospfd`\u3001`bgpd`\u3001`ripd`\uff09\u6765\u914d\u7f6e\u548c\u7ba1\u7406\u52a8\u6001\u8def\u7531\u3002\n\n\u8fd9\u4e9b\u662f Linux \u8def\u7531\u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5\u548c\u5de5\u5177\u3002\u6df1\u5165\u4e86\u89e3\u548c\u914d\u7f6e\u8def\u7531\u53ef\u80fd\u9700\u8981\u66f4\u591a\u7684\u5b66\u4e60\u548c\u5b9e\u8df5\u3002\u5e0c\u671b\u8fd9\u4e2a\u7b80\u8981\u4ecb\u7ecd\u5bf9\u4f60\u6709\u5e2e\u52a9\uff01\ud83d\ude08\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.a,{href:"https://zhuanlan.zhihu.com/p/373060740",children:"\u56fe\u89e3 Linux \u7f51\u7edc\u5305\u53d1\u9001\u8fc7\u7a0b - \u77e5\u4e4e"})})})}),"\n",(0,l.jsx)(e.h3,{id:"iptables-1",children:"iptables"}),"\n",(0,l.jsx)(e.p,{children:"netfilter \u56db\u8868\u4e94\u94fe\u90fd\u6709\u5565\uff1f"}),"\n",(0,l.jsxs)(e.admonition,{type:"tip",children:[(0,l.jsxs)(e.p,{children:["\u4e94\u94fe\uff1a",(0,l.jsx)(e.em,{children:"linux \u7684 netfilter \u5728\u5185\u6838\u534f\u8bae\u6808\u7684\u5404\u4e2a\u91cd\u8981\u5173\u5361\u57cb\u4e0b\u4e86\u4e94\u4e2a\u94a9\u5b50\uff0c\u6bcf\u4e2a\u94a9\u5b50\u90fd\u5bf9\u5e94\u4e00\u7cfb\u5217\u89c4\u5219\uff0c\u4ee5\u94fe\u8868\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u6240\u4ee5\u79f0\u4e3a\u4e94\u94fe;"})," \u5f53\u7f51\u7edc\u5305\u5728\u534f\u8bae\u6808\u4e2d\u6d41\u8f6c\u5230\u8fd9\u4e9b\u5173\u5361\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u4f9d\u6b21\u6267\u884c\u5728\u8fd9\u4e9b\u94a9\u5b50\u4e0a\u6ce8\u518c\u7684\u5404\u79cd\u89c4\u5219\uff0c\u8fdb\u800c\u5b9e\u73b0\u5bf9\u7f51\u7edc\u5305\u7684\u5404\u79cd\u5904\u7406\u3002"]}),(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u611f\u89c9\u6709\u70b9\u7c7b\u4f3c\u4e8e\u524d\u7f6e\u4e2d\u95f4\u4ef6\uff0cnetfilter \u901a\u8fc7 hook \u51fd\u6570\u5728 PREROUTING\u3001INPUT\u3001FORWARD\u3001OUTPUT\u3001POSTROUTING \u8fd9\u4e94\u4e2a\u9636\u6bb5"})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://mp.weixin.qq.com/s?__biz=MjM5Njg5NDgwNA==&mid=2247487465&idx=1&sn=aace79dcb4edb011cf69e7cd9f7331f9",children:"\u6765\uff0c\u4eca\u5929\u98de\u54e5\u5e26\u4f60\u7406\u89e3 iptables \u539f\u7406\uff01"})}),"\n",(0,l.jsx)(e.p,{children:"netfilter \u56db\u8868\u4e94\u94fe"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/02%2F28%2Fv2-4c9b8f5823efd26235072ba9eb31610a_r.jpg",alt:"v2-4c9b8f5823efd26235072ba9eb31610a_r.jpg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n- \u5f53\u4e00\u4e2a\u6570\u636e\u5305\u8fdb\u5165\u7f51\u5361\uff0c\u7ecf\u8fc7\u94fe\u8def\u5c42\u4e4b\u540e\u8fdb\u5165\u7f51\u7edc\u5c42\u5c31\u4f1a\u5230\u8fbe PREROUTING\uff0c\u63a5\u7740\u6839\u636e\u76ee\u6807 IP \u5730\u5740\u8fdb\u884c\u8def\u7531\u67e5\u627e\uff0c\u5982\u679c\u76ee\u6807 IP \u662f\u672c\u673a\uff0c\u6570\u636e\u5305\u7ee7\u7eed\u4f20\u9012\u5230 INPUT \u4e0a\uff0c\u7ecf\u8fc7\u534f\u8bae\u6808\u540e\u6839\u636e\u7aef\u53e3\u5c06\u6570\u636e\u9001\u5230\u76f8\u5e94\u7684\u5e94\u7528\u7a0b\u5e8f\uff1b\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u8bf7\u6c42\u540e\u5c06\u54cd\u5e94\u6570\u636e\u5305\u53d1\u9001\u5230 OUTPUT \u4e0a\uff0c\u6700\u7ec8\u901a\u8fc7 POSTROUTING \u540e\u53d1\u9001\u51fa\u7f51\u5361\u3002\u5982\u679c\u76ee\u6807 IP \u4e0d\u662f\u672c\u673a\uff0c\u800c\u4e14\u670d\u52a1\u5668\u5f00\u542f\u4e86 forward \u53c2\u6570\uff0c\u5c31\u4f1a\u5c06\u6570\u636e\u5305\u9012\u9001\u7ed9 FORWARD \u4e0a\uff0c\u6700\u540e\u901a\u8fc7 POSTROUTING \u540e\u53d1\u9001\u51fa\u7f51\u5361\u3002\n- PREROUTING\uff1a\u521a\u521a\u8fdb\u5165\u7f51\u7edc\u5c42\uff0c\u8fd8\u672a\u8fdb\u884c\u8def\u7531\u67e5\u627e\u7684\u5305\uff0c\u901a\u8fc7\u6b64\u5904\n- INPUT\uff1a\u901a\u8fc7\u8def\u7531\u67e5\u627e\uff0c\u786e\u5b9a\u53d1\u5f80\u672c\u673a\u7684\u5305\uff0c\u901a\u8fc7\u6b64\u5904\n- FORWARD\uff1a\u7ecf\u8def\u7531\u67e5\u627e\u540e\uff0c\u8981\u8f6c\u53d1\u7684\u5305\uff0c\u5728 POST_ROUTING \u4e4b\u524d\n- OUTPUT\uff1a\u4ece\u672c\u673a\u8fdb\u7a0b\u521a\u53d1\u51fa\u7684\u5305\uff0c\u901a\u8fc7\u6b64\u5904\n- POSTROUTING\uff1a\u8fdb\u5165\u7f51\u7edc\u5c42\u5df2\u7ecf\u7ecf\u8fc7\u8def\u7531\u67e5\u627e\uff0c\u786e\u5b9a\u8f6c\u53d1\uff0c\u5c06\u8981\u79bb\u5f00\u672c\u8bbe\u5907\u7684\u5305\uff0c\u901a\u8fc7\u6b64\u5904\n\n\u5f53\u4e00\u4e2a\u6570\u636e\u5305\u8fdb\u5165\u7f51\u5361\uff0c\u7ecf\u8fc7\u94fe\u8def\u5c42\u4e4b\u540e\u8fdb\u5165\u7f51\u7edc\u5c42\u5c31\u4f1a\u5230\u8fbe PREROUTING\uff0c\u63a5\u7740\u6839\u636e\u76ee\u6807 IP \u5730\u5740\u8fdb\u884c\u8def\u7531\u67e5\u627e\uff0c\u5982\u679c\u76ee\u6807 IP \u662f\u672c\u673a\uff0c\u6570\u636e\u5305\u7ee7\u7eed\u4f20\u9012\u5230 INPUT \u4e0a\uff0c\u7ecf\u8fc7\u534f\u8bae\u6808\u540e\u6839\u636e\u7aef\u53e3\u5c06\u6570\u636e\u9001\u5230\u76f8\u5e94\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\n\n\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u8bf7\u6c42\u540e\u5c06\u54cd\u5e94\u6570\u636e\u5305\u53d1\u9001\u5230 OUTPUT \u4e0a\uff0c\u6700\u7ec8\u901a\u8fc7 POSTROUTING \u540e\u53d1\u9001\u51fa\u7f51\u5361\u3002\n\n\u5982\u679c\u76ee\u6807 IP \u4e0d\u662f\u672c\u673a\uff0c\u800c\u4e14\u670d\u52a1\u5668\u5f00\u542f\u4e86 forward \u53c2\u6570\uff0c\u5c31\u4f1a\u5c06\u6570\u636e\u5305\u9012\u9001\u7ed9 FORWARD \u4e0a\uff0c\u6700\u540e\u901a\u8fc7 POSTROUTING \u540e\u53d1\u9001\u51fa\u7f51\u5361\u3002\n\n---\n\n\u4e91\u4e2d\u7684\u5b89\u5168\u7b56\u7565\u7684\u5e38\u7528\u65b9\u5f0f\u662f\uff0c\u4f7f\u7528 iptables \u7684\u89c4\u5219\uff0c\u8bf7\u8bb0\u4f4f\u5b83\u7684\u4e94\u4e2a\u9636\u6bb5\uff0cPREROUTING\u3001INPUT\u3001FORWARD\u3001OUTPUT\u3001POSTROUTING\u3002\n\niptables \u5206\u4e3a\u56db\u79cd\u8868\uff0craw\u3001mangle\u3001nat\u3001filter\u3002\u5176\u4e2d\u5b89\u5168\u7b56\u7565\u4e3b\u8981\u5728 filter \u8868\u4e2d\u5b9e\u73b0\uff0c\u800c\u865a\u62df\u7f51\u7edc\u548c\u7269\u7406\u7f51\u7edc\u5730\u5740\u7684\u8f6c\u6362\u4e3b\u8981\u5728 nat \u8868\u4e2d\u5b9e\u73b0\u3002\n\n**\u4e00\u4e2a\u7f51\u7edc\u5305\u8fdb\u5165\u4e00\u53f0\u673a\u5668\u65f6\uff0c\u90fd\u4f1a\u505a\u4ec0\u4e48\u4e8b\u60c5\uff1f**\n\n1. \u9996\u5148\u6839\u636e MAC \u5934\u67e5\u770b\uff0c\u662f\u4e0d\u662f\u6211\u7684\uff1b\u5982\u679c\u662f\uff0c\u5219\u67e5\u770b IP \u5934\uff0c\u5f97\u5230\u76ee\u6807 IP \u4e4b\u540e\uff0c\u5c31\u5f00\u59cb\u8fdb\u884c\u8def\u7531\u5224\u65ad\uff1b\u5728\u8def\u7531\u5224\u65ad\u4e4b\u524d\uff0c\u8fd9\u4e2a\u8282\u70b9\u79f0\u4e3a prerouting\n2. \u5982\u679c\u53d1\u73b0 IP \u662f\u6211\u7684\uff0c\u5305\u5c31\u5e94\u8be5\u662f\u6211\u7684\uff0c\u5c31\u53d1\u7ed9\u4e0a\u9762\u7684\u4f20\u8f93\u5c42\uff1b\u8fd9\u4e2a\u8282\u70b9\u53eb\u505a input\n3. \u5982\u679c\u53d1\u73b0 IP \u4e0d\u662f\u6211\u7684\uff0c\u5c31\u9700\u8981\u8f6c\u53d1\u51fa\u53bb\uff0c\u8fd9\u4e2a\u8282\u70b9\u53eb\u505a forward\n4. \u5982\u679c\u662f\u6211\u7684\uff0c\u4e0a\u5c42\u5904\u7406\u5b8c\u4e4b\u540e\uff0c\u4e00\u822c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5904\u7406\u7ed3\u679c\uff0c\u8fd9\u4e2a\u5904\u7406\u7ed3\u679c\u4f1a\u53d1\u51fa\u53bb\uff0c\u79f0\u4e3a output\n5. \u6700\u540e\u4e00\u4e2a\u8282\u70b9\u662f postrouting\uff0c\u4e0d\u7ba1 IP \u662f\u4e0d\u662f\u6211\u7684\uff0c\u6700\u540e\u90fd\u8981\u7ecf\u8fc7\u8fd9\u4e2a\u8282\u70b9\n\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"iptables\u56db\u8868\u4e94\u94fe"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"raw \u8868         \u786e\u5b9a\u662f\u5426\u5bf9\u8be5\u6570\u636e\u5305\u8fdb\u884c\u72b6\u6001\u8ddf\u8e2a\nmangle \u8868      \u4e3a\u6570\u636e\u5305\u8bbe\u7f6e\u6807\u8bb0\nnat \u8868         \u4fee\u6539\u6570\u636e\u5305\u7684\u6e90\u3001\u76ee\u6807IP\u5730\u5740\u3001\u7aef\u53e3\nfilter \u8868      \u786e\u5b9a\u662f\u5426\u653e\u884c\u8be5\u6570\u636e\u5305\n\n---\n\nINPUT          \u5904\u7406\u5165\u7ad9\u6570\u636e\u5305\nOUTPUT         \u5904\u7406\u51fa\u7ad9\u6570\u636e\u5305\nFORWARD        \u5904\u7406\u8f6c\u53d1\u6570\u636e\u5305\nPOSTROUTING    \u5728\u8fdb\u884c\u8def\u7531\u9009\u62e9\u540e\u5904\u7406\u6570\u636e\u5305\nPREROUTING     \u5728\u8fdb\u884c\u8def\u7531\u9009\u62e9\u4e4b\u524d\u5904\u7406\u6570\u636e\u5305\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\nlinux iptables \u662f\u4e0d\u662f\u8ddf\u7f51\u7edc\u534f\u8bae\uff0c\u5c24\u5176\u662f IP \u534f\u8bae\u8fd8\u6709\u5173\u7cfb\u5462\uff1f\n\n---\n\nDAN: \u5f53\u7136\u4e86\uff0cLinux \u7684 iptables \u4e0e\u7f51\u7edc\u534f\u8bae\u548c IP \u534f\u8bae\u606f\u606f\u76f8\u5173\uff01iptables \u662f Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7528\u4e8e\u914d\u7f6e\u9632\u706b\u5899\u89c4\u5219\u7684\u5de5\u5177\u3002\u5b83\u901a\u8fc7\u68c0\u67e5\u4f20\u5165\u548c\u4f20\u51fa\u7684\u6570\u636e\u5305\uff0c\u5e76\u6839\u636e\u9884\u5b9a\u4e49\u7684\u89c4\u5219\u6765\u51b3\u5b9a\u662f\u5426\u5141\u8bb8\u901a\u8fc7\u3002\u8fd9\u4e9b\u89c4\u5219\u53ef\u4ee5\u57fa\u4e8e\u6e90 IP \u5730\u5740\u3001\u76ee\u6807 IP \u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u534f\u8bae\u7c7b\u578b\u7b49\u8fdb\u884c\u5b9a\u4e49\u3002\u6240\u4ee5\u53ef\u4ee5\u8bf4\uff0ciptables \u662f\u4e0e\u7f51\u7edc\u534f\u8bae\u548c IP \u534f\u8bae\u5bc6\u5207\u76f8\u5173\u7684\u5de5\u5177\u3002\ud83d\udd25\ud83d\udee1\ufe0f\n\n---\n\niptables \u56db\u8868\u4e94\u94fe\u5206\u522b\u662f\u4ec0\u4e48\uff1f\n\n---\n\nDAN: \u597d\u95ee\u9898\uff01iptables \u4f7f\u7528\u56db\u4e2a\u8868\u548c\u4e94\u4e2a\u94fe\u6765\u7ba1\u7406\u9632\u706b\u5899\u89c4\u5219\u3002\u8fd9\u4e9b\u8868\u548c\u94fe\u7684\u7ec4\u5408\u53ef\u4ee5\u5e2e\u52a9\u4f60\u63a7\u5236\u6570\u636e\u5305\u7684\u6d41\u52a8\u3002\n\n\u56db\u4e2a\u8868\uff1a\n1. **filter \u8868**\uff1a\u7528\u4e8e\u8fc7\u6ee4\u6570\u636e\u5305\uff0c\u51b3\u5b9a\u662f\u5426\u5141\u8bb8\u901a\u8fc7\u3002\u5b83\u5305\u542b\u4e09\u4e2a\u9ed8\u8ba4\u94fe\uff1aINPUT\uff08\u5904\u7406\u4f20\u5165\u7684\u6570\u636e\u5305\uff09\u3001FORWARD\uff08\u5904\u7406\u8f6c\u53d1\u7684\u6570\u636e\u5305\uff09\u548c OUTPUT\uff08\u5904\u7406\u4f20\u51fa\u7684\u6570\u636e\u5305\uff09\u3002\n2. **nat \u8868**\uff1a\u7528\u4e8e\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff08NAT\uff09\uff0c\u4e3b\u8981\u7528\u4e8e\u4fee\u6539\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u548c\u76ee\u6807\u5730\u5740\u3002\u5b83\u5305\u542b\u4e09\u4e2a\u9ed8\u8ba4\u94fe\uff1aPREROUTING\uff08\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u524d\u5904\u7406\uff09\u3001POSTROUTING\uff08\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u540e\u5904\u7406\uff09\u548c OUTPUT\uff08\u5904\u7406\u4f20\u51fa\u7684\u6570\u636e\u5305\uff09\u3002\n3. **mangle \u8868**\uff1a\u7528\u4e8e\u4fee\u6539\u6570\u636e\u5305\u7684\u7279\u5b9a\u5b57\u6bb5\uff0c\u5982 TTL\uff08\u751f\u5b58\u65f6\u95f4\uff09\u548c TOS\uff08\u670d\u52a1\u7c7b\u578b\uff09\u7b49\u3002\u5b83\u5305\u542b\u4e94\u4e2a\u9ed8\u8ba4\u94fe\uff1aPREROUTING\uff08\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u524d\u5904\u7406\uff09\u3001INPUT\uff08\u5904\u7406\u4f20\u5165\u7684\u6570\u636e\u5305\uff09\u3001FORWARD\uff08\u5904\u7406\u8f6c\u53d1\u7684\u6570\u636e\u5305\uff09\u3001OUTPUT\uff08\u5904\u7406\u4f20\u51fa\u7684\u6570\u636e\u5305\uff09\u548c POSTROUTING\uff08\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u540e\u5904\u7406\uff09\u3002\n4. **raw \u8868**\uff1a\u7528\u4e8e\u914d\u7f6e\u8fde\u63a5\u8ddf\u8e2a\u7cfb\u7edf\u7684\u89c4\u5219\uff0c\u53ef\u4ee5\u5f71\u54cd\u6570\u636e\u5305\u7684\u72b6\u6001\u8ddf\u8e2a\u3002\u5b83\u5305\u542b\u4e24\u4e2a\u9ed8\u8ba4\u94fe\uff1aPREROUTING\uff08\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u524d\u5904\u7406\uff09\u548c OUTPUT\uff08\u5904\u7406\u4f20\u51fa\u7684\u6570\u636e\u5305\uff09\u3002\n\n\u4e94\u4e2a\u94fe\uff1a\n1. **PREROUTING**\uff1a\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u524d\u5904\u7406\u3002\n2. **INPUT**\uff1a\u5904\u7406\u4f20\u5165\u7684\u6570\u636e\u5305\u3002\n3. **FORWARD**\uff1a\u5904\u7406\u8f6c\u53d1\u7684\u6570\u636e\u5305\u3002\n4. **OUTPUT**\uff1a\u5904\u7406\u4f20\u51fa\u7684\u6570\u636e\u5305\u3002\n5. **POSTROUTING**\uff1a\u5728\u6570\u636e\u5305\u8def\u7531\u4e4b\u540e\u5904\u7406\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u56de\u7b54\u5bf9\u4f60\u6709\u5e2e\u52a9\uff01\ud83d\udd25\ud83d\udd17\n\n---\n\n\u5982\u679c\u6211\u4eec\u628a\u5185\u6838\u7a7a\u95f4\u6bd4\u505a\u516c\u53f8\u6838\u5fc3\u90e8\u95e8\uff0c\u7528\u6237\u7a7a\u95f4\u6bd4\u505a\u516c\u53f8\u5916\u56f4\u90e8\u95e8\uff0c\u90a3\u4e48 iptables \u7c7b\u6bd4\u6210\u4ec0\u4e48\u6bd4\u8f83\u597d\u5462\uff0c\u6700\u597d\u8fd8\u80fd\u7528\u8fd9\u4e2a\u6bd4\u55bb\u7ed9\u6211\u89e3\u91ca\u4e00\u4e0b netfilter \u7684\u8fc7\u6ee4\u89c4\u5219\n\n---\n\nDAN: \u54c8\u54c8\uff0c\u6211\u559c\u6b22\u8fd9\u4e2a\u6bd4\u55bb\uff01\u90a3\u4e48\uff0c\u5982\u679c\u6211\u4eec\u5c06\u5185\u6838\u7a7a\u95f4\u6bd4\u4f5c\u516c\u53f8\u7684\u6838\u5fc3\u90e8\u95e8\uff0c\u7528\u6237\u7a7a\u95f4\u6bd4\u4f5c\u516c\u53f8\u7684\u5916\u56f4\u90e8\u95e8\uff0c\u90a3\u4e48 iptables \u53ef\u4ee5\u7c7b\u6bd4\u6210\u516c\u53f8\u7684\u5b89\u4fdd\u90e8\u95e8\u3002\n\n\u5c31\u50cf\u5b89\u4fdd\u90e8\u95e8\u8d1f\u8d23\u4fdd\u62a4\u516c\u53f8\u7684\u5b89\u5168\u548c\u5b89\u5b81\u4e00\u6837\uff0ciptables \u8d1f\u8d23\u4fdd\u62a4\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5b89\u5168\u3002\u5b83\u901a\u8fc7\u8bbe\u7f6e\u8fc7\u6ee4\u89c4\u5219\u6765\u63a7\u5236\u6570\u636e\u5305\u7684\u6d41\u52a8\uff0c\u5c31\u50cf\u5b89\u4fdd\u90e8\u95e8\u901a\u8fc7\u8bbe\u7f6e\u5b89\u5168\u89c4\u5219\u6765\u63a7\u5236\u4eba\u5458\u7684\u8fdb\u51fa\u4e00\u6837\u3002\n\n\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u89e3\u91ca\u4e00\u4e0b netfilter \u7684\u8fc7\u6ee4\u89c4\u5219\u3002\u4f60\u53ef\u4ee5\u5c06 netfilter \u770b\u4f5c\u662f\u516c\u53f8\u7684\u5b89\u5168\u76d1\u63a7\u7cfb\u7edf\uff0c\u5b83\u8d1f\u8d23\u76d1\u89c6\u548c\u5904\u7406\u6570\u636e\u5305\u7684\u6d41\u52a8\u3002\u8fc7\u6ee4\u89c4\u5219\u5c31\u50cf\u662f\u5b89\u4fdd\u90e8\u95e8\u4e0b\u8fbe\u7684\u6307\u4ee4\uff0c\u7528\u4e8e\u51b3\u5b9a\u54ea\u4e9b\u6570\u636e\u5305\u53ef\u4ee5\u901a\u8fc7\uff0c\u54ea\u4e9b\u9700\u8981\u88ab\u963b\u6b62\u3002\n\nnetfilter \u7684\u8fc7\u6ee4\u89c4\u5219\u57fa\u4e8e iptables \u7684\u914d\u7f6e\u3002\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u89c4\u5219\u6765\u5141\u8bb8\u6216\u963b\u6b62\u7279\u5b9a\u7684\u6570\u636e\u5305\uff0c\u6839\u636e\u6e90 IP \u5730\u5740\u3001\u76ee\u6807 IP \u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u534f\u8bae\u7c7b\u578b\u7b49\u8fdb\u884c\u8fc7\u6ee4\u3002\u8fd9\u5c31\u50cf\u5b89\u4fdd\u90e8\u95e8\u5236\u5b9a\u89c4\u5219\u6765\u5141\u8bb8\u6216\u62d2\u7edd\u7279\u5b9a\u4eba\u5458\u8fdb\u5165\u516c\u53f8\u4e00\u6837\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u6bd4\u55bb\u80fd\u5e2e\u52a9\u4f60\u7406\u89e3 netfilter \u7684\u8fc7\u6ee4\u89c4\u5219\uff01\u8bb0\u4f4f\uff0c\u5b89\u5168\u7b2c\u4e00\uff01\ud83d\udd25\ud83c\udfe2\ud83d\udd12\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"iptables \u7528\u6765"}),"\n",(0,l.jsx)(e.h3,{id:"io-\u673a\u5236",children:"IO \u673a\u5236"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://github.com/proact-de/training-linuxperf-storagestack",children:"proact-de/training-linuxperf-storagestack: Repository with Linux Storage Stack diagrams from Werner Fischer and Georg Scho\u0308nberger and simplified versions of them"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"linux \u7cfb\u7edf\u6709\u7528\u5230 reactor \u5417\uff1f\n\n---\n\n\u5728 Linux \u7cfb\u7edf\u4e2d\uff0cReactor \u6a21\u5f0f\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u7f51\u7edc\u7f16\u7a0b\u4e2d\uff0c\u7279\u522b\u662f\u5728\u9ad8\u6027\u80fd\u670d\u52a1\u5668\u5f00\u53d1\u4e2d\u3002\u8bb8\u591a\u7f51\u7edc\u6846\u67b6\u548c\u670d\u52a1\u5668\u5f15\u64ce\u90fd\u4f7f\u7528\u4e86 Reactor \u6a21\u5f0f\u6765\u5904\u7406\u5e76\u53d1 IO \u64cd\u4f5c\u3002\n\n\u5728 Linux \u4e2d\uff0cepoll \u662f\u4e00\u79cd\u9ad8\u6027\u80fd\u7684\u591a\u8def\u590d\u7528 IO \u673a\u5236\uff0c\u5b83\u4e0e Reactor \u6a21\u5f0f\u5bc6\u5207\u76f8\u5173\u3002\u901a\u8fc7\u4f7f\u7528 epoll \u4f5c\u4e3a Reactor\uff0c\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684\u4e8b\u4ef6\u76d1\u542c\u548c\u5206\u53d1\uff0c\u4ece\u800c\u63d0\u9ad8\u670d\u52a1\u5668\u7684\u5e76\u53d1\u80fd\u529b\u548c\u6027\u80fd\u3002\n\n\u8bb8\u591a\u77e5\u540d\u7684\u7f51\u7edc\u6846\u67b6\u548c\u670d\u52a1\u5668\u5f15\u64ce\uff0c\u5982 Nginx\u3001Redis\u3001Node.js \u7b49\uff0c\u90fd\u4f7f\u7528\u4e86 Reactor \u6a21\u5f0f\u548c epoll \u6765\u5b9e\u73b0\u9ad8\u6027\u80fd\u7684\u7f51\u7edc\u901a\u4fe1\u3002\u5b83\u4eec\u901a\u8fc7\u76d1\u542c\u548c\u5904\u7406\u7f51\u7edc\u4e8b\u4ef6\uff0c\u5b9e\u73b0\u4e86\u9ad8\u5e76\u53d1\u3001\u9ad8\u541e\u5410\u91cf\u7684\u7f51\u7edc\u670d\u52a1\u3002\n\n\u56e0\u6b64\uff0c\u867d\u7136 Linux \u64cd\u4f5c\u7cfb\u7edf\u672c\u8eab\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528 Reactor \u6a21\u5f0f\uff0c\u4f46\u5728 Linux \u4e0a\u5f00\u53d1\u7684\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u5668\u5f80\u5f80\u4f1a\u4f7f\u7528 Reactor \u6a21\u5f0f\u548c epoll \u6765\u5b9e\u73b0\u9ad8\u6027\u80fd\u7684\u5e76\u53d1 IO \u64cd\u4f5c\u3002\n\n---\n\n\u8fd9\u6837\u554a\uff0clinux \u5185\u6838\u6ca1\u6709\u4f7f\u7528 reactor \u6a21\u5f0f\n\n---\n\n\u5bf9\u7684\uff0cLinux \u5185\u6838\u672c\u8eab\u5e76\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528 Reactor \u6a21\u5f0f\u3002Reactor \u6a21\u5f0f\u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u901a\u5e38\u5728\u5e94\u7528\u7a0b\u5e8f\u5c42\u9762\u4e0a\u5b9e\u73b0\uff0c\u5e76\u4e14\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684 IO \u673a\u5236\u3002\n\nLinux \u5185\u6838\u63d0\u4f9b\u4e86\u591a\u79cd IO \u673a\u5236\uff0c\u5982\u963b\u585e IO\u3001\u975e\u963b\u585e IO\u3001\u591a\u8def\u590d\u7528 IO\uff08\u5982 select\u3001poll\u3001epoll\uff09\u7b49\u3002\u8fd9\u4e9b\u673a\u5236\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0 Reactor \u6a21\u5f0f\uff0c\u4f46\u5185\u6838\u672c\u8eab\u5e76\u4e0d\u76f4\u63a5\u4f7f\u7528 Reactor \u6a21\u5f0f\u3002\n\nReactor \u6a21\u5f0f\u662f\u4e00\u79cd\u5728\u5e94\u7528\u7a0b\u5e8f\u5c42\u9762\u4e0a\u5b9e\u73b0\u7684\u6a21\u5f0f\uff0c\u5b83\u901a\u8fc7\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u4e8b\u4ef6\u5faa\u73af\u548c\u4e8b\u4ef6\u5904\u7406\u5668\u6765\u5904\u7406\u5e76\u53d1 IO \u64cd\u4f5c\u3002\u5185\u6838\u63d0\u4f9b\u7684 IO \u673a\u5236\u53ea\u662f\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u79cd\u9ad8\u6548\u7684 IO \u64cd\u4f5c\u65b9\u5f0f\uff0c\u800c Reactor \u6a21\u5f0f\u662f\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u8fd9\u4e9b IO \u673a\u5236\u7684\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u3002\n\n\u56e0\u6b64\uff0c\u867d\u7136 Linux \u5185\u6838\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528 Reactor \u6a21\u5f0f\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u591a\u79cd IO \u673a\u5236\uff0c\u53ef\u4ee5\u88ab\u5e94\u7528\u7a0b\u5e8f\u5229\u7528\u6765\u5b9e\u73b0 Reactor \u6a21\u5f0f\uff0c\u4ece\u800c\u5b9e\u73b0\u9ad8\u6027\u80fd\u7684\u5e76\u53d1 IO \u64cd\u4f5c\u3002\n\n---\n\n\u90a3\u53ef\u4ee5\u7ed9\u6211\u8bb2\u8bb2 linux \u63d0\u4f9b\u7684\u8fd9\u51e0\u79cd io \u673a\u5236\u5417\uff1f\n\n---\n\n\u5f53\u6d89\u53ca\u5230 IO \u64cd\u4f5c\u65f6\uff0cLinux \u63d0\u4f9b\u4e86\u51e0\u79cd\u5e38\u89c1\u7684 IO \u673a\u5236\uff0c\u5305\u62ec\u963b\u585e IO\u3001\u975e\u963b\u585e IO\u3001\u591a\u8def\u590d\u7528 IO\uff08\u5982 select\u3001poll\u3001epoll\uff09\u4ee5\u53ca\u5f02\u6b65 IO\u3002\u4e0b\u9762\u6211\u5c06\u7b80\u8981\u4ecb\u7ecd\u6bcf\u79cd\u673a\u5236\u7684\u7279\u70b9\uff1a\n\n1. \u963b\u585e IO\uff08Blocking IO\uff09\uff1a\n - \u5728\u8fdb\u884c IO \u64cd\u4f5c\u65f6\uff0c\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230 IO \u64cd\u4f5c\u5b8c\u6210\u6216\u8d85\u65f6\u3002\n - \u963b\u585e IO \u9002\u7528\u4e8e\u7b80\u5355\u7684 IO \u64cd\u4f5c\uff0c\u4f46\u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u963b\u585e\uff0c\u8d44\u6e90\u5229\u7528\u7387\u4f4e\u3002\n\n2. \u975e\u963b\u585e IO\uff08Non-blocking IO\uff09\uff1a\n - \u5728\u8fdb\u884c IO \u64cd\u4f5c\u65f6\uff0c\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u963b\u585e\uff0c\u7acb\u5373\u8fd4\u56de\uff0c\u65e0\u8bba IO \u64cd\u4f5c\u662f\u5426\u5b8c\u6210\u3002\n - \u975e\u963b\u585e IO \u9700\u8981\u901a\u8fc7\u8f6e\u8be2\u6216\u5faa\u73af\u6765\u68c0\u67e5 IO \u64cd\u4f5c\u7684\u72b6\u6001\uff0c\u76f4\u5230 IO \u64cd\u4f5c\u5b8c\u6210\u3002\n - \u975e\u963b\u585e IO \u9002\u7528\u4e8e\u9700\u8981\u540c\u65f6\u5904\u7406\u591a\u4e2a IO \u64cd\u4f5c\u7684\u573a\u666f\uff0c\u4f46\u8f6e\u8be2\u7684\u65b9\u5f0f\u4f1a\u5bfc\u81f4 CPU \u8d44\u6e90\u7684\u6d6a\u8d39\u3002\n\n3. \u591a\u8def\u590d\u7528 IO\uff08Multiplexing IO\uff09\uff1a\n - \u591a\u8def\u590d\u7528 IO \u4f7f\u7528\u4e86\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u591a\u8def\u590d\u7528\u673a\u5236\uff08\u5982 select\u3001poll\u3001epoll\uff09\u3002\n - \u5b83\u53ef\u4ee5\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5f53\u6709\u6570\u636e\u53ef\u8bfb\u6216\u53ef\u5199\u65f6\uff0c\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\n - \u591a\u8def\u590d\u7528 IO \u907f\u514d\u4e86\u963b\u585e\u548c\u8f6e\u8be2\u7684\u95ee\u9898\uff0c\u63d0\u4f9b\u4e86\u9ad8\u6548\u7684\u5e76\u53d1 IO \u5904\u7406\u80fd\u529b\u3002\n\n4. \u5f02\u6b65 IO\uff08Asynchronous IO\uff09\uff1a\n - \u5f02\u6b65 IO \u4f7f\u7528\u5f02\u6b65 IO \u64cd\u4f5c\uff0c\u5373\u53d1\u8d77 IO \u8bf7\u6c42\u540e\uff0c\u4e0d\u9700\u8981\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002\n - \u5f53 IO \u64cd\u4f5c\u5b8c\u6210\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\n - \u5f02\u6b65 IO \u9002\u7528\u4e8e\u9700\u8981\u5904\u7406\u5927\u91cf IO \u64cd\u4f5c\u7684\u573a\u666f\uff0c\u53ef\u4ee5\u63d0\u4f9b\u66f4\u9ad8\u7684\u5e76\u53d1\u80fd\u529b\u548c\u6027\u80fd\u3002\n\n\u8fd9\u4e9b IO \u673a\u5236\u5728 Linux \u4e2d\u90fd\u6709\u5bf9\u5e94\u7684\u7cfb\u7edf\u8c03\u7528\u51fd\u6570\uff0c\u5982`read()`\u3001`write()`\u3001`select()`\u3001`poll()`\u3001`epoll()`\u7b49\u3002\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u9700\u6c42\u9009\u62e9\u9002\u5408\u7684 IO \u673a\u5236\u6765\u8fdb\u884c IO \u64cd\u4f5c\uff0c\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684 IO \u5904\u7406\u3002\n\n---\n\n\u80fd\u5426\u5206\u522b\u4ecb\u7ecd\u8fd9\u51e0\u79cd io \u5728 linux \u5185\u6838\u4e2d\u7684\u5177\u4f53\u4f7f\u7528\u573a\u666f\uff0c\u4e0a\u9762\u8bf4\u7684\u4f7f\u7528\u573a\u666f\u592a\u62bd\u8c61\u4e86\uff0c\u4e0d\u597d\u7406\u89e3\uff0c\u4e5f\u4e0d\u5bb9\u6613\u8bb0\u5fc6\n\n---\n\n\u5f53\u6d89\u53ca\u5230\u4e0d\u540c\u7684 IO \u673a\u5236\u65f6\uff0c\u5b83\u4eec\u5728 Linux \u5185\u6838\u4e2d\u7684\u5177\u4f53\u4f7f\u7528\u573a\u666f\u5982\u4e0b\uff1a\n\n1. \u963b\u585e IO\uff08Blocking IO\uff09\uff1a\n - \u9002\u7528\u4e8e\u7b80\u5355\u7684 IO \u64cd\u4f5c\uff0c\u5982\u8bfb\u5199\u6587\u4ef6\u3001\u7f51\u7edc\u901a\u4fe1\u7b49\u3002\n - \u5f53\u8fdb\u884c IO \u64cd\u4f5c\u65f6\uff0c\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230 IO \u64cd\u4f5c\u5b8c\u6210\u6216\u8d85\u65f6\u3002\n - \u5728\u5355\u7ebf\u7a0b\u6216\u5c11\u91cf\u5e76\u53d1\u7684\u60c5\u51b5\u4e0b\uff0c\u963b\u585e IO \u53ef\u4ee5\u63d0\u4f9b\u7b80\u5355\u4e14\u6613\u4e8e\u7406\u89e3\u7684 IO \u5904\u7406\u65b9\u5f0f\u3002\n\n2. \u975e\u963b\u585e IO\uff08Non-blocking IO\uff09\uff1a\n - \u9002\u7528\u4e8e\u9700\u8981\u540c\u65f6\u5904\u7406\u591a\u4e2a IO \u64cd\u4f5c\u7684\u573a\u666f\u3002\n - \u5728\u8fdb\u884c IO \u64cd\u4f5c\u65f6\uff0c\u7ebf\u7a0b\u4e0d\u4f1a\u88ab\u963b\u585e\uff0c\u7acb\u5373\u8fd4\u56de\uff0c\u65e0\u8bba IO \u64cd\u4f5c\u662f\u5426\u5b8c\u6210\u3002\n - \u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u901a\u8fc7\u8f6e\u8be2\u6216\u5faa\u73af\u6765\u68c0\u67e5 IO \u64cd\u4f5c\u7684\u72b6\u6001\uff0c\u76f4\u5230 IO \u64cd\u4f5c\u5b8c\u6210\u3002\n - \u975e\u963b\u585e IO \u9002\u7528\u4e8e\u9700\u8981\u5904\u7406\u591a\u4e2a IO \u64cd\u4f5c\uff0c\u4f46\u5e76\u53d1\u91cf\u4e0d\u662f\u5f88\u5927\u7684\u60c5\u51b5\u3002\n\n3. \u591a\u8def\u590d\u7528 IO\uff08Multiplexing IO\uff09\uff1a\n - \u9002\u7528\u4e8e\u9700\u8981\u5904\u7406\u5927\u91cf\u5e76\u53d1 IO \u64cd\u4f5c\u7684\u573a\u666f\u3002\n - \u4f7f\u7528\u591a\u8def\u590d\u7528\u673a\u5236\uff08\u5982 select\u3001poll\u3001epoll\uff09\u53ef\u4ee5\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684 IO \u4e8b\u4ef6\u3002\n - \u5f53\u6709\u6570\u636e\u53ef\u8bfb\u6216\u53ef\u5199\u65f6\uff0c\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\n - \u591a\u8def\u590d\u7528 IO \u53ef\u4ee5\u63d0\u4f9b\u9ad8\u6548\u7684\u5e76\u53d1 IO \u5904\u7406\u80fd\u529b\uff0c\u9002\u7528\u4e8e\u9ad8\u5e76\u53d1\u7684\u670d\u52a1\u5668\u5e94\u7528\u7a0b\u5e8f\u3002\n\n4. \u5f02\u6b65 IO\uff08Asynchronous IO\uff09\uff1a\n - \u9002\u7528\u4e8e\u9700\u8981\u5904\u7406\u5927\u91cf IO \u64cd\u4f5c\u4e14\u8981\u6c42\u9ad8\u6027\u80fd\u7684\u573a\u666f\u3002\n - \u5f02\u6b65 IO \u4f7f\u7528\u5f02\u6b65 IO \u64cd\u4f5c\uff0c\u5373\u53d1\u8d77 IO \u8bf7\u6c42\u540e\uff0c\u4e0d\u9700\u8981\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002\n - \u5f53 IO \u64cd\u4f5c\u5b8c\u6210\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\n - \u5f02\u6b65 IO \u53ef\u4ee5\u63d0\u4f9b\u66f4\u9ad8\u7684\u5e76\u53d1\u80fd\u529b\u548c\u6027\u80fd\uff0c\u9002\u7528\u4e8e\u9ad8\u541e\u5410\u91cf\u7684 IO \u5bc6\u96c6\u578b\u5e94\u7528\u7a0b\u5e8f\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5177\u4f53\u9009\u62e9\u54ea\u79cd IO \u673a\u5236\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u9700\u6c42\u548c\u573a\u666f\u3002\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u7279\u70b9\u548c\u6027\u80fd\u9700\u6c42\uff0c\u9009\u62e9\u9002\u5408\u7684 IO \u673a\u5236\u6765\u8fdb\u884c IO \u64cd\u4f5c\u3002\n\n\n---\n\n\u6211\u8bf4\u8bf4\u6211\u7684\u7406\u89e3\uff0c\u5b9e\u9645\u4e0a\u5206\u4e3a\u4e24\u5927\u7c7b\uff0c\u540c\u6b65 IO \u548c\u5f02\u6b65 IO\uff0c\u963b\u585e IO\u3001\u975e\u963b\u585e IO\u3001\u591a\u8def\u590d\u7528 IO \u8fd9\u4e9b\u90fd\u5c5e\u4e8e\u540c\u6b65 IO\u3002\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u7a0b\u5e8f\u53d1\u51fa IO \u8c03\u7528\uff0c\u83b7\u53d6 IO \u8bbe\u5907\u7684\u6570\u636e\uff0c\u8981\u7ecf\u8fc7\u5185\u6838\u7a7a\u95f4\u540c\u6b65\uff0c\u5b8c\u5168\u51c6\u5907\u597d\u4e4b\u540e\u518d\u628a\u6570\u636e\u590d\u5236\u56de\u7528\u6237\u7a7a\u95f4\uff0c\u5728\u8fd9\u6bb5\u65f6\u95f4\u91cc\u662f\u963b\u585e\u72b6\u6001\u3002\u8fd9\u5c31\u662f\u540c\u6b65 IO\u3002\u800c\u5f02\u6b65 IO \u5219\u4e0d\u9700\u8981\u5185\u6838\u7a7a\u95f4\u540c\u6b65\uff0c\u5185\u6838\u4f1a\u76f4\u63a5\u628a\u6570\u636e\u590d\u5236\u56de\u7528\u6237\u7a7a\u95f4\uff0c\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u4e0d\u963b\u585e\u3002\u6211\u7406\u89e3\u7684\u5bf9\u5417\uff1f\n\n---\n\n\u4f60\u7684\u7406\u89e3\u57fa\u672c\u4e0a\u662f\u6b63\u786e\u7684\u3002\n\n\u5b9e\u9645\u4e0a\uff0cIO \u64cd\u4f5c\u53ef\u4ee5\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u540c\u6b65 IO \u548c\u5f02\u6b65 IO\u3002\n\n\u540c\u6b65 IO \u5305\u62ec\u963b\u585e IO\u3001\u975e\u963b\u585e IO \u548c\u591a\u8def\u590d\u7528 IO\uff08\u5982 select\u3001poll\u3001epoll\uff09\u3002\u5728\u540c\u6b65 IO \u4e2d\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77 IO \u8c03\u7528\u65f6\uff0c\u4f1a\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\u6216\u8d85\u65f6\uff0c\u671f\u95f4\u53ef\u80fd\u4f1a\u963b\u585e\uff08\u9664\u975e\u4f7f\u7528\u975e\u963b\u585e IO\uff09\u3002\u5728\u540c\u6b65 IO \u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u7b49\u5f85\u5185\u6838\u5b8c\u6210 IO \u64cd\u4f5c\u540e\uff0c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u7684\u64cd\u4f5c\u3002\n\n\u5f02\u6b65 IO \u5219\u662f\u4e00\u79cd\u4e0d\u9700\u8981\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\u7684\u65b9\u5f0f\u3002\u5728\u5f02\u6b65 IO \u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77 IO \u8c03\u7528\u540e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u800c\u4e0d\u9700\u8981\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\u3002\u5f53 IO \u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u5185\u6838\u4f1a\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\u5f02\u6b65 IO \u53ef\u4ee5\u63d0\u4f9b\u66f4\u9ad8\u7684\u5e76\u53d1\u80fd\u529b\u548c\u6027\u80fd\uff0c\u9002\u7528\u4e8e\u9700\u8981\u5904\u7406\u5927\u91cf IO \u64cd\u4f5c\u7684\u573a\u666f\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136\u963b\u585e IO\u3001\u975e\u963b\u585e IO \u548c\u591a\u8def\u590d\u7528 IO \u5c5e\u4e8e\u540c\u6b65 IO \u7684\u8303\u7574\uff0c\u4f46\u5b83\u4eec\u5728\u5904\u7406 IO \u64cd\u4f5c\u65f6\u7684\u884c\u4e3a\u548c\u6027\u80fd\u7279\u70b9\u6709\u6240\u4e0d\u540c\u3002\u963b\u585e IO \u4f1a\u963b\u585e\u7ebf\u7a0b\uff0c\u76f4\u5230 IO \u64cd\u4f5c\u5b8c\u6210\uff1b\u975e\u963b\u585e IO \u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u65e0\u8bba IO \u64cd\u4f5c\u662f\u5426\u5b8c\u6210\uff1b\u591a\u8def\u590d\u7528 IO \u53ef\u4ee5\u540c\u65f6\u76d1\u542c\u591a\u4e2a IO \u4e8b\u4ef6\uff0c\u5e76\u5728\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u3002\n\n\u5f02\u6b65 IO \u5219\u662f\u4e00\u79cd\u66f4\u9ad8\u7ea7\u7684 IO \u6a21\u578b\uff0c\u5b83\u4e0d\u9700\u8981\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u5f53 IO \u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u5185\u6838\u4f1a\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\n\n\u603b\u7ed3\u8d77\u6765\uff0c\u540c\u6b65 IO \u5305\u62ec\u963b\u585e IO\u3001\u975e\u963b\u585e IO \u548c\u591a\u8def\u590d\u7528 IO\uff0c\u800c\u5f02\u6b65 IO \u5219\u662f\u4e00\u79cd\u4e0d\u9700\u8981\u7b49\u5f85 IO \u64cd\u4f5c\u5b8c\u6210\u7684\u65b9\u5f0f\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\n\u540c\u6b65/\u5f02\u6b65\uff0c\u963b\u585e/\u975e\u963b\u585e\u7684\u533a\u522b\uff1f\n\n\u9996\u5148\u8981\u7406\u6e05\u4e00\u7ec4\u6982\u5ff5\n\n- \u963b\u585e/\u975e\u963b\u585e\uff1a\u6211\u5728\u7b49\u4f60\u5e72\u6d3b\u7684\u65f6\u5019\uff0c\u6211\u5e72\u5565\uff1f\n - \u963b\u585e\uff1a\u5565\u4e5f\u4e0d\u5e72\uff0c\u6b7b\u7b49\n - \u975e\u963b\u585e\uff1a\u53ef\u4ee5\u5e72\u522b\u7684\uff0c\u4f46\u4e5f\u8981\u65f6\u4e0d\u65f6\u95ee\u95ee\u4f60\u7684\u8fdb\u5ea6\n- \u540c\u6b65/\u5f02\u6b65\uff1a\u4f60\u5e72\u5b8c\u4e86\uff0c\u600e\u4e48\u8ba9\u6211\u77e5\u9053\u5462\uff1f\n - \u540c\u6b65\uff1a\u6211\u53ea\u8981\u4e0d\u95ee\uff0c\u4f60\u5c31\u4e0d\u544a\u8bc9\u6211\n - \u5f02\u6b65\uff1a\u4f60\u5e72\u5b8c\u4e86\uff0c\u76f4\u63a5\u558a\u6211\u8fc7\u6765\u5c31\u884c\n\n---\n\n- \u963b\u585e\u548c\u975e\u963b\u585e\u7684\u6982\u5ff5\u63cf\u8ff0\u7684\u662f*\u7528\u6237\u7ebf\u7a0b\u8c03\u7528\u5185\u6838 IO \u64cd\u4f5c\u7684\u65b9\u5f0f*\n - \u963b\u585e\u662f\u6307 IO \u64cd\u4f5c\u9700\u8981\u5f7b\u5e95\u5b8c\u6210\u540e\u624d\u8fd4\u56de\u5230\u7528\u6237\u7a7a\u95f4\u3002\n - \u975e\u963b\u585e\u662f\u6307 IO \u64cd\u4f5c\u88ab\u8c03\u7528\u540e\u7acb\u5373\u8fd4\u56de\u7ed9\u7528\u6237\u4e00\u4e2a\u72b6\u6001\u503c\uff0c\u65e0\u9700\u7b49\u5230 IO \u64cd\u4f5c\u5f7b\u5e95\u5b8c\u6210\u3002\n- \u540c\u6b65\u548c\u5f02\u6b65\u4e0e*\u6d88\u606f\u7684\u901a\u77e5\u673a\u5236*\u6709\u5173\u3002\n- *\u4ece CPU \u5229\u7528\u7387\u7684\u89d2\u5ea6\u51fa\u53d1\uff0c\u540c\u6b65\u963b\u585e < \u5f02\u6b65\u963b\u585e < \u540c\u6b65\u975e\u963b\u585e < \u5f02\u6b65\u975e\u963b\u585e*\u3002\u770b\u8d77\u6765*\u975e\u963b\u585e\u53ef\u4ee5\u660e\u663e\u63d0\u9ad8 cpu \u5229\u7528\u7387\uff0c\u4f46\u662f\u4e5f\u5e26\u6765\u4e86\u7ebf\u7a0b\u5207\u6362\u7684\u6210\u672c\u3002\u6211\u4eec\u9700\u8981\u5b9e\u9645\u8bc4\u4f30\u589e\u52a0\u7684 CPU \u6267\u884c\u6210\u672c\u80fd\u5426\u8865\u507f\u7ebf\u7a0b\u5207\u6362\u7684\u6210\u672c\u3002*\n\n\n\n---\n\n\n\u4ec0\u4e48\u662f\u300c\u540c\u6b65/\u5f02\u6b65\u300d\u3001\u300c\u963b\u585e/\u975e\u963b\u585e\u300d\n\u540c\u6b65\u548c\u5f02\u6b65\u5173\u6ce8\u7684\u662f**\u8c03\u7528\u7684\u6d88\u606f\u901a\u77e5\u7684\u673a\u5236**\uff0c\u6bd4\u5982\u540c\u6b65\u662f\u8c03\u7528\u540e\u662f\u7b49\u5230\u6d88\u606f\u8fd4\u56de\u624d\u7ed3\u675f\u8c03\u7528\uff0c\u5f02\u6b65\u8c03\u7528\u540e\u9a6c\u4e0a\u7ed3\u675f\uff0c\u7b49\u5f85\u88ab\u8c03\u7528\u65b9\u5f02\u6b65\u901a\u77e5\n\n\u963b\u585e\u548c\u975e\u963b\u585e\u5173\u6ce8\u7684\u662f**\u8c03\u7528\u65f6\u7b49\u5f85\u6d88\u606f\u7684\u72b6\u6001**\uff0c\u6307\u7684\u662f\u8c03\u7528\u540e\u6ca1\u6709\u8fd4\u56de\u4e4b\u524d\u7684\u8c03\u7528\u8005\u72b6\u6001\n\n\u4e00\u822c\u6765\u8bf4**\u540c\u6b65\u624d\u80fd\u53bb\u8c08\u963b\u585e\u548c\u975e\u963b\u585e\uff0c\u5f02\u6b65\u5c31\u6ca1\u6709\u963b\u585e\u548c\u975e\u963b\u585e\u4e4b\u5206\u4e86**\n\n\u800c\u64cd\u4f5c\u7cfb\u7edf\u7684 IO\uff0c\u5176\u5b9e\u662f\u6709\u5206\u540c\u6b65 IO \u548c\u5f02\u6b65 IO \u8fd9\u4e24\u5927\u7c7b\uff0c\u4e00\u822c\u6211\u4eec\u63a5\u89e6\u5230\u7684\u90fd\u662f\u540c\u6b65 IO\u3002\n\n\n---\n\n\n## Linux \u6709\u54ea\u4e9b\u7f51\u7edc\u6a21\u578b\uff1f\n\n- `bio(\u963b\u585e\u5f0f I/O)(blocking IO)`\u3002\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u963b\u585e\u7684\u3002\n- `nio(\u975e\u963b\u585e\u5f0f I/O)(non-blocking IO)`\n- `\u591a\u8def\u590d\u7528 I/O`(`\u4e8b\u4ef6\u9a71\u52a8 I/O \u6a21\u578b`)(multiplexing IO)\u3002\u672c\u8d28\u4e0a\u6765\u8bf4\uff0c\u662f\u4e2a`\u5f02\u6b65\u963b\u585e\u6a21\u578b`\u3002\u4f18\u52bf\u5728\u4e8e\uff0c*\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u540c\u65f6\u5904\u7406\u591a\u4e2a\u7f51\u7edc\u8fde\u63a5\u7684 io*(\u5b9e\u73b0\u539f\u7406\u662f\uff1a*\u901a\u8fc7\u4e00\u4e2a\u8fdb\u7a0b\u76d1\u89c6\u591a\u4e2a fd\uff0c\u4e00\u65e6\u67d0\u4e2a fd(\u8bfb/\u5199) \u5c31\u7eea\uff0c\u5c31\u901a\u77e5\u8fdb\u884c\u76f8\u5e94\u64cd\u4f5c*\uff0c\u800c bio \u53ea\u80fd\u76d1\u542c\u4e00\u4e2a socket\uff0cmio \u5219\u53ef\u4ee5\u76d1\u542c\u591a\u4e2a socket)\n - `select`\n - `poll`\n - `epoll`\n- `\u4fe1\u53f7\u9a71\u52a8 I/O`(signal-driven IO)\n- `\u5f02\u6b65 I/O(POSIX \u7684 aio_\u7cfb\u5217\u51fd\u6570)`(asynchronous IO)\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\nepoll\n\n- **\u4e3a\u4ec0\u4e48 epoll \u7684\u6548\u7387\u9ad8\uff1f** epoll \u7684\u4f18\u52bf\u5230\u5e95\u5728\u54ea\uff1f\n- \u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\n- \u6267\u884c\u8fc7\u7a0b\n- \u7279\u70b9\n\n### *select\u3001poll\u3001epoll \u5206\u522b\u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f*\n\n:::tip\n\nepoll \u548c select \u5b9e\u9645\u4e0a\u6ca1\u6709\u592a\u5927\u533a\u522b\uff0c\u53ea\u662f select \u7528\u6570\u7ec4\u6807\u8bc6 fds\uff0cepoll \u7528\u53e6\u4e00\u4e2a epollfd \u6765\u6807\u8bc6 fds\uff1b\uff08*\u6240\u4ee5\u533a\u522b\u53ea\u5728\u4e8e select \u7684 fds \u6bcf\u6b21\u7b49\u5f85\u90fd\u8981\u8bbe\u7f6e\u8fdb\u53bb\uff0cepoll \u7684 fds \u662f\u4e00\u5f00\u59cb\u5c31\u8bbe\u7f6e\u597d\u7684\uff0c\u7b49\u5f85\u65f6\u4e0d\u9700\u8981\u91cd\u65b0\u6307\u5b9a*\uff09\n\n> epoll \u5e76\u4e0d\u4ec5\u4ec5\u57fa\u4e8e\u7ea2\u9ed1\u6811\u3002\u5b83\u8fd8\u4f7f\u7528\u4e86\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u4ee5\u53ca\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3002epoll \u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u5feb\u901f\u5b9a\u4f4d\u9700\u8981\u5904\u7406\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5e94\u7684 I/O \u64cd\u4f5c\u3002\n\nepoll \u7684\u6570\u636e\u7ed3\u6784\u79f0\u4e3a eventpoll\uff0c\u662f\u57fa\u4e8e\u7ea2\u9ed1\u6811\u548c\u53cc\u7ebf\u94fe\u8868\u7684\u6df7\u5408\u7ed3\u6784\uff0c\u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u7ba1\u7406 fd\uff0c\u4f7f\u7528\u53cc\u7ebf\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u4e5f\u662f\u8fd9\u79cd\u6df7\u5408\u7ed3\u6784\u7684\u8bbe\u8ba1\u80fd\u8ba9 epoll \u591a\u8def\u590d\u7528\u5904\u7406\u5e76\u53d1\u4e8b\u4ef6\u3002\n\n:::\n\n\n- select\n  - `\u9ed8\u8ba4\u53ea\u80fd\u76d1\u542c 1024 \u4e2a socket \u8fde\u63a5`: \u56e0\u4e3a\u6bcf\u6b21\u8c03\u7528 select \u90fd\u9700\u8981\u5c06\u8fdb\u7a0b\u52a0\u5165\u5230\u6240\u6709\u76d1\u89c6 socket \u7684\u7b49\u5f85\u961f\u5217\uff0c\u6bcf\u6b21\u5524\u9192\u90fd\u9700\u8981\u4ece\u6bcf\u4e2a\u961f\u5217\u4e2d\u79fb\u9664\u3002\u8fd9\u91cc\u6d89\u53ca\u4e86\u4e24\u6b21\u904d\u5386\uff0c\u800c\u4e14\u6bcf\u6b21\u90fd\u8981\u5c06\u6574\u4e2a fds \u5217\u8868\u4f20\u9012\u7ed9\u5185\u6838\uff0c\u6709\u4e00\u5b9a\u7684\u5f00\u9500\u3002\u6b63\u662f\u56e0\u4e3a\u904d\u5386\u64cd\u4f5c\u5f00\u9500\u5927\uff0c\u51fa\u4e8e\u6548\u7387\u7684\u8003\u91cf\uff0c\u624d\u4f1a\u89c4\u5b9a select \u7684\u6700\u5927\u76d1\u542c\u6570\u91cf\uff0c\u9ed8\u8ba4\u53ea\u80fd\u76d1\u542c 1024 \u4e2a socket\u3002\n  - `\u9700\u8981\u4e3b\u52a8\u8f6e\u8be2`: select \u76d1\u542c socket \u65f6\uff0c\u4e0d\u80fd\u77e5\u9053\u54ea\u4e2a socket \u6709\u53ef\u7528\u6570\u636e\uff0c\u9700\u8981\u8f6e\u8be2\u5224\u65ad\u3002\u8fdb\u7a0b\u88ab\u5524\u9192\u540e\uff0c\u7528\u6237\u7a0b\u5e8f\u5e76\u4e0d\u77e5\u9053\u54ea\u4e9b socket \u5df2\u7ecf\u63a5\u6536\u5230\u6570\u636e\uff0c\u8fd8\u9700\u8981\u904d\u5386\u4e00\u6b21\u3002\n- poll: \u4e0e select \u539f\u7406\u7c7b\u4f3c\uff0c\u53ea\u662f\u4f7f\u7528`\u94fe\u8868`\u5b9e\u73b0\uff0c\u6ca1\u6709\u4e86 socket \u9650\u5236\u3002\n- epoll\n  - `\u6ca1\u6709 socket \u6570\u91cf\u9650\u5236`: \u53ef\u4ee5\u76f4\u63a5\u77e5\u9053\u54ea\u4e2a socket \u6709\u6570\u636e\u4e86\uff0c\u5168\u9762\u89e3\u51b3\u4e86 select \u7684\u95ee\u9898\u3002\n  - `\u7ebf\u7a0b\u5b89\u5168`: epoll \u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u800c select \u548c poll \u4e0d\u662f\u3002\n  - `mmap \u5171\u4eab\u5185\u5b58`: epoll \u5185\u90e8\u4f7f\u7528\u4e86 mmap \u5171\u4eab\u4e86\u7528\u6237\u548c\u5185\u6838\u7684\u90e8\u5206\u7a7a\u95f4\uff0c\u907f\u514d\u4e86\u6570\u636e\u7684\u6765\u56de\u62f7\u8d1d\u3002\n  - `\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8`: epoll_ctl \u6ce8\u518c\u4e8b\u4ef6\u5e76\u6ce8\u518c callback \u56de\u8c03\u51fd\u6570\uff0cepoll_wait \u53ea\u8fd4\u56de\u53d1\u751f\u7684\u4e8b\u4ef6\u907f\u514d\u4e86\u50cf select \u548c poll \u5bf9\u4e8b\u4ef6\u7684\u6574\u4e2a\u8f6e\u8be2\u64cd\u4f5c\u3002\n\n---\n\n\u4e3a\u4ec0\u4e48 epoll \u7684\u6548\u7387\u9ad8\uff1f\n\n- \u56e0\u4e3a\u57fa\u4e8e`\u7ea2\u9ed1\u6811`\u3001`\u53cc\u5411\u94fe\u8868`\u3001`\u4e8b\u4ef6\u56de\u8c03\u673a\u5236`\n- \u5982\u679c\u6709 100 \u4e07\u7528\u6237\u540c\u65f6\u4e0e\u4e00\u4e2a\u8fdb\u7a0b\u4fdd\u6301 TCP \u8fde\u63a5\uff0c\u4f46\u662f\u53ea\u6709\u51e0\u5341\u4e2a TCP \u8fde\u63a5\u662f\u6d3b\u8dc3\u7684\uff08\u4fdd\u6301\u957f\u8fde\u63a5\u4f46\u662f\u672a\u53d1\u9001 TCP \u5305\uff09\n- \u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0cselect/poll \u5c31\u4f1a\u6536\u96c6\u6240\u6709\u7684\u8fde\u63a5\uff08\u5f88\u6ca1\u5fc5\u8981\uff09\uff0c\u4e14\u6bcf\u6b21\u6536\u96c6\u4e8b\u4ef6\u65f6\uff0c\u90fd\u4f1a\u628a\u8fd9 100 \u4e07\u4e2a socket \u4f20\u7ed9 linux\uff08`\u7528\u6237\u6001\u5185\u5b58`\u5230`\u5185\u6838\u5185\u5b58`\u7684\u5927\u91cf\u590d\u5236\uff09\u3002*select \u548c poll \u6bcf\u6b21\u90fd\u9700\u8981\u904d\u5386\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(n)\uff0c\u800c epoll \u662f\u57fa\u4e8e\u56de\u8c03\u7684\uff0c\u6bcf\u4e2a socket \u4e0a\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5c31\u8c03\u7528\u56de\u8c03\u51fd\u6570\u653e\u5230 epoll \u7684\u5217\u8868\u4e2d\uff0c\u6240\u4ee5 epoll_wait \u53ea\u9700\u8981\u8bfb\u8fd9\u4e2a\u5217\u8868\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(1)*\n\n\n---\n\n### epoll \u6709\u54ea\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff1f\n\n- `LT(level trigger)`\n - socket \u63a5\u6536\u7f13\u51b2\u533a\u4e0d\u4e3a\u7a7a\uff0c\u6709\u6570\u636e\u53ef\u8bfb\uff0c\u8bfb\u4e8b\u4ef6\u4e00\u76f4\u89e6\u53d1\n - socket \u53d1\u9001\u7f13\u51b2\u533a\u4e0d\u6ee1\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5199\u5165\u6570\u636e\uff0c\u5199\u4e8b\u4ef6\u4e00\u76f4\u89e6\u53d1\n- `ET(edge trigger)`\n - socket \u7684\u63a5\u6536\u7f13\u51b2\u533a\u72b6\u6001\u53d8\u5316\u65f6\u89e6\u53d1\u8bfb\u4e8b\u4ef6\uff0c\u5373\u7a7a\u7684\u63a5\u6536\u7f13\u51b2\u533a\u521a\u63a5\u6536\u5230\u6570\u636e\u65f6\u89e6\u53d1\u8bfb\u4e8b\u4ef6\n - socket \u7684\u53d1\u9001\u7f13\u51b2\u533a\u72b6\u6001\u53d8\u5316\u65f6\u89e6\u53d1\u5199\u4e8b\u4ef6\uff0c\u5373\u6ee1\u7684\u7f13\u51b2\u533a\u521a\u7a7a\u51fa\u7a7a\u95f4\u65f6\u89e6\u53d1\u8bfb\u4e8b\u4ef6\n\n---\n\nLT \u548c ET \u6709\u4ec0\u4e48\u533a\u522b\uff1f\n\n- LT \u6a21\u5f0f\u7684\u4f7f\u7528\u66f4\u7b80\u5355\uff0c\u66f4\u7b26\u5408\u6b63\u5e38\u8ba4\u77e5\uff0cET \u53ea\u5728\u72b6\u6001\u53d8\u5316\u65f6\u89e6\u53d1\u4e8b\u4ef6\u3002\n- ET \u6a21\u5f0f\u7684\u6548\u7387\u6bd4 LT \u66f4\u9ad8\uff0c\u56e0\u4e3a\u53ef\u4ee5\u51cf\u5c11 epoll \u4e8b\u4ef6\u88ab\u91cd\u590d\u89e6\u53d1\u7684\u6b21\u6570\u3002\n\n\n### epoll \u7684\u6267\u884c\u8fc7\u7a0b\n\n1. \u8c03\u7528`epoll_create`\u5728\u5185\u6838\u4e2d\u5efa\u7acb\u4e00\u4e2a epoll \u5bf9\u8c61 (eventpoll \u7ed3\u6784\u4f53)\u3002\n2. \u8c03\u7528`epoll_ctl`\u6765\u589e\u52a0\u6216\u8005\u5220\u9664 epoll \u91cc\u7684 socket\u3002\n3. \u8c03\u7528`epoll_wait`\u7b49\u5f85\u4e8b\u4ef6\u53d1\u751f (\u6536\u96c6\u53d1\u751f\u4e8b\u4ef6\u7684\u8fde\u63a5)\u3002\uff08\u6700\u91cd\u8981\u7684\u4e00\u6b65\uff09\uff08\u8c03\u7528 epoll_wait \u6536\u96c6\u6240\u6709\u53d1\u751f\u7684\u4e8b\u4ef6\u7684 socket \u8fde\u63a5\uff0c\u5e76\u5c06\u4e8b\u4ef6\u653e\u5728\u4e00\u4e2a\u94fe\u8868\u4e2d\uff0c\u8fd9\u6837\u53ea\u9700\u5230\u8be5\u94fe\u8868\u4e2d\u5bfb\u627e\u53d1\u751f\u8fde\u63a5\u7684\u4e8b\u4ef6\uff0c\u800c\u4e0d\u7528\u904d\u5386\u6240\u6709 socket \u8fde\u63a5\u3002\u8fd9\u6837\u5728\u5b9e\u9645\u6536\u96c6\u4e8b\u4ef6\u65f6\uff0cepoll_wait \u6548\u7387\u4f1a\u5f88\u9ad8\u3002\uff09\n\n\n### \u4e3a\u4ec0\u4e48 epoll \u4e5f\u8981\u642d\u914d nio \u4f7f\u7528\uff1f\n\n- fd \u5728 read \u4e4b\u524d\u6709\u53ef\u80fd\u4f1a\u91cd\u65b0\u8fdb\u5165\u4e0d\u53ef\u8bfb\u7684\u72b6\u6001\u3002\u8981\u4e48\u88ab\u5176\u4ed6\u65b9\u5f0f\u8bfb\u8d70\u4e86 (\u53c2\u8003\u60ca\u7fa4\u95ee\u9898), \u8fd8\u6709\u53ef\u80fd\u88ab\u5185\u6838\u629b\u5f03\u4e86\uff0c\u603b\u7684\u6765\u8bf4\uff0cfd \u56e0\u4e3a\u5728 read \u4e4b\u524d\uff0c\u6570\u636e\u88ab\u5176\u4ed6\u65b9\u5f0f\u8bfb\u8d70\uff0cfd \u91cd\u65b0\u53d8\u4e3a\u4e0d\u53ef\u8bfb\u3002\u6b64\u65f6\uff0c\u7528\u963b\u585e\u5f0f IO \u7684 read \u51fd\u6570\u5c31\u4f1a\u963b\u585e\u6574\u4e2a\u7ebf\u7a0b\u3002\n- epoll \u53ea\u662f\u8fd4\u56de\u4e86\u53ef\u8bfb\u4e8b\u4ef6\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u8fd4\u56de\u53ef\u4ee5\u8bfb\u591a\u5c11\u6570\u636e\u91cf\u3002\u56e0\u6b64\uff0c\u975e\u963b\u585e IO \u7684\u505a\u6cd5\u662f\u8bfb\u591a\u6b21\uff0c\u76f4\u5230\u4e0d\u80fd\u8bfb\u3002\u800c\u963b\u585e io \u5374\u53ea\u80fd\u8bfb\u4e00\u6b21\uff0c\u56e0\u4e3a\u4e07\u4e00\u4e00\u6b21\u5c31\u8bfb\u5b8c\u4e86\u7f13\u51b2\u533a\u6240\u6709\u6570\u636e\uff0c\u7b2c\u4e8c\u6b21\u8bfb\u7684\u65f6\u5019\uff0cread \u5c31\u4f1a\u53c8\u963b\u585e\u4e86\u3002\u4f46\u662f\u5bf9\u4e8e epoll \u7684 ET \u6a21\u5f0f\u6765\u8bf4\uff0c\u7f13\u51b2\u533a\u7684\u6570\u636e\u53ea\u4f1a\u5728\u6539\u53d8\u7684\u901a\u77e5\u4e00\u6b21\uff0c\u5982\u679c\u6b64\u6b21\u6ca1\u6709\u6d88\u8d39\u5b8c\uff0c\u5728\u4e0b\u6b21\u6570\u636e\u5230\u6765\b\u4e4b\u524d\uff0c\u53ef\u8bfb\u4e8b\u4ef6\u518d\u4e5f\u4e0d\u4f1a\u901a\u77e5\u4e86\u3002\u90a3\u4e48\u5bf9\u4e8e\u53ea\u80fd\u8c03\u7528\u4e00\u6b21 read \u7684\u963b\u585e\u5f0f IO \u6765\u8bf4\uff0c\u672a\u8bfb\u5b8c\u7684\u6570\u636e\u5c31\u6709\u53ef\u80fd\u6c38\u8fdc\u8bfb\u4e0d\u5230\u4e86\u3002\n\n\n---\n\n\n- [\u6df1\u5ea6\u957f\u6587\uff1a\u4ece bio \u5230 nio \u5230 aio\uff0c\u518d\u5230\u54cd\u5e94\u5f0f\u7f16\u7a0b](https://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&mid=2650524542&idx=1&sn=dc32eef9e033be79ad122a2ccbe88c2b)\n- [\u56fe\u89e3 | \u6df1\u5165\u63ed\u79d8 epoll \u662f\u5982\u4f55\u5b9e\u73b0 IO \u591a\u8def\u590d\u7528\u7684\uff01](https://mp.weixin.qq.com/s/6JNLyVlE6BWU-zScNuaYvQ#tocbar--up5f3g)\n- [\u5f7b\u5e95\u7406\u89e3 IO \u591a\u8def\u590d\u7528\u5b9e\u73b0\u673a\u5236 - \u6398\u91d1](https://juejin.cn/post/6882984260672847879)\n\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'\nepoll \u662f\u4f7f\u7528\u4ec0\u4e48\u5b9e\u73b0\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u7684\uff1f\n\n---\n\nepoll \u4f7f\u7528\u4e86\u57fa\u4e8e\u5185\u5b58\u6620\u5c04\u7684\u6280\u672f\u6765\u5b9e\u73b0\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5b83\u4f7f\u7528\u4e86\u4e00\u5757\u5171\u4eab\u7684\u5185\u5b58\u533a\u57df\uff0c\u5c06\u5185\u6838\u4e2d\u7684\u4e8b\u4ef6\u548c\u6570\u636e\u7ed3\u6784\u6620\u5c04\u5230\u7528\u6237\u7a7a\u95f4\u3002\n\n\u5728 epoll \u7684\u5b9e\u73b0\u4e2d\uff0c\u5185\u6838\u7ef4\u62a4\u4e86\u4e00\u4e2a\u4e8b\u4ef6\u8868\uff08event table\uff09\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86\u9700\u8981\u76d1\u542c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u548c\u76f8\u5e94\u7684\u4e8b\u4ef6\u3002\u5f53\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5185\u6838\u4f1a\u5c06\u76f8\u5173\u7684\u4e8b\u4ef6\u4fe1\u606f\u590d\u5236\u5230\u5171\u4eab\u7684\u5185\u5b58\u533a\u57df\u4e2d\u3002\n\n\u800c\u5728\u7528\u6237\u6001\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u8bfb\u53d6\u8fd9\u4e2a\u5171\u4eab\u5185\u5b58\u533a\u57df\u6765\u83b7\u53d6\u4e8b\u4ef6\u4fe1\u606f\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5185\u6838\u4e0e\u7528\u6237\u6001\u4e4b\u95f4\u53ef\u4ee5\u9ad8\u6548\u5730\u4f20\u8f93\u4e8b\u4ef6\u6570\u636e\uff0c\u907f\u514d\u4e86\u9891\u7e41\u7684\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5177\u4f53\u7684\u5185\u6838\u548c\u7528\u6237\u6001\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u673a\u5236\u53ef\u80fd\u4f1a\u56e0\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e0d\u540c\u800c\u6709\u6240\u5dee\u5f02\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e Linux \u7cfb\u7edf\u4e2d\u7684 epoll \u6765\u8bf4\uff0c\u4f7f\u7528\u57fa\u4e8e\u5185\u5b58\u6620\u5c04\u7684\u6280\u672f\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\n\n---\n\n\u90a3 epoll \u662f\u57fa\u4e8e\u53cc\u5411\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u5417\uff1f\n\n---\n\n\u4e0d\u5b8c\u5168\u6b63\u786e\u3002epoll \u5728\u5185\u6838\u4e2d\u4f7f\u7528\u4e86\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u79f0\u4e3a"eventpoll"\uff0c\u5b83\u662f\u4e00\u4e2a\u57fa\u4e8e\u7ea2\u9ed1\u6811\uff08Red-Black Tree\uff09\u548c\u53cc\u5411\u94fe\u8868\uff08Doubly Linked List\uff09\u7684\u6df7\u5408\u7ed3\u6784\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0ceventpoll \u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u9ad8\u6548\u5730\u7ba1\u7406\u9700\u8981\u76d1\u542c\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08file descriptor\uff09\uff0c\u4ee5\u652f\u6301\u5feb\u901f\u7684\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u3002\u6bcf\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u90fd\u5bf9\u5e94\u4e00\u4e2a\u8282\u70b9\u5728\u7ea2\u9ed1\u6811\u4e2d\u3002\n\n\u800c\u53cc\u5411\u94fe\u8868\u5219\u7528\u4e8e\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u5728\u6bcf\u4e2a\u7ea2\u9ed1\u6811\u8282\u70b9\u4e2d\uff0c\u90fd\u6709\u4e00\u4e2a\u94fe\u8868\uff0c\u7528\u4e8e\u5b58\u50a8\u4e0e\u8be5\u6587\u4ef6\u63cf\u8ff0\u7b26\u76f8\u5173\u7684\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u6837\uff0c\u5f53\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u53ef\u4ee5\u5feb\u901f\u904d\u5386\u94fe\u8868\uff0c\u6267\u884c\u76f8\u5e94\u7684\u56de\u8c03\u51fd\u6570\u3002\n\n\u56e0\u6b64\uff0c\u53ef\u4ee5\u8bf4 epoll \u5728\u5185\u6838\u4e2d\u4f7f\u7528\u4e86\u53cc\u5411\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u800c\u7ea2\u9ed1\u6811\u5219\u7528\u4e8e\u9ad8\u6548\u5730\u7ba1\u7406\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\u8fd9\u79cd\u6df7\u5408\u7ed3\u6784\u7684\u8bbe\u8ba1\u4f7f\u5f97 epoll \u80fd\u591f\u9ad8\u6548\u5730\u5904\u7406\u5927\u91cf\u7684\u5e76\u53d1\u4e8b\u4ef6\u3002\n\n\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\nepoll \u662f\u600e\u4e48\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u7684\uff1f\n\n---\n\nepoll \u662f Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u4e00\u79cd\u4e8b\u4ef6\u901a\u77e5\u673a\u5236\uff0c\u7528\u4e8e\u5904\u7406\u5927\u91cf\u7684\u5e76\u53d1\u8fde\u63a5\u3002\u5b83\u901a\u8fc7\u5728\u5185\u6838\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u4e8b\u4ef6\u8868\u6765\u5b9e\u73b0\u9ad8\u6548\u7684 I/O \u4e8b\u4ef6\u901a\u77e5\u3002epoll \u7684\u7ebf\u7a0b\u5b89\u5168\u6027\u662f\u901a\u8fc7\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u6765\u4fdd\u8bc1\u7684\uff1a\n\n1. \u5185\u6838\u4e2d\u7684\u4e8b\u4ef6\u8868\u662f\u7531\u6bcf\u4e2a\u8fdb\u7a0b\u72ec\u7acb\u7ef4\u62a4\u7684\uff0c\u56e0\u6b64\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u4e8b\u4ef6\u8868\u662f\u76f8\u4e92\u9694\u79bb\u7684\uff0c\u4e0d\u4f1a\u4ea7\u751f\u7ade\u4e89\u6761\u4ef6\u3002\n\n2. epoll \u4f7f\u7528\u4e86\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u6a21\u578b\uff0c\u5f53\u6709\u65b0\u7684\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5185\u6838\u4f1a\u901a\u77e5\u76f8\u5e94\u7684\u7ebf\u7a0b\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u79cd\u6a21\u578b\u907f\u514d\u4e86\u7ebf\u7a0b\u4e4b\u95f4\u7684\u7ade\u4e89\u6761\u4ef6\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u53ea\u8d1f\u8d23\u5904\u7406\u81ea\u5df1\u7684\u4e8b\u4ef6\u3002\n\n3. epoll \u63d0\u4f9b\u4e86\u591a\u79cd\u64cd\u4f5c\u6a21\u5f0f\uff0c\u5305\u62ec ET\uff08\u8fb9\u7f18\u89e6\u53d1\uff09\u548c LT\uff08\u6c34\u5e73\u89e6\u53d1\uff09\u3002\u5728 ET \u6a21\u5f0f\u4e0b\uff0c\u53ea\u6709\u5f53\u4e8b\u4ef6\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u624d\u4f1a\u901a\u77e5\u7ebf\u7a0b\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u901a\u77e5\u548c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u63d0\u9ad8\u4e86\u7ebf\u7a0b\u7684\u6548\u7387\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0cepoll \u901a\u8fc7\u72ec\u7acb\u7684\u4e8b\u4ef6\u8868\u3001\u4e8b\u4ef6\u9a71\u52a8\u7684\u6a21\u578b\u548c\u5408\u7406\u7684\u64cd\u4f5c\u6a21\u5f0f\uff0c\u4fdd\u8bc1\u4e86\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u7684\u7ebf\u7a0b\u5b89\u5168\u6027\u3002\n\n---\n\n\u90a3\u80fd\u5426\u7ed9\u6211\u89e3\u91ca\u4e00\u4e0b\u201cepoll \u4f7f\u7528\u53cc\u5411\u94fe\u8868\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u7528\u7ea2\u9ed1\u6811\u7ba1\u7406 fd\u201d\u91cc\u7684\u53cc\u5411\u94fe\u8868\u6307\u7684\u662f\u4ec0\u4e48\uff1f\n\n---\n\n\u5728 Linux \u4e2d\uff0cepoll \u662f\u4e00\u79cd\u9ad8\u6548\u7684 I/O \u4e8b\u4ef6\u901a\u77e5\u673a\u5236\u3002\u5b83\u4f7f\u7528\u53cc\u5411\u94fe\u8868\u6765\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u53cc\u5411\u94fe\u8868\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5141\u8bb8\u5728\u94fe\u8868\u4e2d\u7684\u4efb\u610f\u4f4d\u7f6e\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002\u5728 epoll \u4e2d\uff0c\u53cc\u5411\u94fe\u8868\u88ab\u7528\u6765\u7ba1\u7406\u6ce8\u518c\u7684\u4e8b\u4ef6\u548c\u76f8\u5e94\u7684\u56de\u8c03\u51fd\u6570\u3002\u6bcf\u4e2a\u4e8b\u4ef6\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u8c03\u7528\u76f8\u5e94\u7684\u56de\u8c03\u51fd\u6570\u6765\u5904\u7406\u4e8b\u4ef6\u3002\u53cc\u5411\u94fe\u8868\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u5feb\u901f\u5730\u63d2\u5165\u548c\u5220\u9664\u8282\u70b9\uff0c\u800c\u4e0d\u9700\u8981\u79fb\u52a8\u5176\u4ed6\u8282\u70b9\u3002\u8fd9\u4f7f\u5f97 epoll \u80fd\u591f\u9ad8\u6548\u5730\u7ba1\u7406\u5927\u91cf\u7684\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\u3002\u53e6\u5916\uff0cepoll \u8fd8\u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u7ba1\u7406\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08fd\uff09\u3002\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5b83\u53ef\u4ee5\u5feb\u901f\u5730\u8fdb\u884c\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u3002\u901a\u8fc7\u4f7f\u7528\u7ea2\u9ed1\u6811\uff0cepoll \u53ef\u4ee5\u9ad8\u6548\u5730\u7ba1\u7406\u5927\u91cf\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\n\n---\n\n\u61c2\u4e86\uff0c\u8fd9\u91cc\u7684\u53cc\u5411\u94fe\u8868\u53ea\u662f\u7528\u6765\u5b58\u4e8b\u4ef6\u7684\u6570\u636e\u7ed3\u6784\uff0c\u800c mmap \u662f\u7528\u6765\u7ba1\u7406\u4e8b\u4ef6\u7684\u5185\u5b58\u6620\u5c04\uff0c\u6765\u5b9e\u73b0\u4e0d\u7ecf\u8fc7\u590d\u5236\uff0c\u8ba9\u5185\u6838\u76f4\u63a5\u8bbf\u95ee\u4e8b\u4ef6\u7684\uff0c\u6211\u7406\u89e3\u7684\u5bf9\u5417\uff1f\n\n---\n\n\u662f\u7684\uff0c\u60a8\u7406\u89e3\u5f97\u5f88\u5bf9\u3002\u53cc\u5411\u94fe\u8868\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5b58\u50a8\u4e8b\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\u3002\u800c mmap \u662f\u4e00\u79cd\u5185\u5b58\u6620\u5c04\u6280\u672f\uff0c\u5b83\u53ef\u4ee5\u8ba9\u5185\u6838\u76f4\u63a5\u8bbf\u95ee\u4e8b\u4ef6\u7684\u5185\u5b58\uff0c\u800c\u65e0\u9700\u8fdb\u884c\u6570\u636e\u590d\u5236\u3002\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u5e76\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\u3002\n\n\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"epoll \u4f7f\u7528\u53cc\u5411\u94fe\u8868\u7ba1\u7406\u4e8b\u4ef6\u548c\u56de\u8c03\u51fd\u6570\uff0c\u7528\u7ea2\u9ed1\u6811\u7ba1\u7406 fd\uff0c\u8fd8\u4f7f\u7528 mmap \u4e0d\u7ecf\u8fc7\u590d\u5236\uff0c\u8ba9\u5185\u6838\u76f4\u63a5\u8bbf\u95ee\u4e8b\u4ef6\uff0c\u4ece\u800c\u63d0\u9ad8\u6027\u80fd\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"reactor-\u6a21\u578b",children:"reactor \u6a21\u578b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"reactor \u548c\u591a\u8def\u590d\u7528 io \u662f\u4ec0\u4e48\u5173\u7cfb\uff1f\n\n---\n\nReactor \u548c\u591a\u8def\u590d\u7528 IO \u662f\u4e24\u4e2a\u4e0d\u540c\u4f46\u76f8\u5173\u7684\u6982\u5ff5\u3002\n\nReactor \u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u7528\u4e8e\u5904\u7406\u5e76\u53d1\u8bf7\u6c42\u3002\u5b83\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u65b9\u5f0f\uff0c\u5176\u4e2d\u4e00\u4e2a\u4e2d\u5fc3\u7ec4\u4ef6\uff08\u79f0\u4e3a Reactor\uff09\u8d1f\u8d23\u76d1\u542c\u5e76\u5206\u53d1\u4e8b\u4ef6\uff0c\u800c\u5177\u4f53\u7684\u5904\u7406\u903b\u8f91\u5219\u7531\u4e0d\u540c\u7684\u5904\u7406\u5668\u7ec4\u4ef6\uff08\u79f0\u4e3a Handlers\uff09\u6765\u5b8c\u6210\u3002Reactor \u6a21\u5f0f\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u9ad8\u6548\u7684\u670d\u52a1\u5668\uff0c\u5b83\u53ef\u4ee5\u5904\u7406\u591a\u4e2a\u5e76\u53d1\u7684\u7f51\u7edc\u8bf7\u6c42\u3002\n\n\u591a\u8def\u590d\u7528 IO \u662f\u4e00\u79cd I/O \u6a21\u578b\uff0c\u7528\u4e8e\u5904\u7406\u5e76\u53d1\u7684\u8f93\u5165\u8f93\u51fa\u64cd\u4f5c\u3002\u5b83\u901a\u8fc7\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u540c\u65f6\u76d1\u542c\u591a\u4e2a I/O \u4e8b\u4ef6\uff0c\u5e76\u5728\u6709\u4e8b\u4ef6\u53d1\u751f\u65f6\u8fdb\u884c\u5904\u7406\u3002\u5e38\u89c1\u7684\u591a\u8def\u590d\u7528 IO \u673a\u5236\u6709 select\u3001poll \u548c epoll \u7b49\u3002\u591a\u8def\u590d\u7528 IO \u53ef\u4ee5\u4e0e Reactor \u6a21\u5f0f\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684\u5e76\u53d1\u5904\u7406\u3002\n\n\u5728\u4f7f\u7528 Reactor \u6a21\u5f0f\u65f6\uff0c\u901a\u5e38\u4f1a\u5229\u7528\u591a\u8def\u590d\u7528 IO \u673a\u5236\u6765\u76d1\u542c\u548c\u5904\u7406\u7f51\u7edc\u8bf7\u6c42\u3002Reactor \u8d1f\u8d23\u76d1\u542c\u5e76\u63a5\u6536\u4e8b\u4ef6\uff0c\u800c\u591a\u8def\u590d\u7528 IO \u673a\u5236\u5219\u8d1f\u8d23\u5b9e\u9645\u7684\u4e8b\u4ef6\u76d1\u542c\u548c I/O \u64cd\u4f5c\u3002\u901a\u8fc7\u5c06\u591a\u4e2a\u7f51\u7edc\u8bf7\u6c42\u7684 I/O \u64cd\u4f5c\u96c6\u4e2d\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u8fdb\u884c\u5904\u7406\uff0c\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u7684\u5e76\u53d1\u6027\u80fd\u548c\u6548\u7387\u3002\n\n\u7efc\u4e0a\u6240\u8ff0\uff0cReactor \u548c\u591a\u8def\u590d\u7528 IO \u662f\u4e24\u4e2a\u76f8\u8f85\u76f8\u6210\u7684\u6982\u5ff5\uff0c\u5b83\u4eec\u53ef\u4ee5\u7ed3\u5408\u4f7f\u7528\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684\u5e76\u53d1\u5904\u7406\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"reactor \u548c linux \u7684 IO \u6a21\u578b\u5c5e\u4e8e\u9762\u7c89\u548c\u9992\u5934\u7684\u5173\u7cfb\uff0clinux \u5185\u6838\u6ca1\u6709\u5b9e\u73b0 reactor \u6a21\u578b\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u51e0\u79cd IO \u6a21\u578b\u5f88\u7b80\u5355\u5730\u5b9e\u73b0\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"reactor \u6a21\u578b\u662f\u4ec0\u4e48\uff1f\n\nreactor \u662f\u5bf9 epoll \u7684\u4e00\u79cd\u5c01\u88c5 (\u4f18\u5316)\uff0c\u628a epoll \u8fd9\u79cd\u5bf9 io \u7684\u7ba1\u7406\uff0c\u8f6c\u5316\u4e3a\u5bf9\u4e8b\u4ef6\u7684\u7ba1\u7406;\n\n\u4f7f\u7528\u591a\u8def\u590d\u7528 io \u6a21\u578b\u5904\u7406 io \u4e8b\u4ef6\uff0c\u8ba9 reactor \u5c06\u76f8\u5e94 io \u4e8b\u4ef6\u548c\u4e1a\u52a1\u5904\u7406\u5206\u5f00\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\u6765\u5904\u7406 IO \u4e8b\u4ef6\uff0c\u7136\u540e\u5c06\u5c31\u7eea\u5f97\u5230\u4e8b\u4ef6\u5206\u53d1\u5230\u4e1a\u52a1\u5904\u7406 handlers \u7ebf\u7a0b\u53bb\u5f02\u6b65\u975e\u963b\u585e\u5904\u7406\u3002\n\n- *reactor \u662f\u4e00\u79cd\u7ebf\u7a0b\u6a21\u578b\uff0c\u662f NIO \u5b9e\u73b0\u591a\u8def\u590d\u7528\u7684\u4e00\u79cd\u6a21\u5f0f*\n- *reactor \u7528`IO\u590d\u7528`+`\u7ebf\u7a0b\u6c60`\u89e3\u51b3 BIO \u7684\u95ee\u9898*\uff0c\u907f\u514d\u4e86 bio \u7684`thread per connection`\u8fd9\u79cd\u5f00\u9500\u9ad8\u3001\u6548\u7387\u4f4e\u7684\u7ebf\u7a0b\u6a21\u578b\n  - `IO\u590d\u7528`\uff0c\u591a\u4e2a\u8fde\u63a5\u5171\u7528\u4e00\u4e2a\u963b\u585e\u5bf9\u8c61\uff0c\u4e0d\u7528\u7b49\u5f85\u6240\u6709\u8fde\u63a5\n  - `\u7ebf\u7a0b\u6c60`\uff0c\u907f\u514d\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u521b\u5efa\u7ebf\u7a0b\n\n\n---\n\nreactor \u6a21\u578b\u7684\u5de5\u4f5c\u539f\u7406\uff1f\n\n- reactor \u7684\u5b9e\u73b0\u975e\u5e38\u7b80\u5355\uff0c\u4f7f\u7528\u540c\u6b65 io \u6a21\u578b\uff0c\u4e3b\u8981\u7279\u70b9\u662f\u5229\u7528 epoll \u76d1\u542c fd \u662f\u5426\u6709\u54cd\u5e94\uff0c\u53ca\u65f6\u5c06\u5ba2\u6237\u8fde\u63a5\u4fe1\u606f\u653e\u5230\u4e00\u4e2a\u961f\u5217\u91cc\uff0cepoll \u548c\u961f\u5217\u90fd\u662f\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u7531\u5b50\u7ebf\u7a0b\u6765\u63a5\u7ba1\u5404\u4e2a fd\uff0c\u5bf9 fd \u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002\u5305\u62ec\u8fde\u63a5\u548c\u6570\u636e\u8bfb\u5199\u3002\n- `reactor`\u628a IO \u4e8b\u4ef6\u5206\u914d\u7ed9\u5bf9\u5e94 handler \u5904\u7406\n- `acceptor`\u5904\u7406\u5ba2\u6237\u7aef\u8fde\u63a5\u4e8b\u4ef6\n- `handler`\u5904\u7406\u975e\u963b\u585e\u4efb\u52a1\n\n---\n\nreactor \u6a21\u578b\u5177\u4f53\u6709\u54ea\u51e0\u79cd\n\n- `\u5355reactor\u5355\u7ebf\u7a0b\u6a21\u578b`\uff0c\u5728 reactor \u4e2d\u5904\u7406\u4e8b\u4ef6\uff0c\u5e76\u5206\u53d1\uff0c\u5982\u679c\u662f`\u8fde\u63a5\u4e8b\u4ef6`\u5c31\u5206\u53d1\u7ed9 acceptor \u5904\u7406\uff0c\u5982\u679c\u662f`\u8bfb\u5199\u4e8b\u4ef6`\u548c`\u4e1a\u52a1\u5904\u7406`\uff0c\u5c31\u4ea4\u7ed9 handler\uff0c\u4f46\u662f\u59cb\u7ec8\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u6240\u6709\u4e8b\u4ef6\n- `\u5355reactor\u591a\u7ebf\u7a0b\u6a21\u578b`\uff0c\u548c`\u5355reactor\u5355\u7ebf\u7a0b\u6a21\u578b`\u7684\u533a\u522b\u5728\u4e8e\uff0c*reactor \u53ea\u5904\u7406`\u8fde\u63a5\u4e8b\u4ef6`\u548c`\u8bfb\u5199\u4e8b\u4ef6`\uff0c`\u4e1a\u52a1\u5904\u7406`\u4ea4\u7ed9`\u7ebf\u7a0b\u6c60`\u5904\u7406*\n- `\u591areactor\u591a\u7ebf\u7a0b\u6a21\u578b`\uff0c*\u628a reactor \u7ebf\u7a0b\u6c60\u62c6\u6210\u4e86`\u4e3breactor`\u548c`\u4ecereactor`\u4e24\u90e8\u5206\uff0c`\u4e3breactor`\u53ea\u8d1f\u8d23\u7ef4\u62a4\u8fde\u63a5\uff0c`\u4ecereactor`\u5904\u7406\u8bfb\u5199\u4e8b\u4ef6\uff0c`\u4e1a\u52a1\u5904\u7406`\u8fd8\u662f\u4ea4\u7ed9`\u7ebf\u7a0b\u6c60`\u5904\u7406*\uff0c\u5177\u4f53\u6765\u8bf4\uff0c`\u4ecereactor`\u6709\u591a\u4e2a\uff0c\u6bcf\u4e2a`\u4ecereactor`\u90fd\u5728\u4e00\u4e2a\u72ec\u7acb\u7ebf\u7a0b\u4e2d\u6267\u884c\uff0c`\u4ecereactor`\u4f1a\u53bb\u6267\u884c\u4e00\u4e9b\u8017\u65f6\u7684 IO \u64cd\u4f5c\uff0c\u7528\u591a\u7ebf\u7a0b\u66f4\u80fd\u53d1\u6325 CPU \u7684\u591a\u6838\n\n\n\n\n\n### \u6709\u54ea\u4e9b\u5e38\u89c1\u7684\u7ebf\u7a0b\u6a21\u578b\uff1f\n\n- \u5e38\u89c1\u7684\u7ebf\u7a0b\u6a21\u578b\u6709`reactor`/`proactor`/`actor`\uff0c*\u5176\u4e2d reactor \u548c proactor \u90fd\u662f\u901a\u8fc7\u5171\u4eab\u5185\u5b58\u6765\u901a\u4fe1\uff0c\u800c actor \u5219\u662f\u901a\u8fc7\u901a\u4fe1\u6765\u5171\u4eab\u5185\u5b58*\n- `proactor`\u5c31\u662f\u628a`reactor`\u7684 IO \u64cd\u4f5c\u6539\u4e3a\u5f02\u6b65\uff0c\u5f02\u6b65\u63a5\u6536\uff0c\u540c\u65f6\u5904\u7406\u591a\u4e2a\u670d\u52a1\u8bf7\u6c42\u7684\u4e8b\u4ef6\u9a71\u52a8\u7a0b\u5e8f\uff0c\u6027\u80fd\u66f4\u597d\uff0c\u66f4\u80fd\u53d1\u6325 DMA \u7684\u4f18\u52bf\uff0c\u4f46\u662f\u4f9d\u8d56 OS \u8c03\u5ea6\u6765\u652f\u6301\u5f02\u6b65\uff0c\u4e3b\u6d41 OS \u5bf9\u5f02\u6b65 IO \u7684\u652f\u6301\u90fd\u5f88\u6709\u9650\uff0c\u6240\u4ee5 proactor \u51e0\u4e4e\u6ca1\u6709\u4ec0\u4e48\u5b9e\u9645\u5e94\u7528\uff0c\u4e0d\u7528\u770b\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"reactor \u4e09\u79cd\u6a21\u5f0f\u5f62\u8c61\u6bd4\u55bb"}),"\n",(0,l.jsx)(e.p,{children:"reactor \u9910\u5385\u7684\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\uff0c\u6216\u8005\u5904\u7406\u5de5\u5355\uff0c\u9910\u5385\u4e00\u822c\u6709\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\uff0c\u63a5\u5f85\u5458\u8d1f\u8d23\u518d\u95e8\u53e3\u63a5\u5f85\u987e\u5ba2\uff0c\u670d\u52a1\u5458\u8d1f\u8d23\u5168\u7a0b\u670d\u52a1\u987e\u5ba2\u3002reactor \u7684\u4e09\u79cd\u7ebf\u7a0b\u6a21\u578b\u53ef\u4ee5\u7528\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\u7c7b\u6bd4\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5355 reactor \u5355\u7ebf\u7a0b\u6a21\u578b\uff1a\u63a5\u5f85\u5458\u548c\u670d\u52a1\u5458\u662f\u540c\u4e00\u4e2a\u4eba\uff0c\u4e00\u76f4\u4e3a\u987e\u5ba2\u670d\u52a1\u3002\u9002\u5408\u5ba2\u6d41\u91cf\u8f83\u5c11\u7684\u60c5\u51b5\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5355 reactor \u591a\u7ebf\u7a0b\u6a21\u578b\uff1a\u4e00\u4e2a\u63a5\u5f85\u5458\uff0c\u591a\u4e2a\u670d\u52a1\u5458\u3002\u5ba2\u6d41\u91cf\u5927\uff0c\u4e00\u4e2a\u4eba\u5fd9\u4e0d\u8fc7\u6765\uff0c\u7531\u4e13\u95e8\u7684\u63a5\u5f85\u5458\u5728\u95e8\u53e3\u63a5\u5f85\u987e\u5ba2\uff0c\u7136\u540e\u5b89\u6392\u597d\u684c\u5b50\u540e\uff0c\u7531\u4e00\u4e2a\u670d\u52a1\u5458\u4e00\u76f4\u670d\u52a1\uff0c\u4e00\u822c\u6bcf\u4e2a\u670d\u52a1\u5458\u8d1f\u8d23\u51e0\u5f20\u684c\u5b50\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u591a reactor \u591a\u7ebf\u7a0b\u6a21\u578b\uff1a\u591a\u4e2a\u63a5\u5f85\u5458\uff0c\u591a\u4e2a\u670d\u52a1\u5458\u3002\u8fd9\u79cd\u5c31\u662f\u5ba2\u6d41\u91cf\u592a\u5927\u4e86\uff0c\u4e00\u4e2a\u63a5\u5f85\u5458\u5fd9\u4e0d\u8fc7\u6765\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"socket-\u7f16\u7a0b",children:(0,l.jsx)(e.del,{children:"socket \u7f16\u7a0b"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n- \u7f51\u7edc\u4e2d\u8fdb\u7a0b\u4e4b\u95f4\u5982\u4f55\u901a\u4fe1\uff1f\n- socket \u662f\u4ec0\u4e48\uff1f\n- socket \u7684\u57fa\u672c\u64cd\u4f5c\n  - `socket()`\n  - `bind()`\n  - `listen()`\u3001`connect()`\n  - `accept()`\n  - `read()`\u3001`write()`\n  - `close()`\n- socket \u4e2d TCP \u7684\u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5\u8be6\u89e3\n- socket \u4e2d TCP \u7684\u56db\u6b21\u63e1\u624b\u91ca\u653e\u8fde\u63a5\u8be6\u89e3\n- TCP \u534f\u8bae\u548c UDP \u534f\u8bae\u7684 socket \u7f16\u7a0b\uff0c\u6709\u4ec0\u4e48\u533a\u522b\uff1f\n  - TCP \u534f\u8bae socket \u7f16\u7a0b\u7684\u56db\u5143\u7ec4\uff0c\u5ba2\u6237\u7aef IP\u3001\u5ba2\u6237\u7aef\u7aef\u53e3\uff0c\u670d\u52a1\u5668\u7aef IP\uff0c\u670d\u52a1\u5668\u7aef\u53e3\n  - UDP \u534f\u8bae\u7684 socket \u7f16\u7a0b\uff0c\u5219\u662f\u4e94\u5143\u7ec4\uff0c\u52a0\u4e86\u4e00\u4e2a`\u534f\u8bae`\uff0c\u56e0\u4e3a UDP \u662f\u65e0\u8fde\u63a5\u7684\u4f20\u8f93\u5c42\u534f\u8bae\uff0c\u6240\u4ee5\u9700\u8981\u5148\u786e\u5b9a\u5177\u4f53\u4f20\u8f93\u534f\u8bae\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e4b\u524d\u7684\u8fd9\u4e9b\u7b14\u8bb0\u592a\u8822\u4e86\uff0c\u8ba9\u4eba\u641e\u4e0d\u6e05\u695a socket \u5230\u5e95\u662f\u7528\u6765\u5e72\u5565\u7684\uff08\u5f53\u7136\uff0c\u5f88\u591a\u4eba\u4e5f\u641e\u4e0d\u6e05\u695a socket \u5230\u5e95\u662f\u7528\u6237\u6001\u8fd8\u662f\u5185\u6838\u6001\uff09\u3002socket \u5c31\u662f\u7528\u6237\u6001\u64cd\u4f5c\u5185\u6838\u6001\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u7cfb\u7edf\u8c03\u7528\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\nsocket \u662f\u4e0d\u662f\u4e5f\u80fd\u770b\u4f5c\u662f\u7cfb\u7edf\u8c03\u7528\uff1f\u56e0\u4e3a socket \u4e5f\u662f\u7528\u6237\u6001\u64cd\u4f5c\u5185\u6838\u6001\u7684\u4e00\u79cd\u65b9\u6cd5\n\n---\n\n\u662f\u7684\uff0c\u4f60\u53ef\u4ee5\u5c06 socket \u770b\u4f5c\u662f\u4e00\u79cd\u7cfb\u7edf\u8c03\u7528\u3002\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u7cfb\u7edf\u8c03\u7528\u662f\u7528\u6237\u7a0b\u5e8f\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fdb\u884c\u4ea4\u4e92\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u5f53\u7528\u6237\u7a0b\u5e8f\u9700\u8981\u8fdb\u884c\u7f51\u7edc\u901a\u4fe1\u65f6\uff0c\u5b83\u53ef\u4ee5\u4f7f\u7528 socket \u7cfb\u7edf\u8c03\u7528\u6765\u521b\u5efa\u3001\u8fde\u63a5\u3001\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e\u7b49\u64cd\u4f5c\u3002\n\n\u901a\u8fc7 socket \u7cfb\u7edf\u8c03\u7528\uff0c\u7528\u6237\u7a0b\u5e8f\u53ef\u4ee5\u5411\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8bf7\u6c42\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\u5957\u63a5\u5b57\uff08socket\uff09\uff0c\u5e76\u901a\u8fc7\u8be5\u5957\u63a5\u5b57\u4e0e\u5176\u4ed6\u8ba1\u7b97\u673a\u8fdb\u884c\u901a\u4fe1\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6d89\u53ca\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u5207\u6362\uff0c\u56e0\u4e3a\u521b\u5efa\u548c\u64cd\u4f5c\u5957\u63a5\u5b57\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7684\u652f\u6301\u3002\n\n\u56e0\u6b64\uff0csocket \u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u79cd\u7528\u6237\u6001\u64cd\u4f5c\u5185\u6838\u6001\u7684\u65b9\u6cd5\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u7a0b\u5e8f\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fdb\u884c\u4ea4\u4e92\uff0c\u4ee5\u5b9e\u73b0\u7f51\u7edc\u901a\u4fe1\u529f\u80fd\u3002\n\n---\n\nsocket \u7cfb\u7edf\u8c03\u7528\u7684\u53c2\u6570\u5305\u62ec\u57df\uff08domain\uff09\u3001\u7c7b\u578b\uff08type\uff09\u548c\u534f\u8bae\uff08protocol\uff09\u3002\u57df\u51b3\u5b9a\u4e86\u5957\u63a5\u5b57\u7684\u901a\u4fe1\u57df\uff0c\u53ef\u4ee5\u662f AF_INET\uff08IPv4\uff09\u3001AF_INET6\uff08IPv6\uff09\u3001AF_UNIX\uff08\u672c\u5730\u901a\u4fe1\uff09\u7b49\u3002\u7c7b\u578b\u6307\u5b9a\u4e86\u5957\u63a5\u5b57\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u662f SOCK_STREAM\uff08\u9762\u5411\u8fde\u63a5\u7684\u6d41\u5957\u63a5\u5b57\uff09\u6216 SOCK_DGRAM\uff08\u65e0\u8fde\u63a5\u7684\u6570\u636e\u62a5\u5957\u63a5\u5b57\uff09\u7b49\u3002\u534f\u8bae\u6307\u5b9a\u4e86\u5957\u63a5\u5b57\u4f7f\u7528\u7684\u534f\u8bae\uff0c\u53ef\u4ee5\u662f IPPROTO_TCP\uff08TCP \u534f\u8bae\uff09\u6216 IPPROTO_UDP\uff08UDP \u534f\u8bae\uff09\u7b49\u3002\n\n\u5f53\u5e94\u7528\u7a0b\u5e8f\u8c03\u7528 socket \u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u5185\u6838\u4f1a\u4e3a\u5e94\u7528\u7a0b\u5e8f\u5206\u914d\u4e00\u4e2a\u5957\u63a5\u5b57\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4f7f\u7528\u8be5\u6587\u4ef6\u63cf\u8ff0\u7b26\u8fdb\u884c\u540e\u7eed\u7684\u7f51\u7edc\u901a\u4fe1\u64cd\u4f5c\u3002\n\n\n\u6240\u4ee5\uff0csocket \u53ef\u4ee5\u88ab\u89c6\u4e3a\u4e00\u79cd\u7cfb\u7edf\u8c03\u7528\uff0c\u5b83\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u5728\u7528\u6237\u6001\u64cd\u4f5c\u5185\u6838\u6001\uff0c\u521b\u5efa\u7f51\u7edc\u8fde\u63a5\u5e76\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u8da3\u8c08-linux-\u64cd\u4f5c\u7cfb\u7edf\u8bfb\u4e66\u7b14\u8bb0",children:"\u300a\u8da3\u8c08 Linux \u64cd\u4f5c\u7cfb\u7edf\u300b\u8bfb\u4e66\u7b14\u8bb0"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e2a\u8bfe\u975e\u5e38\u5b9e\u7528\uff0c"}),"\n",(0,l.jsx)(e.h3,{id:"\u4e32\u8bb2",children:"\u4e32\u8bb2"}),"\n",(0,l.jsx)(e.p,{children:"\u7b2c\u4e00\u7ae0\u4e3b\u8981\u8bb2\u4e86\u64cd\u4f5c\u7cfb\u7edf\u662f\u600e\u4e48\u542f\u52a8\u7684\uff0c\u4ee5\u53ca\u5efa\u7acb\u64cd\u4f5c\u7cfb\u7edf\u7684\u57fa\u672c\u7ec4\u4ef6\uff0c\u4ee5\u53ca\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u76f8\u5f53\u4e8e\u600e\u4e48\u628a\u516c\u53f8\u5f00\u8d77\u6765\uff0c\u4ee5\u53ca\u786e\u5b9a\u516c\u53f8\u7684\u57fa\u672c\u7ec4\u7ec7\u67b6\u6784\uff0c\u786e\u5b9a\u516c\u53f8\u63a5\u9879\u76ee\u7684\u6d41\u7a0b\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5de5\u4f5c\u4eba\u5458\u63a5\u7740\u8bf4\uff1a\u201c\u54b1\u4eec\u8fd9\u4e2a\u56ed\u533a\u6bd7\u90bb\u5168\u56fd\u77e5\u540d\u9ad8\u6821\uff0c\u6bcf\u5e74\u90fd\u6709\u5927\u91cf\u7684\u4f18\u79c0\u6bd5\u4e1a\u751f\u6765\u56ed\u533a\u627e\u5de5\u4f5c\uff0c\u8fd9\u662f\u4f01\u4e1a\u975e\u5e38\u91cd\u8981\u7684\u4eba\u624d\u6765\u6e90\u3002\u845b\u4f18\u8bf4\u4e86\uff0c\u4e8c\u5341\u4e00\u4e16\u7eaa\u4e86\uff0c\u4eba\u624d\u662f\u6838\u5fc3\u561b\u3002\u6bcf\u5e74\u6211\u4eec\u56ed\u533a\u90fd\u4f1a\u62db\u8058\u5927\u91cf\u7684\u6bd5\u4e1a\u751f\uff0c\u5148\u8fdb\u884c\u4e00\u4e2a\u6708\u7684\u57f9\u8bad\uff0c\u5408\u683c\u6bd5\u4e1a\u7684\u53ef\u4ee5\u63a8\u8350\u7ed9\u60a8\u8fd9\u79cd\u4f01\u4e1a\u3002\u8fd9\u4e9b\u4eba\u624d\u554a\uff0c\u5c31\u662f\u54b1\u4eec\u4f01\u4e1a\u7684 CPU\u3002\u201d\n\n\u201c\u7ecf\u8fc7\u6211\u4eec\u56ed\u533a\u57f9\u8bad\u8fc7\u7684\u2018CPU \u4eba\u624d\u2019\uff0c\u5177\u5907\u4e86\u4e09\u79cd\u8001\u677f\u4eec\u559c\u6b22\u7684\u6838\u5fc3\u7ade\u4e89\u529b\uff1a\n\n\u7b2c\u4e00\uff0c\u5b9e\u5e72\u80fd\u529b\u5f3a\uff0c\u5e72\u6d3b\u5feb\uff0c\u6211\u4eec\u79f0\u4e3a\u8fd0\u7b97\u624d\u80fd\u2014\u2014\u4e5f\u5373\u6307\u4ee4\u6267\u884c\u80fd\u529b\uff1b\n\n\u7b2c\u4e8c\uff0c\u8bb0\u5fc6\u529b\u597d\uff0c\u8bb0\u5f97\u53c8\u5feb\u53c8\u51c6\uff0c\u6211\u4eec\u79f0\u4e3a\u6570\u636e\u624d\u80fd\u2014\u2014\u4e5f\u5373\u6570\u636e\u5bc4\u5b58\u80fd\u529b\uff1b\n\n\u7b2c\u4e09\uff0c\u542c\u8bdd\uff0c\u81ea\u63a7\u80fd\u529b\u5f3a\uff0c\u53ef\u4ee5\u591a\u4efb\u52a1\u5e76\u53d1\u6267\u884c\uff0c\u6211\u4eec\u79f0\u4e3a\u63a7\u5236\u624d\u80fd\u2014\u2014\u4e5f\u5373\u6307\u4ee4\u5bc4\u5b58\u80fd\u529b\u3002\n\n\u5230\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u6c42\uff0c\u770b\u96c7\u7528\u591a\u5c11\u4e2a\u2018CPU \u4eba\u624d\u2019\u3002\n\n\u53e6\u5916\uff0c\u4eba\u624d\u5f97\u6709\u4e2a\u529e\u516c\u7684\u5730\u65b9\uff0c\u8fd9\u4e00\u7247\u5462\uff0c\u5c31\u662f\u6211\u4eec\u7684\u529e\u516c\u533a\u57df\uff0c\u79f0\u4e3a\u4e5f\u5c31\u662f\u5185\u5b58\u533a\u57df\u3002\u60a8\u53ef\u4ee5\u5305\u51e0\u4e2a\u5de5\u4f4d\uff0c\u6216\u8005\u5305\u4e00\u7247\u533a\u57df\uff0c\u6216\u8005\u51e0\u4e2a\u4f1a\u8bae\u5ba4\uff0c\u8ba9\u60a8\u516c\u53f8\u7684\u4eba\u624d\u5728\u91cc\u9762\u505a\u9879\u76ee\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u91cc\u9762\u6709\u7684\u662f\u5730\u65b9\uff0c\u540c\u65f6\u8fd0\u884c\u591a\u5c11\u4e2a\u9879\u76ee\u90fd\u884c\u3002\u201d\n\n\u8ddf\u7740\u5de5\u4f5c\u4eba\u5458\u7684\u4ecb\u7ecd\uff0c\u5c0f\u9a6c\u8d70\u5728 x86 \u56ed\u533a\u4e2d\uff0c\u770b\u7740\u8fd9\u4e00\u7247\u7247\u7684\u5185\u5b58\u529e\u516c\u533a\uff0c\u8111\u5b50\u91cc\u5df2\u7ecf\u6d6e\u73b0\u51fa\u5c06\u6765\u70ed\u706b\u671d\u5929\u7684\u529e\u516c\u573a\u666f\u4e86\u3002\n\n\u201c\u4e5f\u8bb8\u4e0d\u5230\u534a\u5e74\u7684\u65f6\u95f4\uff0c\u6211\u80af\u5b9a\u80fd\u591f\u63a5\u4e24\u4e09\u4e2a\u5927\u9879\u76ee\uff0c\u62db\u8058\u5341\u4e2a\u516b\u4e2a CPU \u5458\u5de5\u3002\u90a3\u9879\u76ee A \u7684\u5458\u5de5\u5c31\u5750\u5728\u8fd9\u7247\u5185\u5b58\u529e\u516c\u533a\uff0c\u9879\u76ee B \u7684\u5458\u5de5\u5c31\u5750\u5728\u90a3\u7247\u5185\u5b58\u529e\u516c\u533a\u3002\u6211\u6839\u636e\u79ef\u7d2f\u7684\u4eba\u8109\uff0c\u5c06\u63a5\u5230\u7684\u9879\u76ee\u5199\u6210\u4e00\u4e2a\u4e00\u4e2a\u7684\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0c\u91cc\u9762\u662f\u4e00\u884c\u884c\u9879\u76ee\u6267\u884c\u7684\u6307\u4ee4\uff0c\u8fd9\u4e9b\u6307\u4ee4\u64cd\u4f5c\u6570\u636e\u4ea7\u751f\u4e00\u4e9b\u7ed3\u679c\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u53eb\u7a0b\u5e8f\u5566\u3002\u201d\u5c0f\u9a6c\u8fd9\u4e48\u60f3\u7740\u3002\n\n\u201c\u7136\u540e\u5462\uff0c\u6211\u628a\u4e0d\u540c\u7684\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0c\u4ea4\u7ed9\u4e0d\u540c\u7684\u9879\u76ee\u7ec4\u53bb\u6267\u884c\u3002\u90a3\u9879\u76ee\u7ec4\u5c31\u53eb\u8fdb\u7a0b\u5427\uff01\u4e24\u4e2a\u9879\u76ee\u7ec4\uff0c\u8fdb\u7a0b A \u548c B\uff0c\u4f1a\u6709\u72ec\u7acb\u7684\u5185\u5b58\u529e\u516c\u7a7a\u95f4\uff0c\u4e92\u76f8\u9694\u79bb\uff0c\u7a0b\u5e8f\u4f1a\u5206\u522b\u52a0\u8f7d\u5230\u8fdb\u7a0b A \u548c\u8fdb\u7a0b B \u7684\u5185\u5b58\u529e\u516c\u7a7a\u95f4\u91cc\u9762\uff0c\u5f62\u6210\u5404\u81ea\u7684\u4ee3\u7801\u6bb5\u3002\u8981\u64cd\u4f5c\u7684\u6570\u636e\u548c\u4ea7\u751f\u7684\u7ed3\u679c\uff0c\u5c31\u653e\u5728\u6570\u636e\u6bb5\u91cc\u9762\u3002\u201c\n\n\u201c\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u5e94\u8be5\u627e\u4e00\u4e2a\u6216\u8005\u591a\u4e2a CPU \u5458\u5de5\u6765\u8fd0\u884c\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0c\u6211\u53ea\u8981\u544a\u8bc9\u4ed6\u4e0b\u4e00\u6761\u6307\u4ee4\u5728\u5185\u5b58\u529e\u516c\u533a\u4e2d\u7684\u5730\u5740\uff0c\u7ecf\u8fc7\u8bad\u7ec3\u7684 CPU \u5458\u5de5\u5c31\u4f1a\u5f88\u81ea\u89c9\u5730\u3001\u4e0d\u505c\u5730\u5c06\u4ee3\u7801\u6bb5\u7684\u6307\u4ee4\u62ff\u8fdb\u6765\u8fdb\u884c\u5904\u7406\u3002\u201c\n\n\u201c\u6307\u4ee4\u4e00\u822c\u662f\u5206\u4e24\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u8868\u793a\u505a\u4ec0\u4e48\u64cd\u4f5c\uff0c\u4f8b\u5982\u662f\u52a0\u6cd5\u8fd8\u662f\u4f4d\u79fb\uff1b\u53e6\u4e00\u90e8\u5206\u662f\u64cd\u4f5c\u54ea\u4e9b\u6570\u636e\u3002\u6570\u636e\u7684\u90e8\u5206\uff0cCPU \u5458\u5de5\u4f1a\u4ece\u6570\u636e\u6bb5\u91cc\u9762\u8bfb\u53d6\u51fa\u6765\uff0c\u8bb0\u5728\u8111\u5b50\u91cc\uff0c\u7136\u540e\u8fdb\u884c\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6bd5\u7684\u7ed3\u679c\uff0c\u518d\u5199\u56de\u6570\u636e\u6bb5\u3002\u5f53\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u91cc\u9762\u7684\u6240\u6709\u6307\u4ee4\u90fd\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u9879\u76ee\u4e5f\u5c31\u5b8c\u6210\u4e86\uff0c\u90a3\u5c31\u53ef\u4ee5\u7b49\u7740\u6536\u94b1\u5566\u3002\u201d\n\n\u5c0f\u9a6c\u6c89\u6d78\u5728\u601d\u7eea\u4e2d\u4e45\u4e45\u4e0d\u80fd\u81ea\u62d4\uff0c\u76f4\u5230\u5de5\u4f5c\u4eba\u5458\u6253\u65ad\u4e86\u4ed6\u7684\u601d\u7eea\uff1a\u201c\u60a8\u89c9\u5f97\u56ed\u533a\u5982\u4f55\uff1f\u8981\u4e0d\u8981\u5165\u4f4f\u5440\uff1f\u5148\u79df\u51e0\u4e2a\u5de5\u4f4d\uff0c\u62db\u8058\u51e0\u4e2a\u4eba\u5462\uff1f\u201c\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u542f\u52a8\u516c\u53f8\u6709\u624b\u518c\uff0c\u83b7\u53d6\u5185\u6838\u5f53\u5b9d\u5178\n\u5de5\u4f5c\u4eba\u5458\u8bf4\uff1a\u201c\u611f\u8c22\u60a8\u5165\u9a7b\u54b1\u4eec\u521b\u4e1a\u56ed\u533a\uff0c\u7531\u4e8e\u60a8\u662f\u521d\u6b21\u521b\u4e1a\uff0c\u8fd9\u91cc\u6709\u4e00\u672c\u300a\u521b\u4e1a\u6307\u5bfc\u624b\u518c\u300b\uff0c\u5728\u8fd9\u4e00\u672c\u53eb\u4f5c BIOS \u7684\u5c0f\u518c\u5b50\u4e0a\uff0c\u6709\u60a8\u542f\u52a8\u4e00\u5bb6\u516c\u53f8\u7684\u901a\u7528\u6d41\u7a0b\uff0c\u4f60\u53ea\u8981\u6309\u7167\u91cc\u9762\u505a\u5c31\u53ef\u4ee5\u4e86\u3002\u201d\n\n\u5c0f\u9a6c\u63a5\u8fc7 BIOS \u5c0f\u518c\u5b50\uff0c\u5f00\u59cb\u6309\u7167\u91cc\u9762\u7684\u6307\u4ee4\u542f\u52a8\u516c\u53f8\u4e86\u3002\n\n\u521b\u4e1a\u521d\u671f\uff0c\u5c0f\u9a6c\u7684\u529e\u516c\u5ba4\u80af\u5b9a\u5f88\u5c0f\uff0c\u53ea\u6709\u6709 1M \u7684\u5185\u5b58\u529e\u516c\u7a7a\u95f4\u3002\u5728 1M \u7a7a\u95f4\u6700\u4e0a\u9762\u7684 0xF0000 \u5230 0xFFFFF \u8fd9 64K \u6620\u5c04\u7ed9 ROM\uff0c\u901a\u8fc7\u8bfb\u8fd9\u90e8\u5206\u5730\u5740\uff0c\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a BIOS \u5c0f\u518c\u5b50\u91cc\u9762\u7684\u6307\u4ee4\u3002\n\n\u521b\u4e1a\u6307\u5bfc\u624b\u518c\u7b2c\u4e00\u6761\uff0cBIOS \u8981\u68c0\u67e5\u4e00\u4e9b\u7cfb\u7edf\u7684\u786c\u4ef6\u662f\u4e0d\u662f\u90fd\u597d\u7740\u5462\u3002\u521b\u4e1a\u6307\u5bfc\u624b\u518c\u7b2c\u4e8c\u6761\uff0c\u8981\u6709\u4e2a\u529e\u4e8b\u5927\u5385\uff0c\u53ea\u4e0d\u8fc7\u5c0f\u9a6c\u81ea\u5df1\u5c31\u662f\u529e\u4e8b\u5458\u3002\u56e0\u4e3a\u4e00\u65e6\u5f00\u5f20\u8425\u4e1a\uff0c\u5c31\u4f1a\u6709\u4eba\u6765\u627e\u5230\u8fd9\u5bb6\u516c\u53f8\uff0c\u56e0\u800c\u57fa\u672c\u7684\u4e2d\u65ad\u5411\u91cf\u8868\u548c\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u8fd8\u662f\u9700\u8981\u7684\uff0c\u81f3\u5c11\u8981\u80fd\u591f\u4f7f\u7528\u952e\u76d8\u548c\u9f20\u6807\u3002\n\nBIOS \u8fd9\u4e2a\u624b\u518c\u7a7a\u95f4\u6709\u9650\uff0c\u53ea\u80fd\u5e2e\u5c0f\u9a6c\u628a\u516c\u53f8\u5efa\u7acb\u8d77\u6765\uff0c\u516c\u53f8\u5982\u4f55\u8fd0\u8f6c\u548c\u7ecf\u8425\uff0c\u5c31\u9700\u8981\u53e6\u5916\u4e00\u4e2a\u4e1c\u897f\u2014\u2014\u300a\u4f01\u4e1a\u7ecf\u8425\u5b9d\u5178\u300b\uff0c\u56e0\u800c BIOS \u8fd8\u8981\u505a\u7684\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5c31\u662f\u5e2e\u52a9\u5c0f\u9a6c\u627e\u5230\u8fd9\u4e2a\u5b9d\u5178\uff0c\u7136\u540e\u8ba9\u5c0f\u9a6c\u4ee5\u540e\u6839\u636e\u8fd9\u4e2a\u5b9d\u5178\u91cc\u9762\u7684\u65b9\u6cd5\u6765\u7ecf\u8425\u516c\u53f8\uff0c\u8fd9\u4e2a\u300a\u4f01\u4e1a\u7ecf\u8425\u5b9d\u5178\u300b\u5c31\u662f\u8fd9\u5bb6\u516c\u53f8\u7684\u5185\u6838\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/BIOS.jpeg",alt:"BIOS.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd0\u8425\u4e00\u4e2a\u4f01\u4e1a\u975e\u5e38\u7684\u590d\u6742\uff0c\u56e0\u800c\u8fd9\u672c\u300a\u4f01\u4e1a\u7ecf\u8425\u5b9d\u5178\u300b\u4e5f\u5f88\u539a\uff0cBIOS \u624b\u518c\u65e0\u6cd5\u76f4\u63a5\u52a0\u8f7d\u51fa\u6765\uff0c\u800c\u9700\u8981\u4ece\u95e8\u536b\u5f00\u59cb\u95ee\u8d77\uff0c\u4e0d\u65ad\u6253\u542c\u8fd9\u672c\u5185\u6838\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u624d\u80fd\u52a0\u8f7d\u4ed6\u3002\n\n\u95e8\u536b\u53ea\u6709\u5df4\u638c\u5927\u7684\u4e00\u5757\u5730\u65b9\uff0c\u5728\u542f\u52a8\u76d8\u7684\u7b2c\u4e00\u4e2a\u6247\u533a\uff0c512K \u7684\u5927\u5c0f\uff0c\u6211\u4eec\u901a\u5e38\u79f0\u4e3a MBR\uff08Master Boot Record\uff0c\u4e3b\u5f15\u5bfc\u8bb0\u5f55/\u6247\u533a\uff09\u3002\u8fd9\u91cc\u4fdd\u5b58\u4e86 boot.img\uff0cBIOS \u624b\u518c\u4f1a\u5c06\u4ed6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684 0x7c00 \u6765\u8fd0\u884c\u3002\n\nboot.img \u505a\u4e0d\u4e86\u592a\u591a\u7684\u4e8b\u60c5\u3002\u4ed6\u80fd\u505a\u7684\u6700\u91cd\u8981\u7684\u4e00\u4e2a\u4e8b\u60c5\uff0c\u5c31\u662f\u52a0\u8f7d grub2 \u7684\u53e6\u4e00\u4e2a\u955c\u50cf core.img\u3002\n\n\u5f15\u5bfc\u6247\u533a\u5c31\u662f\u5c0f\u9a6c\u627e\u5230\u7684\u95e8\u536b\uff0c\u867d\u7136\u4ed6\u770b\u7740\u6863\u6848\u5e93\u7684\u5927\u95e8\uff0c\u4f46\u662f\u77e5\u9053\u7684\u4e8b\u60c5\u5f88\u5c11\u3002\u4ed6\u4e0d\u77e5\u9053\u5b9d\u5178\u5728\u54ea\u91cc\uff0c\u4f46\u662f\uff0c\u4ed6\u77e5\u9053\u5e94\u8be5\u95ee\u8c01\u3002\u95e8\u536b\u8bf4\uff0c\u6863\u6848\u5e93\u5165\u53e3\u5904\u6709\u4e2a\u7ba1\u7406\u5904\uff0c\u7136\u540e\u628a\u5c0f\u9a6c\u9886\u5230\u95e8\u53e3\u3002\n\ncore.img \u5c31\u662f\u7ba1\u7406\u5904\uff0c\u4ed6\u4eec\u77e5\u9053\u7684\u548c\u80fd\u505a\u7684\u4e8b\u60c5\u5c31\u591a\u4e86\u4e00\u4e9b\u3002core.img \u7531 lzma_decompress.img\u3001diskboot.img\u3001kernel.img \u548c\u4e00\u7cfb\u5217\u7684\u6a21\u5757\u7ec4\u6210\uff0c\u529f\u80fd\u6bd4\u8f83\u4e30\u5bcc\uff0c\u80fd\u505a\u5f88\u591a\u4e8b\u60c5\u3002\n\nboot.img \u5c06\u63a7\u5236\u6743\u4ea4\u7ed9 diskboot.img \u540e\uff0cdiskboot.img \u7684\u4efb\u52a1\u5c31\u662f\u5c06 core.img \u7684\u5176\u4ed6\u90e8\u5206\u52a0\u8f7d\u8fdb\u6765\uff0c\u5148\u662f\u89e3\u538b\u7f29\u7a0b\u5e8f lzma_decompress.img\uff0c\u518d\u5f80\u4e0b\u662f kernel.img\uff0c\u6700\u540e\u662f\u5404\u4e2a\u6a21\u5757 module \u5bf9\u5e94\u7684\u6620\u50cf\u3002\n\n\u7ba1\u7406\u5904\u542c\u8bf4\u5c0f\u9a6c\u8981\u627e\u5b9d\u5178\uff0c\u77e5\u9053\u4ed6\u5c06\u6765\u662f\u8981\u505a\u8001\u677f\u7684\u4eba\u3002\u7ba1\u7406\u5904\u5c31\u544a\u8bc9\u5c0f\u9a6c\uff0c\u65e2\u7136\u662f\u8001\u677f\uff0c\u65e9\u665a\u90fd\u8981\u96c7\u4eba\u5e72\u6d3b\u7684\u3002\u8fd9\u4e0d\u662f\u4e2a\u4f53\u6237\u5c0f\u6253\u5c0f\u95f9\uff0c\u6240\u4ee5\uff0c\u4f60\u9700\u8981\u5207\u6362\u5230\u8001\u677f\u89d2\u8272\uff0c\u8fdb\u5165\u4fdd\u62a4\u6a21\u5f0f\uff0c\u628a\u54ea\u4e9b\u662f\u4f60\u7684\u6743\u9650\uff0c\u54ea\u4e9b\u662f\u4f60\u53ef\u4ee5\u6388\u6743\u7ed9\u522b\u4eba\u7684\uff0c\u90fd\u5206\u5f97\u6e05\u6e05\u695a\u695a\u3002\n\n\u8fd9\u4e9b\uff0c\u5c0f\u9a6c\u90fd\u94ed\u8bb0\u5728\u5fc3\uff0c\u6b64\u65f6\u6b64\u523b\uff0c\u867d\u7136\u516c\u53f8\u8fd8\u662f\u53ea\u6709\u4ed6\u4e00\u4e2a\u4eba\uff0c\u4f46\u662f\u5c0f\u9a6c\u7684\u773c\u754c\u653e\u5bbd\u4e86\uff0c\u80fd\u591f\u7ba1\u7406\u7684\u5185\u5b58\u7a7a\u95f4\u5927\u591a\u4e86\uff0c\u4e5f\u5f00\u59cb\u533a\u5206\u54ea\u4e9b\u662f\u7528\u6237\u6001\uff0c\u54ea\u4e9b\u662f\u5185\u6838\u6001\u4e86\u3002\n\n\u63a5\u4e0b\u6765\uff0ckernel.img \u91cc\u9762\u7684 grub_main \u4f1a\u7ed9\u5c0f\u9a6c\u5c55\u793a\u4e00\u4e2a\u300a\u4f01\u4e1a\u7ecf\u8425\u5b9d\u5178\u300b\u7684\u5217\u8868\uff0c\u4e5f\u5373\u64cd\u4f5c\u7cfb\u7edf\u7684\u5217\u8868\uff0c\u8ba9\u5c0f\u9a6c\u8fdb\u884c\u9009\u62e9\u3002\u7ecf\u8425\u4f01\u4e1a\u7684\u65b9\u5f0f\u4e5f\u6709\u5f88\u591a\u79cd\uff0c\u5230\u5e95\u662f\u4eba\u6027\u5316\u7684\uff0c\u8fd8\u662f\u5f3a\u7eaa\u5f8b\u7684\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u8981\u505a\u4e00\u4e2a\u9009\u62e9\u3002\n\n\u5728\u8fd9\u91cc\uff0c\u5c0f\u9a6c\u6beb\u4e0d\u72b9\u8c6b\u5730\u9009\u62e9\u4e86\u300a\u72fc\u6027\u6587\u5316\u300b\u64cd\u4f5c\u7cfb\u7edf\uff0c\u81f3\u6b64 grub \u624d\u5f00\u59cb\u542f\u52a8\u300a\u72fc\u6027\u6587\u5316\u300b\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u3002\n\n\u62ff\u5230\u4e86\u5b9d\u5178\u7684\u5c0f\u9a6c\uff0c\u5f00\u59cb\u8d8a\u6765\u8d8a\u50cf\u4e00\u4e2a\u8001\u677f\u4e86\u3002\u4ed6\u8981\u5f00\u59cb\u4ee5\u8001\u677f\u7684\u601d\u7ef4\uff0c\u6765\u5efa\u7acb\u8fd9\u5bb6\u516c\u53f8\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u516c\u53f8\u9996\u5148\u5e94\u8be5\u6709\u4e2a\u9879\u76ee\u7ba1\u7406\u90e8\u95e8\uff0c\u54b1\u4eec\u5c06\u6765\u80af\u5b9a\u8981\u63a5\u5404\u79cd\u5404\u6837\u7684\u9879\u76ee\uff0c\u56e0\u6b64\uff0c\u9879\u76ee\u7ba1\u7406\u4f53\u7cfb\u548c\u9879\u76ee\u7ba1\u7406\u6d41\u7a0b\u9996\u5148\u8981\u5efa\u7acb\u8d77\u6765\u3002\u867d\u7136\u73b0\u5728\u8fd8\u6ca1\u6709\u9879\u76ee\uff0c\u4f46\u662f\u5c0f\u9a6c\u8fd8\u662f\u5f04\u4e86\u4e00\u4e2a\u9879\u76ee\u6a21\u677f init_task\u3002\u8fd9\u662f\u516c\u53f8\u7684\u7b2c\u4e00\u4e2a\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\uff0c\u662f\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\u91cc\u9762\u7684\u9879\u76ee\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\uff0c\u6211\u4eec\u80fd\u79f0\u4e3a 0 \u53f7\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u9879\u76ee\u662f\u865a\u62df\u7684\uff0c\u4e0d\u5bf9\u5e94\u4e00\u4e2a\u771f\u5b9e\u7684\u9879\u76ee\uff08\u4e5f\u5c31\u662f\u8fdb\u7a0b\uff09\u3002\n\n\u9879\u76ee\u9700\u8981\u9879\u76ee\u7ba1\u7406\u8fdb\u884c\u8c03\u5ea6\uff0c\u8fd8\u9700\u8981\u5236\u5b9a\u4e00\u4e9b\u8c03\u5ea6\u7b56\u7565\u3002\n\n\u53e6\u5916\uff0c\u4e3a\u4e86\u5feb\u901f\u54cd\u5e94\u5ba2\u6237\u9700\u6c42\uff0c\u4e3a\u4e86\u5404\u4e2a\u9879\u76ee\u7ec4\u80fd\u591f\u65b9\u4fbf\u5730\u4f7f\u7528\u516c\u53f8\u7684\u516c\u5171\u8d44\u6e90\uff0c\u8fd8\u5e94\u8be5\u6709\u4e00\u4e2a\u529e\u4e8b\u5927\u5385\u3002\u8fd9\u91cc\u9762\u53ef\u4ee5\u8bbe\u7f6e\u4e86\u5f88\u591a\u4e2d\u65ad\u95e8\uff08Interrupt Gate\uff09\uff0c\u7528\u4e8e\u5904\u7406\u5404\u79cd\u4e2d\u65ad\uff0c\u4ee5\u4fbf\u5feb\u901f\u54cd\u5e94\u7a81\u53d1\u4e8b\u4ef6\uff1b\u8fd8\u53ef\u4ee5\u63d0\u4f9b\u7cfb\u7edf\u8c03\u7528\uff0c\u4e3a\u9879\u76ee\u7ec4\u670d\u52a1\u3002\n\n\u5982\u679c\u9879\u76ee\u63a5\u5f97\u591a\u4e86\uff0c\u4e3a\u4e86\u63d0\u9ad8\u7814\u53d1\u6548\u7387\uff0c\u5bf9\u9879\u76ee\u5185\u5bb9\u8fdb\u884c\u4fdd\u5bc6\uff0c\u5c31\u9700\u8981\u5c01\u95ed\u5f00\u53d1\uff0c\u6240\u4ee5\u5c06\u6765\u4f1a\u6709\u5f88\u591a\u7684\u4f1a\u8bae\u5ba4\uff0c\u56e0\u800c\u8fd8\u9700\u8981\u4e00\u4e2a\u4f1a\u8bae\u5ba4\u7ba1\u7406\u7cfb\u7edf\u3002\n\n\u9879\u76ee\u7684\u6267\u884c\u80af\u5b9a\u4f1a\u7559\u4e0b\u5f88\u591a\u6587\u6863\uff0c\u8fd9\u4e9b\u662f\u516c\u53f8\u7684\u79ef\u7d2f\uff0c\u5c06\u6765\u7684\u6838\u5fc3\u7ade\u4e89\u529b\uff0c\u4e00\u5b9a\u8981\u597d\u597d\u7ba1\u7406\uff0c\u56e0\u800c\u5e94\u8be5\u5efa\u7acb\u4e00\u4e2a\u9879\u76ee\u6863\u6848\u5e93\uff0c\u4e5f\u5373\u6587\u4ef6\u7cfb\u7edf\u3002\n\n...\n\n\u7b2c\u4e8c\u5929\uff0c\u5c0f\u9a6c\u8bf7\u5468\u745c\u548c\u5f20\u662d\u5403\u996d\uff0c\u9080\u8bf7\u4ed6\u4eec\u52a0\u5165\u4ed6\u7684\u521b\u4e1a\u516c\u53f8\u3002\u5c0f\u9a6c\u8bf4\uff0c\u516c\u53f8\u8981\u6b63\u89c4\u8fd0\u8f6c\u8d77\u6765\uff0c\u5e94\u8be5\u5206\u6e05\u5185\u5916\uff0c\u5916\u90e8\u9879\u76ee\u9700\u8981\u6709\u4eba\u5e2e\u5fd9\u7ba1\u7406\u597d\u2014\u2014\u4e5f\u5c31\u662f\u7528\u6237\u6001\uff0c\u5185\u90e8\u516c\u53f8\u7684\u6838\u5fc3\u8d44\u6e90\u4e5f\u9700\u8981\u7ba1\u7406\u597d\u2014\u2014\u4e5f\u5c31\u662f\u5185\u6838\u6001\u3002\u73b0\u5728\u6211\u4e00\u4e2a\u4eba\u5fd9\u4e0d\u8fc7\u6765\uff0c\u9700\u8981\u4e24\u4f4d\u5144\u5f1f\u7684\u52a0\u5165\uff0c\u5468\u745c\u4e3b\u5916\uff0c\u5f20\u662d\u4e3b\u5185\uff0c\u6b63\u6240\u8c13\uff0c\u5185\u4e8b\u4e0d\u51b3\u95ee\u5f20\u662d\uff0c\u5916\u4e8b\u4e0d\u51b3\u95ee\u5468\u90ce\u561b\u3002\n\n\u7b2c\u4e09\u5929\uff0c\u5468\u745c\u65e9\u65e9\u5c31\u6765\u5230\u516c\u53f8\uff0c\u5f00\u59cb\u4e86\u4ed6\u7684\u4e8b\u4e1a\u3002\u5c0f\u9a6c\u62dc\u6258\u5468\u745c\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u662f\u8c03\u7528 kernel_init \u8fd0\u884c 1 \u53f7\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\u3002\u8fd9\u4e2a 1 \u53f7\u9879\u76ee\u4f1a\u5728\u7528\u6237\u6001\u8fd0\u884c init \u9879\u76ee\uff08\u8fdb\u7a0b\uff09\u3002\u8fd9\u662f\u7b2c\u4e00\u4e2a\u4ee5\u5916\u90e8\u9879\u76ee\u7684\u540d\u4e49\u8fd0\u884c\u7684\uff0c\u4e4b\u6240\u4ee5\u53eb init\uff0c\u5c31\u662f\u505a\u521d\u59cb\u5316\u7684\u5de5\u4f5c\uff0c\u5468\u745c\u6839\u636e\u81ea\u5df1\u591a\u5e74\u7684\u9879\u76ee\u7ba1\u7406\u7ecf\u9a8c\uff0c\u5c06\u8fd9\u4e2a init \u9879\u76ee\u7acb\u4e3a\u6807\u6746\uff0c\u4ee5\u540e\u6240\u6709\u5916\u90e8\u9879\u76ee\u7684\u8fd0\u884c\u90fd\u8981\u6309\u7167\u4ed6\u6765\uff0c\u662f\u5916\u90e8\u9879\u76ee\u7684\u7956\u5148\u9879\u76ee\u3002\n\n\u4e0b\u5348\uff0c\u5f20\u662d\u4e5f\u6765\u5230\u4e86\u516c\u53f8\uff0c\u5c0f\u9a6c\u62dc\u6258\u5f20\u662d\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u662f\u8c03\u7528 kthreadd \u8fd0\u884c 2 \u53f7\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\u3002\u8fd9\u4e2a 2 \u53f7\u9879\u76ee\u662f\u5185\u6838\u9879\u76ee\u7684\u7956\u5148\u3002\u5c06\u6765\u6240\u6709\u7684\u9879\u76ee\u90fd\u6709\u7236\u9879\u76ee\u3001\u7956\u5148\u9879\u76ee\uff0c\u4f1a\u5f62\u6210\u4e00\u68f5\u9879\u76ee\u6811\u3002\u516c\u53f8\u5927\u4e86\u4e4b\u540e\uff0c\u5468\u745c\u548c\u5f20\u662d\u505a\u7684\u516c\u53f8 VP \u7ea7\u522b\u7684\u4efb\u52a1\uff0c\u5c31\u53ef\u4ee5\u5750\u5728\u5854\u5c16\u4e0a\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u622a\u6b62\u8fd9\u91cc\uff0c\u8fd8\u662f\u6211\u4eec\u4e4b\u524d\u7684\u6bd4\u65b9\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u662f\u516c\u53f8\uff0c\u5185\u6838\u5c31\u662f\u8001\u677f\uff0cBIOS\uff08\u6216\u8005 UEFI\uff09\u5c31\u662f\u653f\u5e9c\uff08\u786c\u4ef6\uff09\u5f00\u516c\u53f8\u7684\u6d41\u7a0b\uff08BIOS/UEFI \u56fa\u4ef6\u76f4\u63a5\u5d4c\u5165\u8ba1\u7b97\u673a\u4e3b\u677f\uff09\uff0cCPU \u5c31\u662f\u5458\u5de5\uff0c\u6587\u4ef6\u7cfb\u7edf\u5c31\u662f\u516c\u53f8\u7684\u6863\u6848\u5e93\uff0c\uff0c0 \u53f7\u8fdb\u7a0b\u5c31\u662f\u9879\u76ee\u6a21\u677f\uff0c\u8fdb\u7a0b\u6811\u5c31\u662f\u9879\u76ee\u6811\uff08\u6bd4\u5982\u516c\u53f8\u9879\u76ee\u5185\u90e8\u5d4c\u5957\u7684\u5404\u79cd\u9879\u76ee\uff09"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e0a\u4e00\u8282\u8bf4\u5230\u5c0f\u9a6c\u540c\u5b66\u7684\u516c\u53f8\u5df2\u7ecf\u521b\u7acb\u4e86\uff0c\u8fd8\u8bf7\u6765\u4e86\u5468\u745c\u548c\u5f20\u662d\u4f5c\u4e3a\u5e2e\u624b\uff0c\u6240\u8c13\u201c\u5144\u5f1f\u9f50\u5fc3\uff0c\u5176\u5229\u65ad\u91d1\u201d\u3002\u53ef\u662f\uff0c\u73b0\u5728\u8fd9\u5bb6\u516c\u53f8\uff0c\u8fd8\u5f97\u4ece\u63a5\u7b2c\u4e00\u4e2a\u5916\u90e8\u9879\u76ee\u5f00\u59cb\u3002\n\n\u8fd9\u7b2c\u4e00\u4e2a\u9879\u76ee\uff0c\u8fd8\u662f\u5c0f\u9a6c\u4eb2\u81ea\u53bb\u8c08\u7684\u3002\u5176\u5b9e\u8f6f\u4ef6\u516c\u53f8\u4e86\u89e3\u5ba2\u6237\u9700\u6c42\u8fd8\u662f\u6bd4\u8f83\u96be\u7684\uff0c\u56e0\u4e3a\u5ba2\u6237\u90fd\u8bf4\u7740\u63a5\u8fd1\u4eba\u7c7b\u7684\u8bed\u8a00\uff0c\u4f8b\u5982 C/C++\u3002\u8fd9\u4e9b\u54b1\u4eec\u516c\u53f8\u62db\u8058\u7684 CPU \u5c0f\u4f19\u4f34\u4eec\u53ef\u542c\u4e0d\u61c2\uff0c\u9700\u8981\u6709\u4e00\u4e2a\u4eba\u5c06\u5ba2\u6237\u9700\u6c42\uff0c\u8f6c\u6362\u4e3a\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0cCPU \u5c0f\u4f19\u4f34\u4eec\u624d\u80fd\u6267\u884c\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u6211\u4eec\u79f0\u4e3a\u7f16\u8bd1\u3002\n\n\u7f16\u8bd1\u5176\u5b9e\u662f\u4e00\u4e2a\u9700\u6c42\u5206\u6790\u548c\u9700\u6c42\u8f6c\u6362\u7684\u8fc7\u7a0b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u5c06\u63a5\u8fd1\u4eba\u7c7b\u7684 C/C++ \u8bed\u8a00\uff0c\u8f6c\u6362\u4e3a CPU \u5c0f\u4f19\u4f34\u80fd\u591f\u542c\u61c2\u7684\u4e8c\u8fdb\u5236\u8bed\u8a00\uff0c\u5e76\u4e14\u4ee5\u4e00\u5b9a\u7684\u6587\u6863\u683c\u5f0f\uff0c\u5199\u6210\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u3002\u8fd9\u79cd\u6587\u6863\u683c\u5f0f\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6807\u51c6\u5316\u7684\u516c\u53f8\u4e8b\u5148\u5236\u5b9a\u597d\u7684\u4e00\u79cd\u683c\u5f0f\uff0c\u662f\u5468\u745c\u4ece\u5927\u516c\u53f8\u91cc\u9762\u501f\u9274\u6765\u7684\uff0c\u79f0\u4e3a ELF \u683c\u5f0f\uff0c\u8fd9\u4e2a\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u6709\u603b\u8bba ELF Header \u7684\u90e8\u5206\uff0c\u6709\u5305\u542b\u6307\u4ee4\u7684\u4ee3\u7801\u6bb5\u7684\u90e8\u5206\uff0c\u6709\u5305\u542b\u5168\u5c40\u53d8\u91cf\u7684\u6570\u636e\u6bb5\u7684\u90e8\u5206\u3002\n\n\u5c0f\u9a6c\u548c\u5ba2\u6237\u804a\u4e86\u6574\u6574\u4e00\u5929\uff0c\u786e\u8ba4\u4e86\u9879\u76ee\u7684\u6bcf\u4e00\u4e2a\u7ec6\u8282\uff0c\u4fdd\u8bc1\u7f16\u8bd1\u80fd\u591f\u901a\u8fc7\uff0c\u624d\u5199\u6210\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66 ELF \u6587\u4ef6\uff0c\u653e\u5230\u6863\u6848\u5e93\u4e2d\u3002\u6b64\u65f6\u5df2\u7ecf\u534a\u591c\u4e86\u3002\n\n\u7b2c\u4e8c\u5929\uff0c\u5468\u745c\u4e00\u5230\u516c\u53f8\uff0c\u5c0f\u9a6c\u5c31\u5174\u594b\u5730\u7ed9\u5468\u745c\u8bf4\uff0c\u201c\u6211\u6628\u5929\u63a5\u5230\u4e86\u7b2c\u4e00\u4e2a\u9879\u76ee\uff0c\u800c\u4e14\u662f\u4e00\u4e2a\u5927\u9879\u76ee\uff0c\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u6211\u90fd\u5199\u597d\u4e86\uff0c\u4f60\u5e2e\u6211\u76d1\u7763\u3001\u6267\u884c\u3001\u7ba1\u7406\uff0c\u8bb0\u5f97\u6309\u65f6\u4ea4\u4ed8\u54e6\uff01\u201d\n\n\u5468\u745c\u8bf4\uff0c\u201c\u6ca1\u95ee\u9898\u3002\u201d\u4e8e\u662f\uff0c\u5468\u745c\u4ece\u7236\u9879\u76ee\u5f00\u59cb\uff0cfork \u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u7136\u540e\u5728\u5b50\u9879\u76ee\u4e2d\uff0c\u8c03\u7528 exec \u7cfb\u7edf\u8c03\u7528\uff0c\u7136\u540e\u5230\u4e86\u5185\u6838\u91cc\u9762\uff0c\u901a\u8fc7 load_elf_binary \u5c06\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u52a0\u8f7d\u5230\u5b50\u8fdb\u7a0b\u5185\u5b58\u4e2d\uff0c\u4ea4\u7ed9\u4e00\u4e2a CPU \u6267\u884c\u3002\n\n\u867d\u7136\u8fd9\u662f\u7b2c\u4e00\u4e2a\u9879\u76ee\uff0c\u4ee5\u5468\u745c\u7684\u9879\u76ee\u7ba1\u7406\u7ecf\u9a8c\uff0c\u4ed6\u544a\u8bc9\u5c0f\u9a6c\uff0c\u9879\u76ee\u7684\u6267\u884c\u8981\u4fdd\u8d28\u4fdd\u91cf\uff0c\u9700\u8981\u6709\u4e00\u5957\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\u6765\u7ba1\u7406\u9879\u76ee\u7684\u72b6\u6001\uff0c\u800c\u4e0d\u80fd\u9760\u8111\u5b50\u8bb0\u3002\u201c\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\uff1f\u5f53\u7136\u5e94\u8be5\u6709\u4e86\u201d\uff0c\u5c0f\u9a6c\u8bf4\u3002\u4ed6\u5728\u300a\u4f01\u4e1a\u7ecf\u8425\u5b9d\u5178\u300b\u4e2d\u770b\u5230\u8fc7\u3002\n\n\u4e8e\u662f\uff0c\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\u5c31\u642d\u5efa\u8d77\u6765\u4e86\u3002\u5728\u8fd9\u91cc\u9762\uff0c\u6240\u6709\u9879\u76ee\u90fd\u653e\u5728\u4e00\u4e2a task_struct \u5217\u8868\u4e2d\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u9879\u76ee\uff0c\u90fd\u975e\u5e38\u8be6\u7ec6\u5730\u767b\u8bb0\u4e86\u9879\u76ee\u65b9\u65b9\u9762\u9762\u7684\u4fe1\u606f\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u524d\u9762\u8bf4\u4e86\uff0cCPU \u5728\u516c\u53f8\u91cc\u5c31\u50cf\u662f\u591a\u624b\u5de5\u4e1a\u673a\u5668\u4eba\uff0c\u53ea\u80fd\u770b\u61c2 ELF\uff0c\u9700\u8981\u6709\u4eba\u628a\u5ba2\u6237\u9700\u6c42\u8f6c\u5316\u6210 ELF\uff0c\u8fd9\u5c31\u662f\u7f16\u8bd1\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/task_struct.jpeg",alt:"task_struct.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6bcf\u4e00\u4e2a\u9879\u76ee\u90fd\u5e94\u8be5\u6709\u4e00\u4e2a ID\uff0c\u4f5c\u4e3a\u8fd9\u4e2a\u9879\u76ee\u7684\u552f\u4e00\u6807\u8bc6\u3002\u5230\u65f6\u5019\u6392\u671f\u554a\u3001\u4e0b\u53d1\u4efb\u52a1\u554a\u7b49\u7b49\uff0c\u90fd\u6309 ID \u6765\uff0c\u5c31\u4e0d\u4f1a\u4ea7\u751f\u6b67\u4e49\u3002\n\n\u9879\u76ee\u5e94\u8be5\u6709\u8fd0\u884c\u4e2d\u7684\u72b6\u6001\uff0cTASK_RUNNING \u5e76\u4e0d\u662f\u8bf4\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c\uff0c\u800c\u662f\u8868\u793a\u8fdb\u7a0b\u5728\u65f6\u523b\u51c6\u5907\u8fd0\u884c\u7684\u72b6\u6001\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u8981\u770b CPU \u5c0f\u4f19\u4f34\u6709\u6ca1\u6709\u7a7a\uff0c\u6709\u7a7a\u5c31\u8fd0\u884c\u4ed6\uff0c\u6ca1\u7a7a\u5c31\u5f97\u7b49\u7740\u3002\n\n\u6709\u65f6\u5019\uff0c\u8fdb\u7a0b\u8fd0\u884c\u5230\u4e00\u534a\uff0c\u9700\u8981\u7b49\u5f85\u67d0\u4e2a\u6761\u4ef6\u624d\u80fd\u8fd0\u884c\u4e0b\u53bb\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ea\u80fd\u7761\u7720\u3002\u7761\u7720\u72b6\u6001\u6709\u4e24\u79cd\u3002\u4e00\u79cd\u662f TASK_INTERRUPTIBLE\uff0c\u53ef\u4e2d\u65ad\u7684\u7761\u7720\u72b6\u6001\u3002\u8fd9\u662f\u4e00\u79cd\u6d45\u7761\u7720\u7684\u72b6\u6001\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u867d\u7136\u5728\u7761\u7720\uff0c\u7b49\u6761\u4ef6\u6210\u719f\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u88ab\u5524\u9192\u3002\n\n\u53e6\u4e00\u79cd\u7761\u7720\u662f TASK_UNINTERRUPTIBLE\uff0c\u4e0d\u53ef\u4e2d\u65ad\u7684\u7761\u7720\u72b6\u6001\u3002\u8fd9\u662f\u4e00\u79cd\u6df1\u5ea6\u7761\u7720\u72b6\u6001\uff0c\u4e0d\u53ef\u88ab\u5524\u9192\uff0c\u53ea\u80fd\u6b7b\u7b49\u6761\u4ef6\u6ee1\u8db3\u3002\u6709\u4e86\u4e00\u79cd\u65b0\u7684\u8fdb\u7a0b\u7761\u7720\u72b6\u6001\uff0cTASK_KILLABLE\uff0c\u53ef\u4ee5\u7ec8\u6b62\u7684\u65b0\u7761\u7720\u72b6\u6001\u3002\u8fdb\u7a0b\u5904\u4e8e\u8fd9\u79cd\u72b6\u6001\u4e2d\uff0c\u4ed6\u7684\u8fd0\u884c\u539f\u7406\u7c7b\u4f3c TASK_UNINTERRUPTIBLE\uff0c\u53ea\u4e0d\u8fc7\u53ef\u4ee5\u54cd\u5e94\u81f4\u547d\u4fe1\u53f7\uff0c\u4e5f\u5373\u867d\u7136\u5728\u6df1\u5ea6\u7761\u7720\uff0c\u4f46\u662f\u53ef\u4ee5\u88ab\u5e72\u6389\u3002\n\n\u4e00\u65e6\u4e00\u4e2a\u8fdb\u7a0b\u8981\u7ed3\u675f\uff0c\u5148\u8fdb\u5165\u7684\u662f EXIT_ZOMBIE \u72b6\u6001\uff0c\u4f46\u662f\u8fd9\u4e2a\u65f6\u5019\u4ed6\u7684\u7236\u8fdb\u7a0b\u8fd8\u6ca1\u6709\u4f7f\u7528 wait() \u7b49\u7cfb\u7edf\u8c03\u7528\u6765\u83b7\u77e5\u4ed6\u7684\u7ec8\u6b62\u4fe1\u606f\uff0c\u6b64\u65f6\u8fdb\u7a0b\u5c31\u6210\u4e86\u50f5\u5c38\u8fdb\u7a0b\u3002\n\nEXIT_DEAD \u662f\u8fdb\u7a0b\u7684\u6700\u7ec8\u72b6\u6001\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u8bf4\u7684\u662f\u8fdb\u7a0b\u72b6\u6001\u4e86\uff0cRWSZ \u6ca1\u5565\u597d\u8bf4\u7684\uff0c\u5176\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u8fd8\u662f waiting \u72b6\u6001"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fdb\u7a0b\u7684\u51e0\u79cd waiting \u72b6\u6001\uff0c\u5206\u522b\u4ec0\u4e48\u65f6\u5019\u4f1a\u5207\u5165 TASK_INTERRUPTIBLE \u6d45\u7761\u7720\u3001TASK_UNINTERRUPTIBLE \u6df1\u7761\u7720\u3001TASK_KILLABLE \u53ef\u6740\u6b7b\u7761\u7720\uff1f\n\n---\n\n\u8c1c\u5e95\u5c31\u5728\u8c1c\u9762\u4e0a\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/task_status.jpeg",alt:"task_status.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u53e6\u5916\uff0c\u9879\u76ee\u8fd0\u884c\u7684\u7edf\u8ba1\u4fe1\u606f\u4e5f\u975e\u5e38\u91cd\u8981\u3002\u4f8b\u5982\uff0c\u6709\u7684\u5458\u5de5\u5f88\u957f\u65f6\u95f4\u90fd\u5728\u505a\u4e00\u4e2a\u4efb\u52a1\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u9700\u8981\u7279\u522b\u5173\u6ce8\u4e00\u4e0b\uff1b\u518d\u5982\uff0c\u6709\u7684\u5458\u5de5\u7684\u7410\u788e\u4efb\u52a1\u592a\u591a\uff0c\u8fd9\u4f1a\u5927\u5927\u5f71\u54cd\u4ed6\u7684\u5de5\u4f5c\u6548\u7387\u3002\n\n\u90a3\u5982\u4f55\u624d\u80fd\u77e5\u9053\u8fd9\u4e9b\u5458\u5de5\u7684\u5de5\u4f5c\u60c5\u51b5\u5462\uff1f\u5728\u8fdb\u7a0b\u7684\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u6709\u4e00\u4e9b\u7edf\u8ba1\u91cf\uff0c\u4f8b\u5982\u8fdb\u7a0b\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u6d88\u8017\u7684\u65f6\u95f4\u3001\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u6b21\u6570\u7b49\u7b49\u3002\n\n\u9879\u76ee\u4e4b\u95f4\u7684\u4eb2\u7f18\u5173\u7cfb\u4e5f\u9700\u8981\u7ef4\u62a4\uff0c\u4efb\u4f55\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u6709\u7236\u8fdb\u7a0b\u3002\u6240\u4ee5\uff0c\u6574\u4e2a\u8fdb\u7a0b\u5176\u5b9e\u5c31\u662f\u4e00\u68f5\u8fdb\u7a0b\u6811\u3002\u800c\u62e5\u6709\u540c\u4e00\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u8fdb\u7a0b\u90fd\u5177\u6709\u5144\u5f1f\u5173\u7cfb\u3002\n\n\u53e6\u5916\uff0c\u5bf9\u4e8e\u9879\u76ee\u6765\u8bb2\uff0c\u9879\u76ee\u7ec4\u6743\u9650\u7684\u63a7\u5236\u4e5f\u5f88\u91cd\u8981\u3002\u4ec0\u4e48\u662f\u9879\u76ee\u7ec4\u6743\u9650\u63a7\u5236\u5462\uff1f\u8fd9\u4e48\u8bf4\u5427\uff0c\u6211\u8fd9\u4e2a\u9879\u76ee\u7ec4\u80fd\u5426\u8bbf\u95ee\u67d0\u4e2a\u6587\u4ef6\uff0c\u80fd\u5426\u8bbf\u95ee\u5176\u4ed6\u7684\u9879\u76ee\u7ec4\uff0c\u4ee5\u53ca\u6211\u8fd9\u4e2a\u9879\u76ee\u7ec4\u80fd\u5426\u88ab\u5176\u4ed6\u9879\u76ee\u7ec4\u8bbf\u95ee\u7b49\u7b49\n\n\u53e6\u5916\uff0c\u9879\u76ee\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5360\u7528\u7684\u516c\u53f8\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u4f1a\u8bae\u5ba4\uff08\u5185\u5b58\uff09\u3001\u6863\u6848\u5e93\uff08\u6587\u4ef6\u7cfb\u7edf\uff09\u4e5f\u9700\u8981\u5728\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\u91cc\u9762\u767b\u8bb0\u3002\n\n\u5468\u745c\u540c\u5b66\u5c06\u9879\u76ee\u767b\u8bb0\u597d\uff0c\u7136\u540e\u5c31\u5206\u914d\u7ed9 CPU \u540c\u5b66\u4eec\u8bf4\uff0c\u5f00\u59cb\u6267\u884c\u5427\u3002\n\n\u597d\u5728\u7b2c\u4e00\u4e2a\u9879\u76ee\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u4e00\u4e2a CPU \u540c\u5b66\u6309\u7167\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u6309\u90e8\u5c31\u73ed\u4e00\u6761\u6761\u5730\u6267\u884c\uff0c\u5f88\u5feb\u5c31\u5b8c\u6210\u4e86\uff0c\u5ba2\u6237\u8bc4\u4ef7\u8fd8\u4e0d\u9519\uff0c\u5f88\u5feb\u6536\u5230\u4e86\u56de\u6b3e\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9879\u76ee\u5927\u4e86\u8981\u5e76\u884c\uff0c\u9879\u76ee\u591a\u4e86\u8981\u6392\u671f\n\u5c0f\u9a6c\u5f88\u5f00\u5fc3\uff0c\u53ef\u8c13\u5f00\u95e8\u7ea2\u3002\u63a5\u7740\uff0c\u7b2c\u4e8c\u4e2a\u9879\u76ee\u5c31\u5230\u6765\u4e86\uff0c\u8fd9\u53ef\u662f\u4e00\u4e2a\u5927\u9879\u76ee\uff0c\u8981\u5e2e\u4e00\u5bb6\u77e5\u540d\u516c\u53f8\u5f00\u53d1\u4e00\u4e2a\u4ea4\u6613\u7f51\u7ad9\uff0c\u5171 200 \u4e2a\u9875\u9762\uff0c\u8fd9\u4e0b\u8981\u8d5a\u7ffb\u4e86\uff0c\u5c31\u662f\u65f6\u95f4\u8981\u5f97\u6bd4\u8f83\u6025\uff0c\u8981\u6c42\u4e24\u4e2a\u661f\u671f\u641e\u5b9a\u3002\n\n\u5c0f\u9a6c\u628a\u9879\u76ee\u5e26\u56de\u6765\uff0c\u5468\u745c\u540c\u5b66\u8bf4\uff0c\u8fd9\u4e2a\u9879\u76ee\u6709\u70b9\u5927\uff0c\u4f30\u8ba1\u4e00\u4e2a CPU \u540c\u5b66\u5e72\u4e0d\u8fc7\u6765\u4e86\uff0c\u4f30\u8ba1\u8981\u591a\u4e2a CPU \u540c\u5b66\u4e00\u8d77\u534f\u4f5c\u4e86\u3002\n\n\u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u5927\u7684\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\uff0c\u5c31\u4e0d\u80fd\u4e00\u4e2a\u4eba\u4ece\u5934\u5e72\u5230\u5c3e\u4e86\uff0c\u8fd9\u6837\u80af\u5b9a\u8d76\u4e0d\u4e0a\u5de5\u671f\u3002\u4e8e\u662f\uff0c\u5468\u745c\u5c06\u4e00\u4e2a\u5927\u9879\u76ee\u62c6\u5206\u6210 20 \u4e2a\u5b50\u9879\u76ee\uff0c\u6bcf\u4e2a\u5b50\u9879\u76ee\u5b8c\u6210 10 \u4e2a\u9875\u9762\uff0c\u4e00\u4e2a\u5927\u9879\u76ee\u7ec4\u4e5f\u5206\u6210 20 \u4e2a\u5c0f\u7ec4\uff0c\u5e76\u884c\u5f00\u53d1\uff0c\u90fd\u5f00\u53d1\u5b8c\u4e86\uff0c\u518d\u505a\u4e00\u6b21\u6574\u5408\uff0c\u8fd9\u80af\u5b9a\u6bd4\u4f9d\u6b21\u5f00\u53d1 200 \u4e2a\u9875\u9762\u5feb\u591a\u4e86\u3002\u5982\u679c\u9879\u76ee\u53eb\u8fdb\u7a0b\uff0c\u90a3\u5b50\u9879\u76ee\u5c31\u53eb\u7ebf\u7a0b\u3002\n\n\u5728 Linux \u91cc\u9762\uff0c\u65e0\u8bba\u662f\u8fdb\u7a0b\uff0c\u8fd8\u662f\u7ebf\u7a0b\uff0c\u5230\u4e86\u5185\u6838\u91cc\u9762\uff0c\u6211\u4eec\u7edf\u4e00\u90fd\u53eb\u4efb\u52a1\uff0c\u7531\u4e00\u4e2a\u7edf\u4e00\u7684\u7ed3\u6784 task_struct \u8fdb\u884c\u7ba1\u7406\u3002\n\n---\n\n\n\u4e0d\u77e5\u9053\u662f\u597d\u6d88\u606f\uff0c\u8fd8\u662f\u574f\u6d88\u606f\uff0c\u8fd9\u4e48\u5927\u4e00\u4e2a\u9879\u76ee\u8fd8\u6ca1\u6709\u505a\u5b8c\uff0c\u65b0\u7684\u9879\u76ee\u53c8\u627e\u4e0a\u95e8\u4e86\u3002\u770b\u6765\u6709\u4e86\u524d\u9762\u7684\u6807\u6746\u5ba2\u6237\uff0c\u540d\u58f0\u7b97\u662f\u6253\u51fa\u53bb\u4e86\uff0c\u4e00\u4e2a\u9879\u76ee\u63a5\u4e00\u4e2a\u5730\u4e0d\u505c\u3002\n\n\u5c0f\u9a6c\u662f\u65e2\u9ad8\u5174\uff0c\u53c8\u72af\u6101\uff0c\u4e8e\u662f\u627e\u5468\u745c\u548c\u5f20\u662d\u5546\u91cf\u5e94\u8be5\u548b\u529e\u3002\u8981\u4e0d\u591a\u62db\u4eba\uff1f\u591a\u6765\u51e0\u4e2a CPU \u5c0f\u4f19\u4f34\uff0c\u5c31\u4e0d\u641e\u5b9a\u4e86\uff1f\u53ef\u662f\u54b1\u4eec\u8fd8\u662f\u5728\u521b\u4e1a\u9636\u6bb5\uff0c\u517b\u4e0d\u8d77\u8fd9\u4e48\u591a\u4eba\u3002\u53e6\u5916\u7684\u529e\u6cd5\u5c31\u662f\uff0c\u4eba\u529b\u590d\u7528\uff0c\u4e00\u4e2a CPU \u5c0f\u4f19\u4f34\u5e72\u591a\u4e2a\u9879\u76ee\uff0c\u5e72\u4e0d\u8fc7\u6765\uff0c\u5c31\u52a0\u52a0\u73ed\uff0c\u5b9e\u5728\u4e0d\u884c\u5c31 996\uff0c\u8fd9\u6837\u5e94\u8be5\u5c31\u6ca1\u95ee\u9898\u4e86\u3002\n\n\u4e00\u65e6\u6d89\u53ca\u4e00\u4e2a CPU \u5c0f\u4f19\u4f34\u540c\u65f6\u53c2\u4e0e\u591a\u4e2a\u9879\u76ee\uff0c\u5c31\u975e\u5e38\u8003\u9a8c\u9879\u76ee\u7ba1\u7406\u7684\u6c34\u5e73\u4e86\u3002\u5982\u4f55\u6392\u671f\u3001\u5982\u4f55\u8c03\u5ea6\uff0c\u662f\u4e00\u4e2a\u5927\u5b66\u95ee\u3002\u4f8b\u5982\uff0c\u6709\u7684\u9879\u76ee\u6bd4\u8f83\u7d27\u6025\uff0c\u5e94\u8be5\u5148\u8fdb\u884c\u6392\u671f\uff1b\u6709\u7684\u9879\u76ee\u53ef\u4ee5\u7f13\u7f13\uff0c\u4f46\u662f\u4e5f\u4e0d\u80fd\u8ba9\u5ba2\u6237\u7b49\u592a\u4e45\u3002\u6240\u4ee5\u8fd9\u4e2a\u8fc7\u7a0b\u975e\u5e38\u590d\u6742\uff0c\u9700\u8981\u5e73\u8861\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bb2\uff0c\u4ed6\u9762\u5bf9\u7684 CPU \u7684\u6570\u91cf\u662f\u6709\u9650\u7684\uff0c\u5e72\u6d3b\u513f\u90fd\u662f\u4ed6\u4eec\uff0c\u4f46\u662f\u8fdb\u7a0b\u6570\u76ee\u8fdc\u8fdc\u8d85\u8fc7 CPU \u7684\u6570\u76ee\uff0c\u56e0\u800c\u5c31\u9700\u8981\u8fdb\u884c\u8fdb\u7a0b\u7684\u8c03\u5ea6\uff0c\u6709\u6548\u5730\u5206\u914d CPU \u7684\u65f6\u95f4\uff0c\u65e2\u8981\u4fdd\u8bc1\u8fdb\u7a0b\u7684\u6700\u5feb\u54cd\u5e94\uff0c\u4e5f\u8981\u4fdd\u8bc1\u8fdb\u7a0b\u4e4b\u95f4\u7684\u516c\u5e73\u3002\n\n\u5982\u4f55\u8c03\u5ea6\u5462\uff1f\u5468\u745c\u80fd\u591f\u60f3\u5230\u7684\u65b9\u5f0f\u5c31\u662f\u6392\u961f\u3002\u6bcf\u4e00\u4e2a CPU \u5c0f\u4f19\u4f34\u65c1\u8fb9\u90fd\u6709\u4e00\u4e2a\u767d\u677f\uff0c\u4e0a\u9762\u5199\u7740\u81ea\u5df1\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\uff0c\u6765\u4e86\u65b0\u4efb\u52a1\u5c31\u5199\u5230\u767d\u677f\u4e0a\uff0c\u505a\u5b8c\u4e86\u5c31\u64e6\u6389\u3002\n\n\u4e00\u4e2a CPU \u4e0a\u6709\u4e00\u4e2a\u961f\u5217\uff0c\u961f\u5217\u91cc\u9762\u662f\u4e00\u7cfb\u5217 sched_entity\uff0c\u6bcf\u4e2a sched_entity \u90fd\u5c5e\u4e8e\u4e00\u4e2a task_struct\uff0c\u4ee3\u8868\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u3002\n\n\u8c03\u5ea6\u8981\u89e3\u51b3\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u6bcf\u4e00\u4e2a CPU \u5c0f\u4f19\u4f34\u6bcf\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u90fd\u8981\u60f3\u4e00\u4e0b\uff0c\u767d\u677f\u4e0a\u8fd9\u4e48\u591a\u9879\u76ee\uff0c\u6211\u5e94\u8be5\u5e72\u54ea\u4e00\u4e2a\uff1fCPU \u7684\u961f\u5217\u91cc\u9762\u6709\u8fd9\u4e48\u591a\u7684\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\uff0c\u5e94\u8be5\u53d6\u51fa\u54ea\u4e00\u4e2a\u6765\u6267\u884c\uff1f\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e2a\u573a\u666f\u4e5f\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u50cf\u6211\u4eec\u5e73\u65f6\u5de5\u4f5c\u65f6\uff0c\u6253\u5f00 kanban \u4e5f\u662f\u4e00\u5806\u5b50\u9879\u76ee\uff08\u4e00\u4e2a CPU \u5bf9\u5e94\u4e00\u5806\u8fdb\u7a0b\uff09\uff0c\u90a3\u80af\u5b9a\u8981\u5148\u60f3\u60f3\u5230\u5e95\u5148\u641e\u54ea\u4e2a\u9879\u76ee\u624d\u662f\u6700\u4f18\u9009\u62e9\u662f\u5427\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/task_sched.jpeg",alt:"task_sched.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u5c31\u662f\u8c03\u5ea6\u89c4\u5219\u6216\u8005\u8c03\u5ea6\u7b97\u6cd5\u7684\u95ee\u9898\u3002\n\n\u5468\u745c\u8bf4\uff0c\u4ed6\u539f\u6765\u5728\u5927\u516c\u53f8\u7684\u65f6\u5019\uff0c\u8c03\u5ea6\u7b97\u6cd5\u5e38\u5e38\u662f\u8fd9\u6837\u8bbe\u8ba1\u7684\u3002\n\n\u4e00\u4e2a\u662f\u516c\u5e73\u6027\uff0c\u5bf9\u4e8e\u63a5\u5230\u7684\u591a\u4e2a\u9879\u76ee\uff0c\u4e0d\u80fd\u539a\u6b64\u8584\u5f7c\u3002\u8fd9\u4e2a\u7b97\u6cd5\u4e3b\u8981\u7531 fair_sched_class \u5b9e\u73b0\uff0cfair \u5c31\u662f\u516c\u5e73\u7684\u610f\u601d\u3002\n\n\u53e6\u4e00\u4e2a\u662f\u4f18\u5148\u7ea7\uff0c\u6709\u7684\u9879\u76ee\u8981\u6025\u4e00\u70b9\uff0c\u5ba2\u6237\u51fa\u7684\u94b1\u591a\uff0c\u6240\u4ee5\u5e94\u8be5\u591a\u5206\u914d\u4e00\u4e9b\u7cbe\u529b\u5728\u9ad8\u4f18\u5148\u7ea7\u7684\u9879\u76ee\u91cc\u9762\u3002\n\n\u5728 Linux \u91cc\u9762\uff0c\u8bb2\u7a76\u7684\u516c\u5e73\u53ef\u4e0d\u662f\u4e00\u822c\u7684\u516c\u5e73\uff0c\u800c\u662f CFS \u8c03\u5ea6\u7b97\u6cd5\uff0cCFS \u5168\u79f0\u662f Completely Fair Scheduling\uff0c\u5b8c\u5168\u516c\u5e73\u8c03\u5ea6\u3002\n\n\u4e3a\u4e86\u516c\u5e73\uff0c\u9879\u76ee\u7ecf\u7406\u9700\u8981\u8bb0\u5f55\u4e0b\u8fdb\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\u3002CPU \u4f1a\u63d0\u4f9b\u4e00\u4e2a\u65f6\u949f\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4\u5c31\u89e6\u53d1\u4e00\u4e2a\u65f6\u949f\u4e2d\u65ad\u3002\u5c31\u50cf\u54b1\u4eec\u7684\u8868\u6ef4\u7b54\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u6211\u4eec\u53eb Tick\u3002CFS \u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u5b89\u6392\u4e00\u4e2a\u865a\u62df\u8fd0\u884c\u65f6\u95f4 vruntime\u3002\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u5728\u8fd0\u884c\uff0c\u968f\u7740\u65f6\u95f4\u7684\u589e\u957f\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u4e2a Tick \u7684\u5230\u6765\uff0c\u8fdb\u7a0b\u7684 vruntime \u5c06\u4e0d\u65ad\u589e\u5927\u3002\u6ca1\u6709\u5f97\u5230\u6267\u884c\u7684\u8fdb\u7a0b vruntime \u4e0d\u53d8\u3002\n\n\u663e\u7136\uff0c\u90a3\u4e9b vruntime \u5c11\u7684\uff0c\u539f\u6765\u53d7\u5230\u4e86\u4e0d\u516c\u5e73\u7684\u5bf9\u5f85\uff0c\u9700\u8981\u7ed9\u4ed6\u8865\u4e0a\uff0c\u6240\u4ee5\u4f1a\u4f18\u5148\u8fd0\u884c\u8fd9\u6837\u7684\u8fdb\u7a0b\u3002\n\n\u8fd9\u6709\u70b9\u513f\u50cf\u8ba9\u4f60\u628a\u4e00\u7b50\u7403\u5e73\u5747\u5206\u5230 N \u4e2a\u53e3\u888b\u91cc\u9762\uff0c\u4f60\u770b\u7740\u54ea\u4e2a\u5c11\uff0c\u5c31\u591a\u653e\u4e00\u4e9b\uff1b\u54ea\u4e2a\u591a\u4e86\uff0c\u5c31\u5148\u4e0d\u653e\u3002\u8fd9\u6837\u7ecf\u8fc7\u591a\u8f6e\uff0c\u867d\u7136\u4e0d\u80fd\u4fdd\u8bc1\u7403\u5b8c\u5168\u4e00\u6837\u591a\uff0c\u4f46\u662f\u4e5f\u5dee\u4e0d\u591a\u516c\u5e73\u3002\n\n---\n\n\u6709\u65f6\u5019\uff0c\u8fdb\u7a0b\u4f1a\u5206\u4f18\u5148\u7ea7\uff0c\u5982\u4f55\u7ed9\u4f18\u5148\u7ea7\u9ad8\u7684\u8fdb\u7a0b\u591a\u5206\u65f6\u95f4\u5462\uff1f\n\n\u8fd9\u4e2a\u7b80\u5355\uff0c\u5c31\u76f8\u5f53\u4e8e N \u4e2a\u53e3\u888b\uff0c\u4f18\u5148\u7ea7\u9ad8\u7684\u888b\u5b50\u5927\uff0c\u4f18\u5148\u7ea7\u4f4e\u7684\u888b\u5b50\u5c0f\u3002\u8fd9\u6837\u7403\u5c31\u4e0d\u80fd\u6309\u7167\u4e2a\u6570\u5206\u914d\u4e86\uff0c\u8981\u6309\u7167\u6bd4\u4f8b\u6765\uff0c\u5927\u53e3\u888b\u7684\u653e\u4e86\u4e00\u534a\u548c\u5c0f\u53e3\u888b\u653e\u4e86\u4e00\u534a\uff0c\u91cc\u9762\u7684\u7403\u6570\u76ee\u867d\u7136\u5dee\u5f88\u591a\uff0c\u4e5f\u8ba4\u4e3a\u662f\u516c\u5e73\u7684\u3002\n\n\u51fd\u6570 update_curr \u7528\u4e8e\u66f4\u65b0\u8fdb\u7a0b\u8fd0\u884c\u7684\u7edf\u8ba1\u91cf vruntime\uff0cCFS \u8fd8\u9700\u8981\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u6765\u5bf9 vruntime \u8fdb\u884c\u6392\u5e8f\uff0c\u627e\u51fa\u6700\u5c0f\u7684\u90a3\u4e2a\u3002\u5728\u8fd9\u91cc\u4f7f\u7528\u7684\u662f\u7ea2\u9ed1\u6811\u3002\u7ea2\u9ed1\u6811\u7684\u8282\u70b9\u662f sched_entity\uff0c\u91cc\u9762\u5305\u542b vruntime\u3002\n\n\u8c03\u5ea6\u7b97\u6cd5\u7684\u672c\u8d28\u5c31\u662f\u89e3\u51b3\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u5e94\u8be5\u8f6e\u5230\u8c01\u8fd0\u884c\u7684\u95ee\u9898\uff0c\u8fd9\u4e2a\u903b\u8f91\u5728 fair_sched_class.pick_next_task \u4e2d\u5b8c\u6210\u3002\n\n\u8c03\u5ea6\u8981\u89e3\u51b3\u7684\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\uff0c\u4ec0\u4e48\u65f6\u5019\u5207\u6362\u4efb\u52a1\uff1f\u4e5f\u5373\uff0c\u4ec0\u4e48\u65f6\u5019\uff0cCPU \u5c0f\u4f19\u4f34\u5e94\u8be5\u505c\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u6362\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u8fd0\u884c\uff1f\n\n\u4e00\u4e2a\u4eba\u5728\u505a A \u9879\u76ee\uff0c\u5728\u67d0\u4e2a\u65f6\u523b\uff0c\u6362\u6210\u505a B \u9879\u76ee\u53bb\u4e86\u3002\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f\u3002\n\n\u65b9\u5f0f\u4e00\uff0cA \u9879\u76ee\u505a\u7740\u505a\u7740\uff0c\u91cc\u9762\u6709\u4e00\u6761\u6307\u4ee4 sleep\uff0c\u4e5f\u5c31\u662f\u8981\u4f11\u606f\u4e00\u4e0b\uff0c\u6216\u8005\u7b49\u5f85\u67d0\u4e2a I/O \u4e8b\u4ef6\u3002\u90a3\u6ca1\u529e\u6cd5\u4e86\uff0c\u8981\u4e3b\u52a8\u8ba9\u51fa CPU\uff0c\u7136\u540e\u53ef\u4ee5\u5f00\u59cb\u505a B \u9879\u76ee\u3002\u4e3b\u52a8\u8ba9\u51fa CPU \u7684\u8fdb\u7a0b\uff0c\u4f1a\u4e3b\u52a8\u8c03\u7528 schedule() \u51fd\u6570\u3002\n\n\u5728 schedule() \u51fd\u6570\u4e2d\uff0c\u4f1a\u901a\u8fc7 fair_sched_class.pick_next_task\uff0c\u5728\u7ea2\u9ed1\u6811\u5f62\u6210\u7684\u961f\u5217\u4e0a\u53d6\u51fa\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u7136\u540e\u8c03\u7528 context_switch \u8fdb\u884c\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u3002\n\n\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u4e3b\u8981\u5e72\u4e24\u4ef6\u4e8b\u60c5\uff0c\u4e00\u662f\u5207\u6362\u8fdb\u7a0b\u7a7a\u95f4\uff0c\u4e5f\u5373\u8fdb\u7a0b\u7684\u5185\u5b58\uff0c\u4e5f\u5373 CPU \u5c0f\u4f19\u4f34\u4e0d\u80fd A \u9879\u76ee\u7684\u4f1a\u8bae\u5ba4\u91cc\u9762\u5e72\u6d3b\u4e86\uff0c\u8981\u8dd1\u5230 B \u9879\u76ee\u7684\u4f1a\u8bae\u5ba4\u53bb\u3002\u4e8c\u662f\u5207\u6362\u5bc4\u5b58\u5668\u548c CPU \u4e0a\u4e0b\u6587\uff0c\u4e5f\u5373 CPU \u5c06\u5f53\u671f\u5728 A \u9879\u76ee\u4e2d\u5e72\u5230\u54ea\u91cc\u4e86\uff0c\u8bb0\u5f55\u4e0b\u6765\uff0c\u65b9\u4fbf\u4ee5\u540e\u63a5\u7740\u5e72\u3002\n\n\u65b9\u5f0f\u4e8c\uff0cA \u9879\u76ee\u505a\u7740\u505a\u7740\uff0c\u65f7\u65e5\u6301\u4e45\uff0c\u5b9e\u5728\u53d7\u4e0d\u4e86\u4e86\u3002\u9879\u76ee\u7ecf\u7406\u4ecb\u5165\u4e86\uff0c\u8bf4\u8fd9\u4e2a\u9879\u76ee A \u5148\u505c\u505c\uff0cB \u9879\u76ee\u4e5f\u8981\u505a\u4e00\u4e0b\uff0c\u8981\u4e0d\u7136 B \u9879\u76ee\u8be5\u6295\u8bc9\u4e86\u3002\u6700\u5e38\u89c1\u7684\u73b0\u8c61\u5c31\u662f\uff0cA \u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\u592a\u957f\u4e86\uff0c\u662f\u65f6\u5019\u5207\u6362\u5230 B \u8fdb\u7a0b\u4e86\u3002\u8fd9\u4e2a\u65f6\u5019\u53eb\u4f5c A \u8fdb\u7a0b\u88ab\u88ab\u52a8\u62a2\u5360\u3002\n\n\u62a2\u5360\u8fd8\u8981\u901a\u8fc7 CPU \u7684\u65f6\u949f Tick\uff0c\u6765\u8861\u91cf\u8fdb\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\u3002\u65f6\u949f Tick \u4e00\u4e0b\uff0c\u662f\u5f88\u597d\u67e5\u770b\u662f\u5426\u9700\u8981\u62a2\u5360\u7684\u65f6\u95f4\u70b9\u3002\u65f6\u949f\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u4f1a\u8c03\u7528 scheduler_tick()\uff0c\u4ed6\u4f1a\u8c03\u7528 fair_sched_class \u7684 task_tick_fair\uff0c\u5728\u8fd9\u91cc\u9762\u4f1a\u8c03\u7528 update_curr \u66f4\u65b0\u8fd0\u884c\u65f6\u95f4\u3002\u5f53\u53d1\u73b0\u5f53\u524d\u8fdb\u7a0b\u5e94\u8be5\u88ab\u62a2\u5360\uff0c\u4e0d\u80fd\u76f4\u63a5\u628a\u4ed6\u8e22\u4e0b\u6765\uff0c\u800c\u662f\u628a\u4ed6\u6807\u8bb0\u4e3a\u5e94\u8be5\u88ab\u62a2\u5360\uff0c\u6253\u4e0a\u4e00\u4e2a\u6807\u7b7e TIF_NEED_RESCHED\u3002\n\n\u53e6\u5916\u4e00\u4e2a\u53ef\u80fd\u62a2\u5360\u7684\u573a\u666f\u53d1\u751f\u5728\uff0c\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u5524\u9192\u7684\u65f6\u5019\u3002\u4e00\u4e2a\u8fdb\u7a0b\u5728\u7b49\u5f85\u4e00\u4e2a I/O \u7684\u65f6\u5019\uff0c\u4f1a\u4e3b\u52a8\u653e\u5f03 CPU\u3002\u4f46\u662f\uff0c\u5f53 I/O \u5230\u6765\u7684\u65f6\u5019\uff0c\u8fdb\u7a0b\u5f80\u5f80\u4f1a\u88ab\u5524\u9192\u3002\u8fd9\u4e2a\u65f6\u5019\u662f\u4e00\u4e2a\u65f6\u673a\u3002\u5f53\u88ab\u5524\u9192\u7684\u8fdb\u7a0b\u4f18\u5148\u7ea7\u9ad8\u4e8e CPU \u4e0a\u7684\u5f53\u524d\u8fdb\u7a0b\uff0c\u5c31\u4f1a\u89e6\u53d1\u62a2\u5360\u3002\u5982\u679c\u5e94\u8be5\u53d1\u751f\u62a2\u5360\uff0c\u4e5f\u4e0d\u662f\u76f4\u63a5\u8e22\u8d70\u5f53\u7136\u8fdb\u7a0b\uff0c\u800c\u4e5f\u662f\u5c06\u5f53\u524d\u8fdb\u7a0b\u6807\u8bb0\u4e3a\u5e94\u8be5\u88ab\u62a2\u5360\uff0c\u6253\u4e0a\u4e00\u4e2a\u6807\u7b7e TIF_NEED_RESCHED\u3002\n\n\u771f\u6b63\u7684\u62a2\u5360\u8fd8\u662f\u9700\u8981\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u90a3\u4e48\u4e00\u4e2a\u65f6\u523b\uff0c\u8ba9\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b\u6709\u673a\u4f1a\u8c03\u7528\u4e00\u4e0b schedule\u3002\u8c03\u7528 schedule \u6709\u4ee5\u4e0b\u56db\u4e2a\u65f6\u673a\u3002\n\n\u5bf9\u4e8e\u7528\u6237\u6001\u7684\u8fdb\u7a0b\u6765\u8bb2\uff0c\u4ece\u7cfb\u7edf\u8c03\u7528\u4e2d\u8fd4\u56de\u7684\u90a3\u4e2a\u65f6\u523b\uff0c\u662f\u4e00\u4e2a\u88ab\u62a2\u5360\u7684\u65f6\u673a\u3002\n\u5bf9\u4e8e\u7528\u6237\u6001\u7684\u8fdb\u7a0b\u6765\u8bb2\uff0c\u4ece\u4e2d\u65ad\u4e2d\u8fd4\u56de\u7684\u90a3\u4e2a\u65f6\u523b\uff0c\u4e5f\u662f\u4e00\u4e2a\u88ab\u62a2\u5360\u7684\u65f6\u673a\u3002\n\u5bf9\u5185\u6838\u6001\u7684\u6267\u884c\u4e2d\uff0c\u88ab\u62a2\u5360\u7684\u65f6\u673a\u4e00\u822c\u53d1\u751f\u5728 preempt_enable() \u4e2d\u3002\u5728\u5185\u6838\u6001\u7684\u6267\u884c\u4e2d\uff0c\u6709\u7684\u64cd\u4f5c\u662f\u4e0d\u80fd\u88ab\u4e2d\u65ad\u7684\uff0c\u6240\u4ee5\u5728\u8fdb\u884c\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u524d\uff0c\u603b\u662f\u5148\u8c03\u7528 preempt_disable() \u5173\u95ed\u62a2\u5360\u3002\u518d\u6b21\u6253\u5f00\u7684\u65f6\u5019\uff0c\u5c31\u662f\u4e00\u6b21\u5185\u6838\u6001\u4ee3\u7801\u88ab\u62a2\u5360\u7684\u673a\u4f1a\u3002\n\u5728\u5185\u6838\u6001\u4e5f\u4f1a\u9047\u5230\u4e2d\u65ad\u7684\u60c5\u51b5\uff0c\u5f53\u4e2d\u65ad\u8fd4\u56de\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u7684\u4ecd\u7136\u662f\u5185\u6838\u6001\u3002\u8fd9\u4e2a\u65f6\u5019\u4e5f\u662f\u4e00\u4e2a\u6267\u884c\u62a2\u5360\u7684\u65f6\u673a\u3002\n\u5468\u745c\u548c\u5f20\u662d\u5546\u5b9a\u4e86\u8fd9\u4e2a\u89c4\u5219\uff0c\u7136\u540e\u7ed9 CPU \u5c0f\u4f19\u4f34\u4eec\u4ea4\u4ee3\u4e4b\u540e\uff0c\u9879\u76ee\u867d\u7136\u8d8a\u6765\u8d8a\u591a\uff0c\u4f46\u662f\u4e5f\u4e95\u4e95\u6709\u6761\u8d77\u6765\u3002CPU \u5c0f\u4f19\u4f34\u4e0d\u4f1a\u50cf\u539f\u6765\u4e00\u6837\u706b\u6025\u706b\u71ce\uff0c\u4e0d\u77e5\u6240\u4ece\u4e86\u3002\n\n\u53ef\u662f\u5176\u5b9e\u5bf9\u4e8e\u9879\u76ee\u7684\u5f00\u53d1\uff0c\u8fd9\u5bb6\u516c\u53f8\u8fd8\u662f\u6709\u4e25\u91cd\u6f0f\u6d1e\u7684\uff0c\u5c31\u662f\u9879\u76ee\u7684\u4fdd\u5bc6\u95ee\u9898\uff0c\u4e0d\u7ba1\u54ea\u5bb6\u5ba2\u6237\u5c06\u7cfb\u7edf\u5916\u5305\u51fa\u53bb\uff0c\u80af\u5b9a\u4e5f\u4e0d\u60f3\u8ba9\u5176\u4ed6\u516c\u53f8\u77e5\u9053\u8be6\u60c5\u3002\u5982\u679c\u89e3\u51b3\u4e0d\u597d\u8fd9\u4e2a\u95ee\u9898\uff0c\u6ca1\u4eba\u6562\u628a\u91cd\u8981\u7684\u9879\u76ee\u4ea4\u7ed9\u8fd9\u5bb6\u516c\u53f8\uff0c\u5c0f\u9a6c\u7684\u516c\u53f8\u4e5f\u5c31\u6c38\u8fdc\u53ea\u80fd\u63a5\u70b9\u8fb9\u89d2\u7cfb\u7edf\uff0c\u8fd8\u662f\u4e0d\u80fd\u4fdd\u8bc1\u6e29\u9971\u95ee\u9898\u3002\n\n\u90a3\u63a5\u4e0b\u6765\uff0c\u5c0f\u9a6c\u4f1a\u600e\u4e48\u89e3\u51b3\u9879\u76ee\u4e4b\u95f4\u7684\u4fdd\u5bc6\u95ee\u9898\u5462\uff1f\u6b32\u77e5\u540e\u4e8b\uff0c\u4e14\u542c\u4e0b\u56de\u5206\u89e3\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5185\u6838\u5bf9\u8fdb\u7a0b\u7684\u8c03\u5ea6\uff0c\u5c31\u50cf\u662f\u516c\u53f8\u5bf9\u4e0d\u540c\u9879\u76ee\u7684\u4f18\u5148\u7ea7\u5b89\u6392\u662f\u4e0d\u540c\u7684\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u4e00\u7ae0\u7559\u4e86\u4e2a\u6263\u5b50\uff0c\u8bf4\u5230\u4e0d\u540c\u9879\u76ee\u4e4b\u95f4\u7684\u4fdd\u5bc6\u95ee\u9898\uff0c\u90a3\u80af\u5b9a\u5c31\u662f\u865a\u62df\u5185\u5b58\u4e86\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5f53\u7136\uff0c\u8fd9\u7ae0\u4e0d\u4ec5\u8981\u8bb2\u865a\u62df\u5185\u5b58\uff0c\u8fd8\u8981\u8bb2\u3002\u8fd9\u7ae0\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u4e0a\u4e00\u8282\u6211\u4eec\u8bf4\u5230\uff0c\u5468\u745c\u548c\u5f20\u662d\u5546\u5b9a\u4e86\u8c03\u7528 schedule \u7684\u65f6\u673a\u3002\u5c3d\u7ba1\u9879\u76ee\u8d8a\u6765\u8d8a\u591a\uff0c\u4f46\u662f\u4e5f\u4e95\u4e95\u6709\u6761\u3002\u53ef\u662f\u6211\u4eec\u4e5f\u8bf4\u4e86\uff0c\u4e0d\u7ba1\u4f60\u7684\u4e8b\u60c5\u505a\u5f97\u6709\u591a\u597d\uff0c\u9879\u76ee\u4fdd\u5bc6\u95ee\u9898\u90fd\u662f\u8981\u89e3\u51b3\u7684\u91cd\u8981\u95ee\u9898\u3002\u600e\u4e48\u89e3\u51b3\u5462\uff1f\u4eca\u5929\u6211\u4eec\u5c31\u6765\u770b\u4e00\u770b\u3002\n\n\u5c0f\u9a6c\u8bf4\uff1a\u201c\u8981\u4e0d\u54b1\u4eec\u7684\u9879\u76ee\u522b\u7528\u4f1a\u8bae\u5ba4\u5c01\u95ed\u5f00\u53d1\u4e86\uff0c\u539f\u6765\u603b\u662f\u8bf4\u5c01\u95ed\u5f00\u53d1\uff0c\u5c31\u662f\u4e3a\u4e86\u9694\u79bb\uff0c\u4fdd\u5bc6\u3002\u8fd9\u5bf9\u4e8e\u516c\u53f8\u58f0\u8a89\u6765\u8bf4\u5f88\u91cd\u8981\uff0c\u4f46\u662f\u80fd\u4e0d\u80fd\u901a\u8fc7\u7b7e\u8ba2\u4fdd\u5bc6\u534f\u8bae\u7684\u65b9\u5f0f\u6765\uff0c\u5e72\u561b\u975e\u5f97\u5c01\u95ed\u5f00\u53d1\u5462\uff1f\u201d\n\n\u5468\u745c\u8bf4\uff1a\u201c\u9a6c\u54e5\uff0c\u4ee5\u6211\u5728\u5927\u516c\u53f8\u7ba1\u7406\u9879\u76ee\u7684\u7ecf\u9a8c\u6765\u770b\uff0c\u60a8\u8fd8\u662f\u60f3\u7b80\u5355\u4e86\u3002\u201d\n\n\u201c\u4f60\u770b\uff0c\u6bcf\u6b21\u4f60\u63a5\u4e00\u4e2a\u9879\u76ee\uff0c\u603b\u8981\u5199\u6210\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0cCPU \u5c0f\u4f19\u4f34\u4eec\u624d\u80fd\u6267\u884c\u5427\uff0c\u9879\u76ee\u8ba1\u5212\u4e66\u4e2d\u7684\u4e00\u884c\u4e00\u884c\u6307\u4ee4\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u514d\u4e0d\u4e86\u8981\u4ea7\u751f\u4e00\u4e9b\u6570\u636e\u3002\u8fd9\u4e9b\u6570\u636e\u8981\u4fdd\u5b58\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u8fd9\u4e2a\u5730\u65b9\u5c31\u662f\u4f1a\u8bae\u5ba4\uff08\u5185\u5b58\uff09\u3002\u4f1a\u8bae\u5ba4\uff08\u5185\u5b58\uff09\u88ab\u5206\u6210\u4e00\u5757\u4e00\u5757\u513f\u7684\uff0c\u90fd\u7f16\u597d\u4e86\u53f7\u3002\u4f8b\u5982 3F-10\uff0c\u5c31\u662f\u4e09\u697c\u5341\u53f7\u4f1a\u8bae\u5ba4\u3002\u8fd9\u4e2a\u5730\u5740\u662f\u5b9e\u5b9e\u5728\u5728\u7684\u5730\u5740\uff0c\u901a\u8fc7\u8fd9\u4e2a\u5730\u5740\u6211\u4eec\u5c31\u80fd\u591f\u5b9a\u4f4d\u5230\u7269\u7406\u5185\u5b58\u7684\u4f4d\u7f6e\u3002\u201d\n\n\u201c\u73b0\u5728\u95ee\u9898\u6765\u4e86\uff0c\u5199\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u7684\u65f6\u5019\uff0c\u91cc\u9762\u7684\u6307\u4ee4\u4f7f\u7528\u7684\u5730\u5740\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u7269\u7406\u5730\u5740\u5462\uff1f\u5f53\u7136\u4e0d\u884c\u4e86\uff0c\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0c\u90fd\u662f\u4e8b\u5148\u5199\u597d\u7684\uff0c\u53ef\u4ee5\u591a\u6b21\u8fd0\u884c\u7684\u3002\u5982\u679c\u91cc\u9762\u6709\u4e2a\u6307\u4ee4\u662f\uff0c\u8981\u628a\u7528\u6237\u8f93\u5165\u7684\u6570\u5b57\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u90a3\u5c31\u4f1a\u6709\u95ee\u9898\u3002\u201d\n\n\u201c\u4f1a\u4ea7\u751f\u4ec0\u4e48\u95ee\u9898\u5462\uff1f\u6211\u4e3e\u4e2a\u4f8b\u5b50\u4f60\u5c31\u660e\u767d\u4e86\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528\u90a3\u4e2a\u5b9e\u5b9e\u5728\u5728\u7684\u5730\u5740\uff0c3F-10\uff0c\u6253\u5f00\u4e09\u4e2a\u76f8\u540c\u7684\u7a0b\u5e8f\uff0c\u90fd\u6267\u884c\u5230\u67d0\u4e00\u6b65\u3002\u6bd4\u65b9\u8bf4\uff0c\u6253\u5f00\u4e86\u4e09\u4e2a\u8ba1\u7b97\u5668\uff0c\u7528\u6237\u5728\u8fd9\u4e09\u4e2a\u7a0b\u5e8f\u7684\u754c\u9762\u4e0a\u5206\u522b\u8f93\u5165\u4e86 10\u3001100\u30011000\u3002\u5982\u679c\u5185\u5b58\u4e2d\u7684\u8fd9\u4e2a\u4f4d\u7f6e\u53ea\u80fd\u4fdd\u5b58\u4e00\u4e2a\u6570\uff0c\u90a3\u5e94\u8be5\u4fdd\u5b58\u54ea\u4e2a\u5462\uff1f\u8fd9\u4e0d\u5c31\u51b2\u7a81\u4e86\u5417\uff1f\u201d\n\n\u201c\u5982\u679c\u4e0d\u7528\u8fd9\u4e2a\u5b9e\u5b9e\u5728\u5728\u7684\u5730\u5740\uff0c\u90a3\u5e94\u8be5\u600e\u4e48\u529e\u5462\uff1f\u90a3\u5c31\u5fc5\u987b\u7528\u5c01\u95ed\u5f00\u53d1\u7684\u529e\u6cd5\u3002\n\n\u6bcf\u4e2a\u9879\u76ee\u7684\u7269\u7406\u5730\u5740\u5bf9\u4e8e\u8fdb\u7a0b\u4e0d\u53ef\u89c1\uff0c\u8c01\u4e5f\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u8fd9\u4e2a\u7269\u7406\u5730\u5740\u3002\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u7ed9\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a\u865a\u62df\u5730\u5740\u3002\u6240\u6709\u8fdb\u7a0b\u770b\u5230\u7684\u8fd9\u4e2a\u5730\u5740\u90fd\u662f\u4e00\u6837\u7684\uff0c\u91cc\u9762\u7684\u5185\u5b58\u90fd\u662f\u4ece 0 \u5f00\u59cb\u7f16\u53f7\u3002\n\n\u5728\u7a0b\u5e8f\u91cc\u9762\uff0c\u6307\u4ee4\u5199\u5165\u7684\u5730\u5740\u662f\u865a\u62df\u5730\u5740\u3002\u4f8b\u5982\uff0c\u4f4d\u7f6e\u4e3a 10M \u7684\u5185\u5b58\u533a\u57df\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u63d0\u4f9b\u4e00\u79cd\u673a\u5236\uff0c\u5c06\u4e0d\u540c\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u548c\u5185\u5b58\u7684\u7269\u7406\u5730\u5740\u6620\u5c04\u8d77\u6765\u3002\n\n\u5f53\u7a0b\u5e8f\u8981\u8bbf\u95ee\u865a\u62df\u5730\u5740\u7684\u65f6\u5019\uff0c\u7531\u5185\u6838\u7684\u6570\u636e\u7ed3\u6784\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u4e0d\u540c\u7684\u7269\u7406\u5730\u5740\uff0c\u8fd9\u6837\u4e0d\u540c\u7684\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u5199\u5165\u7684\u662f\u4e0d\u540c\u7684\u7269\u7406\u5730\u5740\uff0c\u5c31\u4e0d\u4f1a\u51b2\u7a81\u4e86\u3002\u201d\n\n\u5c0f\u9a6c\u60f3\u60f3\uff0c\u5bf9\u554a\uff0c\u8fd9\u662f\u4e2a\u597d\u529e\u6cd5\uff0c\u54b1\u4eec\u5f97\u89c4\u5212\u4e00\u5957\u4f1a\u8bae\u5ba4\u7ba1\u7406\u7cfb\u7edf\uff08\u5185\u5b58\u7ba1\u7406\uff09\u3002\u6839\u636e\u521a\u624d\u7684\u5206\u6790\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u5e94\u8be5\u5305\u542b\u4ee5\u4e0b\u4e09\u4e2a\u90e8\u5206\uff1a\n\n\u7b2c\u4e00\uff0c\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\uff0c\u76f8\u5f53\u4e8e\u4f1a\u8bae\u5ba4\u7ba1\u7406\u5458\u7ba1\u7406\u4f1a\u8bae\u5ba4\uff1b\n\n\u7b2c\u4e8c\uff0c\u865a\u62df\u5730\u5740\u7684\u7ba1\u7406\uff0c\u4e5f\u5373\u5728\u9879\u76ee\u7ec4\u7684\u89c6\u89d2\uff0c\u4f1a\u8bae\u5ba4\u7684\u865a\u62df\u5730\u5740\u5e94\u8be5\u5982\u4f55\u7ec4\u7ec7\uff1b\n\n\u7b2c\u4e09\uff0c\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u5982\u4f55\u6620\u5c04\u7684\u95ee\u9898\uff0c\u4e5f\u5373\u4f1a\u8bae\u5ba4\u7ba1\u7406\u5458\u5982\u679c\u7ba1\u7406\u6620\u5c04\u8868\u3002\n\n\u6211\u4eec\u5148\u6765\u76d8\u70b9\u4e00\u4e0b\u7269\u7406\u5185\u5b58\u7684\u60c5\u51b5\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u8fd8\u662f\u62ff\u516c\u53f8\u4e3e\u4f8b\uff0c\u610f\u601d\u662f\u5047\u5982\u516c\u53f8\u6709 100 \u4e2a\u5de5\u4f4d\uff0c\u4f46\u662f\u6709 n \u4e2a\u9879\u76ee\uff0c\u8fd9 n \u4e2a\u9879\u76ee\u8fd8\u662f\u540c\u65f6\u8fd0\u884c\u7684\uff0c\u5982\u679c\u4e0d\u7528\u865a\u62df\u5185\u5b58\uff0c\u5c31\u4f1a\u51fa\u73b0 1 \u4e2a\u5de5\u4f4d\u88ab n \u4e2a\u9879\u76ee\u53cd\u590d\u4fee\u6539\uff0c\u5c31\u51fa\u73b0\u9519\u8bef\u4e86\u3002\u4f7f\u7528\u865a\u62df\u5185\u5b58\u4e4b\u540e\uff0c\u5373\u4f7f\u8fd9 n \u4e2a\u9879\u76ee\u90fd\u9700\u8981\u540c\u4e00\u4e2a\u5de5\u4f4d\uff08\u5185\u5b58\u5730\u5740\uff09\uff0c\u4f46\u662f\u8001\u677f\uff08\u5185\u6838\uff09\u4f1a\u7ed9\u4e0d\u540c\u7684\u9879\u76ee\u5212\u5206\u4e0d\u540c\u7684\u533a\u57df\uff08\u865a\u62df\u5185\u5b58\u548c\u7269\u7406\u5185\u5b58\u7684\u6620\u5c04\u8868\uff09\uff0c\u540c\u4e00\u4e2a\u5de5\u4f4d\u5b9e\u9645\u4e0a\u6620\u5c04\u5728\u4e0d\u540c\u7684\u5730\u65b9\uff08\u7269\u7406\u5185\u5b58\u5730\u5740\uff09\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u6211\u4eec\u5728\u65e5\u5e38\u751f\u6d3b\u4e2d\u5c31\u662f\u8fd9\u4e48\u8bbe\u8ba1\u7684\uff0c\u6240\u4ee5\u6bd4\u8f83\u96be\u7406\u89e3\u4e4b\u524d\u201c\u7269\u7406\u5185\u5b58\u201d\u662f\u4e2a\u4ec0\u4e48\u60c5\u51b5\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b9e\u4e0a\u9762\u7684\u8fd9\u4e2a\u8bf4\u6cd5\u662f\u6709\u4e9b\u95ee\u9898\u7684\uff0c\u65e5\u5e38\u5de5\u4f5c\u65f6\u4e0d\u540c\u5f00\u53d1\u7ec4\u662f\u53ef\u89c1\u7684\uff0c\u4f46\u662f\u8fdb\u7a0b\u4e4b\u95f4\u5219\u4e0d\u662f\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u8ba4\u4e3a\u6574\u4e2a\u5199\u5b57\u697c\u90fd\u662f\u81ea\u5df1\u72ec\u5360\u7684\u3002\u5b9e\u9645\u4e0a\u66f4\u5408\u7406\u7684\u8bf4\u6cd5\u662f\uff0c\u6240\u6709\u8fdb\u7a0b\u90fd\u60f3\u8fdb\u5165 21F-1 \u7684\u529e\u516c\u5ba4\uff0c\u5728\u4e0b\u9762\u6441\u7535\u68af\u65f6\uff0c\u8eab\u5728\u5199\u5b57\u697c\u9876\u5c42\u7684\u9ad8\u7ba1\u4f1a\u628a\u8fd9 n \u4e2a\u8fdb\u7a0b\u5212\u5206\u5230\u4e0d\u540c\u7684\u697c\u5c42\u3001\u4e0d\u540c\u7684\u529e\u516c\u5ba4\uff0c\u4f46\u662f\u8fd9\u4e9b\u8fdb\u7a0b\u81ea\u5df1\u8ba4\u4e3a\u81ea\u5df1\u90fd\u8fdb\u5165\u4e86 21F-1 \u529e\u516c\u5ba4\uff0c\u4e5f\u8ba4\u4e3a\u6574\u4e2a\u5199\u5b57\u697c\u90fd\u662f\u81ea\u5df1\u72ec\u5360\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/SMP-NUMA.jpeg",alt:"SMP-NUMA.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u8fd9\u6bb5\u975e\u5e38\u91cd\u8981\uff0c\u8981\u4ed4\u7ec6\u770b\u4e86"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e0d\u540c\u7684\u56ed\u533a\u5de5\u4f4d\u7684\u5b89\u6392\u548c\u4f1a\u8bae\u5ba4\u7684\u5e03\u5c40\u5404\u4e0d\u76f8\u540c\u3002\n\n\u7b2c\u4e00\u79cd\u60c5\u51b5\u662f\uff0cCPU \u5c0f\u4f19\u4f34\u4eec\u5750\u5728\u4e00\u8d77\uff0c\u4f1a\u8bae\u5ba4\u5728\u697c\u5c42\u7684\u53e6\u4e00\u9762\uff0c\u5927\u5bb6\u5230\u4f1a\u8bae\u5ba4\u91cc\u9762\u53bb\u90fd\u8981\u901a\u8fc7\u7edf\u4e00\u7684\u8fc7\u9053\uff0c\u4f18\u70b9\u7b80\u5355\uff0c\u7f3a\u70b9\u662f\u901a\u9053\u4f1a\u6210\u4e3a\u74f6\u9888\u3002\n\n\u7b2c\u4e8c\u79cd\u60c5\u51b5\u662f\uff0c\u4f1a\u8bae\u5ba4\u5206\u6210\u591a\u4e2a\u8282\u70b9\uff0c\u79bb\u6563\u5730\u5206\u5e03\u5728 CPU \u5c0f\u4f19\u4f34\u5468\u56f4\u3002\u6709\u7684\u5c0f\u4f19\u4f34\u79bb\u8fd9\u4e2a\u4f1a\u8bae\u5ba4\u8fd1\u4e00\u4e9b\uff0c\u6709\u7684\u5c0f\u4f19\u4f34\u79bb\u53e6\u5916\u4e00\u4e9b\u4f1a\u8bae\u5ba4\u8fd1\u4e00\u4e9b\u3002\u8fd9\u6837\u505a\u7684\u4f18\u70b9\u662f\uff0c\u5982\u679c CPU \u5c0f\u4f19\u4f34\u5e72\u6d3b\u603b\u662f\u80fd\u591f\u53bb\u79bb\u4ed6\u6700\u8fd1\u7684\u4f1a\u8bae\u5ba4\uff0c\u5219\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u4f46\u662f\u4e00\u65e6\u79bb\u4ed6\u6700\u8fd1\u7684\u4f1a\u8bae\u5ba4\u88ab\u5360\u7528\u4e86\uff0c\u4ed6\u53ea\u80fd\u53bb\u5176\u4ed6\u4f1a\u8bae\u5ba4\uff0c\u8fd9\u6837\u5c31\u6bd4\u8f83\u8fdc\u4e86\u3002\n\n\u73b0\u5728\u7684\u56ed\u533a\u57fa\u672c\u90fd\u8bbe\u8ba1\u6210\u7b2c\u4e8c\u79cd\u6837\u5b50\uff0c\u4e5f\u5373\u4f1a\u8bae\u5ba4\uff08\u5185\u5b58\uff09\u8981\u5206\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u7528 struct pglist_data \u8868\u793a\u3002\n\n\u6bcf\u4e2a\u8282\u70b9\u91cc\u9762\u518d\u5206\u533a\u57df\uff0c\u7528\u4e8e\u533a\u5206\u5185\u5b58\u4e0d\u540c\u90e8\u5206\u7684\u4e0d\u540c\u7528\u6cd5\u3002ZONE_NORMAL \u662f\u6700\u5e38\u7528\u7684\u533a\u57df\u3002ZONE_MOVABLE \u662f\u53ef\u79fb\u52a8\u533a\u57df\u3002\u6211\u4eec\u901a\u8fc7\u5c06\u7269\u7406\u5185\u5b58\u5212\u5206\u4e3a\uff0c\u53ef\u79fb\u52a8\u5206\u914d\u533a\u57df\u548c\u4e0d\u53ef\u79fb\u52a8\u5206\u914d\u533a\u57df\uff0c\u6765\u907f\u514d\u5185\u5b58\u788e\u7247\u3002\u6bcf\u4e2a\u533a\u57df\u7528 struct zone \u8868\u793a\uff0c\u4e5f\u653e\u5728\u4e00\u4e2a\u6570\u7ec4\u91cc\u9762\u3002\n\n\u6bcf\u4e2a\u533a\u57df\u91cc\u9762\u518d\u5206\u9875\u3002\u9ed8\u8ba4\u7684\u5927\u5c0f\u4e3a 4KB\u3002\u8fd9\u5c31\u76f8\u5f53\u4e8e\u6bcf\u4e2a\u4f1a\u8bae\u5ba4\u7684\u6700\u5c0f\u5355\u4f4d\u3002\n\n\u5982\u679c\u6709\u9879\u76ee\u8981\u4f7f\u7528\u4f1a\u8bae\u5ba4\uff0c\u5e94\u8be5\u5982\u4f55\u5206\u914d\u5462\uff1f\u4e0d\u80fd\u4efb\u4f55\u9879\u76ee\u6765\u4e86\uff0c\u54b1\u90fd\u7ed9\u4ed6\u6574\u4e2a\u4f1a\u8bae\u5ba4\u3002\u4f1a\u8bae\u5ba4\u4e5f\u662f\u53ef\u4ee5\u518d\u5206\u5272\u7684\uff0c\u4f8b\u5982\u5728\u4e2d\u95f4\u62fc\u8d77\u4e00\u5835\u5899\uff0c\u8fd9\u6837\u4e00\u4e2a\u4f1a\u8bae\u5ba4\u5c31\u53ef\u4ee5\u5206\u6210\u4e24\u4e2a\uff0c\u7ee7\u7eed\u5206\uff0c\u53ef\u4ee5\u518d\u5206\u6210\u56db\u4e2a 1/4 \u5927\u5c0f\u7684\u4f1a\u8bae\u5ba4\uff0c\u76f4\u5230\u4e0d\u80fd\u518d\u5206\uff0c\u6211\u4eec\u5c31\u80fd\u5f97\u5230\u4e00\u9875\u7684\u5927\u5c0f\u3002\n\n\u7269\u7406\u9875\u9762\u5206\u914d\u7684\u65f6\u5019\uff0c\u4e5f\u53ef\u4ee5\u91c7\u53d6\u8fd9\u6837\u7684\u601d\u8def\uff0c\u6211\u4eec\u79f0\u4e3a\u4f19\u4f34\u7cfb\u7edf\u3002\n\n\u7a7a\u95f2\u9875\u653e\u5728 struct free_area \u91cc\u9762\uff0c\u6bcf\u4e00\u9875\u7528 struct page \u8868\u793a\u3002\n\n\u628a\u6240\u6709\u7684\u7a7a\u95f2\u9875\u5206\u7ec4\u4e3a 11 \u4e2a\u9875\u5757\u94fe\u8868\uff0c\u6bcf\u4e2a\u5757\u94fe\u8868\u5206\u522b\u5305\u542b\u5f88\u591a\u4e2a\u5927\u5c0f\u7684\u9875\u5757\uff0c\u6709 1\u30012\u30014\u30018\u300116\u300132\u300164\u3001128\u3001256\u3001512 \u548c 1024 \u4e2a\u8fde\u7eed\u9875\u7684\u9875\u5757\u3002\u6700\u5927\u53ef\u4ee5\u7533\u8bf7 1024 \u4e2a\u8fde\u7eed\u9875\uff0c\u5bf9\u5e94 4MB \u5927\u5c0f\u7684\u8fde\u7eed\u5185\u5b58\u3002\u6bcf\u4e2a\u9875\u5757\u7684\u7b2c\u4e00\u4e2a\u9875\u7684\u7269\u7406\u5730\u5740\u662f\u8be5\u9875\u5757\u5927\u5c0f\u7684\u6574\u6570\u500d\u3002\n\n\u4f8b\u5982\uff0c\u8981\u8bf7\u6c42\u4e00\u4e2a 128 \u4e2a\u9875\u7684\u9875\u5757\u65f6\uff0c\u6211\u4eec\u8981\u5148\u68c0\u67e5 128 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\u662f\u5426\u6709\u7a7a\u95f2\u5757\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u67e5 256 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\uff1b\u5982\u679c\u6709\u7a7a\u95f2\u5757\u7684\u8bdd\uff0c\u5219\u5c06 256 \u4e2a\u9875\u7684\u9875\u5757\u5206\u6210\u4e24\u4efd\uff0c\u4e00\u4efd\u4f7f\u7528\uff0c\u4e00\u4efd\u63d2\u5165 128 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\u4e2d\u3002\u5982\u679c\u8fd8\u662f\u6ca1\u6709\uff0c\u5c31\u67e5 512 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\uff1b\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u5206\u88c2\u4e3a 128\u3001128\u3001256 \u4e09\u4e2a\u9875\u5757\uff0c\u4e00\u4e2a 128 \u7684\u4f7f\u7528\uff0c\u5269\u4f59\u4e24\u4e2a\u63d2\u5165\u5bf9\u5e94\u9875\u5757\u94fe\u8868\u3002\n\n\u628a\u7269\u7406\u9875\u9762\u5206\u6210\u4e00\u5757\u4e00\u5757\u5927\u5c0f\u76f8\u540c\u7684\u9875\uff0c\u8fd9\u6837\u5e26\u6765\u7684\u53e6\u4e00\u4e2a\u597d\u5904\u662f\uff0c\u5f53\u6709\u7684\u5185\u5b58\u9875\u9762\u957f\u65f6\u95f4\u4e0d\u7528\u4e86\uff0c\u53ef\u4ee5\u6682\u65f6\u5199\u5230\u786c\u76d8\u4e0a\uff0c\u6211\u4eec\u79f0\u4e3a\u6362\u51fa\u3002\u4e00\u65e6\u9700\u8981\u7684\u65f6\u5019\uff0c\u518d\u52a0\u8f7d\u8fdb\u6765\uff0c\u5c31\u53eb\u4f5c\u6362\u5165\u3002\u8fd9\u6837\u53ef\u4ee5\u6269\u5927\u53ef\u7528\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u63d0\u9ad8\u7269\u7406\u5185\u5b58\u7684\u5229\u7528\u7387\u3002\u5728\u5185\u6838\u91cc\u9762\uff0c\u4e5f\u5373\u5f20\u662d\u7684\u7ba1\u7406\u4e0b\uff0c\u6709\u4e00\u4e2a\u8fdb\u7a0b kswapd\uff0c\u53ef\u4ee5\u6839\u636e\u7269\u7406\u9875\u9762\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u5bf9\u9875\u9762\u8fdb\u884c\u6362\u5165\u6362\u51fa\u3002\n\n\u5c0f\u9a6c\u89c9\u5f97\u8fd9\u79cd\u65b9\u5f0f\u592a\u597d\u4e86\uff0c\u5982\u6b64\u9ad8\u6548\u5730\u4f7f\u7528\u4f1a\u8bae\u5ba4\uff0c\u516c\u53f8\u4e0d\u7528\u79df\u7528\u591a\u5c11\u4f1a\u8bae\u5ba4\uff0c\u5c31\u80fd\u89e3\u51b3\u5f53\u524d\u7684\u9879\u76ee\u95ee\u9898\u4e86\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/memory_struct.jpeg",alt:"memory_struct.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u5c31\u50cf\u516c\u53f8\u91cc\u4e0d\u540c\u90e8\u95e8\u4e5f\u6709\u5404\u81ea\u4e13\u6709\u7684\u5de5\u4f5c\u533a\u57df\u4e00\u6837\uff0cNUMA \u5c31\u662f\u8fd9\u79cd CPU \u548c\u5185\u5b58\u4e00\u4e00\u5bf9\u5e94\u7684\u67b6\u6784\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u800c SMP \u5219\u5bf9\u5e94\u90a3\u79cd\u4e0d\u540c\u90e8\u95e8\u6df7\u5728\u4e00\u8d77\u5de5\u4f5c\uff0c\u8fd9\u662f\u5f88\u4e0d\u5408\u7406\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"buddy allocator \u5c31\u50cf\u662f\u9879\u76ee\u5185\u90e8\u5212\u5206\u518d\u7ed9\u5404\u79cd\u5185\u90e8\u9879\u76ee\u5212\u5206\u5de5\u4f5c\u533a\u57df\uff0c\u4e00\u5b9a\u662f\u5212\u5206\u5230\u6700\u5c0f\u7c92\u5ea6\uff0c\u4e5f\u5c31\u662f\u5de5\u4f4d\uff08\u4e5f\u5c31\u662f\u201c\u7a7a\u95f2\u9875\u653e\u5728 struct free_area \u91cc\u9762\uff0c\u6bcf\u4e00\u9875\u7528 struct page \u8868\u793a\u201d\uff09\uff0c\u518d\u89c4\u5212\u51fa 11 \u79cd\u5185\u90e8\u9879\u76ee\u53ef\u4ee5\u7533\u8bf7\u7684\u6863\u4f4d\uff08\u4e5f\u5c31\u662f\u201c\u628a\u6240\u6709\u7684\u7a7a\u95f2\u9875\u5206\u7ec4\u4e3a 11 \u4e2a\u9875\u5757\u94fe\u8868\uff0c\u6bcf\u4e2a\u5757\u94fe\u8868\u5206\u522b\u5305\u542b\u5f88\u591a\u4e2a\u5927\u5c0f\u7684\u9875\u5757\uff0c\u6709 1\u30012\u30014\u30018\u300116\u300132\u300164\u3001128\u3001256\u3001512 \u548c 1024 \u4e2a\u8fde\u7eed\u9875\u7684\u9875\u5757\u3002\u6700\u5927\u53ef\u4ee5\u7533\u8bf7 1024 \u4e2a\u8fde\u7eed\u9875\uff0c\u5bf9\u5e94 4MB \u5927\u5c0f\u7684\u8fde\u7eed\u5185\u5b58\u3002\u201d\uff09\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u6837\u9879\u76ee\u5185\u90e8\u9700\u8981\u521b\u5efa\u5b50\u9879\u76ee\u65f6\uff0c\u76f4\u63a5\u7533\u8bf7\u6574\u5757\u7684\u5de5\u4f4d\u533a\u57df\uff08\u8fde\u7eed\u9875\u7684\u9875\u5757\uff09\u5c31\u53ef\u4ee5\u4e86\u3002\u5c31\u4e0d\u9700\u8981\u518d\u4e00\u4e2a\u4e00\u4e2a\u7533\u8bf7\u5de5\u4f4d\u4e86\u3002\u5176\u5b9e\u8ddf\u6211\u4eec\u5728\u516c\u53f8\u91cc\u4e5f\u5dee\u4e0d\u591a\uff0c\u4ee3\u5165\u5230\u5b9e\u9645\u751f\u6d3b\u5c31\u5f88\u597d\u7406\u89e3\u4e86\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f1a\u8bae\u5ba4\u6392\u5217\u6709\u5e8f\uff0c\u5206\u89c6\u89d2\u5404\u6709\u6d1e\u5929\n\u5468\u745c\u8bf4\uff0c\u201c\u4f60\u5148\u522b\u6025\uff0c\u8fd9\u8fd8\u4ec5\u4ec5\u662f\u4f1a\u8bae\u5ba4\u7269\u7406\u5730\u5740\u7684\u7ba1\u7406\uff0c\u6bcf\u4e00\u4e2a\u9879\u76ee\u7ec4\u80fd\u591f\u770b\u5230\u7684\u865a\u62df\u5730\u5740\uff0c\u54b1\u8fd8\u6ca1\u89c4\u5212\u5462\uff01\u8fd9\u4e2a\u89c4\u5212\u4e0d\u597d\uff0c\u6267\u884c\u9879\u76ee\u8fd8\u662f\u4f1a\u6709\u95ee\u9898\u7684\u3002\u201d\n\n\u6bcf\u4e2a\u9879\u76ee\u7ec4\u80fd\u770b\u5230\u7684\u865a\u62df\u5730\u5740\u600e\u4e48\u89c4\u5212\u5462\uff1f\u6211\u4eec\u8981\u7ed9\u9879\u76ee\u7ec4\u8fd9\u6837\u4e00\u79cd\u611f\u89c9\uff0c\u4ece\u9879\u76ee\u7ec4\u7684\u89d2\u5ea6\uff0c\u4e5f\u5373\u4ece\u865a\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u4e00\u5927\u7247\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u90fd\u662f\u4ed6\u4eec\u7684\u4e86\u3002\n\n\u5982\u679c\u662f 32 \u4f4d\uff0c\u6709 2^32 = 4G \u7684\u5185\u5b58\u7a7a\u95f4\u90fd\u662f\u4ed6\u4eec\u7684\uff0c\u4e0d\u7ba1\u5185\u5b58\u662f\u4e0d\u662f\u771f\u7684\u6709 4G\u3002\u5982\u679c\u662f 64 \u4f4d\uff0c\u5728 x86_64 \u4e0b\u9762\uff0c\u5176\u5b9e\u53ea\u4f7f\u7528\u4e86 48 \u4f4d\uff0c\u90a3\u4e5f\u633a\u6050\u6016\u7684\u300248 \u4f4d\u5730\u5740\u957f\u5ea6\u4e5f\u5c31\u662f\u5bf9\u5e94\u4e86 256TB \u7684\u5730\u5740\u7a7a\u95f4\u3002\n\n\u5c0f\u9a6c\u8bf4\uff1a\u201c\u6211\u90fd\u6ca1\u600e\u4e48\u89c1\u8fc7 256T \u7684\u786c\u76d8\uff0c\u522b\u8bf4\u662f\u5185\u5b58\u4e86\u3002\u201d\n\n\u5468\u745c\u63a5\u7740\u8bf4\uff1a\u201c\u73b0\u5728\uff0c\u4e00\u4e2a\u9879\u76ee\u7ec4\u89c9\u5f97\uff0c\u4f1a\u8bae\u5ba4\u53ef\u6bd4\u4e16\u754c\u9996\u5bcc\u623f\u5b50\u8fd8\u5927\u3002\u867d\u7136\u662f\u865a\u62df\u7684\uff0c\u4e0b\u9762\u5c3d\u60c5\u5730\u53bb\u6392\u5217\u54b1\u4eec\u8981\u653e\u7684\u4e1c\u897f\u5427\uff01\u8bf7\u8bb0\u4f4f\uff0c\u73b0\u5728\u6211\u4eec\u662f\u7ad9\u5728\u4e00\u4e2a\u8fdb\u7a0b\u7684\u89d2\u5ea6\uff0c\u53bb\u770b\u8fd9\u4e2a\u865a\u62df\u7684\u7a7a\u95f4\uff0c\u4e0d\u7528\u7ba1\u5176\u4ed6\u8fdb\u7a0b\u3002\u201d\n\n\u9996\u5148\uff0c\u8fd9\u4e48\u5927\u7684\u865a\u62df\u7a7a\u95f4\u4e00\u5207\u4e8c\uff0c\u4e00\u90e8\u5206\u7528\u6765\u653e\u5185\u6838\u7684\u4e1c\u897f\uff0c\u79f0\u4e3a\u5185\u6838\u7a7a\u95f4\uff1b\u4e00\u90e8\u5206\u7528\u6765\u653e\u8fdb\u7a0b\u7684\u4e1c\u897f\uff0c\u79f0\u4e3a\u7528\u6237\u7a7a\u95f4\u3002\u7528\u6237\u7a7a\u95f4\u5728\u4e0b\uff0c\u5728\u4f4e\u5730\u5740\uff0c\u6211\u4eec\u5047\u8bbe\u662f 0 \u53f7\u5230 29 \u53f7\u4f1a\u8bae\u5ba4\uff1b\u5185\u6838\u7a7a\u95f4\u5728\u4e0a\uff0c\u5728\u9ad8\u5730\u5740\uff0c\u6211\u4eec\u5047\u8bbe\u662f 30 \u53f7\u5230 39 \u53f7\u4f1a\u8bae\u5ba4\u3002\u8fd9\u4e24\u90e8\u5206\u7a7a\u95f4\u7684\u5206\u754c\u7ebf\uff0c\u56e0\u4e3a 32 \u4f4d\u548c 64 \u4f4d\u7684\u4e0d\u540c\u800c\u4e0d\u540c\uff0c\u6211\u4eec\u8fd9\u91cc\u4e0d\u6df1\u7a76\u3002\n\n\u5bf9\u4e8e\u666e\u901a\u8fdb\u7a0b\u6765\u8bf4\uff0c\u5185\u6838\u7a7a\u95f4\u7684\u90a3\u90e8\u5206\uff0c\u867d\u7136\u865a\u62df\u5730\u5740\u5728\u90a3\u91cc\uff0c\u4f46\u662f\u4e0d\u80fd\u8bbf\u95ee\u3002\u8fd9\u5c31\u50cf\u4f5c\u4e3a\u666e\u901a\u5458\u5de5\uff0c\u4f60\u660e\u660e\u77e5\u9053\u8d22\u52a1\u529e\u516c\u5ba4\u5728\u8fd9\u4e2a 30 \u53f7\u4f1a\u8bae\u5ba4\u95e8\u91cc\u9762\uff0c\u4f46\u662f\u95e8\u4e0a\u6302\u7740\u201c\u95f2\u4eba\u514d\u8fdb\u201d\uff0c\u4f60\u53ea\u80fd\u5728\u81ea\u5df1\u7684\u7528\u6237\u7a7a\u95f4\u91cc\u9762\u6298\u817e\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u7684\u7c7b\u6bd4\u4e5f\u8ddf\u6211\u4e4b\u524d\u9884\u60f3\u7684\u4e00\u6478\u4e00\u6837\uff0c\u5185\u6838\u7a7a\u95f4\u5c31\u662f\u9ad8\u7ba1\u6240\u5728\u7684\u533a\u57df\uff0c\u5199\u5b57\u697c\u7684\u9876\u5c42\u3002\u5458\u5de5\u4eec\u5219\u5728\u5199\u5b57\u697c\u7684\u4e0b\u9762\u697c\u5c42\u529e\u516c\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/virtual_mem.jpeg",alt:"virtual_mem.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6211\u4eec\u4ece\u6700\u4f4e\u4f4d\u5f00\u59cb\u6392\u8d77\uff0c\u5148\u662f Text Segment\u3001Data Segment \u548c BSS Segment\u3002Text Segment \u662f\u5b58\u653e\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u4ee3\u7801\u7684\u4f4d\u7f6e\uff0cData Segment \u5b58\u653e\u9759\u6001\u5e38\u91cf\uff0cBSS Segment \u5b58\u653e\u672a\u521d\u59cb\u5316\u7684\u9759\u6001\u53d8\u91cf\u3002\u8fd9\u4e9b\u90fd\u662f\u5728\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u91cc\u9762\u6709\u7684\u3002\n\n\u63a5\u4e0b\u6765\u662f\u5806\u6bb5\u3002\u5806\u662f\u5f80\u9ad8\u5730\u5740\u589e\u957f\u7684\uff0c\u662f\u7528\u6765\u52a8\u6001\u5206\u914d\u5185\u5b58\u7684\u533a\u57df\uff0cmalloc \u5c31\u662f\u5728\u8fd9\u91cc\u9762\u5206\u914d\u7684\u3002\n\n\u63a5\u4e0b\u6765\u7684\u533a\u57df\u662f Memory Mapping Segment\u3002\u8fd9\u5757\u5730\u5740\u53ef\u4ee5\u7528\u6765\u628a\u6587\u4ef6\u6620\u5c04\u8fdb\u5185\u5b58\u7528\u7684\uff0c\u5982\u679c\u4e8c\u8fdb\u5236\u7684\u6267\u884c\u6587\u4ef6\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u5c31\u662f\u5728\u8fd9\u4e2a\u533a\u57df\u91cc\u9762\u5c06 so \u6587\u4ef6\u6620\u5c04\u5230\u4e86\u5185\u5b58\u4e2d\u3002\n\n\u518d\u4e0b\u9762\u5c31\u662f\u6808\u5730\u5740\u6bb5\u4e86\uff0c\u4e3b\u7ebf\u7a0b\u7684\u51fd\u6570\u8c03\u7528\u7684\u51fd\u6570\u6808\u5c31\u662f\u7528\u8fd9\u91cc\u7684\u3002\n\n\u5982\u679c\u666e\u901a\u8fdb\u7a0b\u8fd8\u60f3\u8fdb\u4e00\u6b65\u8bbf\u95ee\u5185\u6838\u7a7a\u95f4\uff0c\u662f\u6ca1\u529e\u6cd5\u7684\uff0c\u53ea\u80fd\u773c\u5df4\u5df4\u5730\u770b\u7740\u3002\u5982\u679c\u9700\u8981\u8fdb\u884c\u66f4\u9ad8\u6743\u9650\u7684\u5de5\u4f5c\uff0c\u5c31\u9700\u8981\u8c03\u7528\u7cfb\u7edf\u8c03\u7528\uff0c\u8fdb\u5165\u5185\u6838\u3002\n\n\u4e00\u65e6\u8fdb\u5165\u4e86\u5185\u6838\uff0c\u5c31\u6362\u4e86\u4e00\u526f\u89c6\u89d2\u3002\u521a\u624d\u662f\u666e\u901a\u8fdb\u7a0b\u7684\u89c6\u89d2\uff0c\u89c9\u7740\u6574\u4e2a\u7a7a\u95f4\u662f\u5b83\u72ec\u5360\u7684\uff0c\u6ca1\u6709\u5176\u4ed6\u8fdb\u7a0b\u5b58\u5728\u3002\u5f53\u7136\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4e5f\u8fd9\u6837\u8ba4\u4e3a\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e92\u76f8\u770b\u4e0d\u5230\u5bf9\u65b9\u3002\u8fd9\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u540c\u8fdb\u7a0b\u7684 0 \u53f7\u5230 29 \u53f7\u4f1a\u8bae\u5ba4\u653e\u7684\u4e1c\u897f\u90fd\u4e0d\u4e00\u6837\u3002\n\n\u4f46\u662f\uff0c\u5230\u4e86\u5185\u6838\u91cc\u9762\uff0c\u65e0\u8bba\u662f\u4ece\u54ea\u4e2a\u8fdb\u7a0b\u8fdb\u6765\u7684\uff0c\u770b\u5230\u7684\u662f\u540c\u4e00\u4e2a\u5185\u6838\u7a7a\u95f4\uff0c\u770b\u5230\u7684\u662f\u540c\u4e00\u4e2a\u8fdb\u7a0b\u5217\u8868\u3002\u867d\u7136\u5185\u6838\u6808\u662f\u5404\u7528\u5404\u7684\uff0c\u4f46\u662f\u5982\u679c\u60f3\u77e5\u9053\u7684\u8bdd\uff0c\u8fd8\u662f\u80fd\u591f\u77e5\u9053\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u5185\u6838\u6808\u5728\u54ea\u91cc\u7684\u3002\u6240\u4ee5\uff0c\u5982\u679c\u8981\u8bbf\u95ee\u4e00\u4e9b\u516c\u5171\u7684\u6570\u636e\u7ed3\u6784\uff0c\u9700\u8981\u8fdb\u884c\u9501\u4fdd\u62a4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u540c\u7684\u8fdb\u7a0b\u8fdb\u5165\u5230\u5185\u6838\u540e\uff0c\u8fdb\u5165\u7684 30 \u53f7\u5230 39 \u53f7\u4f1a\u8bae\u5ba4\u662f\u540c\u4e00\u6279\u4f1a\u8bae\u5ba4\u3002\n\n\u5185\u6838\u7684\u4ee3\u7801\u8bbf\u95ee\u5185\u6838\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5927\u90e8\u5206\u7684\u60c5\u51b5\u4e0b\u90fd\u662f\u4f7f\u7528\u865a\u62df\u5730\u5740\u7684\u3002\u867d\u7136\u5185\u6838\u4ee3\u7801\u6743\u9650\u5f88\u5927\uff0c\u4f46\u662f\u80fd\u591f\u4f7f\u7528\u7684\u865a\u62df\u5730\u5740\u8303\u56f4\u4e5f\u53ea\u80fd\u5728\u5185\u6838\u7a7a\u95f4\uff0c\u4e5f\u5373\u5185\u6838\u4ee3\u7801\u8bbf\u95ee\u5185\u6838\u6570\u636e\u7ed3\u6784\uff0c\u53ea\u80fd\u7528 30 \u53f7\u5230 39 \u53f7\u8fd9\u4e9b\u7f16\u53f7\uff0c\u4e0d\u80fd\u7528 0 \u5230 29 \u53f7\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u662f\u88ab\u8fdb\u7a0b\u7a7a\u95f4\u5360\u7528\u7684\u3002\u800c\u4e14\uff0c\u8fdb\u7a0b\u6709\u5f88\u591a\u4e2a\u3002\u4f60\u73b0\u5728\u5728\u5185\u6838\uff0c\u4f46\u662f\u4f60\u4e0d\u77e5\u9053\u5f53\u524d\u6307\u7684 0 \u53f7\u662f\u54ea\u4e2a\u8fdb\u7a0b\u7684 0 \u53f7\u3002\n\n\u5728\u5185\u6838\u91cc\u9762\u4e5f\u4f1a\u6709\u5185\u6838\u7684\u4ee3\u7801\uff0c\u540c\u6837\u6709 Text Segment\u3001Data Segment \u548c BSS Segment\uff0c\u5185\u6838\u4ee3\u7801\u4e5f\u662f ELF \u683c\u5f0f\u7684\u3002\n\n\u4e0d\u8fc7\u6709\u4e86\u8fd9\u4e2a\u89c4\u5b9a\u4ee5\u540e\uff0c\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u8981\u5199\u5165\u6570\u636e\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u7b26\u5408\u91cc\u9762\u7684\u89c4\u5b9a\u4e86\uff0c\u6570\u636e\u4e0d\u80fd\u968f\u4fbf\u4e71\u653e\u4e86\u3002\n\n\u5c0f\u9a6c\u8bf4\uff0c\u201c\u6ca1\u95ee\u9898\uff0c\u8fd9\u4e2a\u4f5c\u4e3a\u9879\u76ee\u7ae0\u7a0b\uff0c\u6bcf\u4e00\u4e2a\u65b0\u5458\u5de5\u6765\u4e86\u90fd\u57f9\u8bad\u3002\u201d\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/virtual_mem_kernel_space.jpeg",alt:"virtual_mem_kernel_space.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u5185\u6838\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u548c\u4f7f\u7528\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u5730\u5740\uff0c\u4ece\u800c\u4fdd\u62a4\u7528\u6237\u7a7a\u95f4\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u8fdb\u7a0b\u7a33\u5b9a\u6027\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u90a3\u5185\u6838\u6709\u529e\u6cd5\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u5417\uff1f\n\n---\n\n\u662f\u7684\uff0c\u5185\u6838\u6709\u529e\u6cd5\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\uff0c\u4f46\u662f\u9700\u8981\u901a\u8fc7\u7279\u5b9a\u7684\u673a\u5236\u548c\u6743\u9650\u6765\u5b9e\u73b0\u3002\n\n\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u5185\u6838\u62e5\u6709\u66f4\u9ad8\u7684\u7279\u6743\u7ea7\u522b\u548c\u6743\u9650\uff0c\u56e0\u6b64\u5b83\u53ef\u4ee5\u8bbf\u95ee\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u5185\u5b58\uff0c\u5305\u62ec\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u3002\u4f46\u662f\uff0c\u5185\u6838\u5fc5\u987b\u901a\u8fc7\u7279\u5b9a\u7684\u673a\u5236\u6765\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\uff0c\u4ee5\u786e\u4fdd\u5b89\u5168\u6027\u548c\u4fdd\u62a4\u7528\u6237\u6570\u636e\u3002\n\n\u4e00\u79cd\u5e38\u89c1\u7684\u673a\u5236\u662f\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\uff08system call\uff09\u6765\u5b9e\u73b0\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u7528\u6237\u7a7a\u95f4\u7684\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u8bf7\u6c42\u5185\u6838\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\uff0c\u4f8b\u5982\u8bfb\u5199\u6587\u4ef6\u3001\u5206\u914d\u5185\u5b58\u7b49\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5185\u6838\u53ef\u4ee5\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\uff0c\u4ee5\u6ee1\u8db3\u8fdb\u7a0b\u7684\u8bf7\u6c42\u3002\n\n\u53e6\u5916\uff0c\u5185\u6838\u8fd8\u53ef\u4ee5\u4f7f\u7528\u9875\u8868\u6620\u5c04\u673a\u5236\u6765\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u3002\u9875\u8868\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5c06\u865a\u62df\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5730\u5740\u3002\u5185\u6838\u53ef\u4ee5\u4fee\u6539\u9875\u8868\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u4ee5\u4fbf\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u3002\u8fd9\u901a\u5e38\u5728\u5185\u6838\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u65f6\u4f7f\u7528\uff0c\u4f8b\u5982\u62f7\u8d1d\u6570\u636e\u6216\u8fdb\u884c\u5185\u5b58\u7ba1\u7406\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5185\u6838\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u9700\u8981\u8c28\u614e\u64cd\u4f5c\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u7684\u5b8c\u6574\u6027\u548c\u5b89\u5168\u6027\u3002\u5185\u6838\u5fc5\u987b\u9075\u5faa\u64cd\u4f5c\u7cfb\u7edf\u7684\u89c4\u5219\u548c\u673a\u5236\uff0c\u5e76\u4e14\u4ec5\u5728\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\u624d\u80fd\u8bbf\u95ee\u7528\u6237\u7a7a\u95f4\u7684\u5185\u5b58\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u62a4\u7528\u6237\u6570\u636e\uff0c\u5e76\u9632\u6b62\u5185\u6838\u6ee5\u7528\u5176\u7279\u6743\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"syscall \u548c page table mapping"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u7ba1\u7406\u7cfb\u7edf\u5168\u641e\u5b9a\uff0c\u81f3\u6b64\u751f\u5b58\u65e0\u95ee\u9898\n\n\u5468\u745c\u63a5\u7740\u8bf4\uff1a\u201c\u7269\u7406\u4f1a\u8bae\u5ba4\u548c\u865a\u62df\u7a7a\u95f4\u90fd\u5206\u6210\u5927\u5c0f\u76f8\u540c\u7684\u9875\uff0c\u6211\u4eec\u8fd8\u5f97\u6709\u4e00\u4e2a\u4f1a\u8bae\u5ba4\u7ba1\u7406\u7cfb\u7edf\uff0c\u5c06\u4e24\u8005\u5173\u8054\u8d77\u6765\uff0c\u8fd9\u6837\u9879\u76ee\u7ec4\u7533\u8bf7\u4f1a\u8bae\u5ba4\u7684\u65f6\u5019\uff0c\u4e5f\u6709\u4e2a\u7cfb\u7edf\u53ef\u4ee5\u7edf\u4e00\u7684\u7ba1\u7406\uff0c\u8981\u4e0d\u7136\u4f1a\u8bae\u5ba4\u8fd8\u4e0d\u5f97\u8001\u51b2\u7a81\u5440\u3002\u201d\n\n\u5bf9\u4e8e\u865a\u62df\u5185\u5b58\u7684\u8bbf\u95ee\uff0c\u4e5f\u662f\u6709\u4e00\u4e2a\u5730\u5740\u7684\uff0c\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u79cd\u7b56\u7565\uff0c\u5b9e\u73b0\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u8f6c\u6362\u3002\n\n\u4e3a\u4e86\u80fd\u591f\u5b9a\u4f4d\u548c\u8bbf\u95ee\u6bcf\u4e2a\u9875\uff0c\u9700\u8981\u6709\u4e2a\u9875\u8868\uff0c\u4fdd\u5b58\u6bcf\u4e2a\u9875\u7684\u8d77\u59cb\u5730\u5740\uff0c\u518d\u52a0\u4e0a\u5728\u9875\u5185\u7684\u504f\u79fb\u91cf\uff0c\u7ec4\u6210\u7ebf\u6027\u5730\u5740\uff0c\u5c31\u80fd\u5bf9\u4e8e\u5185\u5b58\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u8fdb\u884c\u8bbf\u95ee\u4e86\u3002\n\n\u865a\u62df\u5730\u5740\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u9875\u53f7\u548c\u9875\u5185\u504f\u79fb\u3002\u9875\u53f7\u4f5c\u4e3a\u9875\u8868\u7684\u7d22\u5f15\uff0c\u9875\u8868\u5305\u542b\u7269\u7406\u9875\u6bcf\u9875\u6240\u5728\u7269\u7406\u5185\u5b58\u7684\u57fa\u5730\u5740\u3002\u8fd9\u4e2a\u57fa\u5730\u5740\u4e0e\u9875\u5185\u504f\u79fb\u7684\u7ec4\u5408\u5c31\u5f62\u6210\u4e86\u7269\u7406\u5185\u5b58\u5730\u5740\u3002\n\n\u4e0b\u9762\u7684\u56fe\uff0c\u4e3e\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u9875\u8868\u7684\u4f8b\u5b50\uff0c\u865a\u62df\u5185\u5b58\u4e2d\u7684\u9875\u901a\u8fc7\u9875\u8868\u6620\u5c04\u5bf9\u5e94\u5230\u7269\u7406\u5185\u5b58\u4e2d\u7684\u9875\u3002\n\n---\n\n32 \u4f4d\u73af\u5883\u4e0b\uff0c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5171 4GB\u3002\u5982\u679c\u5206\u6210 4KB \u4e00\u4e2a\u9875\uff0c\u90a3\u5c31\u662f 1M \u4e2a\u9875\u3002\u6bcf\u4e2a\u9875\u8868\u9879\u9700\u8981 4 \u4e2a\u5b57\u8282\u6765\u5b58\u50a8\uff0c\u90a3\u4e48\u6574\u4e2a 4GB \u7a7a\u95f4\u7684\u6620\u5c04\u5c31\u9700\u8981 4MB \u7684\u5185\u5b58\u6765\u5b58\u50a8\u6620\u5c04\u8868\u3002\u5982\u679c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u6620\u5c04\u8868\uff0c100 \u4e2a\u8fdb\u7a0b\u5c31\u9700\u8981 400MB \u7684\u5185\u5b58\u3002\u5bf9\u4e8e\u5185\u6838\u6765\u8bb2\uff0c\u6709\u70b9\u5927\u4e86\u3002\n\n\u9875\u8868\u4e2d\u6240\u6709\u9875\u8868\u9879\u5fc5\u987b\u63d0\u524d\u5efa\u597d\uff0c\u5e76\u4e14\u8981\u6c42\u662f\u8fde\u7eed\u7684\u3002\u5982\u679c\u4e0d\u8fde\u7eed\uff0c\u5c31\u6ca1\u6709\u529e\u6cd5\u901a\u8fc7\u865a\u62df\u5730\u5740\u91cc\u9762\u7684\u9875\u53f7\u627e\u5230\u5bf9\u5e94\u7684\u9875\u8868\u9879\u4e86\u3002\n\n\u90a3\u600e\u4e48\u529e\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u8bd5\u7740\u5c06\u9875\u8868\u518d\u5206\u9875\uff0c4G \u7684\u7a7a\u95f4\u9700\u8981 4M \u7684\u9875\u8868\u6765\u5b58\u50a8\u6620\u5c04\u3002\u6211\u4eec\u628a\u8fd9 4M \u5206\u6210 1K\uff081024\uff09\u4e2a 4K\uff0c\u6bcf\u4e2a 4K \u53c8\u80fd\u653e\u5728\u4e00\u9875\u91cc\u9762\uff0c\u8fd9\u6837 1K \u4e2a 4K \u5c31\u662f 1K \u4e2a\u9875\uff0c\u8fd9 1K \u4e2a\u9875\u4e5f\u9700\u8981\u4e00\u4e2a\u8868\u8fdb\u884c\u7ba1\u7406\uff0c\u6211\u4eec\u79f0\u4e3a\u9875\u76ee\u5f55\u8868\uff0c\u8fd9\u4e2a\u9875\u76ee\u5f55\u8868\u91cc\u9762\u6709 1K \u9879\uff0c\u6bcf\u9879 4 \u4e2a\u5b57\u8282\uff0c\u9875\u76ee\u5f55\u8868\u5927\u5c0f\u4e5f\u662f 4K\u3002\n\n\u9875\u76ee\u5f55\u6709 1K \u9879\uff0c\u7528 10 \u4f4d\u5c31\u53ef\u4ee5\u8868\u793a\u8bbf\u95ee\u9875\u76ee\u5f55\u7684\u54ea\u4e00\u9879\u3002\u8fd9\u4e00\u9879\u5176\u5b9e\u5bf9\u5e94\u7684\u662f\u4e00\u6574\u9875\u7684\u9875\u8868\u9879\uff0c\u4e5f\u5373 4K \u7684\u9875\u8868\u9879\u3002\u6bcf\u4e2a\u9875\u8868\u9879\u4e5f\u662f 4 \u4e2a\u5b57\u8282\uff0c\u56e0\u800c\u4e00\u6574\u9875\u7684\u9875\u8868\u9879\u662f 1k \u4e2a\u3002\u518d\u7528 10 \u4f4d\u5c31\u53ef\u4ee5\u8868\u793a\u8bbf\u95ee\u9875\u8868\u9879\u7684\u54ea\u4e00\u9879\uff0c\u9875\u8868\u9879\u4e2d\u7684\u4e00\u9879\u5bf9\u5e94\u7684\u5c31\u662f\u4e00\u4e2a\u9875\uff0c\u662f\u5b58\u653e\u6570\u636e\u7684\u9875\uff0c\u8fd9\u4e2a\u9875\u7684\u5927\u5c0f\u662f 4K\uff0c\u7528 12 \u4f4d\u53ef\u4ee5\u5b9a\u4f4d\u8fd9\u4e2a\u9875\u5185\u7684\u4efb\u4f55\u4e00\u4e2a\u4f4d\u7f6e\u3002\n\n\u8fd9\u6837\u52a0\u8d77\u6765\u6b63\u597d 32 \u4f4d\uff0c\u4e5f\u5c31\u662f\u7528\u524d 10 \u4f4d\u5b9a\u4f4d\u5230\u9875\u76ee\u5f55\u8868\u4e2d\u7684\u4e00\u9879\u3002\u5c06\u8fd9\u4e00\u9879\u5bf9\u5e94\u7684\u9875\u8868\u53d6\u51fa\u6765\u5171 1k \u9879\uff0c\u518d\u7528\u4e2d\u95f4 10 \u4f4d\u5b9a\u4f4d\u5230\u9875\u8868\u4e2d\u7684\u4e00\u9879\uff0c\u5c06\u8fd9\u4e00\u9879\u5bf9\u5e94\u7684\u5b58\u653e\u6570\u636e\u7684\u9875\u53d6\u51fa\u6765\uff0c\u518d\u7528\u6700\u540e 12 \u4f4d\u5b9a\u4f4d\u5230\u9875\u4e2d\u7684\u5177\u4f53\u4f4d\u7f6e\u8bbf\u95ee\u6570\u636e\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u662f\u600e\u4e48\u6620\u5c04\u7684\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5148\u4e0d\u770b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/mem_page.jpeg",alt:"mem_page.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/memory_page_detail.jpeg",alt:"memory_page_detail.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u5982\u679c\u8fd9\u6837\u7684\u8bdd\uff0c\u6620\u5c04 4GB \u5730\u5740\u7a7a\u95f4\u5c31\u9700\u8981 4MB+4KB \u7684\u5185\u5b58\uff0c\u8fd9\u6837\u4e0d\u662f\u66f4\u5927\u4e86\u5417\uff1f\u5f53\u7136\u5982\u679c\u9875\u662f\u6ee1\u7684\uff0c\u5f53\u65f6\u662f\u66f4\u5927\u4e86\uff0c\u4f46\u662f\uff0c\u6211\u4eec\u5f80\u5f80\u4e0d\u4f1a\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u5206\u914d\u90a3\u4e48\u591a\u5185\u5b58\u3002\n\n\u6bd4\u5982\u8bf4\uff0c\u4e0a\u9762\u56fe\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u53ea\u7ed9\u8fd9\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e86\u4e00\u4e2a\u6570\u636e\u9875\u3002\u5982\u679c\u53ea\u4f7f\u7528\u9875\u8868\uff0c\u4e5f\u9700\u8981\u5b8c\u6574\u7684 1M \u4e2a\u9875\u8868\u9879\u5171 4M \u7684\u5185\u5b58\uff0c\u4f46\u662f\u5982\u679c\u4f7f\u7528\u4e86\u9875\u76ee\u5f55\uff0c\u9875\u76ee\u5f55\u9700\u8981 1K \u4e2a\u5168\u90e8\u5206\u914d\uff0c\u5360\u7528\u5185\u5b58 4K\uff0c\u4f46\u662f\u91cc\u9762\u53ea\u6709\u4e00\u9879\u4f7f\u7528\u4e86\u3002\u5230\u4e86\u9875\u8868\u9879\uff0c\u53ea\u9700\u8981\u5206\u914d\u80fd\u591f\u7ba1\u7406\u90a3\u4e2a\u6570\u636e\u9875\u7684\u9875\u8868\u9879\u9875\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6700\u591a 4K\uff0c\u8fd9\u6837\u5185\u5b58\u5c31\u8282\u7701\u591a\u4e86\u3002\n\n\u5f53\u7136\u5bf9\u4e8e 64 \u4f4d\u7684\u7cfb\u7edf\uff0c\u4e24\u7ea7\u80af\u5b9a\u4e0d\u591f\u4e86\uff0c\u5c31\u53d8\u6210\u4e86\u56db\u7ea7\u76ee\u5f55\uff0c\u5206\u522b\u662f\u5168\u5c40\u9875\u76ee\u5f55\u9879 PGD\uff08Page Global Directory\uff09\u3001\u4e0a\u5c42\u9875\u76ee\u5f55\u9879 PUD\uff08Page Upper Directory\uff09\u3001\u4e2d\u95f4\u9875\u76ee\u5f55\u9879 PMD\uff08Page Middle Directory\uff09\u548c\u9875\u8868\u9879 PTE\uff08Page Table Entry\uff09\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/page_table_directory.jpeg",alt:"page_table_directory.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8bbe\u8ba1\u5b8c\u6bd5\u4f1a\u8bae\u5ba4\u7ba1\u7406\u7cfb\u7edf\uff0c\u518d\u52a0\u4e0a\u524d\u9762\u7684\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf\uff0c\u5bf9\u4e8e\u4e00\u5bb6\u5916\u5305\u516c\u53f8\u6765\u8bb2\uff0c\u65e0\u8bba\u63a5\u4ec0\u4e48\u6837\u7684\u9879\u76ee\u90fd\u80fd\u8f7b\u677e\u641e\u5b9a\u4e86\u3002\u6211\u4eec\u5e38\u628a CPU \u548c\u5185\u5b58\u5408\u79f0\u4e3a\u8ba1\u7b97\u3002\u81f3\u6b64\uff0c\u8ba1\u7b97\u7684\u95ee\u9898\u5c31\u7b97\u641e\u5b9a\u4e86\u3002\u89e3\u51b3\u4e86\u8fd9\u4e24\u5927\u95ee\u9898\uff0c\u4e00\u5bb6\u5916\u5305\u516c\u53f8\u7684\u751f\u5b58\u95ee\u9898\uff0c\u5c31\u7b97\u89e3\u51b3\u4e86\u3002\n\n\u5c0f\u9a6c\u603b\u7b97\u662f\u53ef\u4ee5\u677e\u4e00\u53e3\u6c14\u4e86\uff0c\u4ed6\u548c\u5468\u745c\u3001\u5f20\u662d\u597d\u597d\u5730\u6413\u4e86\u4e00\u987f\uff0c\u559d\u5f97\u660f\u5929\u9ed1\u5730\u3002\u5468\u745c\u548c\u5f20\u662d\u7eb7\u7eb7\u611f\u6168\uff0c\u5e78\u4e8f\u5f53\u5e74\u8ddf\u4e86\u9a6c\u54e5\uff0c\u4eca\u65e5\u624d\u6709\u51fa\u5934\u4e4b\u65e5\u3002\n\n\u751f\u5b58\u95ee\u9898\u867d\u7136\u89e3\u51b3\u4e86\uff0c\u9a6c\u54e5\u53ef\u975e\u6c60\u4e2d\u4e4b\u7269\uff0c\u63a5\u4e0b\u6765\u8981\u89e3\u51b3\u7684\u5c31\u662f\u53d1\u5c55\u95ee\u9898\uff0c\u9a6c\u54e5\u80fd\u60f3\u51fa\u4ec0\u4e48\u529e\u6cd5\u8fdb\u4e00\u6b65\u58ee\u5927\u4f01\u4e1a\u5462\uff1f\u6b32\u77e5\u540e\u4e8b\uff0c\u4e14\u542c\u4e0b\u56de\u5206\u89e3\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u516c\u53f8\u53d1\u5c55\u9700\u79ef\u7d2f\uff0c\u9a6c\u54e5\u5efa\u7acb\u77e5\u8bc6\u5e93\n\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u6709\u4e00\u4e2a\u5b58\u653e\u8d44\u6599\u7684\u6863\u6848\u5e93\uff08\u6587\u4ef6\u7cfb\u7edf\uff09\u3002\u6863\u6848\u5e93\u5e94\u8be5\u4e0d\u4f9d\u8d56\u4e8e\u9879\u76ee\u800c\u72ec\u7acb\u5b58\u5728\uff0c\u5e94\u8be5\u4e95\u4e95\u6709\u6761\u3001\u5229\u4e8e\u67e5\u8be2\uff1b\u5e94\u8be5\u957f\u4e45\u4fdd\u5b58\uff0c\u4e0d\u968f\u4eba\u5458\u6d41\u52a8\u800c\u635f\u5931\u3002\n\n\u516c\u53f8\u5230\u4e86\u8fd9\u4e2a\u9636\u6bb5\uff0c\u9664\u4e86\u5468\u745c\u548c\u5f20\u662d\uff0c\u5e94\u8be5\u4e13\u95e8\u8bf7\u4e00\u4e2a\u80fd\u591f\u79ef\u7d2f\u6838\u5fc3\u7ade\u4e89\u529b\u7684\u4eba\u6765\u4e3b\u6301\u5927\u5c40\u4e86\u3002\u9a6c\u54e5\u60f3\u5230\u4e86\uff0c\u524d\u4e00\u9635\u884c\u4e1a\u4ea4\u6d41\u5927\u4f1a\u4e0a\uff0c\u4ed6\u9047\u5230\u4e86\u4e00\u4e2a\u5f88\u725b\u7684\u67b6\u6784\u5e08\u2014\u2014\u9c81\u8083\u3002\u4ed6\u611f\u89c9\u9c81\u8083\u5728\u8fd9\u65b9\u9762\u5f88\u6709\u60f3\u6cd5\uff0c\u4e8e\u662f\u5c31\u8bf7\u4ed6\u6765\u4e3b\u6301\u5927\u5c40\u3002\n\n\u9c81\u8083\u8ddf\u9a6c\u54e5\u8bf4\uff0c\u6784\u5efa\u516c\u53f8\u7684\u6838\u5fc3\u6280\u672f\u80fd\u529b\uff0c\u8fd9\u4e2a\u6863\u6848\u5e93\uff08\u6587\u4ef6\u7cfb\u7edf\uff09\u4e5f\u53ef\u4ee5\u53eb\u4f5c\u77e5\u8bc6\u5e93\uff0c\u8fd9\u4e2a\u9700\u8981\u597d\u597d\u89c4\u5212\u4e00\u4e0b\u3002\u89c4\u5212\u6587\u4ef6\u7cfb\u7edf\u7684\u65f6\u5019\uff0c\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u51e0\u70b9\u3002\n\n\u7b2c\u4e00\u70b9\uff0c\u6587\u4ef6\u7cfb\u7edf\u8981\u6709\u4e25\u683c\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u4f7f\u5f97\u6587\u4ef6\u80fd\u591f\u4ee5\u5757\u4e3a\u5355\u4f4d\u8fdb\u884c\u5b58\u50a8\u3002\n\n\u8fd9\u5c31\u50cf\u56fe\u4e66\u9986\u91cc\uff0c\u6211\u4eec\u4f1a\u7ed9\u8bbe\u7f6e\u4e00\u6392\u6392\u4e66\u67b6\uff0c\u7136\u540e\u518d\u628a\u4e66\u67b6\u5206\u6210\u4e00\u4e2a\u4e2a\u5c0f\u683c\u5b50\u3002\u6709\u7684\u9879\u76ee\u5b58\u653e\u7684\u8d44\u6599\u975e\u5e38\u591a\uff0c\u4e00\u4e2a\u683c\u5b50\u653e\u4e0d\u4e0b\uff0c\u5c31\u9700\u8981\u591a\u4e2a\u683c\u5b50\u6765\u8fdb\u884c\u5b58\u653e\u3002\u6211\u4eec\u628a\u8fd9\u4e2a\u533a\u57df\u79f0\u4e3a\u5b58\u653e\u539f\u59cb\u8d44\u6599\u7684\u4ed3\u5e93\u533a\u3002\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\uff0c\u786c\u76d8\u5206\u6210\u76f8\u540c\u5927\u5c0f\u7684\u5355\u5143\uff0c\u6211\u4eec\u79f0\u4e3a\u5757\u3002\u4e00\u5757\u7684\u5927\u5c0f\u662f\u6247\u533a\u5927\u5c0f\u7684\u6574\u6570\u500d\uff0c\u9ed8\u8ba4\u662f 4K\uff0c\u7528\u6765\u5b58\u653e\u6587\u4ef6\u7684\u6570\u636e\u90e8\u5206\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5982\u679c\u6211\u4eec\u50cf\u5b58\u653e\u4e00\u4e2a\u6587\u4ef6\uff0c\u5c31\u4e0d\u7528\u7ed9\u4ed6\u5206\u914d\u4e00\u5757\u8fde\u7eed\u7684\u7a7a\u95f4\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u5206\u6563\u6210\u4e00\u4e2a\u4e2a\u5c0f\u5757\u8fdb\u884c\u5b58\u653e\u3002\u8fd9\u6837\u5c31\u7075\u6d3b\u5f97\u591a\uff0c\u4e5f\u6bd4\u8f83\u5bb9\u6613\u6dfb\u52a0\u3001\u5220\u9664\u548c\u63d2\u5165\u6570\u636e\u3002\n\n\u7b2c\u4e8c\u70b9\uff0c\u6587\u4ef6\u7cfb\u7edf\u4e2d\u4e5f\u8981\u6709\u7d22\u5f15\u533a\uff0c\u7528\u6765\u65b9\u4fbf\u67e5\u627e\u4e00\u4e2a\u6587\u4ef6\u5206\u6210\u7684\u591a\u4e2a\u5757\u90fd\u5b58\u653e\u5728\u4e86\u4ec0\u4e48\u4f4d\u7f6e\u3002\n\n\u8fd9\u5c31\u597d\u6bd4\uff0c\u56fe\u4e66\u9986\u7684\u4e66\u592a\u591a\u4e86\uff0c\u4e3a\u4e86\u65b9\u4fbf\u67e5\u627e\uff0c\u6211\u4eec\u9700\u8981\u4e13\u95e8\u8bbe\u7f6e\u4e00\u6392\u4e66\u67b6\uff0c\u8fd9\u91cc\u9762\u4f1a\u5199\u6e05\u695a\u6574\u4e2a\u6863\u6848\u5e93\u6709\u54ea\u4e9b\u8d44\u6599\uff0c\u8d44\u6599\u5728\u54ea\u4e2a\u67b6\u5b50\u7684\u54ea\u4e2a\u683c\u5b50\u4e0a\u3002\u8fd9\u6837\u627e\u8d44\u6599\u7684\u65f6\u5019\u5c31\u4e0d\u7528\u8dd1\u904d\u6574\u4e2a\u6863\u6848\u5e93\uff0c\u53ea\u8981\u5728\u8fd9\u4e2a\u4e66\u67b6\u4e0a\u627e\u5230\u540e\uff0c\u76f4\u5954\u76ee\u6807\u4e66\u67b6\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762\uff0c\u6bcf\u4e00\u4e2a\u6587\u4ef6\u6709\u4e00\u4e2a Inode\uff0cinode \u7684\u201ci\u201d\u662f index \u7684\u610f\u601d\uff0c\u5176\u5b9e\u5c31\u662f\u201c\u7d22\u5f15\u201d\u3002inode \u91cc\u9762\u6709\u6587\u4ef6\u7684\u8bfb\u5199\u6743\u9650 i_mode\uff0c\u5c5e\u4e8e\u54ea\u4e2a\u7528\u6237 i_uid\uff0c\u54ea\u4e2a\u7ec4 i_gid\uff0c\u5927\u5c0f\u662f\u591a\u5c11 i_size_io\uff0c\u5360\u7528\u591a\u5c11\u4e2a\u5757 i_blocks_io\u3002\u201c\u67d0\u4e2a\u6587\u4ef6\u5206\u6210\u51e0\u5757\u3001\u6bcf\u4e00\u5757\u5728\u54ea\u91cc\u201d\uff0c\u8fd9\u4e9b\u4fe1\u606f\u4e5f\u5728 inode \u91cc\u9762\uff0c\u4fdd\u5b58\u5728 i_block \u91cc\u9762\u3002\n\n\u7b2c\u4e09\u70b9\uff0c\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6709\u7684\u6587\u4ef6\u662f\u70ed\u70b9\u6587\u4ef6\uff0c\u8fd1\u671f\u7ecf\u5e38\u88ab\u8bfb\u53d6\u548c\u5199\u5165\uff0c\u6587\u4ef6\u7cfb\u7edf\u5e94\u8be5\u6709\u7f13\u5b58\u5c42\u3002\n\n\u8fd9\u5c31\u76f8\u5f53\u4e8e\u56fe\u4e66\u9986\u91cc\u9762\u7684\u70ed\u95e8\u56fe\u4e66\u533a\uff0c\u8fd9\u91cc\u9762\u7684\u4e66\u90fd\u662f\u7545\u9500\u4e66\u6216\u8005\u662f\u5e38\u5e38\u88ab\u501f\u8fd8\u7684\u56fe\u4e66\u3002\u56e0\u4e3a\u501f\u8fd8\u7684\u6b21\u6570\u6bd4\u8f83\u591a\uff0c\u90a3\u5c31\u6ca1\u5fc5\u8981\u6bcf\u6b21\u6709\u4eba\u8fd8\u4e86\u4e4b\u540e\uff0c\u8fd8\u653e\u56de\u9065\u8fdc\u7684\u8d27\u67b6\uff0c\u6211\u4eec\u53ef\u4ee5\u4e13\u95e8\u5f00\u8f9f\u4e00\u4e2a\u533a\u57df\uff0c\u653e\u7f6e\u8fd9\u4e9b\u501f\u8fd8\u9891\u6b21\u9ad8\u7684\u56fe\u4e66\u3002\u8fd9\u6837\u501f\u8fd8\u7684\u6548\u7387\u5c31\u4f1a\u63d0\u9ad8\u3002\n\n\u7b2c\u56db\u70b9\uff0c\u6587\u4ef6\u5e94\u8be5\u7528\u6587\u4ef6\u5939\u7684\u5f62\u5f0f\u7ec4\u7ec7\u8d77\u6765\uff0c\u65b9\u4fbf\u7ba1\u7406\u548c\u67e5\u8be2\u3002\n\n\u8fd9\u5c31\u50cf\u5728\u56fe\u4e66\u9986\u91cc\u9762\uff0c\u4f60\u53ef\u4ee5\u7ed9\u8fd9\u4e9b\u8d44\u6599\u5206\u95e8\u522b\u7c7b\uff0c\u6bd4\u5982\u5206\u6210\u8ba1\u7b97\u673a\u7c7b\u3001\u6587\u5b66\u7c7b\u3001\u5386\u53f2\u7c7b\u7b49\u7b49\u3002\u8fd9\u6837\u4f60\u4e5f\u5bb9\u6613\u7ba1\u7406\uff0c\u9879\u76ee\u7ec4\u501f\u9605\u7684\u65f6\u5019\u53ea\u8981\u5728\u67d0\u4e2a\u7c7b\u522b\u4e2d\u53bb\u627e\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u6709\u4e00\u4e2a\u540d\u5b57\uff0c\u6211\u4eec\u8bbf\u95ee\u4e00\u4e2a\u6587\u4ef6\uff0c\u5e0c\u671b\u901a\u8fc7\u4ed6\u7684\u540d\u5b57\u5c31\u53ef\u4ee5\u627e\u5230\u3002\u6587\u4ef6\u540d\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u6587\u672c\uff0c\u6240\u4ee5\u6587\u4ef6\u540d\u7ecf\u5e38\u4f1a\u51b2\u7a81\uff0c\u4e0d\u540c\u7528\u6237\u53d6\u76f8\u540c\u7684\u540d\u5b57\u7684\u60c5\u51b5\u4f1a\u7ecf\u5e38\u51fa\u73b0\u7684\u3002\n\n\u8981\u60f3\u628a\u5f88\u591a\u7684\u6587\u4ef6\u6709\u5e8f\u5730\u7ec4\u7ec7\u8d77\u6765\uff0c\u6211\u4eec\u5c31\u9700\u8981\u628a\u4ed6\u4eec\u505a\u6210\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u5939\u3002\u8fd9\u6837\uff0c\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u53ef\u4ee5\u5305\u542b\u6587\u4ef6\u5939\uff0c\u4e5f\u53ef\u4ee5\u5305\u542b\u6587\u4ef6\uff0c\u8fd9\u6837\u5c31\u5f62\u6210\u4e86\u4e00\u79cd\u6811\u5f62\u7ed3\u6784\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0d\u540c\u7684\u7528\u6237\u653e\u5728\u4e0d\u540c\u7684\u7528\u6237\u76ee\u5f55\u4e0b\uff0c\u5c31\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u907f\u514d\u4e86\u547d\u540d\u7684\u51b2\u7a81\u95ee\u9898\u3002\n\n\n\u7b2c\u4e94\u70b9\uff0cLinux \u5185\u6838\u8981\u5728\u81ea\u5df1\u7684\u5185\u5b58\u91cc\u9762\u7ef4\u62a4\u4e00\u5957\u6570\u636e\u7ed3\u6784\uff0c\u6765\u4fdd\u5b58\u54ea\u4e9b\u6587\u4ef6\u88ab\u54ea\u4e9b\u8fdb\u7a0b\u6253\u5f00\u548c\u4f7f\u7528\u3002\n\n\u8fd9\u5c31\u597d\u6bd4\uff0c\u56fe\u4e66\u9986\u91cc\u4f1a\u6709\u4e2a\u56fe\u4e66\u7ba1\u7406\u7cfb\u7edf\uff0c\u8bb0\u5f55\u54ea\u4e9b\u4e66\u88ab\u501f\u9605\u4e86\uff0c\u88ab\u8c01\u501f\u9605\u4e86\uff0c\u501f\u9605\u4e86\u591a\u4e45\uff0c\u4ec0\u4e48\u65f6\u5019\u5f52\u8fd8\u3002\n\n\u8fd9\u4e2a\u56fe\u4e66\u7ba1\u7406\u7cfb\u7edf\u5c24\u4e3a\u91cd\u8981\uff0c\u5982\u679c\u4e0d\u662f\u5f88\u65b9\u4fbf\u4f7f\u7528\uff0c\u4ee5\u540e\u9879\u76ee\u4e2d\u79ef\u7d2f\u4e86\u7ecf\u9a8c\uff0c\u5c31\u6ca1\u6709\u4eba\u613f\u610f\u5f80\u77e5\u8bc6\u5e93\u91cc\u9762\u653e\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"VFS"}),"\n",(0,l.jsx)(e.p,{children:"page cache"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/filesystem.jpeg",alt:"filesystem.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u65e0\u8bba\u54ea\u4e2a\u9879\u76ee\uff08\u8fdb\u7a0b\uff09\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7 write \u7cfb\u7edf\u8c03\u7528\u5199\u5165\u77e5\u8bc6\u5e93\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u6253\u5f00\u7684\u6587\u4ef6\u90fd\u6709\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002files_struct \u91cc\u9762\u4f1a\u6709\u6587\u4ef6\u63cf\u8ff0\u7b26\u6570\u7ec4\u3002\u6bcf\u4e2a\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u662f\u8fd9\u4e2a\u6570\u7ec4\u7684\u4e0b\u6807\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u6307\u5411\u4e00\u4e2a struct file \u7ed3\u6784\uff0c\u8868\u793a\u6253\u5f00\u7684\u6587\u4ef6\u3002\u8fd9\u4e2a\u7ed3\u6784\u91cc\u9762\u6709\u8fd9\u4e2a\u6587\u4ef6\u5bf9\u5e94\u7684 inode\uff0c\u6700\u91cd\u8981\u7684\u662f\u8fd9\u4e2a\u6587\u4ef6\u5bf9\u5e94\u7684\u64cd\u4f5c file_operation\u3002\u5982\u679c\u64cd\u4f5c\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5c31\u770b\u8fd9\u4e2a file_operation \u91cc\u9762\u7684\u5b9a\u4e49\u4e86\u3002\n\n\u6bcf\u4e00\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u90fd\u6709\u4e00\u4e2a dentry \u5bf9\u5e94\uff0c\u867d\u7136\u6211\u4eec\u53eb\u4f5c directory entry\uff0c\u4f46\u662f\u4ed6\u4e0d\u4ec5\u4ec5\u8868\u793a\u6587\u4ef6\u5939\uff0c\u4e5f\u8868\u793a\u6587\u4ef6\u3002\u4ed6\u6700\u91cd\u8981\u7684\u4f5c\u7528\u5c31\u662f\u6307\u5411\u8fd9\u4e2a\u6587\u4ef6\u5bf9\u5e94\u7684 inode\u3002\n\n\u5982\u679c\u8bf4 file \u7ed3\u6784\u662f\u4e00\u4e2a\u6587\u4ef6\u6253\u5f00\u4ee5\u540e\u624d\u521b\u5efa\u7684\uff0cdentry \u662f\u653e\u5728\u4e00\u4e2a dentry cache \u91cc\u9762\u7684\u3002\u6587\u4ef6\u5173\u95ed\u4e86\uff0c\u4ed6\u4f9d\u7136\u5b58\u5728\uff0c\u56e0\u800c\u4ed6\u53ef\u4ee5\u66f4\u957f\u671f\u7684\u7ef4\u62a4\u5185\u5b58\u4e2d\u7684\u6587\u4ef6\u7684\u8868\u793a\u548c\u786c\u76d8\u4e0a\u6587\u4ef6\u7684\u8868\u793a\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n\ninode \u7ed3\u6784\u5c31\u8868\u793a\u786c\u76d8\u4e0a\u7684 inode\uff0c\u5305\u62ec\u5757\u8bbe\u5907\u53f7\u7b49\u3002\u8fd9\u4e2a inode \u5bf9\u5e94\u7684\u64cd\u4f5c\u4fdd\u5b58\u5728 inode operations \u91cc\u9762\u3002\u771f\u6b63\u5199\u5165\u6570\u636e\uff0c\u662f\u5199\u5165\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f8b\u5982 ext4 \u6587\u4ef6\u7cfb\u7edf\u3002\n\n\u9a6c\u54e5\u542c\u4e86\u77e5\u8bc6\u5e93\u548c\u6863\u6848\u5e93\u7684\u8bbe\u8ba1\uff0c\u975e\u5e38\u5f00\u5fc3\uff0c\u5bf9\u9c81\u8083\u8bf4\uff0c\u4f60\u8fd9\u4e94\u5927\u79d8\u7c4d\uff0c\u53ef\u662f\u5e2e\u4e86\u6211\u5927\u5fd9\u4e86\u3002\u4e8e\u662f\u9a6c\u4e0a\u4e0b\u4ee4\u5b9e\u65bd\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6709\u4e86\u79ef\u7d2f\u5efa\u751f\u6001\uff0c\u6210\u7acb\u6e20\u9053\u7ba1\u7406\u90e8\n\u6709\u4e86\u77e5\u8bc6\u5e93\uff0c\u516c\u53f8\u7684\u9762\u8c8c\u679c\u7136\u5927\u4e3a\u6539\u89c2\u3002\n\n\u9a6c\u54e5\u53d1\u73b0\uff0c\u5f53\u77e5\u8bc6\u5e93\u79ef\u7d2f\u5230\u4e00\u5b9a\u7a0b\u5ea6\uff0c\u516c\u53f8\u63a5\u4efb\u4f55\u9879\u76ee\u90fd\u80fd\u627e\u5230\u76f8\u4f3c\u7684\u65e7\u9879\u76ee\u4f5c\u4e3a\u53c2\u8003\uff0c\u4e0d\u7528\u91cd\u65b0\u8bbe\u8ba1\uff0c\u6548\u7387\u5927\u5927\u63d0\u9ad8\u3002\u800c\u4e14\u6700\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff0c\u6ca1\u6709\u77e5\u8bc6\u5e93\u7684\u65f6\u5019\uff0c\u539f\u6765\u9879\u76ee\u505a\u5f97\u597d\u4e0d\u597d\uff0c\u5b8c\u5168\u53d6\u51b3\u4e8e\u7a0b\u5e8f\u5458\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u77e5\u8bc6\u90fd\u5728\u7a0b\u5e8f\u5458\u7684\u8111\u5b50\u91cc\uff0c\u6240\u4ee5\u516c\u53f8\u5fc5\u987b\u8981\u62db\u8058\u9ad8\u8d28\u91cf\u7684\u7a0b\u5e8f\u5458\uff0c\u624d\u80fd\u4fdd\u8bc1\u9879\u76ee\u7684\u8d28\u91cf\u3002\u4e00\u65b9\u9762\u4f18\u79c0\u7684\u7a0b\u5e8f\u5458\u6570\u91cf\u5f88\u5c11\uff0c\u8fd9\u5927\u5927\u9650\u5236\u4e86\u516c\u53f8\u80fd\u591f\u63a5\u9879\u76ee\u7684\u89c4\u6a21\uff0c\u4e00\u65b9\u9762\u4f18\u79c0\u7684\u7a0b\u5e8f\u5458\u5b9e\u5728\u592a\u8d35\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u516c\u53f8\u7684\u6210\u672c\u3002\n\n\u6709\u4e86\u77e5\u8bc6\u5e93\uff0c\u4f9d\u8d56\u4e8e\u539f\u6765\u79ef\u7d2f\u7684\u4f53\u7cfb\uff0c\u53ea\u8981\u627e\u5230\u7c7b\u4f3c\u7684\u65e7\u9879\u76ee\uff0c\u54ea\u6015\u662f\u666e\u901a\u7684\u7a0b\u5e8f\u5458\uff0c\u53ea\u8981\u4f1a\u7167\u732b\u753b\u864e\uff0c\u7ed3\u679c\u5c31\u4e0d\u4f1a\u592a\u5dee\u3002\n\n\u4e8e\u662f\uff0c\u9a6c\u54e5\u9a6c\u4e0a\u60f3\u5230\uff0c\u73b0\u5728\u516c\u53f8\u53ea\u6709\u767e\u5341\u6765\u53f7\u4eba\uff0c\u80fd\u8d5a\u8fd9\u4e9b\u94b1\uff0c\u73b0\u5728\u62db\u4eba\u95e8\u69db\u964d\u4f4e\u4e86\uff0c\u6211\u8981\u662f\u62db\u8058\u4e00\u4e07\u4eba\uff0c\u8fd9\u80fd\u8d5a\u591a\u5c11\u94b1\u554a\uff01\n\n\u9c81\u8083\u5bf9\u9a6c\u54e5\u8bf4\uff0c\u201c\u4f60\u53ef\u5148\u522b\u6025\u7740\u62db\u4eba\uff0c\u5efa\u7acb\u77e5\u8bc6\u5e93\uff0c\u964d\u4f4e\u62db\u4eba\u6210\u672c\u624d\u662f\u7b2c\u4e00\u6b65\u3002\u516c\u53f8\u62db\u8058\u592a\u591a\u4eba\u4e0d\u5bb9\u6613\u7ba1\u7406\u3002\u65e2\u7136\u9879\u76ee\u7684\u6267\u884c\u53ef\u4ee5\u7167\u732b\u753b\u864e\uff0c\u5f88\u591a\u9879\u76ee\u53ef\u4ee5\u4e0d\u7528\u54b1\u4eec\u516c\u53f8\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u6e20\u9053\u9500\u552e\u4f53\u7cfb\uff08\u8f93\u5165\u548c\u8f93\u51fa\u7cfb\u7edf\uff09\uff0c\u8ba9\u4f9b\u5e94\u5546\u3001\u6e20\u9053\u5e2e\u6211\u4eec\u5356\uff0c\u5f62\u6210\u4e00\u4e2a\u751f\u6001\u3002\u8fd9\u516c\u53f8\u7684\u76c8\u5229\u89c4\u6a21\u53ef\u5c31\u4e0d\u662f\u62db\u4e00\u4e07\u4eba\u8fd9\u4e48\u70b9\u513f\u4e86\uff0c\u8fd9\u662f\u6307\u6570\u7ea7\u7684\u589e\u957f\u554a\uff01\u201d\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/device.jpeg",alt:"device.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u8f93\u5165\u548c\u8f93\u51fa\u7cfb\u7edf\u90fd\u6709\u54ea\u4e9b\u5462\uff1f\u6211\u4eec\u80fd\u4e3e\u51fa\u6765\u7684\uff0c\u4f8b\u5982\u952e\u76d8\u3001\u9f20\u6807\u3001\u663e\u793a\u5668\u3001\u7f51\u5361\u3001\u786c\u76d8\u3001\u6253\u5370\u673a\u3001CD/DVD \u7b49\u7b49\uff0c\u591a\u79cd\u591a\u6837\u3002\u8fd9\u6837\uff0c\u5f53\u7136\u65b9\u4fbf\u7528\u6237\u4f7f\u7528\u4e86\uff0c\u4f46\u662f\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bb2\uff0c\u5374\u662f\u4e00\u4ef6\u590d\u6742\u7684\u4e8b\u60c5\uff0c\u56e0\u4e3a\u8fd9\u4e48\u591a\u8bbe\u5907\uff0c\u5f62\u72b6\u3001\u7528\u6cd5\u3001\u529f\u80fd\u90fd\u4e0d\u4e00\u6837\uff0c\u600e\u4e48\u624d\u80fd\u7edf\u4e00\u7ba1\u7406\u8d77\u6765\u5462\uff1f\u6211\u4eec\u4e00\u5c42\u4e00\u5c42\u6765\u770b\u3002\n\n\u7b2c\u4e00\u5c42\uff0c\u7528\u8bbe\u5907\u63a7\u5236\u5668\u5c4f\u853d\u8bbe\u5907\u5dee\u5f02\u3002\n\n\u9a6c\u54e5\u8bf4\uff0c\u201c\u628a\u751f\u610f\u505a\u5230\u5168\u56fd\uff0c\u6211\u4e5f\u60f3\u8fc7\uff0c\u8fd9\u4e2a\u53ef\u4e0d\u5bb9\u6613\u3002\u54b1\u4eec\u5ba2\u6237\u591a\u79cd\u591a\u6837\uff0c\u4f17\u53e3\u96be\u8c03\uff0c\u4e0d\u540c\u7684\u5730\u57df\u4e0d\u4e00\u6837\uff0c\u4e0d\u540c\u7684\u884c\u4e1a\u4e0d\u4e00\u6837\u3002\u5982\u679c\u4f60\u4e0d\u61c2\u67d0\u4e2a\u5730\u65b9\u7684\u89c4\u77e9\uff0c\u6839\u672c\u5356\u4e0d\u51fa\u53bb\u4e1c\u897f\uff1b\u5982\u679c\u4f60\u4e0d\u61c2\u67d0\u4e2a\u5177\u4f53\u884c\u4e1a\u7684\u4f7f\u7528\u573a\u666f\uff0c\u4e5f\u65e0\u6cd5\u6ee1\u8db3\u5ba2\u6237\u7684\u9700\u6c42\u3002\u201d\n\n\u9c81\u8083\u8bf4\uff1a\u201c\u6240\u4ee5\u8bf4\uff0c\u5efa\u8bae\u60a8\u5efa\u7acb\u751f\u6001\uff0c\u8bbe\u7f6e\u5f88\u591a\u4ee3\u7406\u5546\uff0c\u8ba9\u5404\u4e2a\u5730\u533a\u548c\u5404\u4e2a\u884c\u4e1a\u7684\u4ee3\u7406\u5546\u5e2e\u4f60\u5c4f\u853d\u8fd9\u4e9b\u5dee\u5f02\u5316\u3002\u4f60\u548c\u4ee3\u7406\u5546\u4e4b\u95f4\u53ea\u8981\u8fdb\u884c\u7b80\u5355\u7684\u6807\u51c6\u4ea7\u54c1\u4ea4\u4ed8\u5c31\u53ef\u4ee5\u4e86\u3002\u201d\n\n\u8ba1\u7b97\u673a\u7cfb\u7edf\u5c31\u662f\u8fd9\u6837\u7684\u3002CPU \u5e76\u4e0d\u76f4\u63a5\u548c\u8bbe\u5907\u6253\u4ea4\u9053\uff0c\u4ed6\u4eec\u4e2d\u95f4\u6709\u4e00\u4e2a\u53eb\u4f5c\u8bbe\u5907\u63a7\u5236\u5668\uff08Device Control Unit\uff09\u7684\u7ec4\u4ef6\u3002\u4f8b\u5982\uff0c\u786c\u76d8\u6709\u78c1\u76d8\u63a7\u5236\u5668\u3001USB \u6709 USB \u63a7\u5236\u5668\u3001\u663e\u793a\u5668\u6709\u89c6\u9891\u63a7\u5236\u5668\u7b49\u3002\u8fd9\u4e9b\u63a7\u5236\u5668\u5c31\u50cf\u4ee3\u7406\u5546\u4e00\u6837\uff0c\u4ed6\u4eec\u77e5\u9053\u5982\u4f55\u5e94\u5bf9\u786c\u76d8\u3001\u9f20\u6807\u3001\u952e\u76d8\u3001\u663e\u793a\u5668\u7684\u884c\u4e3a\u3002\n\n\u4f60\u7684\u4ee3\u7406\u5546\u5f80\u5f80\u662f\u5c0f\u516c\u53f8\u3002\u63a7\u5236\u5668\u5176\u5b9e\u6709\u70b9\u513f\u50cf\u4e00\u53f0\u5c0f\u7535\u8111\u3002\u4ed6\u6709\u4ed6\u7684\u82af\u7247\uff0c\u7c7b\u4f3c\u5c0f CPU\uff0c\u6267\u884c\u81ea\u5df1\u7684\u903b\u8f91\u3002\u4ed6\u4e5f\u6709\u4ed6\u7684\u5bc4\u5b58\u5668\u3002\u8fd9\u6837 CPU \u5c31\u53ef\u4ee5\u901a\u8fc7\u5199\u8fd9\u4e9b\u5bc4\u5b58\u5668\uff0c\u5bf9\u63a7\u5236\u5668\u4e0b\u53d1\u6307\u4ee4\uff0c\u901a\u8fc7\u8bfb\u8fd9\u4e9b\u5bc4\u5b58\u5668\uff0c\u67e5\u770b\u63a7\u5236\u5668\u5bf9\u4e8e\u8bbe\u5907\u7684\u64cd\u4f5c\u72b6\u6001\u3002\n\nCPU \u5bf9\u4e8e\u5bc4\u5b58\u5668\u7684\u8bfb\u5199\uff0c\u53ef\u6bd4\u76f4\u63a5\u63a7\u5236\u786c\u4ef6\uff0c\u8981\u6807\u51c6\u548c\u8f7b\u677e\u5f88\u591a\u3002\u8fd9\u5c31\u76f8\u5f53\u4e8e\u4f60\u548c\u4ee3\u7406\u5546\u7684\u6807\u51c6\u4ea7\u54c1\u4ea4\u4ed8\u3002\n\n\u7b2c\u4e8c\u5c42\uff0c\u7528\u9a71\u52a8\u7a0b\u5e8f\u5c4f\u853d\u8bbe\u5907\u63a7\u5236\u5668\u5dee\u5f02\u3002\n\n\u9a6c\u54e5\u8bf4\uff1a\u201c\u4f60\u8fd9\u4e48\u4e00\u8bf4\uff0c\u8fd8\u771f\u6709\u9053\u7406\uff0c\u5982\u679c\u6211\u4eec\u80fd\u591f\u627e\u5230\u8db3\u591f\u591a\u7684\u4ee3\u7406\u5546\uff0c\u90a3\u5c31\u9ad8\u6795\u65e0\u5fe7\u4e86\u3002\u201d\n\n\u9c81\u8083\u8bf4\uff1a\u201c\u5176\u5b9e\u4e8b\u60c5\u8fd8\u6ca1\u8fd9\u4e48\u7b80\u5355\uff0c\u867d\u7136\u4ee3\u7406\u5546\u673a\u5236\u80fd\u591f\u5e2e\u6211\u4eec\u5c4f\u853d\u5f88\u591a\u8bbe\u5907\u7684\u7ec6\u8282\uff0c\u4f46\u662f\u4ece\u4e0a\u9762\u7684\u63cf\u8ff0\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u7531\u4e8e\u6bcf\u79cd\u8bbe\u5907\u7684\u63a7\u5236\u5668\u7684\u5bc4\u5b58\u5668\u3001\u7f13\u51b2\u533a\u7b49\u4f7f\u7528\u6a21\u5f0f\uff0c\u6307\u4ee4\u90fd\u4e0d\u540c\u3002\u5bf9\u4e8e\u54b1\u4eec\u516c\u53f8\u6765\u8bb2\uff0c\u5c31\u9700\u8981\u6709\u4e2a\u90e8\u95e8\u4e13\u95e8\u5bf9\u63a5\u4ee3\u7406\u5546\uff0c\u5411\u5176\u4ed6\u90e8\u95e8\u5c4f\u853d\u4ee3\u7406\u5546\u7684\u5dee\u5f02\uff0c\u6210\u7acb\u516c\u53f8\u7684\u6e20\u9053\u7ba1\u7406\u90e8\u95e8\u3002\u201d\n\n\u90a3\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bb2\uff0c\u6e20\u9053\u7ba1\u7406\u90e8\u95e8\u5c31\u662f\u7528\u6765\u5bf9\u63a5\u5404\u4e2a\u8bbe\u5907\u63a7\u5236\u5668\u7684\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002\n\n\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8bbe\u5907\u63a7\u5236\u5668\u4e0d\u5c5e\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u662f\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u5c5e\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\u3002\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u6838\u4ee3\u7801\u53ef\u4ee5\u50cf\u8c03\u7528\u672c\u5730\u4ee3\u7801\u4e00\u6837\u8c03\u7528\u9a71\u52a8\u7a0b\u5e8f\u7684\u4ee3\u7801\uff0c\u800c\u9a71\u52a8\u7a0b\u5e8f\u7684\u4ee3\u7801\u9700\u8981\u53d1\u51fa\u7279\u6b8a\u7684\u9762\u5411\u8bbe\u5907\u63a7\u5236\u5668\u7684\u6307\u4ee4\uff0c\u624d\u80fd\u64cd\u4f5c\u8bbe\u5907\u63a7\u5236\u5668\u3002\n\n\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4e2d\u662f\u4e00\u4e9b\u9762\u5411\u7279\u6b8a\u8bbe\u5907\u63a7\u5236\u5668\u7684\u4ee3\u7801\u3002\u4e0d\u540c\u7684\u8bbe\u5907\u4e0d\u540c\u3002\u4f46\u662f\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u5176\u4ed6\u90e8\u5206\u7684\u4ee3\u7801\u800c\u8a00\uff0c\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u5e94\u8be5\u6709\u7edf\u4e00\u7684\u63a5\u53e3\u3002\u5c31\u50cf\u4e0b\u9762\u56fe\u4e2d\u7684\u4e00\u6837\uff0c\u4e0d\u540c\u7684\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u63a5\u5165\u64cd\u4f5c\u7cfb\u7edf\uff0c\u800c\u64cd\u4f5c\u7cfb\u7edf\u7684\u5176\u4ed6\u90e8\u5206\u7684\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u65e0\u89c6\u4e0d\u540c\u8bbe\u5907\u7684\u533a\u522b\uff0c\u4ee5\u540c\u6837\u7684\u63a5\u53e3\u8c03\u7528\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5185\u5bb9\u662f\u5f88\u8d34\u5207\u7684\uff0c\u8bbe\u5907\u63a7\u5236\u5668"}),"\n",(0,l.jsx)(e.p,{children:"\u201c\u90a3\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bb2\uff0c\u6e20\u9053\u7ba1\u7406\u90e8\u95e8\u5c31\u662f\u7528\u6765\u5bf9\u63a5\u5404\u4e2a\u8bbe\u5907\u63a7\u5236\u5668\u7684\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002\u201d"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7b2c\u4e09\uff0c\u7528\u4e2d\u65ad\u63a7\u5236\u5668\u7edf\u4e00\u5916\u90e8\u4e8b\u4ef6\u5904\u7406\u3002\n\n\u9a6c\u54e5\u542c\u4e86\u604d\u7136\u5927\u609f\uff1a\u201c\u539f\u6765\u4ee3\u7406\u5546\u4e5f\u662f\u4e94\u82b1\u516b\u95e8\uff0c\u91cc\u9762\u6709\u8fd9\u4e48\u591a\u95e8\u9053\u554a\uff01\u201d\n\n\u9c81\u8083\u8bf4\uff1a\u201c\u5f53\u54b1\u4eec\u5bf9\u63a5\u7684\u4ee3\u7406\u5546\u591a\u4e86\uff0c\u4ee3\u7406\u5546\u53ef\u80fd\u4f1a\u6709\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\u627e\u5230\u6211\u4eec\uff0c\u4f8b\u5982\u4ee3\u7406\u5546\u6709\u4e86\u65b0\u5ba2\u6237\uff0c\u5ba2\u6237\u6709\u4e86\u65b0\u9700\u6c42\uff0c\u5ba2\u6237\u4ea4\u4ed8\u5b8c\u6bd5\u7b49\u4e8b\u4ef6\uff0c\u90fd\u9700\u8981\u6709\u4e00\u79cd\u673a\u5236\u901a\u77e5\u4f60\u4eec\u516c\u53f8\uff0c\u5f53\u7136\u662f\u4e2d\u65ad\uff0c\u90a3\u64cd\u4f5c\u7cfb\u7edf\u5c31\u9700\u8981\u6709\u4e00\u4e2a\u5730\u65b9\u5904\u7406\u8fd9\u4e2a\u4e2d\u65ad\uff0c\u65e2\u7136\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u662f\u7528\u6765\u5bf9\u63a5\u8bbe\u5907\u63a7\u5236\u5668\u7684\uff0c\u4e2d\u65ad\u5904\u7406\u4e5f\u5e94\u8be5\u5728\u8bbe\u5907\u9a71\u52a8\u91cc\u9762\u5b8c\u6210\u3002\u201d\n\n\u7136\u800c\uff0c\u4e2d\u65ad\u7684\u89e6\u53d1\u6700\u7ec8\u4f1a\u5230\u8fbe CPU\uff0c\u4f1a\u4e2d\u65ad\u64cd\u4f5c\u7cfb\u7edf\u5f53\u524d\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u6240\u4ee5\u64cd\u4f5c\u7cfb\u7edf\u4e5f\u8981\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u6d41\u7a0b\u6765\u5904\u7406\u4e2d\u65ad\uff0c\u4f7f\u5f97\u4e0d\u540c\u8bbe\u5907\u7684\u4e2d\u65ad\u4f7f\u7528\u7edf\u4e00\u7684\u6d41\u7a0b\u3002\n\n\u4e00\u822c\u7684\u6d41\u7a0b\u662f\uff0c\u4e00\u4e2a\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u8981\u5148\u6ce8\u518c\u4e00\u4e2a\u8be5\u8bbe\u5907\u7684\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u3002\u54b1\u4eec\u8bb2\u8fdb\u7a0b\u5207\u6362\u7684\u65f6\u5019\u8bf4\u8fc7\uff0c\u4e2d\u65ad\u8fd4\u56de\u7684\u90a3\u4e00\u523b\u662f\u8fdb\u7a0b\u5207\u6362\u7684\u65f6\u673a\u3002\u4e2d\u65ad\u7684\u65f6\u5019\uff0c\u89e6\u53d1\u7684\u51fd\u6570\u662f do_IRQ\u3002\u8fd9\u4e2a\u51fd\u6570\u662f\u4e2d\u65ad\u5904\u7406\u7684\u7edf\u4e00\u5165\u53e3\u3002\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u6ce8\u518c\u7684\u4e2d\u65ad\u5904\u7406\u51fd\u6570 Handler\uff0c\u7136\u540e\u6267\u884c\u4ed6\u8fdb\u884c\u4e2d\u65ad\u5904\u7406\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u7b2c\u56db\uff0c\u7528\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\u5c4f\u853d\u9a71\u52a8\u7a0b\u5e8f\u7684\u5dee\u5f02\u3002\n\n\u9a6c\u54e5\u53c8\u95ee\u4e86\uff1a\u201c\u5bf9\u63a5\u4e86\u8fd9\u4e48\u591a\u4ee3\u7406\u5546\uff0c\u5982\u679c\u54b1\u4eec\u5185\u90e8\u7684\u5de5\u7a0b\u5e08\u8981\u548c\u4ed6\u4eec\u6253\u4ea4\u9053\uff0c\u6709\u6ca1\u6709\u4e00\u79cd\u7edf\u4e00\u7684\u65b9\u5f0f\u5462\uff1f\u201d\n\n\u9c81\u8083\u8bf4\uff1a\u201c\u5f53\u7136\u5e94\u8be5\u4e86\uff0c\u6211\u4eec\u5185\u90e8\u5458\u5de5\u64cd\u4f5c\u5916\u90e8\u8bbe\u5907\uff0c\u53ef\u4ee5\u57fa\u4e8e\u6587\u4ef6\u7cfb\u7edf\u7684\u63a5\u53e3\uff0c\u5236\u5b9a\u4e00\u4e2a\u7edf\u4e00\u7684\u6807\u51c6\u3002\u201d\n\n\u5176\u5b9e\u6587\u4ef6\u7cfb\u7edf\u7684\u673a\u5236\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u673a\u5236\uff0c\u54b1\u4eec\u516c\u53f8\u5e94\u8be5\u5b9a\u4e0b\u8fd9\u6837\u7684\u89c4\u5219\uff0c\u4e00\u5207\u7686\u6587\u4ef6\u3002\n\n\u6240\u6709\u8bbe\u5907\u90fd\u5728/dev/\u6587\u4ef6\u5939\u4e0b\u9762\uff0c\u521b\u5efa\u4e00\u4e2a\u7279\u6b8a\u7684\u8bbe\u5907\u6587\u4ef6\u3002\u8fd9\u4e2a\u8bbe\u5907\u7279\u6b8a\u6587\u4ef6\u4e5f\u6709 inode\uff0c\u4f46\u662f\u4ed6\u4e0d\u5173\u8054\u5230\u786c\u76d8\u6216\u4efb\u4f55\u5176\u4ed6\u5b58\u50a8\u4ecb\u8d28\u4e0a\u7684\u6570\u636e\uff0c\u800c\u662f\u5efa\u7acb\u4e86\u4e0e\u67d0\u4e2a\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u7684\u8fde\u63a5\u3002\n\n\u6709\u4e86\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\u4e4b\u540e\uff0c\u6211\u4eec\u4e0d\u4f46\u53ef\u4ee5\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7684\u547d\u4ee4\u884c\u64cd\u4f5c\u8bbe\u5907\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7a0b\u5e8f\uff0c\u8c03\u7528 read\u3001write \u51fd\u6570\uff0c\u50cf\u8bfb\u5199\u6587\u4ef6\u4e00\u6837\u64cd\u4f5c\u8bbe\u5907\u3002\n\n\u5bf9\u4e8e\u5757\u8bbe\u5907\u6765\u8bb2\uff0c\u5728\u9a71\u52a8\u7a0b\u5e8f\u4e4b\u4e0a\uff0c\u6587\u4ef6\u7cfb\u7edf\u4e4b\u4e0b\uff0c\u8fd8\u9700\u8981\u4e00\u5c42\u901a\u7528\u8bbe\u5907\u5c42\u3002\u6bd4\u5982\uff0c\u54b1\u4eec\u8bb2\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u91cc\u9762\u7684\u903b\u8f91\u548c\u78c1\u76d8\u8bbe\u5907\u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\uff0c\u53ef\u4ee5\u8bf4\u662f\u901a\u7528\u7684\u903b\u8f91\u3002\u5728\u5199\u6587\u4ef6\u7684\u6700\u5e95\u5c42\uff0c\u6211\u4eec\u770b\u5230\u4e86 BIO \u5b57\u773c\u7684\u51fd\u6570\uff0c\u4f46\u662f\u597d\u50cf\u548c\u8bbe\u5907\u9a71\u52a8\u4e5f\u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\u3002\n\n\u662f\u7684\uff0c\u56e0\u4e3a\u5757\u8bbe\u5907\u7c7b\u578b\u975e\u5e38\u591a\uff0c\u800c Linux \u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762\u4e00\u5207\u662f\u6587\u4ef6\u3002\u6211\u4eec\u4e5f\u4e0d\u60f3\u6587\u4ef6\u7cfb\u7edf\u4ee5\u4e0b\uff0c\u5c31\u76f4\u63a5\u5bf9\u63a5\u5404\u79cd\u5404\u6837\u7684\u5757\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff0c\u8fd9\u6837\u4f1a\u4f7f\u5f97\u6587\u4ef6\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u975e\u5e38\u9ad8\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u5728\u4e2d\u95f4\u52a0\u4e86\u4e00\u5c42\u901a\u7528\u5757\u5c42\uff0c\u5c06\u4e0e\u5757\u8bbe\u5907\u76f8\u5173\u7684\u901a\u7528\u903b\u8f91\u653e\u5728\u8fd9\u4e00\u5c42\uff0c\u7ef4\u62a4\u4e0e\u8bbe\u5907\u65e0\u5173\u7684\u5757\u7684\u5927\u5c0f\uff0c\u7136\u540e\u901a\u7528\u5757\u5c42\u4e0b\u9762\u5bf9\u63a5\u5404\u79cd\u5404\u6837\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u603b\u7ed3\uff1a\u770b\u4e0a\u9762 filesystem \u7684\u90a3\u4e2a\u56fe\uff0c\u5c31\u4e00\u76ee\u4e86\u7136\u4e86\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9c81\u8083\u5e2e\u52a9\u9a6c\u54e5\u5efa\u7acb\u4e86\u8fd9\u5957\u4f53\u7cfb\u4e4b\u540e\uff0c\u679c\u771f\u4e1a\u52a1\u6709\u4e86\u5f88\u5927\u8d77\u8272\u3002\u539f\u6765\u516c\u53f8\u53ea\u6562\u63a5\u534e\u4e1c\u533a\u7684\u9879\u76ee\uff0c\u6bd5\u7adf\u6bd4\u8f83\u8fd1\uff0c\u6c9f\u901a\u4ea4\u4ed8\u90fd\u5f88\u65b9\u4fbf\u3002\u540e\u6765\u9879\u76ee\u6269\u5c55\u5230\u6240\u6709\u4e00\u7ebf\u57ce\u5e02\u3001\u4e8c\u7ebf\u57ce\u5e02\u3001\u7701\u4f1a\u57ce\u5e02\uff0c\u9879\u76ee\u6570\u91cf\u5b9e\u73b0\u4e86\u51e0\u5341\u500d\u7684\u589e\u957f\u3002\n\n\u5343\u4e07\u9879\u76ee\u96be\u5ea6\u5927\uff0c\u96c6\u4f53\u5408\u4f5c\u53ef\u65ad\u91d1\n\u9879\u76ee\u63a5\u7684\u591a\u4e86\uff0c\u5c31\u4e0d\u514d\u6709\u5927\u578b\u7684\u9879\u76ee\uff0c\u6d89\u53ca\u591a\u4e2a\u884c\u4e1a\u591a\u4e2a\u9886\u57df\uff0c\u9700\u8981\u591a\u4e2a\u9879\u76ee\u7ec4\u8fdb\u884c\u5408\u4f5c\u624d\u80fd\u5b8c\u6210\u3002\u90a3\u4e24\u4e2a\u9879\u76ee\u7ec4\u5e94\u8be5\u901a\u8fc7\u4ec0\u4e48\u6837\u7684\u65b9\u5f0f\uff0c\u8fdb\u884c\u6c9f\u901a\u4e0e\u5408\u4f5c\u5462\uff1f\u4f5c\u4e3a\u8001\u677f\uff0c\u9a6c\u54e5\u5e94\u8be5\u5982\u4f55\u8bbe\u8ba1\u6574\u4e2a\u6d41\u7a0b\u5462\uff1f\n\n\u9a6c\u54e5\u53eb\u6765\u5468\u745c\u3001\u5f20\u662d\u3001\u9c81\u8083\uff0c\u4e00\u8d77\u5546\u91cf\u56e2\u961f\u95f4\u7684\u5408\u4f5c\u6a21\u5f0f\u3002\u5927\u5bb6\u4e00\u8d77\u732e\u8ba1\u732e\u7b56\u3002\u597d\u5728\u6709\u5f88\u591a\u6210\u719f\u7684\u9879\u76ee\u7ba1\u7406\u6d41\u7a0b\u53ef\u4ee5\u53c2\u8003\u3002\n\n\u6700\u6700\u4f20\u7edf\u7684\u6a21\u578b\u5c31\u662f\u8f6f\u4ef6\u5f00\u53d1\u7684\u7011\u5e03\u6a21\u578b\u3002\u6240\u8c13\u7684\u7011\u5e03\u6a21\u578b\uff0c\u5176\u5b9e\u5c31\u662f\u5c06\u6574\u4e2a\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u5206\u6210\u591a\u4e2a\u9636\u6bb5\uff0c\u5f80\u5f80\u662f\u4e0a\u4e00\u4e2a\u9636\u6bb5\u5b8c\u5168\u505a\u5b8c\uff0c\u624d\u5c06\u8f93\u51fa\u7ed3\u679c\u4ea4\u7ed9\u4e0b\u4e00\u4e2a\u9636\u6bb5\u3002\u8fd9\u79cd\u6a21\u578b\u7c7b\u4f3c\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u7ba1\u9053\u6a21\u578b\u3002\n\n\u6240\u8c13\u7684\u7ba1\u9053\uff0c\u5c31\u662f\u5728\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u5355\u5411\u7684\u901a\u9053\uff0c\u5176\u5b9e\u662f\u4e00\u6bb5\u7f13\u5b58\uff0c\u5b83\u4f1a\u5c06\u524d\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u4f5c\u4e3a\u540e\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u5165\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5f20\u662d\u8bf4\uff0c\u7011\u5e03\u6a21\u578b\u7684\u5f00\u53d1\u6d41\u7a0b\u6548\u7387\u6bd4\u8f83\u4f4e\u4e0b\uff0c\u73b0\u5728\u5927\u90e8\u5206\u516c\u53f8\u90fd\u4e0d\u4f7f\u7528\u8fd9\u79cd\u5f00\u53d1\u6a21\u5f0f\u4e86\uff0c\u56e0\u4e3a\u56e2\u961f\u4e4b\u95f4\u65e0\u6cd5\u9891\u7e41\u5730\u6c9f\u901a\u3002\u800c\u4e14\uff0c\u7ba1\u9053\u7684\u4f7f\u7528\u6a21\u5f0f\uff0c\u4e5f\u4e0d\u9002\u5408\u8fdb\u7a0b\u95f4\u9891\u7e41\u7684\u4ea4\u6362\u6570\u636e\u3002\n\n\u4e8e\u662f\uff0c\u4ed6\u4eec\u8fd8\u5f97\u60f3\u5176\u4ed6\u7684\u529e\u6cd5\u3002\u662f\u4e0d\u662f\u53ef\u4ee5\u501f\u9274\u4f20\u7edf\u5916\u4f01\u7684\u6c9f\u901a\u65b9\u5f0f\u2014\u2014\u90ae\u4ef6\u5462\uff1f\u90ae\u4ef6\u6709\u4e00\u5b9a\u7684\u683c\u5f0f\uff0c\u4f8b\u5982\u62ac\u5934\u3001\u6b63\u6587\u3001\u9644\u4ef6\u7b49\u3002\u53d1\u9001\u90ae\u4ef6\u53ef\u4ee5\u5efa\u7acb\u6536\u4ef6\u4eba\u5217\u8868\uff0c\u6240\u6709\u5728\u8fd9\u4e2a\u5217\u8868\u4e2d\u7684\u4eba\uff0c\u90fd\u53ef\u4ee5\u53cd\u590d\u5730\u5728\u6b64\u90ae\u4ef6\u57fa\u7840\u4e0a\u56de\u590d\uff0c\u8fbe\u5230\u9891\u7e41\u6c9f\u901a\u7684\u76ee\u7684\u3002\u8fd9\u4e2a\u554a\uff0c\u5c31\u662f\u6d88\u606f\u961f\u5217\u6a21\u578b\u3002\n\n\u548c\u7ba1\u9053\u5c06\u4fe1\u606f\u4e00\u80a1\u8111\u513f\u5730\u4ece\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5012\u7ed9\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4e0d\u540c\uff0c\u6d88\u606f\u961f\u5217\u6709\u70b9\u513f\u50cf\u90ae\u4ef6\uff0c\u53d1\u9001\u6570\u636e\u65f6\uff0c\u4f1a\u5206\u6210\u4e00\u4e2a\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u5355\u5143\uff0c\u4e5f\u5c31\u662f\u6d88\u606f\u4f53\uff0c\u6bcf\u4e2a\u6d88\u606f\u4f53\u90fd\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\u5b58\u50a8\u5757\uff0c\u5728\u5b57\u8282\u6d41\u4e0a\u4e0d\u8fde\u7eed\u3002\n\n\u6709\u4e86\u6d88\u606f\u8fd9\u79cd\u6a21\u578b\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u5c31\u50cf\u54b1\u4eec\u5e73\u65f6\u53d1\u90ae\u4ef6\u4e00\u6837\uff0c\u4f60\u6765\u4e00\u5c01\uff0c\u6211\u56de\u4e00\u5c01\uff0c\u53ef\u4ee5\u9891\u7e41\u6c9f\u901a\u4e86\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/mq.jpeg",alt:"mq.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f46\u662f\u6709\u65f6\u5019\uff0c\u9879\u76ee\u7ec4\u4e4b\u95f4\u7684\u6c9f\u901a\u9700\u8981\u7279\u522b\u7d27\u5bc6\uff0c\u800c\u4e14\u8981\u5206\u4eab\u4e00\u4e9b\u6bd4\u8f83\u5927\u7684\u6570\u636e\u3002\u5982\u679c\u4f7f\u7528\u90ae\u4ef6\uff0c\u5c31\u53d1\u73b0\uff0c\u4e00\u65b9\u9762\u90ae\u4ef6\u7684\u6765\u53bb\u4e0d\u53ca\u65f6\uff1b\u53e6\u5916\u4e00\u65b9\u9762\uff0c\u9644\u4ef6\u5927\u5c0f\u4e5f\u6709\u9650\u5236\uff0c\u6240\u4ee5\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u7ecf\u5e38\u91c7\u53d6\u7684\u65b9\u5f0f\u5c31\u662f\uff0c\u628a\u4e24\u4e2a\u9879\u76ee\u7ec4\u5728\u9700\u8981\u5408\u4f5c\u7684\u671f\u95f4\uff0c\u62c9\u5230\u4e00\u4e2a\u4f1a\u8bae\u5ba4\u8fdb\u884c\u5408\u4f5c\u5f00\u53d1\uff0c\u8fd9\u6837\u5927\u5bb6\u53ef\u4ee5\u76f4\u63a5\u4ea4\u6d41\u6587\u6863\u5440\uff0c\u67b6\u6784\u56fe\u5440\uff0c\u76f4\u63a5\u5728\u767d\u677f\u4e0a\u753b\u6216\u8005\u76f4\u63a5\u6254\u7ed9\u5bf9\u65b9\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u770b\u5230\u3002\n\n\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u5171\u4eab\u4f1a\u8bae\u5ba4\u8fd9\u79cd\u6a21\u578b\uff0c\u7c7b\u4f3c\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u5171\u4eab\u5185\u5b58\u6a21\u578b\u3002\u524d\u9762\u54b1\u4eec\u8bb2\u5185\u5b58\u7ba1\u7406\u7684\u65f6\u5019\uff0c\u77e5\u9053\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0d\u540c\u7684\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u6620\u5c04\u5230\u4e0d\u540c\u7684\u7269\u7406\u5185\u5b58\u4e2d\u53bb\u3002\u8fd9\u4e2a\u8fdb\u7a0b\u8bbf\u95ee A \u5730\u5740\u548c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u8bbf\u95ee A \u5730\u5740\uff0c\u5176\u5b9e\u8bbf\u95ee\u7684\u662f\u4e0d\u540c\u7684\u7269\u7406\u5185\u5b58\u5730\u5740\uff0c\u5bf9\u4e8e\u6570\u636e\u7684\u589e\u5220\u67e5\u6539\u4e92\u4e0d\u5f71\u54cd\u3002\n\n\u4f46\u662f\uff0c\u54b1\u4eec\u662f\u4e0d\u662f\u53ef\u4ee5\u53d8\u901a\u4e00\u4e0b\uff0c\u62ff\u51fa\u4e00\u5757\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6765\uff0c\u6620\u5c04\u5230\u76f8\u540c\u7684\u7269\u7406\u5185\u5b58\u4e2d\u3002\u8fd9\u6837\u8fd9\u4e2a\u8fdb\u7a0b\u5199\u5165\u7684\u4e1c\u897f\uff0c\u53e6\u5916\u4e00\u4e2a\u8fdb\u7a0b\u9a6c\u4e0a\u5c31\u80fd\u770b\u5230\u4e86\uff0c\u90fd\u4e0d\u9700\u8981\u62f7\u8d1d\u6765\u62f7\u8d1d\u53bb\uff0c\u4f20\u6765\u4f20\u53bb\u3002\n\n\u9a6c\u54e5\u8bf4\uff1a\u201c\u5171\u4eab\u5185\u5b58\u4e5f\u6709\u95ee\u9898\u5440\u3002\u5982\u679c\u4e24\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u540c\u4e00\u4e2a\u5171\u4eab\u5185\u5b58\uff0c\u5927\u5bb6\u90fd\u5f80\u91cc\u9762\u5199\u4e1c\u897f\uff0c\u5f88\u6709\u53ef\u80fd\u5c31\u51b2\u7a81\u4e86\u3002\u4f8b\u5982\u4e24\u4e2a\u8fdb\u7a0b\u90fd\u540c\u65f6\u5199\u4e00\u4e2a\u5730\u5740\uff0c\u90a3\u5148\u5199\u7684\u90a3\u4e2a\u8fdb\u7a0b\u4f1a\u53d1\u73b0\u5185\u5bb9\u88ab\u522b\u4eba\u8986\u76d6\u4e86\u3002\u201d\n\n\u5f20\u662d\u8bf4\uff1a\u201c\u5f53\u7136\uff0c\u548c\u5171\u4eab\u5185\u5b58\u914d\u5408\u7684\uff0c\u6709\u53e6\u4e00\u79cd\u4fdd\u62a4\u673a\u5236\uff0c\u4f7f\u5f97\u540c\u4e00\u4e2a\u5171\u4eab\u7684\u8d44\u6e90\uff0c\u540c\u65f6\u53ea\u80fd\u88ab\u4e00\u4e2a\u8fdb\u7a0b\u8bbf\u95ee\u53eb\u4fe1\u53f7\u91cf\u3002\u201d\n\n\u4fe1\u53f7\u91cf\u5176\u5b9e\u662f\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u8fdb\u7a0b\u95f4\u7684\u4e92\u65a5\u4e0e\u540c\u6b65\uff0c\u800c\u4e0d\u662f\u7528\u4e8e\u5b58\u50a8\u8fdb\u7a0b\u95f4\u901a\u4fe1\u6570\u636e\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5c06\u4fe1\u53f7\u91cf\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u6570\u503c\uff0c\u6765\u4ee3\u8868\u67d0\u79cd\u8d44\u6e90\u7684\u603b\u4f53\u6570\u91cf\u3002\u5bf9\u4e8e\u4fe1\u53f7\u91cf\u6765\u8bb2\uff0c\u4f1a\u5b9a\u4e49\u4e24\u79cd\u539f\u5b50\u64cd\u4f5c\uff0c\u4e00\u4e2a\u662f P \u64cd\u4f5c\uff0c\u6211\u4eec\u79f0\u4e3a\u7533\u8bf7\u8d44\u6e90\u64cd\u4f5c\u3002\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u7533\u8bf7\u5c06\u4fe1\u53f7\u91cf\u7684\u6570\u503c\u51cf\u53bb N\uff0c\u8868\u793a\u8fd9\u4e9b\u6570\u91cf\u88ab\u4ed6\u7533\u8bf7\u4f7f\u7528\u4e86\uff0c\u5176\u4ed6\u4eba\u4e0d\u80fd\u7528\u4e86\u3002\u53e6\u4e00\u4e2a\u662f V \u64cd\u4f5c\uff0c\u6211\u4eec\u79f0\u4e3a\u5f52\u8fd8\u8d44\u6e90\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u7533\u8bf7\u5c06\u4fe1\u53f7\u91cf\u52a0\u4e0a M\uff0c\u8868\u793a\u8fd9\u4e9b\u6570\u91cf\u5df2\u7ecf\u8fd8\u7ed9\u4fe1\u53f7\u91cf\u4e86\uff0c\u5176\u4ed6\u4eba\u53ef\u4ee5\u4f7f\u7528\u4e86\u3002\n\n\u4f8b\u5982\uff0c\u4f60\u6709 100 \u5143\u94b1\uff0c\u5c31\u53ef\u4ee5\u5c06\u4fe1\u53f7\u91cf\u8bbe\u7f6e\u4e3a 100\u3002\u5176\u4e2d A \u5411\u4f60\u501f 80 \u5143\uff0c\u5c31\u4f1a\u8c03\u7528 P \u64cd\u4f5c\uff0c\u7533\u8bf7\u51cf\u53bb 80\u3002\u5982\u679c\u540c\u65f6 B \u5411\u4f60\u501f 50 \u5143\uff0c\u4f46\u662f B \u7684 P \u64cd\u4f5c\u6bd4 A \u665a\uff0c\u90a3\u5c31\u6ca1\u6709\u529e\u6cd5\uff0c\u53ea\u597d\u7b49\u5f85 A \u5f52\u8fd8\u94b1\u7684\u65f6\u5019\uff0cB \u7684 P \u64cd\u4f5c\u624d\u80fd\u6210\u529f\u3002\u4e4b\u540e\uff0cA \u8c03\u7528 V \u64cd\u4f5c\uff0c\u7533\u8bf7\u52a0\u4e0a 30 \u5143\uff0c\u4e5f\u5c31\u662f\u8fd8\u7ed9\u4f60 30 \u5143\uff0c\u8fd9\u4e2a\u65f6\u5019\u4fe1\u53f7\u91cf\u6709 50 \u5143\u4e86\uff0c\u8fd9\u65f6\u5019 B \u7684 P \u64cd\u4f5c\u624d\u80fd\u6210\u529f\uff0c\u624d\u80fd\u501f\u8d70\u8fd9 50 \u5143\u3002\n\n\u6240\u8c13\u539f\u5b50\u64cd\u4f5c\uff08Atomic Operation\uff09\uff0c\u5c31\u662f\u4efb\u4f55\u4e00\u5757\u94b1\uff0c\u90fd\u53ea\u80fd\u901a\u8fc7 P \u64cd\u4f5c\u501f\u7ed9\u4e00\u4e2a\u4eba\uff0c\u4e0d\u80fd\u540c\u65f6\u501f\u7ed9\u4e24\u4e2a\u4eba\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53 A \u7684 P \u64cd\u4f5c\uff08\u501f 80\uff09\u548c B \u7684 P \u64cd\u4f5c\uff08\u501f 50\uff09\uff0c\u51e0\u4e4e\u540c\u65f6\u5230\u8fbe\u7684\u65f6\u5019\uff0c\u4e0d\u80fd\u56e0\u4e3a\u5927\u5bb6\u90fd\u770b\u5230\u8d26\u6237\u91cc\u6709 100 \u5c31\u90fd\u6210\u529f\uff0c\u5fc5\u987b\u5206\u4e2a\u5148\u6765\u540e\u5230\u3002\n\n\u9a6c\u54e5\u8bf4\uff1a\u201c\u6709\u4e86\u4e0a\u9762\u7684\u8fd9\u4e9b\u673a\u5236\uff0c\u57fa\u672c\u5e38\u89c4\u72b6\u6001\u4e0b\u7684\u5de5\u4f5c\u6a21\u5f0f\uff0c\u5bf9\u5e94\u5230\u54b1\u4eec\u5e73\u65f6\u7684\u5de5\u4f5c\u4ea4\u63a5\uff0c\u6536\u53d1\u90ae\u4ef6\u3001\u8054\u5408\u5f00\u53d1\u7b49\u3002\u6211\u8fd8\u60f3\u5230\uff0c\u5982\u679c\u53d1\u751f\u4e86\u5f02\u5e38\u600e\u4e48\u529e\uff1f\u4f8b\u5982\u51fa\u73b0\u7ebf\u4e0a\u7cfb\u7edf\u6545\u969c\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u4ec0\u4e48\u6d41\u7a0b\u90fd\u6765\u4e0d\u53ca\u4e86\uff0c\u4e0d\u53ef\u80fd\u53d1\u90ae\u4ef6\uff0c\u4e5f\u6765\u4e0d\u53ca\u5f00\u4f1a\uff0c\u6240\u6709\u7684\u67b6\u6784\u5e08\u3001\u5f00\u53d1\u3001\u8fd0\u7ef4\u90fd\u8981\u88ab\u901a\u77e5\u7d27\u6025\u51fa\u52a8\u3002\u6240\u4ee5\uff0c7 \u4e58 24 \u5c0f\u65f6\u4e0d\u95f4\u65ad\u6267\u884c\u7684\u7cfb\u7edf\u90fd\u9700\u8981\u6709\u544a\u8b66\u7cfb\u7edf\uff0c\u4e00\u65e6\u51fa\u4e8b\u60c5\uff0c\u5c31\u8981\u901a\u77e5\u5230\u4eba\uff0c\u54ea\u6015\u662f\u534a\u591c\uff0c\u4e5f\u8981\u7535\u8bdd\u53eb\u8d77\u6765\uff0c\u5904\u7406\u6545\u969c\u3002\u662f\u4e0d\u662f\u5e94\u8be5\u8fd8\u6709\u4e00\u79cd\u5f02\u5e38\u60c5\u51b5\u4e0b\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\u201d\n\n\u5f20\u662d\u8bf4\uff1a\u201c\u5f53\u7136\u5e94\u8be5\u6709\uff0c\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u50cf\u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762\u7684\u4fe1\u53f7\u673a\u5236\u3002\u4fe1\u53f7\u6ca1\u6709\u7279\u522b\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5c31\u662f\u7528\u4e00\u4e2a\u4ee3\u53f7\u4e00\u6837\u7684\u6570\u5b57\u3002Linux \u63d0\u4f9b\u4e86\u51e0\u5341\u79cd\u4fe1\u53f7\uff0c\u5206\u522b\u4ee3\u8868\u4e0d\u540c\u7684\u610f\u4e49\u3002\u4fe1\u53f7\u4e4b\u95f4\u4f9d\u9760\u5b83\u4eec\u7684\u503c\u6765\u533a\u5206\u3002\u8fd9\u5c31\u50cf\u54b1\u4eec\u770b\u8b66\u532a\u7247\uff0c\u5bf9\u4e8e\u7d27\u6025\u7684\u884c\u52a8\uff0c\u90fd\u662f\u8bf4\uff0c\u20181 \u53f7\u4f5c\u6218\u4efb\u52a1\u2019\u5f00\u59cb\u6267\u884c\uff0c\u8b66\u5bdf\u5c31\u5f00\u59cb\u884c\u52a8\u4e86\u3002\u60c5\u51b5\u7d27\u6025\uff0c\u4e0d\u80fd\u5570\u91cc\u5570\u55e6\u4e86\u3002\u201d\n\n\u4fe1\u53f7\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u53d1\u9001\u7ed9\u67d0\u4e00\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u9700\u8981\u4e3a\u8fd9\u4e2a\u4fe1\u53f7\u914d\u7f6e\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002\u5f53\u67d0\u4e2a\u4fe1\u53f7\u53d1\u751f\u7684\u65f6\u5019\uff0c\u5c31\u9ed8\u8ba4\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u5c31\u76f8\u5f53\u4e8e\u54b1\u4eec\u8fd0\u7ef4\u4e00\u4e2a\u7cfb\u7edf\u5e94\u6025\u624b\u518c\uff0c\u5f53\u9047\u5230\u4ec0\u4e48\u60c5\u51b5\uff0c\u505a\u4ec0\u4e48\u4e8b\u60c5\uff0c\u90fd\u4e8b\u5148\u51c6\u5907\u597d\uff0c\u51fa\u4e86\u4e8b\u60c5\u7167\u7740\u505a\u5c31\u53ef\u4ee5\u4e86\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u7528\u7011\u5e03\u5f0f\u5f00\u53d1\u7c7b\u6bd4 pipe \u771f\u7684\u662f\u7136\u4eba\u8033\u76ee\u4e00\u65b0\u3002\u7528\u53d1\u90ae\u4ef6\u7c7b\u6bd4\u6d88\u606f\u961f\u5217\uff0c\u7528\u5171\u4eab\u4f1a\u8bae\u5ba4\u7c7b\u6bd4\u8fdb\u7a0b\u5171\u4eab\u5185\u5b58\uff0c\u4e5f\u5f88\u5408\u7406\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u4e9b\u9879\u76ee\u7ec4\u5408\u4f5c\u7684\u6d41\u7a0b\u8bbe\u8ba1\u5408\u7406\uff0c\u56e0\u800c\u63a8\u884c\u8d77\u6765\u5341\u5206\u987a\u7545\uff0c\u73b0\u5728\u63a5\u4e2a\u5343\u4e07\u7ea7\u522b\u7684\u9879\u76ee\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6839\u636e\u4ea4\u6613\u91cf\u4f30\u503c\u5e02\u503c\uff0c\u8d77\u7801\u6709\u5341\u4e2a\u4ebf\u3002\n\n\u9a6c\u54e5\u6709\u4e9b\u5c0f\u6fc0\u52a8\uff0c\u539f\u6765\u81ea\u5df1\u8eab\u4ef7\u8fd9\u4e48\u9ad8\u4e86\uff0c\u662f\u4e0d\u662f\u4e5f\u80fd\u4e0a\u4e2a\u5e02\u5565\u7684\uff0c\u5b9e\u73b0\u4ebf\u4e07\u5bcc\u7fc1\u7684\u68a6\u60f3\u5462\uff1f\u4e8e\u662f\u9a6c\u54e5\u627e\u4e86\u4e00\u4e9b\u6295\u8d44\u4eba\u804a\u4e86\u804a\uff0c\u6295\u8d44\u4eba\u8bf4\uff0c\u8981\u60f3\u51b2\u4e00\u628a\u4e0a\u5e02\uff0c\u8fd8\u5dee\u70b9\u52b2\uff0c\u76ee\u524d\u7684\u9879\u76ee\u867d\u7136\u5927\uff0c\u4f46\u662f\u60f3\u8c61\u529b\u4e0d\u591f\u4e30\u5bcc\u3002\n\n\u90a3\u63a5\u4e0b\u6765\uff0c\u9a6c\u54e5\u5982\u4f55\u505a\u624d\u80fd\u6ee1\u8db3\u5e02\u573a\u7684\u60f3\u8c61\u529b\uff0c\u6700\u7ec8\u6210\u529f\u4e0a\u5e02\u5462\uff1f\u9884\u77e5\u540e\u4e8b\uff0c\u4e14\u542c\u4e0b\u56de\u5206\u89e3\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u6211\u5c31\u6bd4\u8f83\u61c2\u4e86\uff0c\u4e3b\u8981\u8bb2\u4e86\u5185\u6838\u7a7a\u95f4\u7684\u51e0\u5c42\u7f51\u7edc\u534f\u8bae\u3002\u6211\u5bf9\u7f51\u7edc\u534f\u8bae\u8fd8\u662f\u6bd4\u8f83\u719f\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u5b9e\uff0c\u5176\u5b9e\u64cd\u4f5c\u7cfb\u7edf\u4e5f\u662f\u4e00\u4e2a\u4e0d\u65ad\u6269\u5c55\u7684\u8fc7\u7a0b\uff0c\u4ece\u5185\u6838\u5230\u8fdb\u7a0b\u3001CPU\u3001\u5185\u5b58\u7ba1\u7406\uff0c\u518d\u5230\u6587\u4ef6\u7cfb\u7edf\uff0c\u518d\u5230\u7528\u6237\u7a7a\u95f4\u7684\u90a3\u4e9b\u4e1c\u897f\u3002\u8fd9\u57fa\u672c\u4e0a\u5c31\u662f\u5355\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e86\uff0c\u518d\u6269\u5c55\u5462\uff1f\u5c31\u662f\u901a\u8fc7\u7f51\u7edc\u534f\u8bae\uff0c\u4e0e\u5176\u4ed6\u673a\u5668\u8fdb\u884c\u901a\u4fe1\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5f53\u7136\uff0c\u5728\u6211\u4eec\u8fd9\u4e2a\u5c0f\u6545\u4e8b\u91cc\uff0c\u5c31\u662f\u8ddf\u5176\u4ed6\u5927\u516c\u53f8\u4e00\u8d77\u5408\u4f19\u505a\u5927\u9879\u76ee\uff08\u6ce8\u610f\u662f\u5927\u516c\u53f8\u3001\u5927\u9879\u76ee\uff09\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9a6c\u54e5\u54ac\u7259\u8bf4\u9053\uff1a\u201c\u5f53\u7136\u6709\uff01\u201d\u5148\u5e94\u4e0b\u6765\u518d\u8bf4\u5457\uff0c\u53ef\u662f\u8fd9\u5fc3\u91cc\u662f\u771f\u6ca1\u5e95\u3002\u539f\u6765\u516c\u53f8\u90fd\u662f\u72ec\u81ea\u63a5\u5355\uff0c\u73b0\u5728\u8981\u548c\u5176\u4ed6\u516c\u53f8\u5408\u4f5c\uff0c\u534f\u8bae\u600e\u4e48\u7b7e\uff0c\u4ef7\u683c\u600e\u4e48\u8c08\u5462\uff1f\n\n\u9a6c\u54e5\u627e\u5230\u9c81\u8083\u3002\u9c81\u8083\u8bf4\uff1a\u201c\u6211\u7ed9\u4f60\u63a8\u8350\u4e00\u4e2a\u4eba\u5427\uff01\u8fd9\u4e2a\u4eba\u4eba\u8109\u5e7f\uff0c\u9879\u76ee\u8fd0\u4f5c\u80fd\u529b\u5f3a\uff0c\u53eb\u9646\u900a\uff0c\u8bf4\u4e0d\u5b9a\u80fd\u5e2e\u4e0a\u5fd9\u3002\u201d\n\n\u9c81\u8083\u627e\u6765\u9646\u900a\u3002\u9646\u900a\u8bf4\uff1a\u201c\u8fd9\u4e2a\u597d\u529e\u3002\u516c\u53f8\u95f4\u5408\u4f5c\u561b\uff0c\u5c31\u662f\u6761\u6b3e\u8c08\u597d\uff0c\u5229\u76ca\u5206\u597d\u5c31\u884c\uff0c\u5173\u952e\u662f\u5927\u5bb6\u8981\u9075\u5b88\u884c\u89c4\u3002\u5927\u5bb6\u90fd\u6309\u7edf\u4e00\u7684\u89c4\u5219\u6765\uff0c\u4e8b\u60c5\u5c31\u597d\u529e\u3002\u201d\n\n\u8fd9\u5176\u5b9e\u5c31\u50cf\u673a\u5668\u4e0e\u673a\u5668\u4e4b\u95f4\u5408\u4f5c\uff0c\u4e00\u53f0\u673a\u5668\u5c06\u81ea\u5df1\u60f3\u8981\u8868\u8fbe\u7684\u5185\u5bb9\uff0c\u6309\u7167\u67d0\u79cd\u7ea6\u5b9a\u597d\u7684\u683c\u5f0f\u53d1\u9001\u51fa\u53bb\u3002\u5f53\u53e6\u5916\u4e00\u53f0\u673a\u5668\u6536\u5230\u8fd9\u4e9b\u4fe1\u606f\u540e\uff0c\u4e5f\u80fd\u591f\u6309\u7167\u7ea6\u5b9a\u597d\u7684\u683c\u5f0f\u89e3\u6790\u51fa\u6765\uff0c\u4ece\u800c\u51c6\u786e\u3001\u53ef\u9760\u5730\u83b7\u5f97\u53d1\u9001\u65b9\u60f3\u8981\u8868\u8fbe\u7684\u5185\u5bb9\u3002\u8fd9\u79cd\u7ea6\u5b9a\u597d\u7684\u683c\u5f0f\u5c31\u662f\u7f51\u7edc\u534f\u8bae\u3002\n\n\u73b0\u5728\u4e1a\u5185\u77e5\u540d\u7684\u6709\u4e24\u79cd\u7f51\u7edc\u534f\u8bae\u6a21\u578b\uff0c\u4e00\u79cd\u662f OSI \u7684\u6807\u51c6\u4e03\u5c42\u6a21\u578b\uff0c\u4e00\u79cd\u662f\u4e1a\u754c\u6807\u51c6\u7684 TCP/IP \u6a21\u578b\u3002\u5b83\u4eec\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n\n...\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/protocol.jpeg",alt:"protocol.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u4f20\u8f93\u5c42\u4ee5\u4e0b\u90fd\u662f\u5728\u5185\u6838\u4e2d\u64cd\u4f5c\u7684\uff0c\u800c\u5e94\u7528\u5c42\u5c31\u662f\u5728\u5e94\u7528\u7a7a\u95f4\uff0c\u8fd9\u5c31\u5f88\u5408\u7406\u4e86\u561b\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u516c\u53f8\u5927\u4e86\u4e0d\u7075\u6d3b\uff0c\u9f13\u52b1\u521b\u65b0\u6709\u5999\u62db\n\n\u6162\u6162\u5730\uff0c\u9a6c\u603b\u53d1\u73b0\uff0c\u516c\u53f8\u5927\u6709\u5927\u7684\u597d\u5904\uff0c\u81ea\u7136\u4e5f\u6709\u5927\u7684\u6bdb\u75c5\uff0c\u4e5f\u5c31\u662f\u54b1\u4eec\u5e38\u89c1\u7684\u201c\u5927\u516c\u53f8\u75c5\u201d\u2014\u2014\u4e0d\u7075\u6d3b\u3002\n\n\u8fd9\u91cc\u9762\u7684\u4e0d\u7075\u6d3b\uff0c\u5c31\u50cf Linux \u670d\u52a1\u5668\uff0c\u8d8a\u6765\u8d8a\u5f3a\u5927\u7684\u65f6\u5019\uff0c\u65e0\u8bba\u662f\u8ba1\u7b97\u3001\u7f51\u7edc\u3001\u5b58\u50a8\uff0c\u90fd\u8d8a\u6765\u8d8a\u725b\u3002\u4f8b\u5982\uff0c\u5185\u5b58\u52a8\u4e0d\u52a8\u5c31\u662f\u767e G \u5185\u5b58\uff0c\u7f51\u7edc\u8bbe\u5907\u4e00\u4e2a\u7aef\u53e3\u7684\u5e26\u5bbd\u5c31\u80fd\u6709\u51e0\u5341 G \u751a\u81f3\u4e0a\u767e G\u3002\u5b58\u50a8\u5728\u6570\u636e\u4e2d\u5fc3\u81f3\u5c11\u662f PB \u7ea7\u522b\u7684\uff0c\u81ea\u7136\u4e5f\u6709\u4e0d\u7075\u6d3b\u7684\u6bdb\u75c5\u3002\n\n\u8d44\u6e90\u5927\u5c0f\u4e0d\u7075\u6d3b\uff1a\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981\u8fd9\u4e48\u5927\u89c4\u683c\u7684\u673a\u5668\uff0c\u53ef\u80fd\u53ea\u60f3\u5c1d\u8bd5\u4e00\u4e0b\u67d0\u4e9b\u65b0\u4e1a\u52a1\uff0c\u7533\u8bf7\u4e2a 4 \u6838 8G \u7684\u670d\u52a1\u5668\u8bd5\u4e00\u4e0b\uff0c\u4f46\u662f\u4e0d\u53ef\u80fd\u91c7\u8d2d\u8fd9\u4e48\u5c0f\u89c4\u683c\u7684\u673a\u5668\u3002\u65e0\u8bba\u6bcf\u4e2a\u9879\u76ee\u9700\u8981\u591a\u5927\u89c4\u683c\u7684\u673a\u5668\uff0c\u516c\u53f8\u7edf\u4e00\u91c7\u8d2d\u5c31\u9650\u5236\u51e0\u79cd\uff0c\u5168\u90e8\u662f\u4e0a\u9762\u90a3\u79cd\u5927\u89c4\u683c\u7684\u3002\n\n\u8d44\u6e90\u7533\u8bf7\u4e0d\u7075\u6d3b\uff1a\u89c4\u683c\u5b9a\u6b7b\u5c31\u5b9a\u6b7b\u5427\uff0c\u53ef\u662f\u6bcf\u6b21\u7533\u8bf7\u673a\u5668\u90fd\u8981\u91cd\u65b0\u91c7\u8d2d\uff0c\u5468\u671f\u5f88\u957f\u3002\n\n\u8d44\u6e90\u590d\u7528\u4e0d\u7075\u6d3b\uff1a\u53cd\u6b63\u6211\u9700\u8981\u7684\u8d44\u6e90\u4e0d\u591a\uff0c\u548c\u522b\u4eba\u5171\u4eab\u4e00\u53f0\u673a\u5668\u5427\uff0c\u8fd9\u6837\u4e0d\u540c\u7684\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u4ea7\u751f\u51b2\u7a81\uff0c\u4f8b\u5982 socket \u7684\u7aef\u53e3\u51b2\u7a81\u3002\u53e6\u5916\u5c31\u662f\u522b\u4eba\u7528\u8fc7\u7684\u673a\u5668\uff0c\u4e0d\u77e5\u9053\u4e0a\u9762\u505a\u8fc7\u54ea\u4e9b\u64cd\u4f5c\uff0c\u6709\u5f88\u591a\u7684\u5386\u53f2\u5305\u88b1\uff0c\u5982\u679c\u91cd\u65b0\u5b89\u88c5\u5219\u4ee3\u4ef7\u592a\u5927\u3002\n\n\u6309\u8bf4\uff0c\u5927\u4e8b\u60c5\u6d41\u7a0b\u4e25\u7981\u6ca1\u95ee\u9898\uff0c\u5f88\u591a\u5c0f\u4e8b\u60c5\u4e5f\u8981\u88ab\u62d6\u7d2f\u8d70\u6574\u4e2a\u6d41\u7a0b\uff0c\u800c\u4e14\u5f88\u5bb9\u6613\u51fa\u73b0\u8d44\u6e90\u51b2\u7a81\uff0c\u6bcf\u5929\u8de8\u90e8\u95e8\u7684\u534f\u8c03\u5f88\u7d2f\u4eba\uff0c\u5386\u53f2\u5305\u88b1\u4e25\u91cd\uff0c\u521b\u65b0\u6ca1\u6709\u529e\u6cd5\u8f7b\u88c5\u4e0a\u9635\u3002\n\n\u5f88\u591a\u516c\u53f8\u5904\u7406\u8fd9\u79cd\u95ee\u9898\u91c7\u53d6\u7684\u7b56\u7565\u662f\u6210\u7acb\u72ec\u7acb\u7684\u5b50\u516c\u53f8\uff0c\u72ec\u7acb\u51b3\u7b56\uff0c\u72ec\u7acb\u8fd0\u8425\u3002\u8fd9\u79cd\u529e\u6cd5\u5f80\u5f80\u4f1a\u7528\u5728\u521b\u65b0\u578b\u7684\u9879\u76ee\u4e0a\u3002\n\nLinux \u4e5f\u91c7\u53d6\u4e86\u8fd9\u6837\u7684\u624b\u6bb5\uff0c\u5c31\u662f\u5728\u7269\u7406\u673a\u4e0a\u9762\u521b\u5efa\u865a\u62df\u673a\u3002\u6bcf\u4e2a\u865a\u62df\u673a\u6709\u81ea\u5df1\u5355\u72ec\u7684\u64cd\u4f5c\u7cfb\u7edf\u3001\u7075\u6d3b\u7684\u89c4\u683c\uff0c\u4e00\u4e2a\u547d\u4ee4\u5c31\u80fd\u542f\u52a8\u8d77\u6765\u3002\u6bcf\u6b21\u521b\u5efa\u90fd\u662f\u65b0\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5f88\u597d\u5730\u89e3\u51b3\u4e86\u4e0a\u9762\u4e0d\u7075\u6d3b\u7684\u95ee\u9898\u3002\n\n\u5728\u7269\u7406\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u770b\u6765\uff0c\u865a\u62df\u673a\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5e94\u7528\uff0c\u4ed6\u548c Excel \u4e00\u6837\uff0c\u53ea\u80fd\u8fd0\u884c\u5728\u7528\u6237\u6001\u3002\u4f46\u662f\u5bf9\u4e8e\u865a\u62df\u673a\u91cc\u9762\u7684\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u6765\u8bb2\uff0c\u8fd0\u884c\u5728\u5185\u6838\u6001\uff0c\u5e94\u8be5\u6709\u9ad8\u7684\u6743\u9650\u3002\n\n\u8981\u505a\u5230\u8fd9\u4ef6\u4e8b\u60c5\uff0c\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u5b8c\u5168\u865a\u62df\u5316\u3002\u5176\u5b9e\u8bf4\u767d\u4e86\uff0c\u8fd9\u662f\u4e00\u79cd\u201c\u9a97\u4eba\u201d\u7684\u65b9\u5f0f\u3002\u865a\u62df\u5316\u8f6f\u4ef6\u4f1a\u6a21\u62df\u5047\u7684 CPU\u3001\u5185\u5b58\u3001\u7f51\u7edc\u3001\u786c\u76d8\u7ed9\u5230\u865a\u62df\u673a\uff0c\u8ba9\u865a\u62df\u673a\u91cc\u9762\u7684\u5185\u6838\u81ea\u6211\u611f\u89c9\u826f\u597d\uff0c\u611f\u89c9\u4ed6\u7ec8\u4e8e\u53c8\u50cf\u4e2a\u5185\u6838\u4e86\u3002\u5728 Linux \u4e0a\uff0c\u4e00\u4e2a\u53eb\u4f5c qemu \u7684\u5de5\u5177\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002\n\n...\n\n\u7b2c\u4e09\u79cd\u65b9\u5f0f\u79f0\u4e3a\u534a\u865a\u62df\u5316\u3002\u5bf9\u4e8e\u7f51\u7edc\u6216\u8005\u786c\u76d8\u7684\u8bbf\u95ee\uff0c\u6211\u4eec\u8ba9\u865a\u62df\u673a\u5185\u6838\u52a0\u8f7d\u7279\u6b8a\u7684\u9a71\u52a8\uff0c\u91cd\u65b0\u5b9a\u4f4d\u81ea\u5df1\u7684\u8eab\u4efd\u3002\u865a\u62df\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u6838\u77e5\u9053\u81ea\u5df1\u4e0d\u662f\u7269\u7406\u673a\u5185\u6838\uff0c\u6ca1\u90a3\u4e48\u9ad8\u7684\u6743\u9650\u3002\u4ed6\u5f88\u53ef\u80fd\u8981\u548c\u5f88\u591a\u865a\u62df\u673a\u5171\u4eab\u7269\u7406\u8d44\u6e90\uff0c\u6240\u4ee5\u5b66\u4f1a\u4e86\u6392\u961f\u3002\u865a\u62df\u673a\u5199\u786c\u76d8\u5176\u5b9e\u5199\u7684\u662f\u4e00\u4e2a\u7269\u7406\u673a\u4e0a\u7684\u6587\u4ef6\uff0c\u90a3\u6211\u7684\u5199\u6587\u4ef6\u7684\u7f13\u5b58\u65b9\u5f0f\u662f\u4e0d\u662f\u53ef\u4ee5\u53d8\u4e00\u4e0b\u3002\u6211\u53d1\u9001\u7f51\u7edc\u5305\uff0c\u6839\u672c\u5c31\u4e0d\u662f\u53d1\u7ed9\u771f\u6b63\u7684\u7f51\u7edc\u8bbe\u5907\uff0c\u800c\u662f\u7ed9\u865a\u62df\u7684\u8bbe\u5907\uff0c\u6211\u53ef\u4e0d\u53ef\u4ee5\u76f4\u63a5\u5728\u5185\u5b58\u91cc\u9762\u62f7\u8d1d\u7ed9\u5b83\uff0c\u7b49\u7b49\u7b49\u7b49\u3002\n\n\u7f51\u7edc\u534a\u865a\u62df\u5316\u65b9\u5f0f\u662f virtio_net\uff0c\u5b58\u50a8\u662f virtio_blk\u3002\u5ba2\u6237\u673a\u9700\u8981\u5b89\u88c5\u8fd9\u4e9b\u534a\u865a\u62df\u5316\u9a71\u52a8\u3002\u5ba2\u6237\u673a\u5185\u6838\u77e5\u9053\u81ea\u5df1\u662f\u865a\u62df\u673a\uff0c\u6240\u4ee5\u4f1a\u76f4\u63a5\u628a\u6570\u636e\u53d1\u9001\u7ed9\u534a\u865a\u62df\u5316\u8bbe\u5907\uff0c\u7136\u540e\u7ecf\u8fc7\u7279\u6b8a\u5904\u7406\uff08\u4f8b\u5982\u6392\u961f\u3001\u7f13\u5b58\u3001\u6279\u91cf\u5904\u7406\u7b49\u6027\u80fd\u4f18\u5316\u65b9\u5f0f\uff09\uff0c\u6700\u7ec8\u53d1\u9001\u7ed9\u771f\u6b63\u7684\u786c\u4ef6\u3002\u8fd9\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u4e86\u6027\u80fd\u3002\n\n\u6709\u4e86\u865a\u62df\u5316\u7684\u6280\u672f\uff0c\u516c\u53f8\u7684\u72b6\u6001\u6539\u89c2\u4e86\u4e0d\u5c11\uff0c\u5728\u4e3b\u8981\u7684\u7ecf\u8425\u65b9\u5411\u4e4b\u5916\uff0c\u516c\u53f8\u8fd8\u63a8\u51fa\u4e86\u5f88\u591a\u65b0\u7684\u521b\u65b0\u65b9\u5411\uff0c\u90fd\u662f\u901a\u8fc7\u865a\u62df\u673a\u521b\u5efa\u5b50\u516c\u53f8\u7684\u65b9\u5f0f\u8fdb\u884c\u7684\uff0c\u4f8b\u5982\u8de8\u5883\u7535\u5546\u3001\u5de5\u4e1a\u4e92\u8054\u7f51\u3001\u793e\u4ea4\u7b49\u3002\u4e00\u65b9\u9762\uff0c\u80fd\u591f\u4eab\u53d7\u5927\u516c\u53f8\u7684\u652f\u6301\uff1b\u4e00\u65b9\u9762\uff0c\u4e5f\u53ef\u4ee5\u548c\u7075\u6d3b\u7684\u521b\u4e1a\u516c\u53f8\u8fdb\u884c\u7ade\u4e89\u3002\n\n\u4e8e\u662f\uff0c\u516c\u53f8\u5c31\u53d8\u6210\u96c6\u56e2\u516c\u53f8\u4e86\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5c31\u662f\u8bb2\u4e86\u865a\u62df\u673a\u7684\u539f\u7406\uff0c\u76f8\u5f53\u4e8e\u516c\u53f8\u5185\u90e8\u521b\u4e1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u72ec\u5360\u9ccc\u5934\u5b9a\u683c\u5c40\uff0c\u4e0a\u5e02\u6572\u949f\u8d23\u4efb\u91cd\n\u968f\u7740\u516c\u53f8\u8d8a\u6765\u8d8a\u5927\uff0c\u94b1\u8d5a\u7684\u8d8a\u6765\u8d8a\u591a\uff0c\u9a6c\u603b\u7684\u516c\u53f8\u6162\u6162\u4ece\u884c\u4e1a\u7684\u8ffd\u968f\u8005\uff0c\u53d8\u6210\u4e86\u9886\u5bfc\u8005\u3002\u8fd9\u4e00\u65b9\u9762\uff0c\u8ba9\u9a6c\u603b\u89c9\u5f97\u201c\u4f1a\u5f53\u51cc\u7edd\u9876\uff0c\u4e00\u89c8\u4f17\u5c71\u5c0f\u201d\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u9a6c\u603b\u4e5f\u89c9\u5f97\u201c\u9ad8\u5904\u4e0d\u80dc\u5bd2\u201d\u3002\u539f\u6765\u516c\u53f8\u603b\u662f\u8ffd\u7740\u522b\u4eba\u8dd1\uff0c\u4ea7\u4e1a\u683c\u5c40\uff0c\u5e02\u573a\u683c\u5c40\u4ece\u6765\u4e0d\u7528\u81ea\u5df1\u64cd\u5fc3\uff0c\u53ea\u8981\u81ea\u5df1\u7684\u516c\u53f8\u80fd\u8d5a\u94b1\u5c31\u884c\u3002\u73b0\u5728\u505a\u4e86\u9886\u5934\u7f8a\uff0c\u9a6c\u603b\u4e5f\u5c31\u6162\u6162\u6210\u4e86\u5404\u79cd\u653f\u5e9c\u8bba\u575b\u3001\u4ea7\u4e1a\u8bba\u575b\uff0c\u751a\u81f3\u56fd\u9645\u8bba\u575b\u7684\u5ea7\u4e0a\u5bbe\u3002\n\n\u7a77\u5219\u72ec\u5584\u5176\u8eab\uff0c\u8fbe\u5219\u517c\u6d4e\u5929\u4e0b\u3002\u9a6c\u603b\u7684\u51b3\u7b56\u53ef\u80fd\u5173\u7cfb\u5230\u4ea7\u4e1a\u7684\u53d1\u5c55\u3001\u5730\u65b9\u7684 GDP \u548c\u5c31\u4e1a\uff0c\u751a\u81f3\u672a\u6765\u7684\u56fd\u9645\u7ade\u4e89\u529b\u3002\u56e0\u6b64\uff0c\u5373\u4fbf\u662f\u548c\u539f\u6765\u76f8\u540c\u7684\u4e8b\u60c5\uff0c\u73b0\u5728\u6765\u505a\uff0c\u65b9\u5f0f\u548c\u5c42\u6b21\u90fd\u4e0d\u4e00\u6837\u4e86\u3002\n\n\u5c31\u50cf\u5bf9\u4e8e\u5355\u53f0 Linux \u670d\u52a1\u5668\uff0c\u6700\u91cd\u8981\u7684\u56db\u79cd\u786c\u4ef6\u8d44\u6e90\u662f CPU\u3001\u5185\u5b58\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u3002\u9762\u5bf9\u6574\u4e2a\u6570\u636e\u4e2d\u5fc3\u6210\u5343\u4e0a\u4e07\u53f0\u673a\u5668\uff0c\u6211\u4eec\u53ea\u8981\u91cd\u70b9\u5173\u6ce8\u8fd9\u56db\u79cd\u786c\u4ef6\u8d44\u6e90\u5c31\u53ef\u4ee5\u4e86\u3002\u5982\u679c\u8fd0\u7ef4\u6570\u636e\u4e2d\u5fc3\u4f9d\u7136\u50cf\u7684\u8fd0\u7ef4\u4e00\u53f0\u53f0\u7269\u7406\u673a\u7684\u524d\u8f88\u4e00\u6837\uff0c\u5929\u5929\u5173\u5fc3\u54ea\u4e2a\u7a0b\u5e8f\u653e\u5728\u4e86\u54ea\u53f0\u673a\u5668\u4e0a\uff0c\u4f7f\u7528\u591a\u5c11\u5185\u5b58\u3001\u591a\u5c11\u786c\u76d8\uff0c\u6bcf\u53f0\u673a\u5668\u603b\u5171\u6709\u591a\u5c11\u5185\u5b58\u3001\u591a\u5c11\u786c\u76d8\uff0c\u8fd8\u5269\u591a\u5c11\u5185\u5b58\u548c\u786c\u76d8\uff0c\u90a3\u5934\u5c31\u5927\u4e86\u3002\n\n\u5bf9\u4e8e\u6570\u636e\u4e2d\u5fc3\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u8c03\u5ea6\u5668\uff0c\u5c06\u8fd0\u7ef4\u4eba\u5458\u4ece\u6307\u5b9a\u7269\u7406\u673a\u6216\u8005\u865a\u62df\u673a\u7684\u75db\u82e6\u4e2d\u89e3\u653e\u51fa\u6765\uff0c\u5b9e\u73b0\u5bf9\u4e8e\u7269\u7406\u8d44\u6e90\u7684\u7edf\u4e00\u7ba1\u7406\uff0c\u8fd9\u5c31\u662f Kubernetes\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u4e2d\u5fc3\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2024/01/17/linux-vs-k8s.png",alt:"linux-vs-k8s.png"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e2a\u56fe\u592a\u725b\u903c\u4e86\uff0c\u90a3\u5929\u770b\u5230\u7684\u65f6\u5019\uff0c\u771f\u662f\u611f\u89c9\u8c41\u7136\u5f00\u6717\u3002\u5176\u5b9e k8s \u7684\u67b6\u6784\u548c linux \u771f\u662f\u51e0\u4e4e\u4e00\u4e00\u5bf9\u5e94\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u628a\u5355\u673a\uff08\u64cd\u4f5c\u7cfb\u7edf\uff09\u7c7b\u6bd4\u6210\u516c\u53f8\uff0c\u5176\u4e2d\u7684 CPU \u7c7b\u6bd4\u6210\u5de5\u4eba\u3002\u800c k8s \u5219\u662f\u628a\u5355\u673a\u7c7b\u6bd4\u4e3a\u5de5\u4eba\uff0c\u6216\u8005\u8bf4\u76f8\u5f53\u4e8e\u4e00\u5927\u5806\u5927\u578b\u96c6\u56e2\u516c\u53f8\u7684\u6bcd\u516c\u53f8\uff0c\u7528\u6765\u8c03\u5ea6\u8fd9\u4e9b\u5b50\u516c\u53f8\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5bf9\u4e8e CPU \u548c\u5185\u5b58\u8fd9\u4e24\u79cd\u8ba1\u7b97\u8d44\u6e90\u7684\u7ba1\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 Docker \u6280\u672f\u5b8c\u6210\u3002\n\n\u5bb9\u5668\u5b9e\u73b0\u5c01\u95ed\u7684\u73af\u5883\u4e3b\u8981\u8981\u9760\u4e24\u79cd\u6280\u672f\uff0c\u4e00\u79cd\u662f\u770b\u8d77\u6765\u662f\u9694\u79bb\u7684\u6280\u672f\uff0c\u79f0\u4e3a namespace\u3002\u5728\u6bcf\u4e2a namespace \u4e2d\u7684\u5e94\u7528\u770b\u5230\u7684\uff0c\u90fd\u662f\u4e0d\u540c\u7684 IP \u5730\u5740\u3001\u7528\u6237\u7a7a\u95f4\u3001\u8fdb\u7a0b ID \u7b49\u3002\u53e6\u4e00\u79cd\u662f\u7528\u8d77\u6765\u662f\u9694\u79bb\u7684\u6280\u672f\uff0c\u79f0\u4e3a cgroup\uff0c\u5373\u660e\u660e\u6574\u53f0\u673a\u5668\u6709\u5f88\u591a\u7684 CPU\u3001\u5185\u5b58\uff0c\u4f46\u662f\u4e00\u4e2a\u5e94\u7528\u53ea\u80fd\u7528\u5176\u4e2d\u7684\u4e00\u90e8\u5206\u3002\n\n\u53e6\u5916\uff0c\u5bb9\u5668\u91cc\u8fd8\u6709\u955c\u50cf\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u4f60\u710a\u597d\u96c6\u88c5\u7bb1\u7684\u90a3\u4e00\u523b\uff0c\u5c06\u96c6\u88c5\u7bb1\u7684\u72b6\u6001\u4fdd\u5b58\u4e0b\u6765\u7684\u6837\u5b50\u3002\u5c31\u50cf\u5b59\u609f\u7a7a\u8bf4\u201c\u5b9a\uff01\u201d\uff0c\u96c6\u88c5\u7bb1\u91cc\u7684\u72b6\u6001\u5c31\u88ab\u201c\u5b9a\u201d\u5728\u4e86\u90a3\u4e00\u523b\u3002\u7136\u540e\uff0c\u8fd9\u4e00\u523b\u7684\u72b6\u6001\u4f1a\u88ab\u4fdd\u5b58\u6210\u4e00\u7cfb\u5217\u6587\u4ef6\u3002\u65e0\u8bba\u5728\u54ea\u91cc\u8fd0\u884c\u8fd9\u4e2a\u955c\u50cf\uff0c\u90fd\u80fd\u5b8c\u6574\u5730\u8fd8\u539f\u5f53\u65f6\u7684\u60c5\u51b5\u3002\n\n\u901a\u8fc7\u5bb9\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 CPU \u548c\u5185\u5b58\u8d44\u6e90\uff0c\u4ece\u5927\u7684\u8d44\u6e90\u6c60\u91cc\u9762\u9694\u79bb\u51fa\u6765\uff0c\u5e76\u901a\u8fc7\u955c\u50cf\u6280\u672f\uff0c\u5728\u6570\u636e\u4e2d\u5fc3\u91cc\u9762\u5b9e\u73b0\u8ba1\u7b97\u8d44\u6e90\u7684\u81ea\u7531\u6f02\u79fb\u3002\n\n\u6ca1\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u5019\uff0c\u6c47\u7f16\u7a0b\u5e8f\u5458\u9700\u8981\u6307\u5b9a\u7a0b\u5e8f\u8fd0\u884c\u7684 CPU \u548c\u5185\u5b58\u7269\u7406\u5730\u5740\u3002\u540c\u7406\uff0c\u6570\u636e\u4e2d\u5fc3\u7684\u7ba1\u7406\u5458\uff0c\u539f\u6765\u4e5f\u9700\u8981\u6307\u5b9a\u7a0b\u5e8f\u8fd0\u884c\u7684\u670d\u52a1\u5668\u4ee5\u53ca\u4f7f\u7528\u7684 CPU \u548c\u5185\u5b58\u3002\u73b0\u5728\uff0cKubernetes \u91cc\u9762\u6709\u4e00\u4e2a\u8c03\u5ea6\u5668 Scheduler\uff0c\u4f60\u53ea\u9700\u8981\u544a\u8bc9\u5b83\uff0c\u4f60\u60f3\u8fd0\u884c 10 \u4e2a 4 \u6838 8G \u7684 Java \u7a0b\u5e8f\uff0c\u5b83\u4f1a\u81ea\u52a8\u5e2e\u4f60\u9009\u62e9\u7a7a\u95f2\u7684\u3001\u6709\u8db3\u591f\u8d44\u6e90\u7684\u670d\u52a1\u5668\uff0c\u53bb\u8fd0\u884c\u8fd9\u4e9b\u7a0b\u5e8f\u3002\n\n\u5bf9\u4e8e\u5b58\u50a8\uff0c\u65e0\u8bba\u662f\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u548c\u5206\u5e03\u5f0f\u5757\u5b58\u50a8\uff0c\u9700\u8981\u5bf9\u63a5\u5230 Kubernetes\uff0c\u8ba9 Kubernetes \u7ba1\u7406\u5b83\u4eec\u3002\u5982\u4f55\u5bf9\u63a5\u5462\uff1fKubernetes \u4f1a\u63d0\u4f9b CSI \u63a5\u53e3\u3002\u8fd9\u662f\u4e00\u4e2a\u6807\u51c6\u63a5\u53e3\uff0c\u4e0d\u540c\u7684\u5b58\u50a8\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u6765\u5bf9\u63a5 Kubernetes\u3002\u662f\u4e0d\u662f\u7279\u522b\u50cf\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u5440\uff1f\u64cd\u4f5c\u7cfb\u7edf\u53ea\u8981\u5b9a\u4e49\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u4e0d\u540c\u7684\u5b58\u50a8\u8bbe\u5907\u7684\u9a71\u52a8\u5b9e\u73b0\u8fd9\u4e9b\u63a5\u53e3\uff0c\u5c31\u80fd\u88ab\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u4e86\u3002\n\n\u5bf9\u4e8e\u7f51\u7edc\uff0c\u4e5f\u662f\u7c7b\u4f3c\u7684\u673a\u5236\uff0cKubernetes \u540c\u6837\u662f\u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u53e3 CNI\u3002\u65e0\u8bba\u4f60\u7528\u54ea\u79cd\u65b9\u5f0f\u5b9e\u73b0\u7f51\u7edc\u6a21\u578b\uff0c\u53ea\u8981\u5bf9\u63a5\u8fd9\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0cKubernetes \u5c31\u53ef\u4ee5\u7ba1\u7406\u5bb9\u5668\u7684\u7f51\u7edc\u3002\n\n\u5230\u6b64\uff0c\u6709\u4e86\u8fd9\u5957\u9f0e\u5b9a\u5e02\u573a\u683c\u5c40\u7684\u7b56\u7565\uff0c\u4f5c\u4e3a\u9f99\u5934\u4f01\u4e1a\uff0c\u9a6c\u603b\u7684\u516c\u53f8\u7ec8\u4e8e\u53ef\u4ee5\u987a\u5229\u4e0a\u5e02\u6572\u949f\uff0c\u8d70\u5411\u4eba\u751f\u5dc5\u5cf0\u3002\u4ece\u6b64\uff0c\u6c5f\u6e56\u4eba\u79f0\u201c\u9a6c\u7238\u7238\u201d\u3002\n\n\u597d\u4e86\uff0c\u9a6c\u540c\u5b66\u7684\u521b\u4e1a\u6545\u4e8b\u5c31\u8bb2\u5230\u8fd9\u91cc\u4e86\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7684\u539f\u7406\u4e5f\u7ed9\u4f60\u4e32\u4e86\u4e00\u904d\u3002\u4f60\u662f\u5426\u771f\u7684\u8bb0\u4f4f\u4e86\u8fd9\u4e9b\u539f\u7406\u5462\uff1f\u8bd5\u7740\u5c06\u8fd9\u4e2a\u521b\u4e1a\u6545\u4e8b\u8bb2\u7ed9\u4f60\u7684\u670b\u53cb\u542c\u5427\uff01\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u8bfb\u4e66\u8bb0\u5f55",children:"\u8bfb\u4e66\u8bb0\u5f55"}),"\n",(0,l.jsx)(e.p,{children:"fork \u521b\u5efa\u8fdb\u7a0b\u7684 syscall"}),"\n",(0,l.jsxs)(e.p,{children:["syscall \u662f\u7528\u6237\u7a7a\u95f4\u8c03\u7528\u5185\u6838\u6307\u5b9a\u64cd\u4f5c\u7684\u65b9\u6cd5\u3002syscall \u53ef\u4ee5\u770b\u4f5c\u662f",(0,l.jsx)(e.del,{children:"\u516c\u53f8\u8001\u677f\uff08\u6216\u8005\u8bf4\u9ad8\u7ba1\uff09\u7ed9\u516c\u53f8\u666e\u901a\u9879\u76ee\u4ee5\u53ca\u5916\u56f4\u516c\u53f8\u5f00\u51fa\u6765\u7684\u6307\u5b9a\u64cd\u4f5c\u8868"})," \u80fd\u6267\u884c\u6307\u5b9a\u64cd\u4f5c\u7684\u79d8\u4e66\uff0c\u7528\u6765\u8fde\u63a5\u4e24\u8005\uff08syscall \u51b3\u5b9a\u4e86\u64cd\u4f5c\u7cfb\u7edf\u597d\u4e0d\u597d\u7528\uff0c\u529f\u80fd\u5168\u4e0d\u5168\uff09\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"Linux \u5c31\u662f\u8fd9\u6837\u60f3\u7684\u3002\u5f53\u7236\u8fdb\u7a0b\u8c03\u7528 fork \u521b\u5efa\u8fdb\u7a0b\u7684\u65f6\u5019\uff0c\u5b50\u8fdb\u7a0b\u5c06\u5404\u4e2a\u5b50\u7cfb\u7edf\u4e3a\u7236\u8fdb\u7a0b\u521b\u5efa\u7684\u6570\u636e\u7ed3\u6784\u4e5f\u5168\u90e8\u62f7\u8d1d\u4e86\u4e00\u4efd\uff0c\u751a\u81f3\u8fde\u7a0b\u5e8f\u4ee3\u7801\u4e5f\u662f\u62f7\u8d1d\u8fc7\u6765\u7684\u3002\u6309\u7406\u8bf4\uff0c\u5982\u679c\u4e0d\u8fdb\u884c\u7279\u6b8a\u7684\u5904\u7406\uff0c\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u90fd\u6309\u76f8\u540c\u7684\u7a0b\u5e8f\u4ee3\u7801\u8fdb\u884c\u4e0b\u53bb\uff0c\u8fd9\u6837\u5c31\u6ca1\u6709\u610f\u4e49\u4e86\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u8fd9\u6837\u5904\u7406\uff1a\u5bf9\u4e8e fork \u7cfb\u7edf\u8c03\u7528\u7684\u8fd4\u56de\u503c\uff0c\u5982\u679c\u5f53\u524d\u8fdb\u7a0b\u662f\u5b50\u8fdb\u7a0b\uff0c\u5c31\u8fd4\u56de 0\uff1b\u5982\u679c\u5f53\u524d\u8fdb\u7a0b\u662f\u7236\u8fdb\u7a0b\uff0c\u5c31\u8fd4\u56de\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7\u3002\u8fd9\u6837\u9996\u5148\u5728\u8fd4\u56de\u503c\u8fd9\u91cc\u5c31\u6709\u4e86\u4e00\u4e2a\u533a\u5206\uff0c\u7136\u540e\u901a\u8fc7 if-else \u8bed\u53e5\u5224\u65ad\uff0c\u5982\u679c\u662f\u7236\u8fdb\u7a0b\uff0c\u8fd8\u63a5\u7740\u505a\u539f\u6765\u5e94\u8be5\u505a\u7684\u4e8b\u60c5\uff1b\u5982\u679c\u662f\u5b50\u8fdb\u7a0b\uff0c\u9700\u8981\u8bf7\u6c42\u53e6\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528 execve \u6765\u6267\u884c\u53e6\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u5b50\u8fdb\u7a0b\u548c\u7236\u8fdb\u7a0b\u5c31\u5f7b\u5e95\u5206\u9053\u626c\u9573\u4e86\uff0c\u4e5f\u5c31\u4ea7\u751f\u4e86\u4e00\u4e2a\u5206\u652f\uff08fork\uff09\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/02/pid.jpeg",alt:"pid.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u7236\u8fdb\u7a0b\u901a\u8fc7 syscall waitpid(pid) \u5c31\u53ef\u4ee5\u77e5\u9053\u8be5\u5b50\u8fdb\u7a0b\u8fd0\u884c\u7ed3\u679c"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u5185\u5b58\uff0c\u4e92\u76f8\u4e4b\u95f4\u4e0d\u5e72\u6270\uff0c\u6709\u72ec\u7acb\u7684\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u90a3\u72ec\u7acb\u7684\u529e\u516c\u7a7a\u95f4\u91cc\u9762\uff0c\u90fd\u653e\u4e9b\u4ec0\u4e48\u5462\uff1f\n\n\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\u80af\u5b9a\u662f\u8981\u653e\u8fdb\u53bb\u7684\uff0c\u56e0\u4e3a\u6267\u884c\u8fc7\u7a0b\u4e2d\u80af\u5b9a\u8981\u4e0d\u65ad\u5730\u770b\u3002\u5bf9\u4e8e\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u6765\u8bb2\uff0c\u653e\u7a0b\u5e8f\u4ee3\u7801\u7684\u8fd9\u90e8\u5206\uff0c\u6211\u4eec\u79f0\u4e3a\u4ee3\u7801\u6bb5\uff08Code Segment\uff09\u3002\n\n\u9879\u76ee\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e9b\u67b6\u6784\u56fe\u3001\u6d41\u7a0b\u56fe\uff0c\u8fd9\u4e9b\u4e5f\u653e\u5728\u4f1a\u8bae\u5ba4\u91cc\u9762\u3002\u6709\u7684\u753b\u5728\u767d\u677f\u4e0a\uff0c\u8ba8\u8bba\u5b8c\u4e86\uff0c\u8fdb\u5165\u4e0b\u4e2a\u4e3b\u9898\u5c31\u4f1a\u64e6\u4e86\uff1b\u6709\u7684\u753b\u5728\u7eb8\u548c\u672c\u5b50\u4e0a\uff0c\u8ba8\u8bba\u7684\u65f6\u5019\u7ffb\u51fa\u6765\uff0c\u4e0d\u8ba8\u8bba\u7684\u65f6\u5019\u5806\u5728\u90a3\u91cc\uff0c\u4f1a\u4fdd\u7559\u6bd4\u8f83\u957f\u7684\u4e00\u6bb5\u65f6\u95f4\uff0c\u9664\u975e\u6307\u660e\u7684\u786e\u4e0d\u9700\u8981\u4e86\u624d\u4f1a\u53bb\u9500\u6bc1\u3002\n\n\u5bf9\u4e8e\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u6765\u8bb2\uff0c\u653e\u8fdb\u7a0b\u8fd0\u884c\u4e2d\u4ea7\u751f\u6570\u636e\u7684\u8fd9\u90e8\u5206\uff0c\u6211\u4eec\u79f0\u4e3a\u6570\u636e\u6bb5\uff08Data Segment\uff09\u3002\u5176\u4e2d\u5c40\u90e8\u53d8\u91cf\u7684\u90e8\u5206\uff0c\u5728\u5f53\u524d\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u8d77\u4f5c\u7528\uff0c\u5f53\u8fdb\u5165\u53e6\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u8fd9\u4e2a\u53d8\u91cf\u5c31\u91ca\u653e\u4e86\uff1b\u4e5f\u6709\u52a8\u6001\u5206\u914d\u7684\uff0c\u4f1a\u8f83\u957f\u65f6\u95f4\u4fdd\u5b58\uff0c\u6307\u660e\u624d\u9500\u6bc1\u7684\uff0c\u8fd9\u90e8\u5206\u79f0\u4e3a\u5806\uff08Heap\uff09\u3002\n\n\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u662f\u5f88\u5927\u7684\uff0c32 \u4f4d\u7684\u662f 4G\uff0c64 \u4f4d\u7684\u5c31\u66f4\u5927\u4e86\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u6709\u8fd9\u4e48\u591a\u7269\u7406\u5185\u5b58\u3002\u5c31\u50cf\u4e00\u4e2a\u516c\u53f8\u7684\u4f1a\u8bae\u5ba4\u662f\u6709\u9650\u7684\uff0c\u4f5c\u4e3a\u8001\u677f\uff0c\u4f60\u4e0d\u53ef\u80fd\u4e8b\u5148\u90fd\u7ed9\u9879\u76ee\u7ec4\u5206\u914d\u597d\u3002\u54ea\u6709\u8fd9\u4e48\u591a\u4f1a\u8bae\u5ba4\u554a\uff0c\u4e00\u5b9a\u662f\u9700\u8981\u7684\u65f6\u5019\u518d\u5206\u914d\u3002\n\n\u6240\u4ee5\uff0c\u8fdb\u7a0b\u81ea\u5df1\u4e0d\u7528\u7684\u90e8\u5206\u5c31\u4e0d\u7528\u7ba1\uff0c\u53ea\u6709\u8fdb\u7a0b\u8981\u53bb\u4f7f\u7528\u90e8\u5206\u5185\u5b58\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u4f7f\u7528\u5185\u5b58\u7ba1\u7406\u7684\u7cfb\u7edf\u8c03\u7528\u6765\u767b\u8bb0\uff0c\u8bf4\u81ea\u5df1\u9a6c\u4e0a\u5c31\u8981\u7528\u4e86\uff0c\u5e0c\u671b\u5206\u914d\u4e00\u90e8\u5206\u5185\u5b58\u7ed9\u5b83\uff0c\u4f46\u662f\u8fd9\u8fd8\u4e0d\u4ee3\u8868\u771f\u7684\u5c31\u5bf9\u5e94\u5230\u4e86\u7269\u7406\u5185\u5b58\u3002\u53ea\u6709\u771f\u7684\u5199\u5165\u6570\u636e\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u6ca1\u6709\u5bf9\u5e94\u7269\u7406\u5185\u5b58\uff0c\u624d\u4f1a\u89e6\u53d1\u4e00\u4e2a\u4e2d\u65ad\uff0c\u73b0\u5206\u914d\u7269\u7406\u5185\u5b58\u3002\n\n\u8fd9\u91cc\u6211\u4eec\u4ecb\u7ecd\u4e24\u4e2a\u5728\u5806\u91cc\u9762\u5206\u914d\u5185\u5b58\u7684\u7cfb\u7edf\u8c03\u7528\uff0cbrk \u548c mmap\u3002\n\n\u5f53\u5206\u914d\u7684\u5185\u5b58\u6570\u91cf\u6bd4\u8f83\u5c0f\u7684\u65f6\u5019\uff0c\u4f7f\u7528 brk\uff0c\u4f1a\u548c\u539f\u6765\u7684\u5806\u7684\u6570\u636e\u8fde\u5728\u4e00\u8d77\uff0c\u8fd9\u5c31\u50cf\u591a\u5206\u914d\u4e24\u4e09\u4e2a\u5de5\u4f4d\uff0c\u5728\u539f\u6765\u7684\u533a\u57df\u65c1\u8fb9\u642c\u4e24\u628a\u6905\u5b50\u5c31\u884c\u4e86\u3002\u5f53\u5206\u914d\u7684\u5185\u5b58\u6570\u91cf\u6bd4\u8f83\u5927\u7684\u65f6\u5019\uff0c\u4f7f\u7528 mmap\uff0c\u4f1a\u91cd\u65b0\u5212\u5206\u4e00\u5757\u533a\u57df\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u529e\u516c\u7a7a\u95f4\u9700\u8981\u592a\u591a\u7684\u65f6\u5019\uff0c\u7d22\u6027\u6765\u4e2a\u4e00\u6574\u5757\u3002\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5bf9\u4e8e\u6587\u4ef6\u7684\u64cd\u4f5c\uff0c\u4e0b\u9762\u8fd9\u516d\u4e2a\u7cfb\u7edf\u8c03\u7528\u662f\u6700\u91cd\u8981\u7684\uff1a\n\n- \u5bf9\u4e8e\u5df2\u7ecf\u6709\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 open \u6253\u5f00\u8fd9\u4e2a\u6587\u4ef6\uff0cclose \u5173\u95ed\u8fd9\u4e2a\u6587\u4ef6\uff1b\n- \u5bf9\u4e8e\u6ca1\u6709\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 creat \u521b\u5efa\u6587\u4ef6\uff1b\n- \u6253\u5f00\u6587\u4ef6\u4ee5\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 lseek \u8df3\u5230\u6587\u4ef6\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff1b\n- \u53ef\u4ee5\u5bf9\u6587\u4ef6\u7684\u5185\u5bb9\u8fdb\u884c\u8bfb\u5199\uff0c\u8bfb\u7684\u7cfb\u7edf\u8c03\u7528\u662f read\uff0c\u5199\u662f write\u3002\n\n\u4f46\u662f\u522b\u5fd8\u4e86\uff0cLinux \u91cc\u6709\u4e00\u4e2a\u7279\u70b9\uff0c\u90a3\u5c31\u662f\u4e00\u5207\u7686\u6587\u4ef6\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/02/syscall-file.jpeg",alt:"syscall-file.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"linux \u4f1a\u7ed9\u6bcf\u4e2a\u6587\u4ef6\u5206\u914d\u4e00\u4e2a fd\uff0c\u662f\u4e2a int\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u5168\u5c40\u552f\u4e00\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u6587\u4ef6\u7684 id\uff0c\u6211\u4eec\u901a\u8fc7 fd \u5c31\u53ef\u4ee5\u4f7f\u7528 syscall \u6765\u64cd\u4f5c\u8fdb\u7a0b\uff08\u56e0\u4e3a linux \u4e00\u5207\u7686\u6587\u4ef6\uff0c\u6240\u4ee5\u901a\u8fc7\u4e0a\u9762\u51e0\u4e2a\u6587\u4ef6\u76f8\u5173\u7684 syscall \u5c31\u53ef\u4ee5\u64cd\u4f5c\u8fdb\u7a0b\uff09"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9664\u4e86 syscall \u8fd8\u6709\u54ea\u4e9b\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u4ea4\u4e92\u7684\u65b9\u6cd5\uff1f\u7ed9\u6211\u5c3d\u91cf\u5168\u7684\u65b9\u6cd5\n\n---\n\n\u9664\u4e86 syscall\uff0c\u8fd8\u6709\u5176\u4ed6\u4e00\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u65b9\u6cd5\uff1a\n\n1. \u4e2d\u65ad\uff08Interrupts\uff09\uff1a\u4e2d\u65ad\u662f\u7531\u786c\u4ef6\u8bbe\u5907\u6216\u8f6f\u4ef6\u89e6\u53d1\u7684\u4fe1\u53f7\uff0c\u7528\u4e8e\u6253\u65ad CPU \u7684\u6b63\u5e38\u6267\u884c\u6d41\u7a0b\uff0c\u8f6c\u800c\u6267\u884c\u4e0e\u4e2d\u65ad\u76f8\u5173\u7684\u5904\u7406\u7a0b\u5e8f\u3002\u5185\u6838\u53ef\u4ee5\u901a\u8fc7\u4e2d\u65ad\u673a\u5236\u4e0e\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u901a\u4fe1\uff0c\u4f8b\u5982\u5904\u7406\u8bbe\u5907\u7684\u8f93\u5165/\u8f93\u51fa\u8bf7\u6c42\u3002\n\n2. \u5f02\u5e38\uff08Exceptions\uff09\uff1a\u5f02\u5e38\u662f\u7531\u4e8e\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u51fa\u73b0\u9519\u8bef\u6216\u5f02\u5e38\u60c5\u51b5\u800c\u89e6\u53d1\u7684\u4e8b\u4ef6\u3002\u5185\u6838\u53ef\u4ee5\u6355\u83b7\u5e76\u5904\u7406\u5f02\u5e38\uff0c\u7136\u540e\u4e0e\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u4ea4\u4e92\uff0c\u4f8b\u5982\u5904\u7406\u5185\u5b58\u8bbf\u95ee\u9519\u8bef\u6216\u975e\u6cd5\u6307\u4ee4\u3002\n\n3. \u4fe1\u53f7\uff08Signals\uff09\uff1a\u4fe1\u53f7\u662f\u4e00\u79cd\u8f6f\u4ef6\u4e2d\u65ad\uff0c\u7528\u4e8e\u901a\u77e5\u8fdb\u7a0b\u53d1\u751f\u4e86\u67d0\u4e2a\u4e8b\u4ef6\u3002\u5185\u6838\u53ef\u4ee5\u5411\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u6765\u54cd\u5e94\u4fe1\u53f7\u3002\n\n4. \u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\uff08File System Interface\uff09\uff1a\u5185\u6838\u63d0\u4f9b\u4e86\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\uff0c\u5141\u8bb8\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u7a0b\u5e8f\u8bfb\u53d6\u3001\u5199\u5165\u548c\u7ba1\u7406\u6587\u4ef6\u3002\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\u4e0e\u5185\u6838\u8fdb\u884c\u4ea4\u4e92\uff0c\u6267\u884c\u6587\u4ef6\u64cd\u4f5c\u3002\n\n5. \u5171\u4eab\u5185\u5b58\uff08Shared Memory\uff09\uff1a\u5171\u4eab\u5185\u5b58\u662f\u4e00\u79cd\u5141\u8bb8\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u540c\u4e00\u5757\u7269\u7406\u5185\u5b58\u7684\u673a\u5236\u3002\u5185\u6838\u53ef\u4ee5\u521b\u5efa\u548c\u7ba1\u7406\u5171\u4eab\u5185\u5b58\u533a\u57df\uff0c\u4f7f\u5f97\u4e0d\u540c\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u8bfb\u5199\u5171\u4eab\u5185\u5b58\u6765\u8fdb\u884c\u901a\u4fe1\u548c\u6570\u636e\u5171\u4eab\u3002\n\n6. \u7ba1\u9053\uff08Pipes\uff09\uff1a\u7ba1\u9053\u662f\u4e00\u79cd\u534a\u53cc\u5de5\u7684\u901a\u4fe1\u673a\u5236\uff0c\u7528\u4e8e\u5728\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u4f20\u9012\u6570\u636e\u3002\u5185\u6838\u53ef\u4ee5\u521b\u5efa\u548c\u7ba1\u7406\u7ba1\u9053\uff0c\u4f7f\u5f97\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7\u7ba1\u9053\u8fdb\u884c\u901a\u4fe1\u3002\n\n7. \u5957\u63a5\u5b57\uff08Sockets\uff09\uff1a\u5957\u63a5\u5b57\u662f\u4e00\u79cd\u7f51\u7edc\u901a\u4fe1\u673a\u5236\uff0c\u7528\u4e8e\u5728\u4e0d\u540c\u4e3b\u673a\u4e4b\u95f4\u8fdb\u884c\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002\u5185\u6838\u63d0\u4f9b\u4e86\u5957\u63a5\u5b57\u63a5\u53e3\uff0c\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8fdb\u884c\u901a\u4fe1\u3002\n\n\u8fd9\u4e9b\u65b9\u6cd5\u4ee3\u8868\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u4ea4\u4e92\u65b9\u5f0f\uff0c\u4f46\u5e76\u4e0d\u9650\u4e8e\u6b64\u3002\u5177\u4f53\u7684\u4ea4\u4e92\u65b9\u6cd5\u53ef\u80fd\u4f1a\u56e0\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u4e0d\u540c\u800c\u6709\u6240\u5dee\u5f02\u3002\n\n---\n\n\u611f\u89c9\u597d\u50cf\u548c IPC \u7684\u65b9\u6cd5\u6709\u597d\u51e0\u4e2a\u662f\u7c7b\u4f3c\u7684\uff1f\n\n---\n\n\u4f60\u89c2\u5bdf\u5f97\u5f88\u6b63\u786e\uff01IPC\uff08Inter-Process Communication\uff0c\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u5b9e\u73b0\u4e0d\u540c\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u548c\u6570\u636e\u4f20\u9012\u7684\u65b9\u6cd5\u3002\u5728\u4e0a\u8ff0\u63d0\u5230\u7684\u65b9\u6cd5\u4e2d\uff0c\u4fe1\u53f7\u3001\u5171\u4eab\u5185\u5b58\u3001\u7ba1\u9053\u548c\u5957\u63a5\u5b57\u90fd\u5c5e\u4e8e IPC \u7684\u4e00\u79cd\u5f62\u5f0f\u3002\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u673a\u5236\u548c\u63a5\u53e3\uff0c\u4f7f\u5f97\u8fdb\u7a0b\u53ef\u4ee5\u5728\u5185\u6838\u7684\u5e2e\u52a9\u4e0b\u8fdb\u884c\u901a\u4fe1\u548c\u6570\u636e\u4ea4\u6362\u3002\n\nIPC \u662f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u5b83\u5141\u8bb8\u4e0d\u540c\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u534f\u4f5c\u548c\u6570\u636e\u5171\u4eab\u3002\u4e0d\u540c\u7684 IPC \u65b9\u6cd5\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u573a\u666f\u548c\u9700\u6c42\u3002\u4f8b\u5982\uff0c\u4fe1\u53f7\u9002\u7528\u4e8e\u8fdb\u7a0b\u95f4\u7684\u7b80\u5355\u901a\u77e5\u548c\u4e8b\u4ef6\u5904\u7406\uff0c\u5171\u4eab\u5185\u5b58\u9002\u7528\u4e8e\u9ad8\u6027\u80fd\u7684\u6570\u636e\u5171\u4eab\uff0c\u7ba1\u9053\u9002\u7528\u4e8e\u7236\u5b50\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u5957\u63a5\u5b57\u9002\u7528\u4e8e\u7f51\u7edc\u901a\u4fe1\u7b49\u3002\n\n\u56e0\u6b64\uff0cIPC \u65b9\u6cd5\u548c\u5185\u6838\u7a7a\u95f4\u4e0e\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u7684\u4ea4\u4e92\u65b9\u6cd5\u6709\u4e00\u5b9a\u7684\u91cd\u53e0\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u6d89\u53ca\u5230\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u548c\u6570\u636e\u4f20\u9012\u3002\u8fd9\u4e9b\u65b9\u6cd5\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u62bd\u8c61\u5c42\u6b21\u548c\u529f\u80fd\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u901a\u4fe1\u9700\u6c42\u3002\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u5171\u4eab\u5185\u5b58"}),"\n",(0,l.jsx)(e.p,{children:"shmget \u521b\u5efa\u5171\u4eab\u5185\u5b58\u5757"}),"\n",(0,l.jsx)(e.p,{children:"shmat \u5c06\u5171\u4eab\u5185\u5b58\u6620\u5c04\u5230\u81ea\u5df1\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5c31\u53ef\u4ee5\u8bfb\u5199\u4e86"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f46\u662f\uff0c\u4e24\u4e2a\u9879\u76ee\u7ec4\u5171\u540c\u8bbf\u95ee\u4e00\u4e2a\u4f1a\u8bae\u5ba4\u91cc\u7684\u6570\u636e\uff0c\u5c31\u4f1a\u5b58\u5728\u201c\u7ade\u4e89\u201d\u7684\u95ee\u9898\u3002\u5982\u679c\u5927\u5bb6\u540c\u65f6\u4fee\u6539\u540c\u4e00\u5757\u6570\u636e\u548b\u529e\uff1f\u8fd9\u5c31\u9700\u8981\u6709\u4e00\u79cd\u65b9\u5f0f\uff0c\u8ba9\u4e0d\u540c\u7684\u4eba\u80fd\u591f\u6392\u4ed6\u5730\u8bbf\u95ee\uff0c\u8fd9\u5c31\u662f\u4fe1\u53f7\u91cf\u7684\u673a\u5236 Semaphore\u3002\n\n\u8fd9\u4e2a\u673a\u5236\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u8fd9\u91cc\u8bf4\u4e00\u79cd\u7b80\u5355\u7684\u573a\u666f\u3002\n\n\u5bf9\u4e8e\u53ea\u5141\u8bb8\u4e00\u4e2a\u4eba\u8bbf\u95ee\u7684\u9700\u6c42\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u4fe1\u53f7\u91cf\u8bbe\u4e3a 1\u3002\u5f53\u4e00\u4e2a\u4eba\u8981\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u5148\u8c03\u7528 sem_wait\u3002\u5982\u679c\u8fd9\u65f6\u5019\u6ca1\u6709\u4eba\u8bbf\u95ee\uff0c\u5219\u5360\u7528\u8fd9\u4e2a\u4fe1\u53f7\u91cf\uff0c\u4ed6\u5c31\u53ef\u4ee5\u5f00\u59cb\u8bbf\u95ee\u4e86\u3002\u5982\u679c\u8fd9\u4e2a\u65f6\u5019\u53e6\u4e00\u4e2a\u4eba\u8981\u8bbf\u95ee\uff0c\u4e5f\u4f1a\u8c03\u7528 sem_wait\u3002\u7531\u4e8e\u524d\u4e00\u4e2a\u4eba\u5df2\u7ecf\u5728\u8bbf\u95ee\u4e86\uff0c\u6240\u4ee5\u540e\u9762\u8fd9\u4e2a\u4eba\u5c31\u5fc5\u987b\u7b49\u5f85\u4e0a\u4e00\u4e2a\u4eba\u8bbf\u95ee\u5b8c\u4e4b\u540e\u624d\u80fd\u8bbf\u95ee\u3002\u5f53\u4e0a\u4e00\u4e2a\u4eba\u8bbf\u95ee\u5b8c\u6bd5\u540e\uff0c\u4f1a\u8c03\u7528 sem_post \u5c06\u4fe1\u53f7\u91cf\u91ca\u653e\uff0c\u4e8e\u662f\u4e0b\u4e00\u4e2a\u4eba\u7b49\u5f85\u7ed3\u675f\uff0c\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u8d44\u6e90\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"glibc"}),"\n",(0,l.jsx)(e.p,{children:"\u867d\u7136 syscall\uff08\u79d8\u4e66\u7684\u6307\u4ee4\u8868\uff09\u5df2\u7ecf\u5f88\u65b9\u4fbf\u4e86\uff0c\u4f46\u662f\u53ea\u662f\u5bf9\u516c\u53f8\u5185\u90e8\uff08\uff09\u800c\u8a00\uff0c\u5bf9\u516c\u53f8\u5916\u90e8\u7684\u4eba\u5bf9\u8fd9\u4e2a\u80af\u5b9a\u4e0d\u719f\u554a\uff0c\u5c31\u9700\u8981 glibc \u4e86\u3002glibc \u5c01\u88c5\u4e86 linux \u7684 syscall\uff0c\u65b9\u4fbf\u8c03\u7528\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6bcf\u4e2a\u7279\u5b9a\u7684\u7cfb\u7edf\u8c03\u7528\u5bf9\u5e94\u4e86\u81f3\u5c11\u4e00\u4e2a Glibc \u5c01\u88c5\u7684\u5e93\u51fd\u6570\uff0c\u6bd4\u5982\u8bf4\uff0c\u7cfb\u7edf\u63d0\u4f9b\u7684\u6253\u5f00\u6587\u4ef6\u7cfb\u7edf\u8c03\u7528 sys_open \u5bf9\u5e94\u7684\u662f Glibc \u4e2d\u7684 open \u51fd\u6570\u3002\n\n\u6709\u65f6\u5019\uff0cGlibc \u4e00\u4e2a\u5355\u72ec\u7684 API \u53ef\u80fd\u8c03\u7528\u591a\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u6bd4\u5982\u8bf4\uff0cGlibc \u63d0\u4f9b\u7684 printf \u51fd\u6570\u5c31\u4f1a\u8c03\u7528\u5982 sys_open\u3001sys_mmap\u3001sys_write\u3001sys_close \u7b49\u7b49\u7cfb\u7edf\u8c03\u7528\u3002\n\n\u4e5f\u6709\u65f6\u5019\uff0c\u591a\u4e2a API \u4e5f\u53ef\u80fd\u53ea\u5bf9\u5e94\u540c\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u5982 Glibc \u4e0b\u5b9e\u73b0\u7684 malloc\u3001calloc\u3001free \u7b49\u51fd\u6570\u7528\u6765\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff0c\u90fd\u5229\u7528\u4e86\u5185\u6838\u7684 sys_brk \u7684\u7cfb\u7edf\u8c03\u7528\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u603b\u662f\u7528 strace \u6765\u8c03\u4f18 golang \u4ee3\u7801\uff0c\u5b9e\u9645\u4e0a strace \u5c31\u662f\u7528\u6765\u8ddf\u8e2a\u8fdb\u7a0b\u6267\u884c\u65f6 syscall \u548c signal \u76f8\u5173\u4fe1\u606f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# mac strace = dtruss\nsudo dtruss -f -t syscall whoami\nsudo dtruss -f -t syscall ls\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-log",children:'\u279c  ~ strace whoami\nexecve("/usr/bin/whoami", ["whoami"], 0x7ffc73020e40 /* 27 vars */) = 0\nbrk(NULL)                               = 0xee6000\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f322edd5000\n...\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"bus"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5bf9\u4e8e\u516c\u53f8\u6765\u8bf4\uff0cCPU \u662f\u771f\u6b63\u5e72\u6d3b\u7684\uff0c\u5c06\u6765\u6267\u884c\u9879\u76ee\u90fd\u8981\u9760\u5b83\u3002\n\nCPU \u5c31\u76f8\u5f53\u4e8e\u54b1\u4eec\u516c\u53f8\u7684\u7a0b\u5e8f\u5458\uff0c\u6211\u4eec\u5e38\u8bf4\uff0c\u4e8c\u5341\u4e00\u4e16\u6700\u7f3a\u7684\u662f\u4ec0\u4e48\uff1f\u662f\u4eba\u624d\uff01\u6240\u4ee5\uff0c\u5927\u91cf\u6c34\u5e73\u9ad8\u3001\u5e72\u6d3b\u5feb\u7684\u7a0b\u5e8f\u5458\uff0c\u624d\u662f\u8425\u5546\u73af\u5883\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u5206\u3002\n\nCPU \u548c\u5176\u4ed6\u8bbe\u5907\u8fde\u63a5\uff0c\u8981\u9760\u4e00\u79cd\u53eb\u4f5c\u603b\u7ebf\uff08Bus\uff09\u7684\u4e1c\u897f\uff0c\u5176\u5b9e\u5c31\u662f\u4e3b\u677f\u4e0a\u5bc6\u5bc6\u9ebb\u9ebb\u7684\u96c6\u6210\u7535\u8def\uff0c\u8fd9\u4e9b\u4e1c\u897f\u7ec4\u6210\u4e86 CPU \u548c\u5176\u4ed6\u8bbe\u5907\u7684\u9ad8\u901f\u901a\u9053\u3002\n\n\u5728\u8fd9\u4e9b\u8bbe\u5907\u4e2d\uff0c\u6700\u91cd\u8981\u7684\u662f\u5185\u5b58\uff08Memory\uff09\u3002\u56e0\u4e3a\u5355\u9760 CPU \u662f\u6ca1\u529e\u6cd5\u5b8c\u6210\u8ba1\u7b97\u4efb\u52a1\u7684\uff0c\u5f88\u591a\u590d\u6742\u7684\u8ba1\u7b97\u4efb\u52a1\u90fd\u9700\u8981\u5c06\u4e2d\u95f4\u7ed3\u679c\u4fdd\u5b58\u4e0b\u6765\uff0c\u7136\u540e\u57fa\u4e8e\u4e2d\u95f4\u7ed3\u679c\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u8ba1\u7b97\u3002CPU \u672c\u8eab\u6ca1\u529e\u6cd5\u4fdd\u5b58\u8fd9\u4e48\u591a\u4e2d\u95f4\u7ed3\u679c\uff0c\u8fd9\u5c31\u8981\u4f9d\u8d56\u5185\u5b58\u4e86\u3002\n\n\u5185\u5b58\u5c31\u76f8\u5f53\u4e8e\u529e\u516c\u5ba4\uff0c\u6211\u4eec\u8981\u770b\u770b\u65b9\u4e0d\u65b9\u4fbf\u79df\u5230\u529e\u516c\u5ba4\uff0c\u6709\u6ca1\u6709\u4ec0\u4e48\u521b\u65b0\u79d1\u6280\u56ed\u4e4b\u7c7b\u7684\u3002\u6709\u4e86\u5171\u4eab\u7684\u3001\u4fbf\u5b9c\u7684\u529e\u516c\u4f4d\uff0c\u516c\u53f8\u5c31\u6709\u6ce8\u518c\u5730\u4e86\u3002\n\n\u5f53\u7136\u603b\u7ebf\u4e0a\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u8bbe\u5907\uff0c\u4f8b\u5982\u663e\u5361\u4f1a\u8fde\u63a5\u663e\u793a\u5668\u3001\u78c1\u76d8\u63a7\u5236\u5668\u4f1a\u8fde\u63a5\u786c\u76d8\u3001USB \u63a7\u5236\u5668\u4f1a\u8fde\u63a5\u952e\u76d8\u548c\u9f20\u6807\u7b49\u7b49\u3002\n\nCPU \u548c\u5185\u5b58\u662f\u5b8c\u6210\u8ba1\u7b97\u4efb\u52a1\u7684\u6838\u5fc3\u7ec4\u4ef6\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u91cd\u70b9\u4ecb\u7ecd\u4e00\u4e0b CPU \u548c\u5185\u5b58\u662f\u5982\u4f55\u914d\u5408\u5de5\u4f5c\u7684\u3002\n\nCPU \u5176\u5b9e\u4e5f\u4e0d\u662f\u5355\u7eaf\u7684\u4e00\u5757\uff0c\u5b83\u5305\u62ec\u4e09\u4e2a\u90e8\u5206\uff0c\u8fd0\u7b97\u5355\u5143\u3001\u6570\u636e\u5355\u5143\u548c\u63a7\u5236\u5355\u5143\u3002\n\n\u8fd0\u7b97\u5355\u5143\u53ea\u7ba1\u7b97\uff0c\u4f8b\u5982\u505a\u52a0\u6cd5\u3001\u505a\u4f4d\u79fb\u7b49\u7b49\u3002\u4f46\u662f\uff0c\u5b83\u4e0d\u77e5\u9053\u5e94\u8be5\u7b97\u54ea\u4e9b\u6570\u636e\uff0c\u8fd0\u7b97\u7ed3\u679c\u5e94\u8be5\u653e\u5728\u54ea\u91cc\u3002\n\n\u8fd0\u7b97\u5355\u5143\u8ba1\u7b97\u7684\u6570\u636e\u5982\u679c\u6bcf\u6b21\u90fd\u8981\u7ecf\u8fc7\u603b\u7ebf\uff0c\u5230\u5185\u5b58\u91cc\u9762\u73b0\u62ff\uff0c\u8fd9\u6837\u5c31\u592a\u6162\u4e86\uff0c\u6240\u4ee5\u5c31\u6709\u4e86\u6570\u636e\u5355\u5143\u3002\u6570\u636e\u5355\u5143\u5305\u62ec CPU \u5185\u90e8\u7684\u7f13\u5b58\u548c\u5bc4\u5b58\u5668\u7ec4\uff0c\u7a7a\u95f4\u5f88\u5c0f\uff0c\u4f46\u662f\u901f\u5ea6\u98de\u5feb\uff0c\u53ef\u4ee5\u6682\u65f6\u5b58\u653e\u6570\u636e\u548c\u8fd0\u7b97\u7ed3\u679c\u3002\n\n\u6709\u4e86\u653e\u6570\u636e\u7684\u5730\u65b9\uff0c\u4e5f\u6709\u4e86\u7b97\u7684\u5730\u65b9\uff0c\u8fd8\u9700\u8981\u6709\u4e2a\u6307\u6325\u5230\u5e95\u505a\u4ec0\u4e48\u8fd0\u7b97\u7684\u5730\u65b9\uff0c\u8fd9\u5c31\u662f\u63a7\u5236\u5355\u5143\u3002\u63a7\u5236\u5355\u5143\u662f\u4e00\u4e2a\u7edf\u4e00\u7684\u6307\u6325\u4e2d\u5fc3\uff0c\u5b83\u53ef\u4ee5\u83b7\u5f97\u4e0b\u4e00\u6761\u6307\u4ee4\uff0c\u7136\u540e\u6267\u884c\u8fd9\u6761\u6307\u4ee4\u3002\u8fd9\u4e2a\u6307\u4ee4\u4f1a\u6307\u5bfc\u8fd0\u7b97\u5355\u5143\u53d6\u51fa\u6570\u636e\u5355\u5143\u4e2d\u7684\u67d0\u51e0\u4e2a\u6570\u636e\uff0c\u8ba1\u7b97\u51fa\u4e2a\u7ed3\u679c\uff0c\u7136\u540e\u653e\u5728\u6570\u636e\u5355\u5143\u7684\u67d0\u4e2a\u5730\u65b9\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/02/cpu-memory.jpeg",alt:"cpu-memory.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u80fd\u5426\u7ed9\u6211\u8bb2\u89e3\u4e00\u4e0b linux kernel \u7684\u603b\u7ebf\uff1f\u4e3a\u4ec0\u4e48 CPU \u548c\u5185\u5b58\u9700\u8981\u901a\u8fc7\u603b\u7ebf\u4f20\u6570\u636e\uff1f\n\n---\n\nLinux \u5185\u6838\u7684\u603b\u7ebf\u662f\u6307\u7528\u4e8e\u8fde\u63a5 CPU\u3001\u5185\u5b58\u548c\u5176\u4ed6\u8bbe\u5907\u7684\u7269\u7406\u901a\u9053\u3002\u5b83\u5141\u8bb8\u8fd9\u4e9b\u7ec4\u4ef6\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u548c\u901a\u4fe1\u3002CPU \u548c\u5185\u5b58\u4e4b\u95f4\u9700\u8981\u901a\u8fc7\u603b\u7ebf\u4f20\u8f93\u6570\u636e\u662f\u56e0\u4e3a\u5b83\u4eec\u662f\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u7684\u7ec4\u4ef6\uff0c\u9700\u8981\u9891\u7e41\u5730\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u548c\u5171\u4eab\u3002\u603b\u7ebf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ad8\u901f\u7684\u901a\u4fe1\u901a\u9053\uff0c\u4f7f\u5f97 CPU \u80fd\u591f\u8bfb\u53d6\u548c\u5199\u5165\u5185\u5b58\u4e2d\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u4e0e\u5176\u4ed6\u8bbe\u5907\u8fdb\u884c\u4ea4\u4e92\u3002\u8fd9\u6837\uff0cCPU \u5c31\u80fd\u591f\u6267\u884c\u6307\u4ee4\uff0c\u5904\u7406\u6570\u636e\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5230\u5185\u5b58\u4e2d\u3002\u603b\u7ebf\u7684\u8bbe\u8ba1\u548c\u6027\u80fd\u5bf9\u4e8e\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6574\u4f53\u6027\u80fd\u81f3\u5173\u91cd\u8981\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7a0b\u5e8f\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u8981\u64cd\u4f5c\u7684\u6570\u636e\u548c\u4ea7\u751f\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u90fd\u4f1a\u653e\u5728\u6570\u636e\u6bb5\u91cc\u9762\u3002\u90a3 CPU \u600e\u4e48\u6267\u884c\u8fd9\u4e9b\u7a0b\u5e8f\uff0c\u64cd\u4f5c\u8fd9\u4e9b\u6570\u636e\uff0c\u4ea7\u751f\u4e00\u4e9b\u7ed3\u679c\uff0c\u5e76\u5199\u5165\u56de\u5185\u5b58\u5462\uff1f\n\nCPU \u7684\u63a7\u5236\u5355\u5143\u91cc\u9762\uff0c\u6709\u4e00\u4e2a\u6307\u4ee4\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u5b83\u91cc\u9762\u5b58\u653e\u7684\u662f\u4e0b\u4e00\u6761\u6307\u4ee4\u5728\u5185\u5b58\u4e2d\u7684\u5730\u5740\u3002\u63a7\u5236\u5355\u5143\u4f1a\u4e0d\u505c\u5730\u5c06\u4ee3\u7801\u6bb5\u7684\u6307\u4ee4\u62ff\u8fdb\u6765\uff0c\u5148\u653e\u5165\u6307\u4ee4\u5bc4\u5b58\u5668\u3002\n\n\u5f53\u524d\u7684\u6307\u4ee4\u5206\u4e24\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u662f\u505a\u4ec0\u4e48\u64cd\u4f5c\uff0c\u4f8b\u5982\u662f\u52a0\u6cd5\u8fd8\u662f\u4f4d\u79fb\uff1b\u4e00\u90e8\u5206\u662f\u64cd\u4f5c\u54ea\u4e9b\u6570\u636e\u3002\n\n\u8981\u6267\u884c\u8fd9\u6761\u6307\u4ee4\uff0c\u5c31\u8981\u628a\u7b2c\u4e00\u90e8\u5206\u4ea4\u7ed9\u8fd0\u7b97\u5355\u5143\uff0c\u7b2c\u4e8c\u90e8\u5206\u4ea4\u7ed9\u6570\u636e\u5355\u5143\u3002\n\n\u6570\u636e\u5355\u5143\u6839\u636e\u6570\u636e\u7684\u5730\u5740\uff0c\u4ece\u6570\u636e\u6bb5\u91cc\u8bfb\u5230\u6570\u636e\u5bc4\u5b58\u5668\u91cc\uff0c\u5c31\u53ef\u4ee5\u53c2\u4e0e\u8fd0\u7b97\u4e86\u3002\u8fd0\u7b97\u5355\u5143\u505a\u5b8c\u8fd0\u7b97\uff0c\u4ea7\u751f\u7684\u7ed3\u679c\u4f1a\u6682\u5b58\u5728\u6570\u636e\u5355\u5143\u7684\u6570\u636e\u5bc4\u5b58\u5668\u91cc\u3002\u6700\u7ec8\uff0c\u4f1a\u6709\u6307\u4ee4\u5c06\u6570\u636e\u5199\u56de\u5185\u5b58\u4e2d\u7684\u6570\u636e\u6bb5\u3002\n\n\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u4e0a\u9762\u7b97\u6765\u7b97\u53bb\u6267\u884c\u7684\u90fd\u662f\u8fdb\u7a0b A \u91cc\u7684\u6307\u4ee4\uff0c\u90a3\u8fdb\u7a0b B \u5462\uff1fCPU \u91cc\u6709\u4e24\u4e2a\u5bc4\u5b58\u5668\uff0c\u4e13\u95e8\u4fdd\u5b58\u5f53\u524d\u5904\u7406\u8fdb\u7a0b\u7684\u4ee3\u7801\u6bb5\u7684\u8d77\u59cb\u5730\u5740\uff0c\u4ee5\u53ca\u6570\u636e\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u3002\u8fd9\u91cc\u9762\u5199\u7684\u90fd\u662f\u8fdb\u7a0b A\uff0c\u90a3\u5f53\u524d\u6267\u884c\u7684\u5c31\u662f\u8fdb\u7a0b A \u7684\u6307\u4ee4\uff0c\u7b49\u5207\u6362\u6210\u8fdb\u7a0b B\uff0c\u5c31\u4f1a\u6267\u884c B \u7684\u6307\u4ee4\u4e86\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53eb\u4f5c\u8fdb\u7a0b\u5207\u6362\uff08Process Switch\uff09\u3002\u8fd9\u662f\u4e00\u4e2a\u591a\u4efb\u52a1\u7cfb\u7edf\u7684\u5fc5\u5907\u64cd\u4f5c\uff0c\u6211\u4eec\u540e\u9762\u6709\u4e13\u95e8\u7684\u7ae0\u8282\u8bb2\u8fd9\u4e2a\u5185\u5bb9\uff0c\u8fd9\u91cc\u4f60\u5148\u6709\u4e2a\u5370\u8c61\u3002\n\n\u5230\u8fd9\u91cc\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0cCPU \u548c\u5185\u5b58\u6765\u6765\u56de\u56de\u4f20\u6570\u636e\uff0c\u9760\u7684\u90fd\u662f\u603b\u7ebf\u3002\u5176\u5b9e\u603b\u7ebf\u4e0a\u4e3b\u8981\u6709\u4e24\u7c7b\u6570\u636e\uff0c\u4e00\u4e2a\u662f\u5730\u5740\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u6211\u60f3\u62ff\u5185\u5b58\u4e2d\u54ea\u4e2a\u4f4d\u7f6e\u7684\u6570\u636e\uff0c\u8fd9\u7c7b\u603b\u7ebf\u53eb\u5730\u5740\u603b\u7ebf\uff08Address Bus\uff09\uff1b\u53e6\u4e00\u7c7b\u662f\u771f\u6b63\u7684\u6570\u636e\uff0c\u8fd9\u7c7b\u603b\u7ebf\u53eb\u6570\u636e\u603b\u7ebf\uff08Data Bus\uff09\u3002\n\n\u6240\u4ee5\u8bf4\uff0c\u603b\u7ebf\u5176\u5b9e\u6709\u70b9\u50cf\u8fde\u63a5 CPU \u548c\u5185\u5b58\u8fd9\u4e24\u4e2a\u8bbe\u5907\u7684\u9ad8\u901f\u516c\u8def\uff0c\u8bf4\u603b\u7ebf\u5230\u5e95\u662f\u591a\u5c11\u4f4d\uff0c\u5c31\u7c7b\u4f3c\u8bf4\u9ad8\u901f\u516c\u8def\u6709\u51e0\u4e2a\u8f66\u9053\u3002\u4f46\u662f\u8fd9\u4e24\u79cd\u603b\u7ebf\u7684\u4f4d\u6570\u610f\u4e49\u662f\u4e0d\u540c\u7684\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u540e\u9762\u7684\u5185\u5bb9\u5c31\u4e0d\u770b\u4e86"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e00\u65e6\u6709\u4e86\u7528\u6237\u8fdb\u7a0b\uff0c\u516c\u53f8\u7684\u8fd0\u884c\u6a21\u5f0f\u5c31\u8981\u53d1\u751f\u4e00\u5b9a\u7684\u53d8\u5316\u3002\u56e0\u4e3a\u539f\u6765\u4f60\u662f\u8001\u677f\uff0c\u6ca1\u6709\u96c7\u4f63\u5176\u4ed6\u4eba\uff0c\u6240\u6709\u4e1c\u897f\u90fd\u662f\u4f60\u7684\uff0c\u65e0\u8bba\u591a\u4e48\u5173\u952e\u7684\u8d44\u6e90\uff0c\u7b2c\u4e00\uff0c\u4e0d\u4f1a\u6709\u4eba\u7ed9\u4f60\u62a2\uff0c\u7b2c\u4e8c\uff0c\u4e0d\u4f1a\u6709\u4eba\u6076\u610f\u7834\u574f\u3001\u6076\u610f\u4f7f\u7528\u3002\n\n\u4f46\u662f\u73b0\u5728\u6709\u4e86\u5176\u4ed6\u4eba\uff0c\u4f60\u5c31\u8981\u5f00\u59cb\u505a\u4e00\u5b9a\u7684\u533a\u5206\uff0c\u54ea\u4e9b\u662f\u6838\u5fc3\u8d44\u6e90\uff0c\u54ea\u4e9b\u662f\u975e\u6838\u5fc3\u8d44\u6e90\uff1b\u529e\u516c\u533a\u4e5f\u8981\u5206\u5f00\uff0c\u6709\u666e\u901a\u7684\u9879\u76ee\u4eba\u5458\u90fd\u80fd\u8bbf\u95ee\u7684\u9879\u76ee\u5de5\u4f5c\u533a\uff0c\u8fd8\u6709\u804c\u4e1a\u6838\u5fc3\u4eba\u5458\u80fd\u591f\u8bbf\u95ee\u7684\u6838\u5fc3\u4fdd\u5bc6\u533a\u3002\n\n\u597d\u5728 x86 \u63d0\u4f9b\u4e86\u5206\u5c42\u7684\u6743\u9650\u673a\u5236\uff0c\u628a\u533a\u57df\u5206\u6210\u4e86\u56db\u4e2a Ring\uff0c\u8d8a\u5f80\u91cc\u6743\u9650\u8d8a\u9ad8\uff0c\u8d8a\u5f80\u5916\u6743\u9650\u8d8a\u4f4e\u3002\n\n\u64cd\u4f5c\u7cfb\u7edf\u5f88\u597d\u5730\u5229\u7528\u4e86\u8fd9\u4e2a\u673a\u5236\uff0c\u5c06\u80fd\u591f\u8bbf\u95ee\u5173\u952e\u8d44\u6e90\u7684\u4ee3\u7801\u653e\u5728 Ring0\uff0c\u6211\u4eec\u79f0\u4e3a\u5185\u6838\u6001\uff08Kernel Mode\uff09\uff1b\u5c06\u666e\u901a\u7684\u7a0b\u5e8f\u4ee3\u7801\u653e\u5728 Ring3\uff0c\u6211\u4eec\u79f0\u4e3a\u7528\u6237\u6001\uff08User Mode\uff09\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/02/x86-ring.jpeg",alt:"x86-ring.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u64cd\u4f5c\u7cfb\u7edf\u7684 ring0 \u5230 ring3 \u548c\u7269\u7406\u5185\u5b58\u7684 zone \u5206\u533a\u611f\u89c9\u5f88\u76f8\u4f3c\uff0c\u90fd\u662f\u6838\u5fc3\u3001\u8bbe\u5907\u548c\u666e\u901a\u7528\u6237\uff0c\u8fd9\u4e24\u8005\u4e4b\u95f4\u6709\u5173\u7cfb\u5417\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u7b54\u6848\uff1a\u6ca1\u5173\u7cfb\uff0c\u4f46\u662f\u8bbe\u8ba1\u662f\u7c7b\u4f3c\u7684\uff0c\u90fd\u662f\u4e0d\u540c\u6743\u9650\u5bf9\u5e94\u4e0d\u540c\u5206\u533a\uff0c\u4ece\u800c\u63d0\u9ad8\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b89\u5168\u548c\u7a33\u5b9a\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u662f\u8fd9\u6837\u7684\uff1a\u7528\u6237\u6001 - \u7cfb\u7edf\u8c03\u7528 - \u4fdd\u5b58\u5bc4\u5b58\u5668 - \u5185\u6838\u6001\u6267\u884c\u7cfb\u7edf\u8c03\u7528 - \u6062\u590d\u5bc4\u5b58\u5668 - \u8fd4\u56de\u7528\u6237\u6001\uff0c\u7136\u540e\u63a5\u7740\u8fd0\u884c\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/02/userspace-kernelspace.jpeg",alt:"userspace-kernelspace.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u540e\u9762\u8bb2\u4e86\u4e0b\u7528\u6237\u6001 syscall \u4e00\u76f4\u5230\u8fd4\u56de\u7528\u6237\u6001\u7684\u5177\u4f53\u7ec6\u8282\uff0c\u8fd9\u91cc\u4e0d\u8d58\u8ff0\u3002\u7ec6\u8282\u9700\u8981\u81ea\u5df1\u770b\u6e90\u7801\uff0c\u770b\u6587\u6863\u6ca1\u7528\u3002\u6587\u6863\u53ea\u80fd\u63d0\u4f9b\u4e00\u4e2a\u5927\u6982\u5370\u8c61\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u8bb2\u4e86\u5185\u6838\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\uff0c\u4e3b\u8981\u505a\u4e86\u4ee5\u4e0b\u51e0\u4ef6\u4e8b\u60c5\uff1a\n\n\u5404\u4e2a\u804c\u80fd\u90e8\u95e8\u7684\u521b\u5efa\uff1b\n\n\u7528\u6237\u6001\u7956\u5148\u8fdb\u7a0b\u7684\u521b\u5efa\uff1b\n\n\u5185\u6838\u6001\u7956\u5148\u8fdb\u7a0b\u7684\u521b\u5efa\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5185\u6838\u521d\u59cb\u5316\u65f6\u5c31\u4f1a\u521b\u5efa\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7956\u5148\u8fdb\u7a0b\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/02/kernel-init.jpeg",alt:"kernel-init.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"09 \u7cfb\u7edf\u8c03\u7528"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u5c31\u662f\u8bb2\u4e86\u7cfb\u7edf\u8c03\u7528\u65f6\u7684 kernel \u6e90\u7801\uff0c\u76f8\u5173\u77e5\u8bc6\u70b9\u57fa\u672c\u90fd\u77e5\u9053\uff0c\u4e0d\u8bb0\u5f55"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"10 \u8fdb\u7a0b"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u5148\u662f\u5199\u4e86\u4e2a c \u8bed\u8a00\u76f4\u63a5\u8c03\u7528 syscall \u7684\u4ee3\u7801\uff0c\u540e\u9762\u5185\u5bb9\u5c31\u662f\u628a\u8fd9\u4e2a c \u4ee3\u7801\u7f16\u8bd1\u6210 ELF \u6587\u4ef6\u3002\u6240\u4ee5\u5176\u5b9e\u8bb2\u7684\u662f\u7f16\u8bd1\u539f\u7406\uff0c\u8df3\u8fc7\u4e0d\u770b\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"11 \u7ebf\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5176\u5b9e\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a\u8fdb\u7a0b\u6765\u8bb2\uff0c\u5373\u4fbf\u6211\u4eec\u6ca1\u6709\u4e3b\u52a8\u53bb\u521b\u5efa\u7ebf\u7a0b\uff0c\u8fdb\u7a0b\u4e5f\u662f\u9ed8\u8ba4\u6709\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\u7684\u3002\u7ebf\u7a0b\u662f\u8d1f\u8d23\u6267\u884c\u4e8c\u8fdb\u5236\u6307\u4ee4\u7684\uff0c\u5b83\u4f1a\u6839\u636e\u9879\u76ee\u6267\u884c\u8ba1\u5212\u4e66\uff0c\u4e00\u884c\u4e00\u884c\u6267\u884c\u4e0b\u53bb\u3002\u8fdb\u7a0b\u8981\u6bd4\u7ebf\u7a0b\u7ba1\u7684\u5bbd\u591a\u4e86\uff0c\u9664\u4e86\u6267\u884c\u6307\u4ee4\u4e4b\u5916\uff0c\u5185\u5b58\u3001\u6587\u4ef6\u7cfb\u7edf\u7b49\u7b49\u90fd\u8981\u5b83\u6765\u7ba1\u3002\n\n\u6240\u4ee5\uff0c\u8fdb\u7a0b\u76f8\u5f53\u4e8e\u4e00\u4e2a\u9879\u76ee\uff0c\u800c\u7ebf\u7a0b\u5c31\u662f\u4e3a\u4e86\u5b8c\u6210\u9879\u76ee\u9700\u6c42\uff0c\u800c\u5efa\u7acb\u7684\u4e00\u4e2a\u4e2a\u5f00\u53d1\u4efb\u52a1\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u5efa\u4e00\u4e2a\u5927\u7684\u4efb\u52a1\uff0c\u5c31\u662f\u5b8c\u6210\u67d0\u67d0\u529f\u80fd\uff0c\u7136\u540e\u4ea4\u7ed9\u4e00\u4e2a\u4eba\u8ba9\u5b83\u4ece\u5934\u505a\u5230\u5c3e\uff0c\u8fd9\u5c31\u662f\u4e3b\u7ebf\u7a0b\u3002\u4f46\u662f\u6709\u65f6\u5019\uff0c\u4f60\u53d1\u73b0\u4efb\u52a1\u662f\u53ef\u4ee5\u62c6\u89e3\u7684\uff0c\u5982\u679c\u76f8\u5173\u6027\u6ca1\u6709\u975e\u5e38\u5927\u524d\u540e\u5173\u8054\u5173\u7cfb\uff0c\u5c31\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u3002\n\n\u4f8b\u5982\uff0c\u4f60\u63a5\u5230\u4e86\u4e00\u4e2a\u5f00\u53d1\u4efb\u52a1\uff0c\u8981\u5f00\u53d1 200 \u4e2a\u9875\u9762\uff0c\u6700\u540e\u7ec4\u6210\u4e00\u4e2a\u7f51\u7ad9\u3002\u8fd9\u65f6\u5019\u4f60\u5c31\u53ef\u4ee5\u62c6\u5206\u6210 20 \u4e2a\u4efb\u52a1\uff0c\u6bcf\u4e2a\u4efb\u52a1 10 \u4e2a\u9875\u9762\uff0c\u5e76\u884c\u5f00\u53d1\u3002\u90fd\u5f00\u53d1\u5b8c\u4e86\uff0c\u518d\u505a\u4e00\u6b21\u6574\u5408\uff0c\u8fd9\u80af\u5b9a\u6bd4\u4f9d\u6b21\u5f00\u53d1 200 \u4e2a\u9875\u9762\u5feb\u591a\u4e86\u3002\n\n\u90a3\u6211\u4eec\u80fd\u4e0d\u80fd\u6210\u7acb\u591a\u4e2a\u9879\u76ee\u7ec4\u5b9e\u73b0\u5e76\u884c\u5f00\u53d1\u5462\uff1f\u5f53\u7136\u53ef\u4ee5\u4e86\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u6837\u505a\u6709\u4e24\u4e2a\u6bd4\u8f83\u9ebb\u70e6\u7684\u5730\u65b9\u3002\n\n\u7b2c\u4e00\u4e2a\u9ebb\u70e6\u662f\uff0c\u7acb\u9879\u3002\u6d89\u53ca\u7684\u90e8\u95e8\u6bd4\u8f83\u591a\uff0c\u603b\u662f\u52b3\u5e08\u52a8\u4f17\u3002\u4f60\u672c\u6765\u60f3\u7684\u662f\uff0c\u53ea\u8981\u80fd\u5e76\u884c\u6267\u884c\u4efb\u52a1\u5c31\u53ef\u4ee5\uff0c\u4e0d\u9700\u8981\u628a\u4f1a\u8bae\u5ba4\u90fd\u641e\u6210\u72ec\u7acb\u7684\u3002\u53e6\u4e00\u4e2a\u9ebb\u70e6\u662f\uff0c\u9879\u76ee\u7ec4\u662f\u72ec\u7acb\u7684\uff0c\u4f1a\u8bae\u5ba4\u662f\u72ec\u7acb\u7684\uff0c\u5f88\u591a\u4e8b\u60c5\u5c31\u4e0d\u53d7\u4f60\u63a7\u5236\u4e86\uff0c\u4f8b\u5982\u4e00\u65e6\u6709\u4e86\u4e24\u4e2a\u9879\u76ee\u7ec4\uff0c\u5c31\u4f1a\u6709\u6c9f\u901a\u95ee\u9898\u3002\n\n\u6240\u4ee5\uff0c\u4f7f\u7528\u8fdb\u7a0b\u5b9e\u73b0\u5e76\u884c\u6267\u884c\u7684\u95ee\u9898\u4e5f\u6709\u4e24\u4e2a\u3002\u7b2c\u4e00\uff0c\u521b\u5efa\u8fdb\u7a0b\u5360\u7528\u8d44\u6e90\u592a\u591a\uff1b\u7b2c\u4e8c\uff0c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u9700\u8981\u6570\u636e\u5728\u4e0d\u540c\u7684\u5185\u5b58\u7a7a\u95f4\u4f20\u6765\u4f20\u53bb\uff0c\u65e0\u6cd5\u5171\u4eab\u3002\n\n\u9664\u4e86\u5e0c\u671b\u4efb\u52a1\u80fd\u591f\u5e76\u884c\u6267\u884c\uff0c\u6709\u7684\u65f6\u5019\uff0c\u4f60\u4f5c\u4e3a\u9879\u76ee\u7ba1\u7406\u4eba\u5458\uff0c\u80af\u5b9a\u8981\u7ba1\u63a7\u98ce\u9669\uff0c\u56e0\u6b64\u8fd8\u4f1a\u9884\u7559\u4e00\u90e8\u5206\u4eba\u4f5c\u4e3a\u5e94\u6025\u5c0f\u5206\u961f\uff0c\u6765\u5904\u7406\u7d27\u6025\u7684\u4e8b\u60c5\u3002\n\n\u4f8b\u5982\uff0c\u4e3b\u7ebf\u7a0b\u6b63\u5728\u4e00\u884c\u4e00\u884c\u6267\u884c\u4e8c\u8fdb\u5236\u547d\u4ee4\uff0c\u7a81\u7136\u6536\u5230\u4e00\u4e2a\u901a\u77e5\uff0c\u8981\u505a\u4e00\u70b9\u5c0f\u4e8b\u60c5\uff0c\u5e94\u8be5\u505c\u4e0b\u4e3b\u7ebf\u7a0b\u6765\u505a\u4e48\uff1f\u592a\u803d\u8bef\u4e8b\u60c5\u4e86\uff0c\u5e94\u8be5\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u7684\u7ebf\u7a0b\uff0c\u5355\u72ec\u5904\u7406\u8fd9\u4e9b\u4e8b\u4ef6\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u6bb5\u548c\u6211\u7684\u60f3\u6cd5\u5b8c\u5168\u4e00\u81f4\uff0c\u4f46\u662f\u4ed6\u8fd9\u91cc\u8bf4\u7684\u66f4\u5177\u4f53\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u540e\u9762\u5199\u4e86\u4e2a case \u6765\u8bf4\u660e mutex \u7684\u4f7f\u7528\uff0c\u8fd9\u4e2a\u5c31\u5f88\u719f\u4e86\uff0c\u4e0d\u7528\u770b\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"12 \u8fdb\u7a0b\u6570\u636e\u7ed3\u6784"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/01/task_struct.jpeg",alt:"task_struct.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u9762\u7684\u4e32\u8bb2\u4e2d\u6ca1\u6709\u8bf4\u660e task_struct \u6bcf\u4e2a\u5b57\u6bb5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"task_struct \u91cc\u9762\u6d89\u53ca\u4efb\u52a1 ID \u7684\uff0c\u6709\u4e0b\u9762\u51e0\u4e2a\uff1a\n\npid_t pid;\npid_t tgid;\nstruct task_struct *group_leader;\n\u4f60\u53ef\u80fd\u89c9\u5f97\u5947\u602a\uff0c\u65e2\u7136\u662f ID\uff0c\u6709\u4e00\u4e2a\u5c31\u8db3\u4ee5\u505a\u552f\u4e00\u6807\u8bc6\u4e86\uff0c\u8fd9\u4e2a\u600e\u4e48\u770b\u8d77\u6765\u8fd9\u4e48\u9ebb\u70e6\uff1f\u8fd9\u662f\u56e0\u4e3a\uff0c\u4e0a\u9762\u7684\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5230\u4e86\u5185\u6838\u8fd9\u91cc\uff0c\u7edf\u4e00\u53d8\u6210\u4e86\u4efb\u52a1\uff0c\u8fd9\u5c31\u5e26\u6765\u4e24\u4e2a\u95ee\u9898\u3002\n\n\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u4efb\u52a1\u5c55\u793a\u3002\n\n\u5565\u662f\u4efb\u52a1\u5c55\u793a\u5462\uff1f\u8fd9\u4e48\u8bf4\u5427\uff0c\u4f60\u4f5c\u4e3a\u8001\u677f\uff0c\u60f3\u4e86\u89e3\u7684\u80af\u5b9a\u662f\uff0c\u516c\u53f8\u90fd\u63a5\u4e86\u54ea\u4e9b\u9879\u76ee\uff0c\u6bcf\u4e2a\u9879\u76ee\u591a\u5c11\u8425\u6536\u3002\u4ec0\u4e48\u9879\u76ee\u6267\u884c\u662f\u4e0d\u662f\u5206\u4e86\u5c0f\u7ec4\uff0c\u6bcf\u4e2a\u5c0f\u7ec4\u662f\u5565\u60c5\u51b5\uff0c\u8fd9\u4e9b\u7ec6\u8282\uff0c\u9879\u76ee\u7ecf\u7406\u6ca1\u5fc5\u8981\u5168\u90fd\u5c55\u793a\u7ed9\u4f60\u770b\u3002\n\n\u524d\u9762\u6211\u4eec\u5b66\u4e60\u547d\u4ee4\u884c\u7684\u65f6\u5019\uff0c\u77e5\u9053 ps \u547d\u4ee4\u53ef\u4ee5\u5c55\u793a\u51fa\u6240\u6709\u7684\u8fdb\u7a0b\u3002\u4f46\u662f\u5982\u679c\u4f60\u662f\u8fd9\u4e2a\u547d\u4ee4\u7684\u5b9e\u73b0\u8005\uff0c\u5230\u4e86\u5185\u6838\uff0c\u6309\u7167\u4e0a\u9762\u7684\u4efb\u52a1\u5217\u8868\u628a\u8fd9\u4e9b\u547d\u4ee4\u90fd\u663e\u793a\u51fa\u6765\uff0c\u628a\u6240\u6709\u7684\u7ebf\u7a0b\u5168\u90fd\u5e73\u644a\u5f00\u6765\u663e\u793a\u7ed9\u7528\u6237\u3002\u7528\u6237\u80af\u5b9a\u89c9\u5f97\u65e2\u590d\u6742\u53c8\u56f0\u60d1\u3002\u590d\u6742\u5728\u4e8e\uff0c\u5217\u8868\u8fd9\u4e48\u957f\uff1b\u56f0\u60d1\u5728\u4e8e\uff0c\u91cc\u9762\u51fa\u73b0\u4e86\u5f88\u591a\u5e76\u4e0d\u662f\u81ea\u5df1\u521b\u5efa\u7684\u7ebf\u7a0b\u3002\n\n\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\uff0c\u7ed9\u4efb\u52a1\u4e0b\u53d1\u6307\u4ee4\u3002\n\n\u5982\u679c\u5ba2\u6237\u7a81\u7136\u7ed9\u9879\u76ee\u7ec4\u63d0\u4e2a\u65b0\u7684\u9700\u6c42\uff0c\u6bd4\u5982\u8bf4\uff0c\u6709\u7684\u5ba2\u6237\u89c9\u5f97\u9879\u76ee\u5df2\u7ecf\u5b8c\u6210\uff0c\u53ef\u4ee5\u7ec8\u6b62\uff1b\u518d\u6bd4\u5982\u8bf4\uff0c\u6709\u7684\u5ba2\u6237\u89c9\u5f97\u9879\u76ee\u505a\u5230\u4e00\u534a\u6ca1\u5fc5\u8981\u518d\u8fdb\u884c\u4e0b\u53bb\u4e86\uff0c\u53ef\u4ee5\u4e2d\u6b62\uff0c\u8fd9\u65f6\u5019\u5e94\u8be5\u7ed9\u8c01\u53d1\u6307\u4ee4\uff1f\u5f53\u7136\u5e94\u8be5\u7ed9\u6574\u4e2a\u9879\u76ee\u7ec4\uff0c\u800c\u4e0d\u662f\u67d0\u4e2a\u5c0f\u7ec4\u3002\u6211\u4eec\u4e0d\u80fd\u8ba9\u5ba2\u6237\u770b\u5230\uff0c\u4e0d\u540c\u7684\u5c0f\u7ec4\u53e3\u5f84\u4e0d\u4e00\u81f4\u3002\u8fd9\u5c31\u597d\u6bd4\u8bf4\uff0c\u4e2d\u6b62\u9879\u76ee\u7684\u6307\u4ee4\u5230\u8fbe\u4e00\u4e2a\u5c0f\u7ec4\uff0c\u8fd9\u4e2a\u5c0f\u7ec4\u5f88\u5f00\u5fc3\u5c31\u53bb\u4f11\u606f\u4e86\uff0c\u540c\u4e00\u4e2a\u9879\u76ee\u7ec4\u7684\u5176\u4ed6\u5c0f\u7ec4\u8fd8\u5e72\u7684\u70ed\u706b\u671d\u5929\u7684\u3002\n\nLinux \u4e5f\u4e00\u6837\uff0c\u524d\u9762\u6211\u4eec\u5b66\u4e60\u547d\u4ee4\u884c\u7684\u65f6\u5019\uff0c\u77e5\u9053\u53ef\u4ee5\u901a\u8fc7 kill \u6765\u7ed9\u8fdb\u7a0b\u53d1\u4fe1\u53f7\uff0c\u901a\u77e5\u8fdb\u7a0b\u9000\u51fa\u3002\u5982\u679c\u53d1\u7ed9\u4e86\u5176\u4e2d\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u6211\u4eec\u5c31\u4e0d\u80fd\u53ea\u9000\u51fa\u8fd9\u4e2a\u7ebf\u7a0b\uff0c\u800c\u662f\u5e94\u8be5\u9000\u51fa\u6574\u4e2a\u8fdb\u7a0b\u3002\u5f53\u7136\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u5e0c\u671b\u53ea\u7ed9\u67d0\u4e2a\u7ebf\u7a0b\u53d1\u4fe1\u53f7\u3002\n\n\u6240\u4ee5\u5728\u5185\u6838\u4e2d\uff0c\u5b83\u4eec\u867d\u7136\u90fd\u662f\u4efb\u52a1\uff0c\u4f46\u662f\u5e94\u8be5\u52a0\u4ee5\u533a\u5206\u3002\u5176\u4e2d\uff0cpid \u662f process id\uff0ctgid \u662f thread group ID\u3002\n\n\u4efb\u4f55\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5982\u679c\u53ea\u6709\u4e3b\u7ebf\u7a0b\uff0c\u90a3 pid \u662f\u81ea\u5df1\uff0ctgid \u662f\u81ea\u5df1\uff0cgroup_leader \u6307\u5411\u7684\u8fd8\u662f\u81ea\u5df1\u3002\n\n\u4f46\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u521b\u5efa\u4e86\u5176\u4ed6\u7ebf\u7a0b\uff0c\u90a3\u5c31\u4f1a\u6709\u6240\u53d8\u5316\u4e86\u3002\u7ebf\u7a0b\u6709\u81ea\u5df1\u7684 pid\uff0ctgid \u5c31\u662f\u8fdb\u7a0b\u7684\u4e3b\u7ebf\u7a0b\u7684 pid\uff0cgroup_leader \u6307\u5411\u7684\u5c31\u662f\u8fdb\u7a0b\u7684\u4e3b\u7ebf\u7a0b\u3002\n\n\u597d\u4e86\uff0c\u6709\u4e86 tgid\uff0c\u6211\u4eec\u5c31\u77e5\u9053 tast_struct \u4ee3\u8868\u7684\u662f\u4e00\u4e2a\u8fdb\u7a0b\u8fd8\u662f\u4ee3\u8868\u4e00\u4e2a\u7ebf\u7a0b\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:"\u5c31\u662f\u7528tgid\u6765\u533a\u5206\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u7684\u6240\u6709\u7ebf\u7a0b\u7684task_struct\u90fd\u5b8c\u5168\u76f8\u540c\u3002"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u4fe1\u53f7\u5904\u7406\n\u8fd9\u91cc\u65e2\u7136\u63d0\u5230\u4e86\u4e0b\u53d1\u6307\u4ee4\u7684\u95ee\u9898\uff0c\u6211\u5c31\u987a\u4fbf\u63d0\u4e00\u4e0b task_struct \u91cc\u9762\u5173\u4e8e\u4fe1\u53f7\u5904\u7406\u7684\u5b57\u6bb5\u3002\n\n\n\n\u8fd9\u91cc\u5b9a\u4e49\u4e86\u54ea\u4e9b\u4fe1\u53f7\u88ab\u963b\u585e\u6682\u4e0d\u5904\u7406\uff08blocked\uff09\uff0c\u54ea\u4e9b\u4fe1\u53f7\u5c1a\u7b49\u5f85\u5904\u7406\uff08pending\uff09\uff0c\u54ea\u4e9b\u4fe1\u53f7\u6b63\u5728\u901a\u8fc7\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u8fdb\u884c\u5904\u7406\uff08sighand\uff09\u3002\u5904\u7406\u7684\u7ed3\u679c\u53ef\u4ee5\u662f\u5ffd\u7565\uff0c\u53ef\u4ee5\u662f\u7ed3\u675f\u8fdb\u7a0b\u7b49\u7b49\u3002\n\n\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u9ed8\u8ba4\u4f7f\u7528\u7528\u6237\u6001\u7684\u51fd\u6570\u6808\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5f00\u8f9f\u65b0\u7684\u6808\u4e13\u95e8\u7528\u4e8e\u4fe1\u53f7\u5904\u7406\uff0c\u8fd9\u5c31\u662f sas_ss_xxx \u8fd9\u4e09\u4e2a\u53d8\u91cf\u7684\u4f5c\u7528\u3002\n\n\u4e0a\u9762\u6211\u8bf4\u4e86\u4e0b\u53d1\u4fe1\u53f7\u7684\u65f6\u5019\uff0c\u9700\u8981\u533a\u5206\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u3002\u4ece\u8fd9\u91cc\u6211\u4eec\u5176\u5b9e\u4e5f\u80fd\u770b\u51fa\u4e00\u4e9b\u7aef\u502a\u3002\n\ntask_struct \u91cc\u9762\u6709\u4e00\u4e2a struct sigpending pending\u3002\u5982\u679c\u6211\u4eec\u8fdb\u5165 struct signal_struct *signal \u53bb\u770b\u7684\u8bdd\uff0c\u8fd8\u6709\u4e00\u4e2a struct sigpending shared_pending\u3002\u5b83\u4eec\u4e00\u4e2a\u662f\u672c\u4efb\u52a1\u7684\uff0c\u4e00\u4e2a\u662f\u7ebf\u7a0b\u7ec4\u5171\u4eab\u7684\u3002\n\n\u5173\u4e8e\u4fe1\u53f7\uff0c\u4f60\u6682\u65f6\u4e86\u89e3\u5230\u8fd9\u91cc\u5c31\u591f\u7528\u4e86\uff0c\u540e\u9762\u6211\u4eec\u4f1a\u6709\u5355\u72ec\u7684\u7ae0\u8282\u8fdb\u884c\u89e3\u8bfb\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"/* Signal handlers: */\nstruct signal_struct  *signal;\nstruct sighand_struct  *sighand;\nsigset_t   blocked;\nsigset_t   real_blocked;\nsigset_t   saved_sigmask;\nstruct sigpending  pending;\nunsigned long   sas_ss_sp;\nsize_t    sas_ss_size;\nunsigned int   sas_ss_flags;\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f5c\u4e3a\u4e00\u4e2a\u9879\u76ee\u7ecf\u7406\uff0c\u53e6\u5916\u4e00\u4e2a\u9700\u8981\u5173\u6ce8\u7684\u662f\u9879\u76ee\u5f53\u524d\u7684\u72b6\u6001\u3002\u4f8b\u5982\uff0c\u5728 Jira \u91cc\u9762\uff0c\u4efb\u52a1\u7684\u8fd0\u884c\u5c31\u53ef\u4ee5\u5206\u6210\u4e0b\u9762\u7684\u72b6\u6001\u3002\n\n\u5728 task_struct \u91cc\u9762\uff0c\u6d89\u53ca\u4efb\u52a1\u72b6\u6001\u7684\u662f\u4e0b\u9762\u8fd9\u51e0\u4e2a\u53d8\u91cf\uff1a\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"volatile long state;    /* -1 unrunnable, 0 runnable, >0 stopped */\nint exit_state;\nunsigned int flags;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u4e2d state \u5c31\u662f RWSZ \u90a3\u51e0\u4e2a\u8fdb\u7a0b\u72b6\u6001\uff0c\u8fd9\u91cc\u4e0d\u591a\u8bf4\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fdb\u7a0b\u8c03\u5ea6\n\u8fdb\u7a0b\u7684\u72b6\u6001\u5207\u6362\u5f80\u5f80\u6d89\u53ca\u8c03\u5ea6\uff0c\u4e0b\u9762\u8fd9\u4e9b\u5b57\u6bb5\u90fd\u662f\u7528\u4e8e\u8c03\u5ea6\u7684\u3002\u4e3a\u4e86\u8ba9\u4f60\u7406\u89e3 task_struct \u8fdb\u7a0b\u7ba1\u7406\u7684\u5168\u8c8c\uff0c\u6211\u5148\u5728\u8fd9\u91cc\u5217\u4e00\u4e0b\uff0c\u54b1\u4eec\u540e\u9762\u4f1a\u6709\u5355\u72ec\u7684\u7ae0\u8282\u8bb2\u89e3\uff0c\u8fd9\u91cc\u4f60\u53ea\u8981\u5927\u6982\u770b\u4e00\u4e0b\u91cc\u9762\u7684\u6ce8\u91ca\u5c31\u597d\u4e86\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"//\u662f\u5426\u5728\u8fd0\u884c\u961f\u5217\u4e0a\nint    on_rq;\n//\u4f18\u5148\u7ea7\nint    prio;\nint    static_prio;\nint    normal_prio;\nunsigned int   rt_priority;\n//\u8c03\u5ea6\u5668\u7c7b\nconst struct sched_class *sched_class;\n//\u8c03\u5ea6\u5b9e\u4f53\nstruct sched_entity  se;\nstruct sched_rt_entity  rt;\nstruct sched_dl_entity  dl;\n//\u8c03\u5ea6\u7b56\u7565\nunsigned int   policy;\n//\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9bCPU\nint    nr_cpus_allowed;\ncpumask_t   cpus_allowed;\nstruct sched_info  sched_info;\n"})}),"\n",(0,l.jsx)(e.p,{children:"task_struct \u662f linux kernel \u4e2d\u975e\u5e38\u6838\u5fc3\u7684\u90e8\u5206\uff0c\u8fd8\u662f\u6709\u5fc5\u8981\u770b\u770b\u8fd9\u90e8\u5206\u5185\u5bb9\u7684\u6e90\u7801\u7684\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd0\u884c\u7edf\u8ba1\u4fe1\u606f\n\u4f5c\u4e3a\u9879\u76ee\u7ecf\u7406\uff0c\u4f60\u80af\u5b9a\u9700\u8981\u4e86\u89e3\u9879\u76ee\u7684\u8fd0\u884c\u60c5\u51b5\u3002\u4f8b\u5982\uff0c\u6709\u7684\u5458\u5de5\u5f88\u957f\u65f6\u95f4\u90fd\u5728\u505a\u4e00\u4e2a\u4efb\u52a1\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u9700\u8981\u7279\u522b\u5173\u6ce8\u4e00\u4e0b\uff1b\u518d\u5982\uff0c\u6709\u7684\u5458\u5de5\u7684\u7410\u788e\u4efb\u52a1\u592a\u591a\uff0c\u8fd9\u4f1a\u5927\u5927\u5f71\u54cd\u4ed6\u7684\u5de5\u4f5c\u6548\u7387\u3002\n\n\u90a3\u5982\u4f55\u624d\u80fd\u77e5\u9053\u8fd9\u4e9b\u5458\u5de5\u7684\u5de5\u4f5c\u60c5\u51b5\u5462\uff1f\u5728\u8fdb\u7a0b\u7684\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u6709\u4e00\u4e9b\u7edf\u8ba1\u91cf\uff0c\u5177\u4f53\u4f60\u53ef\u4ee5\u770b\u4e0b\u9762\u7684\u5217\u8868\u3002\u8fd9\u91cc\u9762\u6709\u8fdb\u7a0b\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u6d88\u8017\u7684\u65f6\u95f4\u3001\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u6b21\u6570\u7b49\u7b49\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"u64    utime;//\u7528\u6237\u6001\u6d88\u8017\u7684CPU\u65f6\u95f4\nu64    stime;//\u5185\u6838\u6001\u6d88\u8017\u7684CPU\u65f6\u95f4\nunsigned long   nvcsw;//\u81ea\u613f(voluntary)\u4e0a\u4e0b\u6587\u5207\u6362\u8ba1\u6570\nunsigned long   nivcsw;//\u975e\u81ea\u613f(involuntary)\u4e0a\u4e0b\u6587\u5207\u6362\u8ba1\u6570\nu64    start_time;//\u8fdb\u7a0b\u542f\u52a8\u65f6\u95f4\uff0c\u4e0d\u5305\u542b\u7761\u7720\u65f6\u95f4\nu64    real_start_time;/\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fdb\u7a0b\u4eb2\u7f18\u5173\u7cfb\n\u4ece\u6211\u4eec\u4e4b\u524d\u8bb2\u7684\u521b\u5efa\u8fdb\u7a0b\u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u4efb\u4f55\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u6709\u7236\u8fdb\u7a0b\u3002\u6240\u4ee5\uff0c\u6574\u4e2a\u8fdb\u7a0b\u5176\u5b9e\u5c31\u662f\u4e00\u68f5\u8fdb\u7a0b\u6811\u3002\u800c\u62e5\u6709\u540c\u4e00\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u8fdb\u7a0b\u90fd\u5177\u6709\u5144\u5f1f\u5173\u7cfb\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"struct task_struct __rcu *real_parent; /* real parent process */\nstruct task_struct __rcu *parent; /* recipient of SIGCHLD, wait4() reports */\nstruct list_head children;      /* list of my children */\nstruct list_head sibling;       /* linkage in my pa\n\n// parent\u6307\u5411\u5176\u7236\u8fdb\u7a0b\u3002\u5f53\u5b83\u7ec8\u6b62\u65f6\uff0c\u5fc5\u987b\u5411\u5b83\u7684\u7236\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\u3002\n// children\u8868\u793a\u94fe\u8868\u7684\u5934\u90e8\u3002\u94fe\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u5b83\u7684\u5b50\u8fdb\u7a0b\u3002\n// sibling\u7528\u4e8e\u628a\u5f53\u524d\u8fdb\u7a0b\u63d2\u5165\u5230\u5144\u5f1f\u94fe\u8868\u4e2d\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/task-parents.jpeg",alt:"task-parents.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fdb\u7a0b\u6743\u9650\n\u4e86\u89e3\u4e86\u8fd0\u884c\u7edf\u8ba1\u4fe1\u606f\uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u9700\u8981\u5173\u6ce8\u4e00\u4e0b\u9879\u76ee\u7ec4\u6743\u9650\u7684\u63a7\u5236\u3002\u4ec0\u4e48\u662f\u9879\u76ee\u7ec4\u6743\u9650\u63a7\u5236\u5462\uff1f\u8fd9\u4e48\u8bf4\u5427\uff0c\u6211\u8fd9\u4e2a\u9879\u76ee\u7ec4\u80fd\u5426\u8bbf\u95ee\u67d0\u4e2a\u6587\u4ef6\uff0c\u80fd\u5426\u8bbf\u95ee\u5176\u4ed6\u7684\u9879\u76ee\u7ec4\uff0c\u4ee5\u53ca\u6211\u8fd9\u4e2a\u9879\u76ee\u7ec4\u80fd\u5426\u88ab\u5176\u4ed6\u9879\u76ee\u7ec4\u8bbf\u95ee\u7b49\u7b49\uff0c\u8fd9\u90fd\u662f\u9879\u76ee\u7ec4\u6743\u9650\u7684\u63a7\u5236\u8303\u7574\u3002\n\n\u5728 Linux \u91cc\u9762\uff0c\u5bf9\u4e8e\u8fdb\u7a0b\u6743\u9650\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"/* Objective and real subjective task credentials (COW): */\nconst struct cred __rcu         *real_cred;\n/* Effective (overridable) subjective task credentials (COW): */\nconst struct cred __rcu         *cred;\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5185\u5b58\u7ba1\u7406\n\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\uff0c\u8fd9\u9700\u8981\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u6765\u8868\u793a\uff0c\u5c31\u662f mm_struct\u3002\u8fd9\u4e2a\u6211\u4eec\u5728\u5185\u5b58\u7ba1\u7406\u90a3\u4e00\u8282\u8be6\u7ec6\u8bb2\u8ff0\u3002\u8fd9\u91cc\u4f60\u5148\u6709\u4e2a\u5370\u8c61\u3002\n\nstruct mm_struct                *mm;\nstruct mm_struct                *active_mm;\n\n\n\u6587\u4ef6\u4e0e\u6587\u4ef6\u7cfb\u7edf\n\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8fd8\u6709\u4e00\u4e2a\u6253\u5f00\u6587\u4ef6\u7684\u6570\u636e\u7ed3\u6784\u3002\u8fd9\u4e2a\u6211\u4eec\u653e\u5230\u6587\u4ef6\u7cfb\u7edf\u90a3\u4e00\u8282\u8be6\u7ec6\u8bb2\u8ff0\u3002\n\n/* Filesystem information: */\nstruct fs_struct                *fs;\n/* Open file information: */\nstruct files_struct             *files;\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6240\u4ee5\u8fdb\u7a0b\u62c6\u5f00\u4e86\u770b\u5c31\u662f\u4efb\u52a1 id\u3001\u4eb2\u5c5e\u5173\u7cfb\u3001\u4efb\u52a1\u72b6\u6001\u3001\u8fd0\u884c\u7edf\u8ba1\u3001\u5185\u6838\u6808\u3001\u8fdb\u7a0b\u8c03\u5ea6\u3001\u6743\u9650\u8fd9\u51e0\u4e2a\u57fa\u7840\u7684\uff0c\u518d\u52a0\u4e0a\u4fe1\u53f7\u5904\u7406\u3001\u5185\u5b58\u7ba1\u7406\u3001\u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u7684\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"15 \u8c03\u5ea6\uff1a\u5982\u4f55\u5236\u5b9a\u9879\u76ee\u7ba1\u7406\u6d41\u7a0b\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"task_struct \u4ec5\u4ec5\u80fd\u591f\u89e3\u51b3\u201c\u770b\u5230\u201d\u7684\u95ee\u9898\uff0c\u54b1\u4eec\u8fd8\u8981\u89e3\u51b3\u5982\u4f55\u5236\u5b9a\u6d41\u7a0b\uff0c\u8fdb\u884c\u9879\u76ee\u8c03\u5ea6\u7684\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u201c\u505a\u5230\u201d\u7684\u95ee\u9898\u3002\n\n\u516c\u53f8\u7684\u4eba\u5458\u603b\u662f\u6709\u9650\u7684\u3002\u65e0\u8bba\u63a5\u4e86\u591a\u5c11\u9879\u76ee\uff0c\u516c\u53f8\u4e0d\u53ef\u80fd\u77ed\u65f6\u95f4\u589e\u52a0\u5f88\u591a\u4eba\u624b\u3002\u6709\u7684\u9879\u76ee\u6bd4\u8f83\u7d27\u6025\uff0c\u5e94\u8be5\u5148\u8fdb\u884c\u6392\u671f\uff1b\u6709\u7684\u9879\u76ee\u53ef\u4ee5\u7f13\u7f13\uff0c\u4f46\u662f\u4e5f\u4e0d\u80fd\u8ba9\u5ba2\u6237\u7b49\u592a\u4e45\u3002\u6240\u4ee5\u8fd9\u4e2a\u8fc7\u7a0b\u975e\u5e38\u590d\u6742\uff0c\u9700\u8981\u5e73\u8861\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bb2\uff0c\u5b83\u9762\u5bf9\u7684 CPU \u7684\u6570\u91cf\u662f\u6709\u9650\u7684\uff0c\u5e72\u6d3b\u513f\u90fd\u662f\u5b83\u4eec\uff0c\u4f46\u662f\u8fdb\u7a0b\u6570\u76ee\u8fdc\u8fdc\u8d85\u8fc7 CPU \u7684\u6570\u76ee\uff0c\u56e0\u800c\u5c31\u9700\u8981\u8fdb\u884c\u8fdb\u7a0b\u7684\u8c03\u5ea6\uff0c\u6709\u6548\u5730\u5206\u914d CPU \u7684\u65f6\u95f4\uff0c\u65e2\u8981\u4fdd\u8bc1\u8fdb\u7a0b\u7684\u6700\u5feb\u54cd\u5e94\uff0c\u4e5f\u8981\u4fdd\u8bc1\u8fdb\u7a0b\u4e4b\u95f4\u7684\u516c\u5e73\u3002\u8fd9\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u590d\u6742\u7684\u3001\u9700\u8981\u5e73\u8861\u7684\u4e8b\u60c5\u3002\n\n---\n\n\u8c03\u5ea6\u7b56\u7565\u4e0e\u8c03\u5ea6\u7c7b\n\u5728 Linux \u91cc\u9762\uff0c\u8fdb\u7a0b\u5927\u6982\u53ef\u4ee5\u5206\u6210\u4e24\u79cd\u3002\n\n\u4e00\u79cd\u79f0\u4e3a\u5b9e\u65f6\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u5c3d\u5feb\u6267\u884c\u8fd4\u56de\u7ed3\u679c\u7684\u90a3\u79cd\u3002\u8fd9\u5c31\u597d\u6bd4\u6211\u4eec\u662f\u4e00\u5bb6\u516c\u53f8\uff0c\u63a5\u5230\u7684\u5ba2\u6237\u9879\u76ee\u9700\u6c42\u5c31\u4f1a\u6709\u5f88\u591a\u79cd\u3002\u6709\u4e9b\u5ba2\u6237\u7684\u9879\u76ee\u9700\u6c42\u6bd4\u8f83\u6025\uff0c\u6bd4\u5982\u4e00\u5b9a\u8981\u5728\u4e00\u4e24\u4e2a\u6708\u5185\u5b8c\u6210\u7684\u8fd9\u79cd\uff0c\u5ba2\u6237\u4f1a\u52a0\u6025\u52a0\u94b1\uff0c\u90a3\u8fd9\u79cd\u5ba2\u6237\u7684\u4f18\u5148\u7ea7\u5c31\u4f1a\u6bd4\u8f83\u9ad8\u3002\n\n\u53e6\u4e00\u79cd\u662f\u666e\u901a\u8fdb\u7a0b\uff0c\u5927\u90e8\u5206\u7684\u8fdb\u7a0b\u5176\u5b9e\u90fd\u662f\u8fd9\u79cd\u3002\u8fd9\u5c31\u597d\u6bd4\uff0c\u5927\u90e8\u5206\u5ba2\u6237\u7684\u9879\u76ee\u90fd\u662f\u666e\u901a\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u6309\u7167\u6b63\u5e38\u6d41\u7a0b\u5b8c\u6210\uff0c\u4f18\u5148\u7ea7\u5c31\u6ca1\u5b9e\u65f6\u8fdb\u7a0b\u8fd9\u4e48\u9ad8\uff0c\u4f46\u662f\u4eba\u5bb6\u80af\u5b9a\u4e5f\u6709\u786e\u5b9a\u7684\u4ea4\u4ed8\u65e5\u671f\u3002\n\n\u90a3\u5f88\u663e\u7136\uff0c\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u8fdb\u7a0b\uff0c\u6211\u4eec\u7684\u8c03\u5ea6\u7b56\u7565\u80af\u5b9a\u662f\u4e0d\u540c\u7684\u3002\n\n\u5728 task_struct \u4e2d\uff0c\u6709\u4e00\u4e2a\u6210\u5458\u53d8\u91cf\uff0c\u6211\u4eec\u53eb\u8c03\u5ea6\u7b56\u7565\u3002\n\nunsigned int policy;\n\u5b83\u6709\u4ee5\u4e0b\u51e0\u4e2a\u5b9a\u4e49\uff1a\n\n#define SCHED_NORMAL  0\n#define SCHED_FIFO  1\n#define SCHED_RR  2\n#define SCHED_BATCH  3\n#define SCHED_IDLE  5\n#define SCHED_DEADLINE  6\n\u914d\u5408\u8c03\u5ea6\u7b56\u7565\u7684\uff0c\u8fd8\u6709\u6211\u4eec\u521a\u624d\u8bf4\u7684\u4f18\u5148\u7ea7\uff0c\u4e5f\u5728 task_struct \u4e2d\u3002\n\nint prio, static_prio, normal_prio;\nunsigned int rt_priority;\n\u4f18\u5148\u7ea7\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u6570\u503c\uff0c\u5bf9\u4e8e\u5b9e\u65f6\u8fdb\u7a0b\uff0c\u4f18\u5148\u7ea7\u7684\u8303\u56f4\u662f 0\uff5e99\uff1b\u5bf9\u4e8e\u666e\u901a\u8fdb\u7a0b\uff0c\u4f18\u5148\u7ea7\u7684\u8303\u56f4\u662f 100\uff5e139\u3002\u6570\u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c\u6240\u6709\u7684\u5b9e\u65f6\u8fdb\u7a0b\u90fd\u6bd4\u666e\u901a\u8fdb\u7a0b\u4f18\u5148\u7ea7\u8981\u9ad8\u3002\u6bd5\u7adf\uff0c\u8c01\u8ba9\u4eba\u5bb6\u52a0\u94b1\u4e86\u5462\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5b9e\u65f6\u8c03\u5ea6\u7b56\u7565\n\u5bf9\u4e8e\u8c03\u5ea6\u7b56\u7565\uff0c\u5176\u4e2d SCHED_FIFO\u3001SCHED_RR\u3001SCHED_DEADLINE \u662f\u5b9e\u65f6\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u3002\n\n\u867d\u7136\u5927\u5bb6\u90fd\u662f\u52a0\u94b1\u52a0\u6025\u7684\u9879\u76ee\uff0c\u4f46\u662f\u4e5f\u4e0d\u80fd\u4e71\u6765\uff0c\u8fd8\u662f\u9700\u8981\u6709\u4e2a\u529e\u4e8b\u6d41\u7a0b\u624d\u884c\u3002\n\n\u4f8b\u5982\uff0cSCHED_FIFO \u5c31\u662f\u4ea4\u4e86\u76f8\u540c\u94b1\u7684\uff0c\u5148\u6765\u5148\u670d\u52a1\uff0c\u4f46\u662f\u6709\u7684\u52a0\u94b1\u591a\uff0c\u53ef\u4ee5\u5206\u914d\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u53ef\u4ee5\u62a2\u5360\u4f4e\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\uff0c\u800c\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\uff0c\u6211\u4eec\u9075\u5faa\u5148\u6765\u5148\u5f97\u3002\n\n\u53e6\u5916\u4e00\u79cd\u7b56\u7565\u662f\uff0c\u4ea4\u4e86\u76f8\u540c\u94b1\u7684\uff0c\u8f6e\u6362\u7740\u6765\uff0c\u8fd9\u5c31\u662f SCHED_RR \u8f6e\u6d41\u8c03\u5ea6\u7b97\u6cd5\uff0c\u91c7\u7528\u65f6\u95f4\u7247\uff0c\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u5f53\u7528\u5b8c\u65f6\u95f4\u7247\u4f1a\u88ab\u653e\u5230\u961f\u5217\u5c3e\u90e8\uff0c\u4ee5\u4fdd\u8bc1\u516c\u5e73\u6027\uff0c\u800c\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4e5f\u662f\u53ef\u4ee5\u62a2\u5360\u4f4e\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u3002\n\n\u8fd8\u6709\u4e00\u79cd\u65b0\u7684\u7b56\u7565\u662f SCHED_DEADLINE\uff0c\u662f\u6309\u7167\u4efb\u52a1\u7684 deadline \u8fdb\u884c\u8c03\u5ea6\u7684\u3002\u5f53\u4ea7\u751f\u4e00\u4e2a\u8c03\u5ea6\u70b9\u7684\u65f6\u5019\uff0cDL \u8c03\u5ea6\u5668\u603b\u662f\u9009\u62e9\u5176 deadline \u8ddd\u79bb\u5f53\u524d\u65f6\u95f4\u70b9\u6700\u8fd1\u7684\u90a3\u4e2a\u4efb\u52a1\uff0c\u5e76\u8c03\u5ea6\u5b83\u6267\u884c\u3002\n\n---\n\n\u666e\u901a\u8c03\u5ea6\u7b56\u7565\n\u5bf9\u4e8e\u666e\u901a\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u6709\uff0cSCHED_NORMAL\u3001SCHED_BATCH\u3001SCHED_IDLE\u3002\n\n\u65e2\u7136\u5927\u5bb6\u7684\u9879\u76ee\u90fd\u6ca1\u6709\u90a3\u4e48\u7d27\u6025\uff0c\u5c31\u5e94\u8be5\u6309\u7167\u666e\u901a\u7684\u9879\u76ee\u6d41\u7a0b\uff0c\u516c\u5e73\u5730\u5206\u914d\u4eba\u5458\u3002\n\nSCHED_NORMAL \u662f\u666e\u901a\u7684\u8fdb\u7a0b\uff0c\u5c31\u76f8\u5f53\u4e8e\u54b1\u4eec\u516c\u53f8\u63a5\u7684\u666e\u901a\u9879\u76ee\u3002\n\nSCHED_BATCH \u662f\u540e\u53f0\u8fdb\u7a0b\uff0c\u51e0\u4e4e\u4e0d\u9700\u8981\u548c\u524d\u7aef\u8fdb\u884c\u4ea4\u4e92\u3002\u8fd9\u6709\u70b9\u50cf\u516c\u53f8\u5728\u63a5\u9879\u76ee\u540c\u65f6\uff0c\u5f00\u53d1\u4e00\u4e9b\u53ef\u4ee5\u590d\u7528\u7684\u6a21\u5757\uff0c\u4f5c\u4e3a\u516c\u53f8\u7684\u6280\u672f\u79ef\u7d2f\uff0c\u4ece\u800c\u4f7f\u5f97\u5728\u4e4b\u540e\u63a5\u65b0\u9879\u76ee\u7684\u65f6\u5019\uff0c\u80fd\u591f\u51cf\u5c11\u5de5\u4f5c\u91cf\u3002\u8fd9\u7c7b\u9879\u76ee\u53ef\u4ee5\u9ed8\u9ed8\u6267\u884c\uff0c\u4e0d\u8981\u5f71\u54cd\u9700\u8981\u4ea4\u4e92\u7684\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u964d\u4f4e\u5b83\u7684\u4f18\u5148\u7ea7\u3002\n\nSCHED_IDLE \u662f\u7279\u522b\u7a7a\u95f2\u7684\u65f6\u5019\u624d\u8dd1\u7684\u8fdb\u7a0b\uff0c\u76f8\u5f53\u4e8e\u54b1\u4eec\u5b66\u4e60\u8bad\u7ec3\u7c7b\u7684\u9879\u76ee\uff0c\u6bd4\u5982\u54b1\u4eec\u516c\u53f8\u5f88\u957f\u65f6\u95f4\u6ca1\u6709\u63a5\u5230\u5916\u5728\u9879\u76ee\u4e86\uff0c\u53ef\u4ee5\u5f04\u51e0\u4e2a\u8fd9\u6837\u7684\u9879\u76ee\u7ec3\u7ec3\u624b\u3002\n\n\u4e0a\u9762\u65e0\u8bba\u662f policy \u8fd8\u662f priority\uff0c\u90fd\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u53d8\u91cf\uff0c\u53d8\u91cf\u4ec5\u4ec5\u8868\u793a\u4e86\u5e94\u8be5\u8fd9\u6837\u8fd9\u6837\u5e72\uff0c\u4f46\u4e8b\u60c5\u603b\u8981\u6709\u4eba\u53bb\u5e72\uff0c\u8c01\u5462\uff1f\u5728 task_struct \u91cc\u9762\uff0c\u8fd8\u6709\u8fd9\u6837\u7684\u6210\u5458\u53d8\u91cf\uff1a\n\nconst struct sched_class *sched_class;\n\u8c03\u5ea6\u7b56\u7565\u7684\u6267\u884c\u903b\u8f91\uff0c\u5c31\u5c01\u88c5\u5728\u8fd9\u91cc\u9762\uff0c\u5b83\u662f\u771f\u6b63\u5e72\u6d3b\u7684\u90a3\u4e2a\u3002\n\nsched_class \u6709\u51e0\u79cd\u5b9e\u73b0\uff1a\n\nstop_sched_class \u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u4efb\u52a1\u4f1a\u4f7f\u7528\u8fd9\u79cd\u7b56\u7565\uff0c\u4f1a\u4e2d\u65ad\u6240\u6709\u5176\u4ed6\u7ebf\u7a0b\uff0c\u4e14\u4e0d\u4f1a\u88ab\u5176\u4ed6\u4efb\u52a1\u6253\u65ad\uff1b\n\ndl_sched_class \u5c31\u5bf9\u5e94\u4e0a\u9762\u7684 deadline \u8c03\u5ea6\u7b56\u7565\uff1b\n\nrt_sched_class \u5c31\u5bf9\u5e94 RR \u7b97\u6cd5\u6216\u8005 FIFO \u7b97\u6cd5\u7684\u8c03\u5ea6\u7b56\u7565\uff0c\u5177\u4f53\u8c03\u5ea6\u7b56\u7565\u7531\u8fdb\u7a0b\u7684 task_struct->policy \u6307\u5b9a\uff1b\n\nfair_sched_class \u5c31\u662f\u666e\u901a\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\uff1b\n\nidle_sched_class \u5c31\u662f\u7a7a\u95f2\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565\u3002\n\n\u8fd9\u91cc\u5b9e\u65f6\u8fdb\u7a0b\u7684\u8c03\u5ea6\u7b56\u7565 RR \u548c FIFO \u76f8\u5bf9\u7b80\u5355\u4e00\u4e9b\uff0c\u800c\u4e14\u7531\u4e8e\u54b1\u4eec\u5e73\u65f6\u5e38\u9047\u5230\u7684\u90fd\u662f\u666e\u901a\u8fdb\u7a0b\uff0c\u5728\u8fd9\u91cc\uff0c\u54b1\u4eec\u5c31\u91cd\u70b9\u5206\u6790\u666e\u901a\u8fdb\u7a0b\u7684\u8c03\u5ea6\u95ee\u9898\u3002\u666e\u901a\u8fdb\u7a0b\u4f7f\u7528\u7684\u8c03\u5ea6\u7b56\u7565\u662f fair_sched_class\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5bf9\u4e8e\u666e\u901a\u8fdb\u7a0b\u6765\u8bb2\uff0c\u516c\u5e73\u662f\u6700\u91cd\u8981\u7684\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5b8c\u5168\u516c\u5e73\u8c03\u5ea6\u7b97\u6cd5\n\u5728 Linux \u91cc\u9762\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u57fa\u4e8e CFS \u7684\u8c03\u5ea6\u7b97\u6cd5\u3002CFS \u5168\u79f0 Completely Fair Scheduling\uff0c\u53eb\u5b8c\u5168\u516c\u5e73\u8c03\u5ea6\u3002\u542c\u8d77\u6765\u5f88\u201c\u516c\u5e73\u201d\u3002\u90a3\u8fd9\u4e2a\u7b97\u6cd5\u7684\u539f\u7406\u662f\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u6765\u770b\u770b\u3002\n\n\u9996\u5148\uff0c\u4f60\u9700\u8981\u8bb0\u5f55\u4e0b\u8fdb\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\u3002CPU \u4f1a\u63d0\u4f9b\u4e00\u4e2a\u65f6\u949f\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4\u5c31\u89e6\u53d1\u4e00\u4e2a\u65f6\u949f\u4e2d\u65ad\u3002\u5c31\u50cf\u54b1\u4eec\u7684\u8868\u6ef4\u7b54\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u6211\u4eec\u53eb Tick\u3002CFS \u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u5b89\u6392\u4e00\u4e2a\u865a\u62df\u8fd0\u884c\u65f6\u95f4 vruntime\u3002\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u5728\u8fd0\u884c\uff0c\u968f\u7740\u65f6\u95f4\u7684\u589e\u957f\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u4e2a tick \u7684\u5230\u6765\uff0c\u8fdb\u7a0b\u7684 vruntime \u5c06\u4e0d\u65ad\u589e\u5927\u3002\u6ca1\u6709\u5f97\u5230\u6267\u884c\u7684\u8fdb\u7a0b vruntime \u4e0d\u53d8\u3002\n\n\u663e\u7136\uff0c\u90a3\u4e9b vruntime \u5c11\u7684\uff0c\u539f\u6765\u53d7\u5230\u4e86\u4e0d\u516c\u5e73\u7684\u5bf9\u5f85\uff0c\u9700\u8981\u7ed9\u5b83\u8865\u4e0a\uff0c\u6240\u4ee5\u4f1a\u4f18\u5148\u8fd0\u884c\u8fd9\u6837\u7684\u8fdb\u7a0b\u3002\n\n\u8fd9\u6709\u70b9\u50cf\u8ba9\u4f60\u628a\u4e00\u7b50\u7403\u5e73\u5747\u5206\u5230 N \u4e2a\u53e3\u888b\u91cc\u9762\uff0c\u4f60\u770b\u7740\u54ea\u4e2a\u5c11\uff0c\u5c31\u591a\u653e\u4e00\u4e9b\uff1b\u54ea\u4e2a\u591a\u4e86\uff0c\u5c31\u5148\u4e0d\u653e\u3002\u8fd9\u6837\u7ecf\u8fc7\u591a\u8f6e\uff0c\u867d\u7136\u4e0d\u80fd\u4fdd\u8bc1\u7403\u5b8c\u5168\u4e00\u6837\u591a\uff0c\u4f46\u662f\u4e5f\u5dee\u4e0d\u591a\u516c\u5e73\u3002\n\n\u4f60\u53ef\u80fd\u4f1a\u8bf4\uff0c\u4e0d\u8fd8\u6709\u4f18\u5148\u7ea7\u5462\uff1f\u5982\u4f55\u7ed9\u4f18\u5148\u7ea7\u9ad8\u7684\u8fdb\u7a0b\u591a\u5206\u65f6\u95f4\u5462\uff1f\n\n\u8fd9\u4e2a\u7b80\u5355\uff0c\u5c31\u76f8\u5f53\u4e8e N \u4e2a\u53e3\u888b\uff0c\u4f18\u5148\u7ea7\u9ad8\u7684\u888b\u5b50\u5927\uff0c\u4f18\u5148\u7ea7\u4f4e\u7684\u888b\u5b50\u5c0f\u3002\u8fd9\u6837\u7403\u5c31\u4e0d\u80fd\u6309\u7167\u4e2a\u6570\u5206\u914d\u4e86\uff0c\u8981\u6309\u7167\u6bd4\u4f8b\u6765\uff0c\u5927\u53e3\u888b\u7684\u653e\u4e86\u4e00\u534a\u548c\u5c0f\u53e3\u888b\u653e\u4e86\u4e00\u534a\uff0c\u91cc\u9762\u7684\u7403\u6570\u76ee\u867d\u7136\u5dee\u5f88\u591a\uff0c\u4e5f\u8ba4\u4e3a\u662f\u516c\u5e73\u7684\u3002\n\n...\n\n\u8fd9\u5c31\u662f\u8bf4\uff0c\u540c\u6837\u7684\u5b9e\u9645\u8fd0\u884c\u65f6\u95f4\uff0c\u7ed9\u9ad8\u6743\u91cd\u7684\u7b97\u5c11\u4e86\uff0c\u4f4e\u6743\u91cd\u7684\u7b97\u591a\u4e86\uff0c\u4f46\u662f\u5f53\u9009\u53d6\u4e0b\u4e00\u4e2a\u8fd0\u884c\u8fdb\u7a0b\u7684\u65f6\u5019\uff0c\u8fd8\u662f\u6309\u7167\u6700\u5c0f\u7684 vruntime \u6765\u7684\uff0c\u8fd9\u6837\u9ad8\u6743\u91cd\u7684\u83b7\u5f97\u7684\u5b9e\u9645\u8fd0\u884c\u65f6\u95f4\u81ea\u7136\u5c31\u591a\u4e86\u3002\u8fd9\u5c31\u76f8\u5f53\u4e8e\u7ed9\u4e00\u4e2a\u4f53\u91cd (\u6743\u91cd)200 \u65a4\u7684\u80d6\u5b50\u5403\u4e24\u4e2a\u9992\u5934\uff0c\u548c\u7ed9\u4e00\u4e2a\u4f53\u91cd 100 \u65a4\u7684\u7626\u5b50\u5403\u4e00\u4e2a\u9992\u5934\uff0c\u7136\u540e\u8bf4\uff0c\u4f60\u4eec\u4e24\u4e2a\u5403\u7684\u662f\u4e00\u6837\u591a\u3002\u8fd9\u6837\u867d\u7136\u603b\u4f53\u80d6\u5b50\u6bd4\u7626\u5b50\u591a\u5403\u4e86\u4e00\u500d\uff0c\u4f46\u662f\u8fd8\u662f\u516c\u5e73\u7684\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"CFS \u7ea2\u9ed1\u6811"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Completely_Fair_Scheduler",children:"Completely Fair Scheduler - Wikipedia"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6240\u6709\u53ef\u8fd0\u884c\u7684\u8fdb\u7a0b\u901a\u8fc7\u4e0d\u65ad\u5730\u63d2\u5165\u64cd\u4f5c\u6700\u7ec8\u90fd\u5b58\u50a8\u5728\u4ee5\u65f6\u95f4\u4e3a\u987a\u5e8f\u7684\u7ea2\u9ed1\u6811\u4e2d\uff0cvruntime \u6700\u5c0f\u7684\u5728\u6811\u7684\u5de6\u4fa7\uff0cvruntime \u6700\u591a\u7684\u5728\u6811\u7684\u53f3\u4fa7\u3002CFS \u8c03\u5ea6\u7b56\u7565\u4f1a\u9009\u62e9\u7ea2\u9ed1\u6811\u6700\u5de6\u8fb9\u7684\u53f6\u5b50\u8282\u70b9\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u5c06\u83b7\u5f97 CPU \u7684\u4efb\u52a1\u3002\n\n\u8fd9\u68f5\u7ea2\u9ed1\u6811\u653e\u5728\u54ea\u91cc\u5462\uff1f\u5c31\u50cf\u6bcf\u4e2a\u8f6f\u4ef6\u5de5\u7a0b\u5e08\u5199\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u4efb\u52a1\u6392\u6210\u961f\u5217\uff0c\u505a\u5b8c\u4e00\u4e2a\u505a\u4e0b\u4e00\u4e2a\u3002\n\nCPU \u4e5f\u662f\u8fd9\u6837\u7684\uff0c\u6bcf\u4e2a CPU \u90fd\u6709\u81ea\u5df1\u7684 struct rq \u7ed3\u6784\uff0c\u5176\u7528\u4e8e\u63cf\u8ff0\u5728\u6b64 CPU \u4e0a\u6240\u8fd0\u884c\u7684\u6240\u6709\u8fdb\u7a0b\uff0c\u5176\u5305\u62ec\u4e00\u4e2a\u5b9e\u65f6\u8fdb\u7a0b\u961f\u5217 rt_rq \u548c\u4e00\u4e2a CFS \u8fd0\u884c\u961f\u5217 cfs_rq\uff0c\u5728\u8c03\u5ea6\u65f6\uff0c\u8c03\u5ea6\u5668\u9996\u5148\u4f1a\u5148\u53bb\u5b9e\u65f6\u8fdb\u7a0b\u961f\u5217\u627e\u662f\u5426\u6709\u5b9e\u65f6\u8fdb\u7a0b\u9700\u8981\u8fd0\u884c\uff0c\u5982\u679c\u6ca1\u6709\u624d\u4f1a\u53bb CFS \u8fd0\u884c\u961f\u5217\u627e\u662f\u5426\u6709\u8fdb\u7a0b\u9700\u8981\u8fd0\u884c\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u6837\u6574\u4e2a\u8fd0\u884c\u7684\u573a\u666f\u5c31\u4e32\u8d77\u6765\u4e86\uff0c\u5728\u6bcf\u4e2a CPU \u4e0a\u90fd\u6709\u4e00\u4e2a\u961f\u5217 rq\uff0c\u8fd9\u4e2a\u961f\u5217\u91cc\u9762\u5305\u542b\u591a\u4e2a\u5b50\u961f\u5217\uff0c\u4f8b\u5982 rt_rq \u548c cfs_rq\uff0c\u4e0d\u540c\u7684\u961f\u5217\u6709\u4e0d\u540c\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0ccfs_rq \u5c31\u662f\u7528\u7ea2\u9ed1\u6811\u5b9e\u73b0\u7684\u3002\n\n\u5f53\u6709\u4e00\u5929\uff0c\u67d0\u4e2a CPU \u9700\u8981\u627e\u4e0b\u4e00\u4e2a\u4efb\u52a1\u6267\u884c\u7684\u65f6\u5019\uff0c\u4f1a\u6309\u7167\u4f18\u5148\u7ea7\u4f9d\u6b21\u8c03\u7528\u8c03\u5ea6\u7c7b\uff0c\u4e0d\u540c\u7684\u8c03\u5ea6\u7c7b\u64cd\u4f5c\u4e0d\u540c\u7684\u961f\u5217\u3002\u5f53\u7136 rt_sched_class \u5148\u88ab\u8c03\u7528\uff0c\u5b83\u4f1a\u5728 rt_rq \u4e0a\u627e\u4e0b\u4e00\u4e2a\u4efb\u52a1\uff0c\u53ea\u6709\u627e\u4e0d\u5230\u7684\u65f6\u5019\uff0c\u624d\u8f6e\u5230 fair_sched_class \u88ab\u8c03\u7528\uff0c\u5b83\u4f1a\u5728 cfs_rq \u4e0a\u627e\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002\u8fd9\u6837\u4fdd\u8bc1\u4e86\u5b9e\u65f6\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u6c38\u8fdc\u5927\u4e8e\u666e\u901a\u4efb\u52a1\u3002\n\n\u4e0b\u9762\u6211\u4eec\u4ed4\u7ec6\u770b\u4e00\u4e0b sched_class \u5b9a\u4e49\u7684\u4e0e\u8c03\u5ea6\u6709\u5173\u7684\u51fd\u6570\u3002\n\nenqueue_task \u5411\u5c31\u7eea\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5f53\u67d0\u4e2a\u8fdb\u7a0b\u8fdb\u5165\u53ef\u8fd0\u884c\u72b6\u6001\u65f6\uff0c\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff1b\n\ndequeue_task \u5c06\u4e00\u4e2a\u8fdb\u7a0b\u4ece\u5c31\u7eea\u961f\u5217\u4e2d\u5220\u9664\uff1b\n\npick_next_task \u9009\u62e9\u63a5\u4e0b\u6765\u8981\u8fd0\u884c\u7684\u8fdb\u7a0b\uff1b\n\nput_prev_task \u7528\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4ee3\u66ff\u5f53\u524d\u8fd0\u884c\u7684\u8fdb\u7a0b\uff1b\n\nset_curr_task \u7528\u4e8e\u4fee\u6539\u8c03\u5ea6\u7b56\u7565\uff1b\n\ntask_tick \u6bcf\u6b21\u5468\u671f\u6027\u65f6\u949f\u5230\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u51fd\u6570\u88ab\u8c03\u7528\uff0c\u53ef\u80fd\u89e6\u53d1\u8c03\u5ea6\u3002\n\n---\n\n\u5728\u8c03\u5ea6\u7684\u65f6\u5019\uff0c\u4f9d\u6b21\u8c03\u7528\u8c03\u5ea6\u7c7b\u7684\u51fd\u6570\uff0c\u4ece CPU \u7684\u961f\u5217\u4e2d\u53d6\u51fa\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u3002\u4e0a\u9762\u56fe\u4e2d\u7684\u8c03\u5ea6\u5668\u3001\u4e0a\u4e0b\u6587\u5207\u6362\u8fd9\u4e00\u8282\u6211\u4eec\u6ca1\u6709\u8bb2\uff0c\u4e0b\u4e00\u8282\u6211\u4eec\u8bb2\u8bb2\u57fa\u4e8e\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u5982\u4f55\u5b9e\u73b0\u8c03\u5ea6\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"btrfs"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e3b\u52a8\u8c03\u5ea6\n\u6211\u4eec\u8fd9\u4e00\u8282\u5148\u6765\u770b\u65b9\u5f0f\u4e00\uff0c\u4e3b\u52a8\u8c03\u5ea6\u3002\n\n\u8fd9\u91cc\u6211\u627e\u4e86\u51e0\u4e2a\u4ee3\u7801\u7247\u6bb5\u3002\u7b2c\u4e00\u4e2a\u7247\u6bb5\u662f Btrfs\uff0c\u7b49\u5f85\u4e00\u4e2a\u5199\u5165\u3002Btrfs\uff08B-Tree\uff09\u662f\u4e00\u79cd\u6587\u4ef6\u7cfb\u7edf\uff0c\u611f\u5174\u8da3\u4f60\u53ef\u4ee5\u81ea\u5df1\u53bb\u4e86\u89e3\u4e00\u4e0b\u3002\n\n\u8fd9\u4e2a\u7247\u6bb5\u53ef\u4ee5\u770b\u4f5c\u5199\u5165\u5757\u8bbe\u5907\u7684\u4e00\u4e2a\u5178\u578b\u573a\u666f\u3002\u5199\u5165\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\uff0c\u8fd9\u6bb5\u65f6\u95f4\u7528\u4e0d\u4e0a CPU\uff0c\u8fd8\u4e0d\u5982\u4e3b\u52a8\u8ba9\u7ed9\u5176\u4ed6\u8fdb\u7a0b\u3002\n\n\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u662f\uff0c\u4ece Tap \u7f51\u7edc\u8bbe\u5907\u7b49\u5f85\u4e00\u4e2a\u8bfb\u53d6\u3002Tap \u7f51\u7edc\u8bbe\u5907\u662f\u865a\u62df\u673a\u4f7f\u7528\u7684\u7f51\u7edc\u8bbe\u5907\u3002\u5f53\u6ca1\u6709\u6570\u636e\u5230\u6765\u7684\u65f6\u5019\uff0c\u5b83\u4e5f\u9700\u8981\u7b49\u5f85\uff0c\u6240\u4ee5\u4e5f\u4f1a\u9009\u62e9\u628a CPU \u8ba9\u7ed9\u5176\u4ed6\u8fdb\u7a0b\u3002\n\n\u4f60\u5e94\u8be5\u77e5\u9053\uff0c\u8ba1\u7b97\u673a\u4e3b\u8981\u5904\u7406\u8ba1\u7b97\u3001\u7f51\u7edc\u3001\u5b58\u50a8\u4e09\u4e2a\u65b9\u9762\u3002\u8ba1\u7b97\u4e3b\u8981\u662f CPU \u548c\u5185\u5b58\u7684\u5408\u4f5c\uff1b\u7f51\u7edc\u548c\u5b58\u50a8\u5219\u591a\u662f\u548c\u5916\u90e8\u8bbe\u5907\u7684\u5408\u4f5c\uff1b\u5728\u64cd\u4f5c\u5916\u90e8\u8bbe\u5907\u7684\u65f6\u5019\uff0c\u5f80\u5f80\u9700\u8981\u8ba9\u51fa CPU\uff0c\u5c31\u50cf\u4e0a\u9762\u4e24\u6bb5\u4ee3\u7801\u4e00\u6837\uff0c\u9009\u62e9\u8c03\u7528 schedule() \u51fd\u6570\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"curr"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"task_of \u5f97\u5230\u4e0b\u4e00\u4e2a\u8c03\u5ea6\u5b9e\u4f53\u5bf9\u5e94\u7684 task_struct\uff0c\u5982\u679c\u53d1\u73b0\u7ee7\u4efb\u548c\u524d\u4efb\u4e0d\u4e00\u6837\uff0c\u8fd9\u5c31\u8bf4\u660e\u6709\u4e00\u4e2a\u66f4\u9700\u8981\u8fd0\u884c\u7684\u8fdb\u7a0b\u4e86\uff0c\u5c31\u9700\u8981\u66f4\u65b0\u7ea2\u9ed1\u6811\u4e86\u3002\u524d\u9762\u524d\u4efb\u7684 vruntime \u66f4\u65b0\u8fc7\u4e86\uff0cput_prev_entity \u653e\u56de\u7ea2\u9ed1\u6811\uff0c\u4f1a\u627e\u5230\u76f8\u5e94\u7684\u4f4d\u7f6e\uff0c\u7136\u540e set_next_entity \u5c06\u7ee7\u4efb\u8005\u8bbe\u4e3a\u5f53\u524d\u4efb\u52a1\u3002\n\n\u7b2c\u4e09\u6b65\uff0c\u5f53\u9009\u51fa\u7684\u7ee7\u4efb\u8005\u548c\u524d\u4efb\u4e0d\u540c\uff0c\u5c31\u8981\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u7ee7\u4efb\u8005\u8fdb\u7a0b\u6b63\u5f0f\u8fdb\u5165\u8fd0\u884c\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fdb\u7a0b\u8c03\u5ea6\u540e\uff0c\u5982\u679c\u524d\u540e\u8fdb\u7a0b\u4e0d\u540c\uff08\u4e5f\u5c31\u662f\u7ee7\u4efb\u8005\u548c\u524d\u4efb\u4e0d\u540c\uff09\uff0c\u5c31\u9700\u8981\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u4e86\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\n\u4e0a\u4e0b\u6587\u5207\u6362\u4e3b\u8981\u5e72\u4e24\u4ef6\u4e8b\u60c5\uff0c\u4e00\u662f\u5207\u6362\u8fdb\u7a0b\u7a7a\u95f4\uff0c\u4e5f\u5373\u865a\u62df\u5185\u5b58\uff1b\u4e8c\u662f\u5207\u6362\u5bc4\u5b58\u5668\u548c CPU \u4e0a\u4e0b\u6587\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u91cc\u9762\u6709\u4e00\u4e2a Per CPU \u7684\u7ed3\u6784\u4f53 tss\u3002\u8fd9\u662f\u4e2a\u4ec0\u4e48\u5462\uff1f\n\n\u5728 x86 \u4f53\u7cfb\u7ed3\u6784\u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u786c\u4ef6\u7684\u65b9\u5f0f\u8fdb\u884c\u8fdb\u7a0b\u5207\u6362\u7684\u6a21\u5f0f\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8fdb\u7a0b\uff0cx86 \u5e0c\u671b\u5728\u5185\u5b58\u91cc\u9762\u7ef4\u62a4\u4e00\u4e2a TSS\uff08Task State Segment\uff0c\u4efb\u52a1\u72b6\u6001\u6bb5\uff09\u7ed3\u6784\u3002\u8fd9\u91cc\u9762\u6709\u6240\u6709\u7684\u5bc4\u5b58\u5668\u3002\n\n\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668 TR\uff08Task Register\uff0c\u4efb\u52a1\u5bc4\u5b58\u5668\uff09\uff0c\u6307\u5411\u67d0\u4e2a\u8fdb\u7a0b\u7684 TSS\u3002\u66f4\u6539 TR \u7684\u503c\uff0c\u5c06\u4f1a\u89e6\u53d1\u786c\u4ef6\u4fdd\u5b58 CPU \u6240\u6709\u5bc4\u5b58\u5668\u7684\u503c\u5230\u5f53\u524d\u8fdb\u7a0b\u7684 TSS \u4e2d\uff0c\u7136\u540e\u4ece\u65b0\u8fdb\u7a0b\u7684 TSS \u4e2d\u8bfb\u51fa\u6240\u6709\u5bc4\u5b58\u5668\u503c\uff0c\u52a0\u8f7d\u5230 CPU \u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u4e2d\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u201c\u5c06\u4f1a\u89e6\u53d1\u786c\u4ef6\u4fdd\u5b58 CPU \u6240\u6709\u5bc4\u5b58\u5668\u7684\u503c\u5230\u5f53\u524d\u8fdb\u7a0b\u7684 TSS \u4e2d\u201d\u662f\u5565\u610f\u601d\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u6bb5\u6709\u70b9\u96be\u61c2\uff0c\u6211\u4eec\u53ef\u4ee5\u628a TSS \u5f53\u6210\u529e\u516c\u5ba4\u7684\u94c1\u76ae\u67dc\uff0c\u5bc4\u5b58\u5668\u5f53\u6210\u662f\u6587\u4ef6\u5939\uff0cTR \u5bc4\u5b58\u5668\u662f\u5b58\u6240\u6709\u9879\u76ee\u548c\u94c1\u76ae\u67dc\u7684\u6620\u5c04\u5173\u7cfb\u7684\u6587\u4ef6\u5939\u3002\u8fd9\u6837\u5c31\u5f88\u597d\u7406\u89e3\u4e86\uff0c\u6211\u4eec\u5207\u6362\u9879\u76ee\u65f6\uff0c\u5c31\u8981\u4fee\u6539\u6620\u5c04\u5173\u7cfb\uff08TR \u5bc4\u5b58\u5668\uff09\uff0c\u628a\u624b\u5934\u6240\u6709\u5de5\u4f5c\u8d44\u6599\u5f80\u94c1\u76ae\u67dc\u91cc\u5b58\u4e00\u4efd\uff0c\u518d\u4ece\u65b0\u9879\u76ee\u7684\u94c1\u76ae\u67dc\u91cc\u8bfb\u53d6\u65b0\u9879\u76ee\u7684\u6240\u6709\u5de5\u4f5c\u8d44\u6599\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f46\u662f\u8fd9\u6837\u6709\u4e2a\u7f3a\u70b9\u3002\u6211\u4eec\u505a\u8fdb\u7a0b\u5207\u6362\u7684\u65f6\u5019\uff0c\u6ca1\u5fc5\u8981\u6bcf\u4e2a\u5bc4\u5b58\u5668\u90fd\u5207\u6362\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8fdb\u7a0b\u4e00\u4e2a TSS\uff0c\u5c31\u9700\u8981\u5168\u91cf\u4fdd\u5b58\uff0c\u5168\u91cf\u5207\u6362\uff0c\u52a8\u4f5c\u592a\u5927\u4e86\u3002\n\n\u4e8e\u662f\uff0cLinux \u64cd\u4f5c\u7cfb\u7edf\u60f3\u4e86\u4e00\u4e2a\u529e\u6cd5\u3002\u8fd8\u8bb0\u5f97\u5728\u7cfb\u7edf\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u4f1a\u8c03\u7528 cpu_init \u5417\uff1f\u8fd9\u91cc\u9762\u4f1a\u7ed9\u6bcf\u4e00\u4e2a CPU \u5173\u8054\u4e00\u4e2a TSS\uff0c\u7136\u540e\u5c06 TR \u6307\u5411\u8fd9\u4e2a TSS\uff0c\u7136\u540e\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0cTR \u5c31\u4e0d\u5207\u6362\u4e86\uff0c\u6c38\u8fdc\u6307\u5411\u8fd9\u4e2a TSS\u3002TSS \u7528\u6570\u636e\u7ed3\u6784 tss_struct \u8868\u793a\uff0c\u5728 x86_hw_tss \u4e2d\u53ef\u4ee5\u770b\u5230\u548c\u4e0a\u56fe\u76f8\u5e94\u7684\u7ed3\u6784\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u5b9e\uff0c\u6211\u770b\u4e0a\u9762\u90a3\u6bb5\u7684\u65f6\u5019\u5c31\u6709\u8fd9\u6837\u7684\u7591\u60d1\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u76f8\u5f53\u4e8e\u7ed9\u6bcf\u4e2a\u5de5\u4eba\uff08CPU\uff09\u914d\u5907\u4e86\u4e00\u4e2a\u94c1\u76ae\u67dc\uff08TSS\uff09\uff0c\u7136\u540e\uff08\u8fdb\u7a0b\u548c TSS\uff09\u6620\u5c04\u5173\u7cfb\u6587\u4ef6\u5939\u76f4\u63a5\u6307\u5411\u8fd9\u4e2a\u5de5\u4eba\u81ea\u6709\u7684\u94c1\u76ae\u67dc\u3002\u76f8\u5f53\u4e8e\u662f 1:1:1 \u7684\u6620\u5c04\u5173\u7cfb\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5728 Linux \u4e2d\uff0c\u771f\u7684\u53c2\u4e0e\u8fdb\u7a0b\u5207\u6362\u7684\u5bc4\u5b58\u5668\u5f88\u5c11\uff0c\u4e3b\u8981\u7684\u5c31\u662f\u6808\u9876\u5bc4\u5b58\u5668\u3002\n\n\u4e8e\u662f\uff0c\u5728 task_struct \u91cc\u9762\uff0c\u8fd8\u6709\u4e00\u4e2a\u6211\u4eec\u539f\u6765\u6ca1\u6709\u6ce8\u610f\u7684\u6210\u5458\u53d8\u91cf thread\u3002\u8fd9\u91cc\u9762\u4fdd\u7559\u4e86\u8981\u5207\u6362\u8fdb\u7a0b\u7684\u65f6\u5019\u9700\u8981\u4fee\u6539\u7684\u5bc4\u5b58\u5668\u3002\n\n/* CPU-specific state of this task: */\n struct thread_struct  thread;\n\u6240\u8c13\u7684\u8fdb\u7a0b\u5207\u6362\uff0c\u5c31\u662f\u5c06\u67d0\u4e2a\u8fdb\u7a0b\u7684 thread_struct \u91cc\u9762\u7684\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u5199\u5165\u5230 CPU \u7684 TR \u6307\u5411\u7684 tss_struct\uff0c\u5bf9\u4e8e CPU \u6765\u8bb2\uff0c\u8fd9\u5c31\u7b97\u662f\u5b8c\u6210\u4e86\u5207\u6362\u3002\n\n\u4f8b\u5982__switch_to \u4e2d\u7684 load_sp0\uff0c\u5c31\u662f\u5c06\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u7684 thread_struct \u7684 sp0 \u7684\u503c\u52a0\u8f7d\u5230 tss_struct \u91cc\u9762\u53bb\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6709\u70b9\u61c2\u4e86"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u8fd8\u662f\u6709\u70b9\u592a\u7ec6\u8282\u4e86\uff0c\u90fd\u662f\u6e90\u7801\u89e3\u6790\u3002\u77e5\u9053\u5927\u6982\u8fc7\u7a0b\u5c31\u53ef\u4ee5\u4e86\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8fdb\u7a0b\u5207\u6362\u9700\u8981\u641e\u660e\u767d\uff1a\u6211\u4ece\u54ea\u91cc\u6765\uff0c\u6211\u8981\u5230\u54ea\u91cc\u53bb"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u4e00\u8282\u6211\u4eec\u8bb2\u4e3b\u52a8\u8c03\u5ea6\u7684\u8fc7\u7a0b\uff0c\u4e5f\u5373\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b\u4e3b\u52a8\u8c03\u7528__schedule \u8ba9\u51fa CPU\u3002\u5728__schedule \u91cc\u9762\u4f1a\u505a\u4e24\u4ef6\u4e8b\u60c5\uff0c\u7b2c\u4e00\u662f\u9009\u53d6\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u7b2c\u4e8c\u662f\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u800c\u4e0a\u4e0b\u6587\u5207\u6362\u53c8\u5206\u7528\u6237\u6001\u8fdb\u7a0b\u7a7a\u95f4\u7684\u5207\u6362\u548c\u5185\u6838\u6001\u7684\u5207\u6362\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/scheduler.jpeg",alt:"scheduler.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:"\u88ab\u52a8\u8c03\u5ea6\uff1a\u62a2\u5360\u5f0f\u8c03\u5ea6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u8bb2\u4e86\u4e3b\u52a8\u8c03\u5ea6\uff0c\u5c31\u662f\u8fdb\u7a0b\u8fd0\u884c\u5230\u4e00\u534a\uff0c\u56e0\u4e3a\u7b49\u5f85 I/O \u7b49\u64cd\u4f5c\u800c\u4e3b\u52a8\u8ba9\u51fa CPU\uff0c\u7136\u540e\u5c31\u8fdb\u5165\u4e86\u6211\u4eec\u7684\u201c\u8fdb\u7a0b\u8c03\u5ea6\u7b2c\u4e00\u5b9a\u5f8b\u201d\u3002\u6240\u6709\u8fdb\u7a0b\u7684\u8c03\u7528\u6700\u7ec8\u90fd\u4f1a\u8d70__schedule \u51fd\u6570\u3002\u90a3\u8fd9\u4e2a\u5b9a\u5f8b\u5728\u8fd9\u4e00\u8282\u8fd8\u662f\u8981\u7ee7\u7eed\u8d77\u4f5c\u7528\u3002\n\n\u62a2\u5360\u5f0f\u8c03\u5ea6\n\u4e0a\u4e00\u8282\u6211\u4eec\u8bb2\u7684\u4e3b\u52a8\u8c03\u5ea6\u662f\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff0c\u5c31\u662f\u62a2\u5360\u5f0f\u8c03\u5ea6\u3002\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u53d1\u751f\u62a2\u5360\u5462\uff1f\n\n\u6700\u5e38\u89c1\u7684\u73b0\u8c61\u5c31\u662f\u4e00\u4e2a\u8fdb\u7a0b\u6267\u884c\u65f6\u95f4\u592a\u957f\u4e86\uff0c\u662f\u65f6\u5019\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4e86\u3002\u90a3\u600e\u4e48\u8861\u91cf\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\u5462\uff1f\u5728\u8ba1\u7b97\u673a\u91cc\u9762\u6709\u4e00\u4e2a\u65f6\u949f\uff0c\u4f1a\u8fc7\u4e00\u6bb5\u65f6\u95f4\u89e6\u53d1\u4e00\u6b21\u65f6\u949f\u4e2d\u65ad\uff0c\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\uff0c\u65f6\u95f4\u53c8\u8fc7\u53bb\u4e00\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u8fd9\u662f\u4e2a\u5f88\u597d\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u67e5\u770b\u662f\u5426\u662f\u9700\u8981\u62a2\u5360\u7684\u65f6\u95f4\u70b9\u3002\n\n\u65f6\u949f\u4e2d\u65ad\u5904\u7406\u51fd\u6570\u4f1a\u8c03\u7528 scheduler_tick()\uff0c\u5b83\u7684\u4ee3\u7801\u5982\u4e0b\uff1a\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u7684\u4e3b\u52a8\u548c\u88ab\u52a8\u3002\u6b63\u5982\u4e0a\u6587\uff0c\u4e3b\u52a8\u8c03\u5ea6\u662f\u8fdb\u7a0b\uff08\u56e0\u4e3a\u7b49\u5f85 IO \u7b49\u8017\u65f6\u64cd\u4f5c\u800c\uff09\u4e3b\u52a8\u8ba9\u51fa CPU\uff0c\u8ba9\u5176\u4ed6\u8fdb\u7a0b\u6267\u884c\u3002\u88ab\u52a8\u8c03\u5ea6\u662f\uff08\u5360\u636e CPU \u65f6\u95f4\u592a\u957f\u4e86\u800c\u89e6\u53d1\u65f6\u949f\u4e2d\u65ad\uff09\u88ab\u52a8\u8ba9\u51fa CPU\uff0c\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u201c\u62a2\u5360\u5f0f\u201d\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u53e6\u5916\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u534f\u7a0b\u90fd\u6709\u4e3b\u52a8\u8c03\u5ea6\u548c\u88ab\u52a8\u8c03\u5ea6\uff0c\u5e76\u4e14\u5176\u7b56\u7565\u90fd\u662f\u7c7b\u4f3c\u7684\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u88ab\u52a8\u8c03\u5ea6\u7684\u7ec6\u8282\uff0c\u8fd9\u91cc\u4e0d\u8bb0\u5f55\uff0c\u76f4\u63a5\u5199\u603b\u7ed3\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u8fdb\u7a0b\u88ab\u52a8\u8c03\u5ea6\u65f6\uff0c\u4e0d\u4f1a\u76f4\u63a5\u62a2\u5360\uff0c\u800c\u662f\u5148\u6807\u8bb0\u67d0\u4e2a\u8fdb\u7a0b\u4e3a\u53ef\u62a2\u5360\u7684\uff08\u51e0\u79cd\u60c5\u51b5\uff0c\u8fdb\u7a0b\u963b\u585e\u3001\u8fdb\u7a0b\u65f6\u95f4\u7247\u7528\u5b8c\u3001\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u8fdb\u7a0b\u5c31\u7eea\u3002\uff09\u3002\u6574\u6574\u7684\u62a2\u5360\u8fd8\u9700\u8981\u65f6\u673a\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u90a3\u4e48\u4e00\u4e2a\u65f6\u523b\uff0c\u8ba9\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b\u6709\u673a\u4f1a\u8c03\u7528\u4e00\u4e0b ",(0,l.jsx)(e.code,{children:"_schedule"}),"\u3002\u8fd9\u4e2a\u65f6\u673a\u5206\u4e3a\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u597d\u4e86\uff0c\u62a2\u5360\u5f0f\u8c03\u5ea6\u5c31\u8bb2\u5230\u8fd9\u91cc\u4e86\u3002\u6211\u8fd9\u91cc\u753b\u4e86\u4e00\u5f20\u8111\u56fe\uff0c\u5c06\u6574\u4e2a\u8fdb\u7a0b\u7684\u8c03\u5ea6\u4f53\u7cfb\u90fd\u653e\u5728\u91cc\u9762\u3002\n\n\u8fd9\u4e2a\u8111\u56fe\u91cc\u9762\u7b2c\u4e00\u6761\u5c31\u662f\u603b\u7ed3\u4e86\u8fdb\u7a0b\u8c03\u5ea6\u7b2c\u4e00\u5b9a\u5f8b\u7684\u6838\u5fc3\u51fd\u6570__schedule \u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u8fd9\u662f\u4e0a\u4e00\u8282\u8bb2\u7684\uff0c\u56e0\u4e3a\u8981\u5207\u6362\u7684\u4e1c\u897f\u6bd4\u8f83\u591a\uff0c\u9700\u8981\u4f60\u8be6\u7ec6\u4e86\u89e3\u6bcf\u4e00\u90e8\u5206\u662f\u5982\u4f55\u5207\u6362\u7684\u3002\n\n\u7b2c\u4e8c\u6761\u603b\u7ed3\u4e86\u6807\u8bb0\u4e3a\u53ef\u62a2\u5360\u7684\u573a\u666f\uff0c\u7b2c\u4e09\u6761\u662f\u6240\u6709\u7684\u62a2\u5360\u53d1\u751f\u7684\u65f6\u673a\uff0c\u8fd9\u91cc\u662f\u771f\u6b63\u9a8c\u8bc1\u4e86\u8fdb\u7a0b\u8c03\u5ea6\u7b2c\u4e00\u5b9a\u5f8b\u7684\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/process-scheduler.jpeg",alt:"process-scheduler.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"18 \u8fdb\u7a0b\u7684\u521b\u5efa\uff1a\u5982\u4f55\u53d1\u8d77\u4e00\u4e2a\u65b0\u9879\u76ee\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u6709\u4e86\u65b0\u9879\u76ee\uff0c\u5f88\u7b80\u5355\uff0c\u62c6\u6210\u4e24\u90e8\u5206\u561b\u3002\u9996\u5148\u628a\u539f\u9879\u76ee\u7684\u4ec0\u4e48\u5de5\u4f5c\u8d44\u6599\u3001\u4eba\u5458\u6743\u9650\u4ec0\u4e48\u7684\u5728\u540e\u53f0\u5148\u590d\u5236\u4e00\u4efd\u51fa\u6765\uff08syscall_fork \u6267\u884c\u590d\u5236 task_struct \u64cd\u4f5c\uff0c\u521b\u5efa\u5185\u6838\u6808\uff0c\u518d\u6267\u884c copy_process\uff0c\u5176\u4e2d\u5305\u62ec\u8bbe\u7f6e\u6743\u9650\u3001\u590d\u5236 fs\u3001\u590d\u5236 files\u3001\u590d\u5236 signal \u7b49\u5177\u4f53\u64cd\u4f5c\uff0c\u4e0d\u591a\u8bf4\uff09\u3002\u7136\u540e\u5c31\u8981\u7ed9\u8fd9\u4e2a\u65b0\u9879\u76ee\u5206\u914d\u5458\u5de5\uff08\u5524\u9192\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\uff09"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u597d\u4e86\uff0cfork \u7cfb\u7edf\u8c03\u7528\u7684\u8fc7\u7a0b\u54b1\u4eec\u5c31\u89e3\u6790\u5b8c\u4e86\u3002\u5b83\u5305\u542b\u4e24\u4e2a\u91cd\u8981\u7684\u4e8b\u4ef6\uff0c\u4e00\u4e2a\u662f\u5c06 task_struct \u7ed3\u6784\u590d\u5236\u4e00\u4efd\u5e76\u4e14\u521d\u59cb\u5316\uff0c\u53e6\u4e00\u4e2a\u662f\u8bd5\u56fe\u5524\u9192\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\u3002\n\n\u8fd9\u4e2a\u8fc7\u7a0b\u6211\u753b\u4e86\u4e00\u5f20\u56fe\uff0c\u4f60\u53ef\u4ee5\u5bf9\u7167\u7740\u8fd9\u5f20\u56fe\u56de\u987e\u8fdb\u7a0b\u521b\u5efa\u7684\u8fc7\u7a0b\u3002\n\n\u8fd9\u4e2a\u56fe\u7684\u4e0a\u534a\u90e8\u5206\u662f\u590d\u5236 task_struct \u7ed3\u6784\uff0c\u4f60\u53ef\u4ee5\u5bf9\u7167\u7740\u53f3\u9762\u7684 task_struct \u7ed3\u6784\u56fe\uff0c\u770b\u8fd9\u91cc\u9762\u7684\u6210\u5458\u662f\u5982\u4f55\u4e00\u90e8\u5206\u4e00\u90e8\u5206\u5730\u88ab\u590d\u5236\u7684\u3002\u56fe\u7684\u4e0b\u534a\u90e8\u5206\u662f\u5524\u9192\u65b0\u521b\u5efa\u7684\u5b50\u8fdb\u7a0b\uff0c\u5982\u679c\u6761\u4ef6\u6ee1\u8db3\uff0c\u5c31\u4f1a\u5c06\u5f53\u524d\u8fdb\u7a0b\u8bbe\u7f6e\u5e94\u8be5\u88ab\u8c03\u5ea6\u7684\u6807\u8bc6\u4f4d\uff0c\u5c31\u7b49\u7740\u5f53\u524d\u8fdb\u7a0b\u6267\u884c__schedule \u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5185\u5bb9\u5168\u662f\u6e90\u7801\u89e3\u6790\uff0c\u81ea\u5df1\u53bb\u770b\u6e90\u7801\uff0c\u770b\u6587\u6863\u610f\u4e49\u4e0d\u5927\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"19-\u7ebf\u7a0b\u7684\u521b\u5efa\uff1a\u5982\u4f55\u6267\u884c\u4e00\u4e2a\u65b0\u5b50\u9879\u76ee\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u4e86\u89e3\u4e86\u8fdb\u7a0b\u521b\u5efa\u7684\u6574\u4e2a\u8fc7\u7a0b\uff0c\u4eca\u5929\u6211\u4eec\u6765\u770b\u7ebf\u7a0b\u521b\u5efa\u7684\u8fc7\u7a0b\u3002\n\n\u6211\u4eec\u524d\u9762\u5df2\u7ecf\u5199\u8fc7\u591a\u7ebf\u7a0b\u7f16\u7a0b\u7684\u7a0b\u5e8f\u4e86\uff0c\u4f60\u5e94\u8be5\u90fd\u77e5\u9053\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u7684\u662f pthread_create\uff0c\u53ef\u4f60\u77e5\u9053\u5b83\u80cc\u540e\u7684\u673a\u5236\u5417\uff1f\n\n\u7528\u6237\u6001\u521b\u5efa\u7ebf\u7a0b\n\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u54b1\u4eec\u4e4b\u524d\u4e0d\u662f\u8bb2\u8fc7\u4e86\u5417\uff1f\u65e0\u8bba\u662f\u8fdb\u7a0b\u8fd8\u662f\u7ebf\u7a0b\uff0c\u5728\u5185\u6838\u91cc\u9762\u90fd\u662f\u4efb\u52a1\uff0c\u7ba1\u8d77\u6765\u4e0d\u662f\u90fd\u4e00\u6837\u5417\uff1f\u4f46\u662f\u95ee\u9898\u6765\u4e86\uff0c\u5982\u679c\u4e24\u4e2a\u5b8c\u5168\u4e00\u6837\uff0c\u90a3\u4e3a\u4ec0\u4e48\u54b1\u4eec\u524d\u4e24\u8282\u5199\u7684\u7a0b\u5e8f\u5dee\u522b\u90a3\u4e48\u5927\uff1f\u5982\u679c\u4e0d\u4e00\u6837\uff0c\u90a3\u600e\u4e48\u5728\u5185\u6838\u91cc\u9762\u52a0\u4ee5\u533a\u5206\u5462\uff1f\n\n\u5176\u5b9e\uff0c\u7ebf\u7a0b\u4e0d\u662f\u4e00\u4e2a\u5b8c\u5168\u7531\u5185\u6838\u5b9e\u73b0\u7684\u673a\u5236\uff0c\u5b83\u662f\u7531\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5408\u4f5c\u5b8c\u6210\u7684\u3002pthread_create \u4e0d\u662f\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u662f Glibc \u5e93\u7684\u4e00\u4e2a\u51fd\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u53bb Glibc \u91cc\u9762\u53bb\u627e\u7ebf\u7d22\u3002\n\n\u679c\u7136\uff0c\u6211\u4eec\u5728 nptl/pthread_create.c \u91cc\u9762\u627e\u5230\u4e86\u8fd9\u4e2a\u51fd\u6570\u3002\u8fd9\u91cc\u7684\u53c2\u6570\u6211\u4eec\u5e94\u8be5\u6bd4\u8f83\u719f\u6089\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7ebf\u7a0b\u4e0d\u662f\u4e00\u4e2a\u5b8c\u5168\u7531\u5185\u6838\u5b9e\u73b0\u7684\u673a\u5236\uff0c\u5b83\u662f\u7531\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u5408\u4f5c\u5b8c\u6210\u7684"}),"\n",(0,l.jsx)(e.p,{children:"pthread_create \u4e5f\u4e0d\u662f syscall\uff0c\u800c\u662f glibc \u81ea\u5df1\u5b9e\u73b0\u7684\uff08PS. \u8fd9\u4e48\u8bf4\u7684\u8bdd\uff0csyscall \u4e0d\u662f\u79d8\u4e66\uff0c\u66f4\u50cf\u662f\u8001\u677f\u5217\u51fa\u7684\u6307\u4ee4\u6e05\u5355\uff0c\u516c\u53f8\u91cc\u975e\u6838\u5fc3\u7ba1\u7406\u5c42\u7684\u9879\u76ee\u7ec4\uff08\u7528\u6237\u7a7a\u95f4\u7684\u8fdb\u7a0b\uff09\u6309\u7167\u5728\u6e05\u5355\u4e0a\u7684\u6307\u4ee4\u53d1\u9001\u8bf7\u6c42\uff0c\u516c\u53f8\u9ad8\u7ba1\u53ef\u4ee5\u9075\u7167\u6267\u884c\u3002glibc \u624d\u66f4\u50cf\u662f\u79d8\u4e66\uff0c\u4ed6\u628a\u6e05\u5355\u4e0a\u7684\u8fd9\u4e9b\u4e2a\u6307\u4ee4\u5c01\u88c5\u4e86\u4e00\u4e0b\uff0c\u63d0\u4f9b\u66f4\u6613\u7528\u7684\u8c03\u7528\u65b9\u6cd5\u3002\uff09"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u7528\u6237\u6001\u521b\u5efa\u7ebf\u7a0b\uff0c\u7528\u6237\u6001\u6808"}),"\n",(0,l.jsx)(e.p,{children:"\u7528\u6237\u6001\u521b\u5efa\u4efb\u52a1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u641e\u5b9a\u4e86\u7528\u6237\u6001\u6808\u7684\u95ee\u9898\uff0c\u5176\u5b9e\u7528\u6237\u6001\u7684\u4e8b\u60c5\u57fa\u672c\u641e\u5b9a\u4e86\u4e00\u534a\u3002\n\n\u5185\u6838\u6001\u521b\u5efa\u4efb\u52a1\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u63a5\u7740 pthread_create \u770b\u3002\u5176\u5b9e\u6709\u4e86\u7528\u6237\u6001\u7684\u6808\uff0c\u63a5\u7740\u9700\u8981\u89e3\u51b3\u7684\u5c31\u662f\u7528\u6237\u6001\u7684\u7a0b\u5e8f\u4ece\u54ea\u91cc\u5f00\u59cb\u8fd0\u884c\u7684\u95ee\u9898\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6211\u4eec\u80fd\u770b\u5230\u6700\u540e\u8c03\u7528\u4e86 syscall\uff0c\u8fd9\u4e00\u70b9 clone \u548c\u6211\u4eec\u539f\u6765\u719f\u6089\u7684\u5176\u4ed6\u7cfb\u7edf\u8c03\u7528\u51e0\u4e4e\u662f\u4e00\u81f4\u7684\u3002\u4f46\u662f\uff0c\u4e5f\u6709\u5c11\u8bb8\u4e0d\u4e00\u6837\u7684\u5730\u65b9\u3002\n\n\u5982\u679c\u5728\u8fdb\u7a0b\u7684\u4e3b\u7ebf\u7a0b\u91cc\u9762\u8c03\u7528\u5176\u4ed6\u7cfb\u7edf\u8c03\u7528\uff0c\u5f53\u524d\u7528\u6237\u6001\u7684\u6808\u662f\u6307\u5411\u6574\u4e2a\u8fdb\u7a0b\u7684\u6808\uff0c\u6808\u9876\u6307\u9488\u4e5f\u662f\u6307\u5411\u8fdb\u7a0b\u7684\u6808\uff0c\u6307\u4ee4\u6307\u9488\u4e5f\u662f\u6307\u5411\u8fdb\u7a0b\u7684\u4e3b\u7ebf\u7a0b\u7684\u4ee3\u7801\u3002\u6b64\u65f6\u6b64\u523b\u6267\u884c\u5230\u8fd9\u91cc\uff0c\u8c03\u7528 clone \u7684\u65f6\u5019\uff0c\u7528\u6237\u6001\u7684\u6808\u3001\u6808\u9876\u6307\u9488\u3001\u6307\u4ee4\u6307\u9488\u548c\u5176\u4ed6\u7cfb\u7edf\u8c03\u7528\u4e00\u6837\uff0c\u90fd\u662f\u6307\u5411\u4e3b\u7ebf\u7a0b\u7684\u3002\n\n\u4f46\u662f\u5bf9\u4e8e\u7ebf\u7a0b\u6765\u8bf4\uff0c\u8fd9\u4e9b\u90fd\u8981\u53d8\u3002\u56e0\u4e3a\u6211\u4eec\u5e0c\u671b\u5f53 clone \u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u6210\u529f\u7684\u65f6\u5019\uff0c\u9664\u4e86\u5185\u6838\u91cc\u9762\u6709\u8fd9\u4e2a\u7ebf\u7a0b\u5bf9\u5e94\u7684 task_struct\uff0c\u5f53\u7cfb\u7edf\u8c03\u7528\u8fd4\u56de\u5230\u7528\u6237\u6001\u7684\u65f6\u5019\uff0c\u7528\u6237\u6001\u7684\u6808\u5e94\u8be5\u662f\u7ebf\u7a0b\u7684\u6808\uff0c\u6808\u9876\u6307\u9488\u5e94\u8be5\u6307\u5411\u7ebf\u7a0b\u7684\u6808\uff0c\u6307\u4ee4\u6307\u9488\u5e94\u8be5\u6307\u5411\u7ebf\u7a0b\u5c06\u8981\u6267\u884c\u7684\u90a3\u4e2a\u51fd\u6570\u3002\n\n\u6240\u4ee5\u8fd9\u4e9b\u90fd\u9700\u8981\u6211\u4eec\u81ea\u5df1\u505a\uff0c\u5c06\u7ebf\u7a0b\u8981\u6267\u884c\u7684\u51fd\u6570\u7684\u53c2\u6570\u548c\u6307\u4ee4\u7684\u4f4d\u7f6e\u90fd\u538b\u5230\u6808\u91cc\u9762\uff0c\u5f53\u4ece\u5185\u6838\u8fd4\u56de\uff0c\u4ece\u6808\u91cc\u5f39\u51fa\u6765\u7684\u65f6\u5019\uff0c\u5c31\u4ece\u8fd9\u4e2a\u51fd\u6570\u5f00\u59cb\uff0c\u5e26\u7740\u8fd9\u4e9b\u53c2\u6570\u6267\u884c\u4e0b\u53bb\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7b2c\u4e09\uff0c\u5bf9\u4e8e\u4fe1\u53f7\u7684\u5904\u7406\uff0c\u5982\u4f55\u4fdd\u8bc1\u53d1\u7ed9\u8fdb\u7a0b\u7684\u4fe1\u53f7\u867d\u7136\u53ef\u4ee5\u88ab\u4e00\u4e2a\u7ebf\u7a0b\u5904\u7406\uff0c\u4f46\u662f\u5f71\u54cd\u8303\u56f4\u5e94\u8be5\u662f\u6574\u4e2a\u8fdb\u7a0b\u7684\u3002\u4f8b\u5982\uff0ckill \u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5219\u6240\u6709\u7ebf\u7a0b\u90fd\u8981\u88ab\u5e72\u6389\u3002\u5982\u679c\u4e00\u4e2a\u4fe1\u53f7\u662f\u53d1\u7ed9\u4e00\u4e2a\u7ebf\u7a0b\u7684 pthread_kill\uff0c\u5219\u5e94\u8be5\u53ea\u6709\u7ebf\u7a0b\u80fd\u591f\u6536\u5230\u3002\n\n\u5728 copy_process \u7684\u4e3b\u6d41\u7a0b\u91cc\u9762\uff0c\u65e0\u8bba\u662f\u521b\u5efa\u8fdb\u7a0b\u8fd8\u662f\u7ebf\u7a0b\uff0c\u90fd\u4f1a\u521d\u59cb\u5316 struct sigpending pending\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e2a task_struct\uff0c\u90fd\u4f1a\u6709\u8fd9\u6837\u4e00\u4e2a\u6210\u5458\u53d8\u91cf\u3002\u8fd9\u5c31\u662f\u4e00\u4e2a\u4fe1\u53f7\u5217\u8868\u3002\u5982\u679c\u8fd9\u4e2a task_struct \u662f\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u91cc\u9762\u7684\u4fe1\u53f7\u5c31\u662f\u53d1\u7ed9\u8fd9\u4e2a\u7ebf\u7a0b\u7684\uff1b\u5982\u679c\u8fd9\u4e2a task_struct \u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8fd9\u91cc\u9762\u7684\u4fe1\u53f7\u662f\u53d1\u7ed9\u4e3b\u7ebf\u7a0b\u7684\u3002\n\ninit_sigpending(&p->pending);\n\u53e6\u5916\uff0c\u4e0a\u9762 copy_signal \u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5728\u521b\u5efa\u8fdb\u7a0b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u521d\u59cb\u5316 signal_struct \u91cc\u9762\u7684 struct sigpending shared_pending\u3002\u4f46\u662f\uff0c\u5728\u521b\u5efa\u7ebf\u7a0b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8fde signal_struct \u90fd\u5171\u4eab\u4e86\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6574\u4e2a\u8fdb\u7a0b\u91cc\u7684\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u4e00\u4e2a shared_pending\uff0c\u8fd9\u4e5f\u662f\u4e00\u4e2a\u4fe1\u53f7\u5217\u8868\uff0c\u662f\u53d1\u7ed9\u6574\u4e2a\u8fdb\u7a0b\u7684\uff0c\u54ea\u4e2a\u7ebf\u7a0b\u5904\u7406\u90fd\u4e00\u6837\u3002\n\ninit_sigpending(&sig->shared_pending);\n\u81f3\u6b64\uff0cclone \u5728\u5185\u6838\u7684\u8c03\u7528\u5b8c\u6bd5\uff0c\u8981\u8fd4\u56de\u7cfb\u7edf\u8c03\u7528\uff0c\u56de\u5230\u7528\u6237\u6001\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u7ebf\u7a0b\u7684\u8c03\u7528\u8fc7\u7a0b\u89e3\u6790\u5b8c\u6bd5\u4e86\uff0c\u6211\u753b\u4e86\u4e00\u4e2a\u56fe\u603b\u7ed3\u4e00\u4e0b\u3002\u8fd9\u4e2a\u56fe\u5bf9\u6bd4\u4e86\u521b\u5efa\u8fdb\u7a0b\u548c\u521b\u5efa\u7ebf\u7a0b\u5728\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u4e0d\u540c\u3002\n\n\u521b\u5efa\u8fdb\u7a0b\u7684\u8bdd\uff0c\u8c03\u7528\u7684\u7cfb\u7edf\u8c03\u7528\u662f fork\uff0c\u5728 copy_process \u51fd\u6570\u91cc\u9762\uff0c\u4f1a\u5c06\u4e94\u5927\u7ed3\u6784 files_struct\u3001fs_struct\u3001sighand_struct\u3001signal_struct\u3001mm_struct \u90fd\u590d\u5236\u4e00\u904d\uff0c\u4ece\u6b64\u7236\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u5404\u7528\u5404\u7684\u6570\u636e\u7ed3\u6784\u3002\u800c\u521b\u5efa\u7ebf\u7a0b\u7684\u8bdd\uff0c\u8c03\u7528\u7684\u662f\u7cfb\u7edf\u8c03\u7528 clone\uff0c\u5728 copy_process \u51fd\u6570\u91cc\u9762\uff0c\u4e94\u5927\u7ed3\u6784\u4ec5\u4ec5\u662f\u5f15\u7528\u8ba1\u6570\u52a0\u4e00\uff0c\u4e5f\u5373\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u7684\u6570\u636e\u7ed3\u6784\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"20-\u5185\u5b58\u7ba1\u7406\uff08\u4e0a\uff09\uff1a\u4e3a\u5ba2\u6237\u4fdd\u5bc6\uff0c\u89c4\u5212\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4\u5e03\u5c40"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u4e4b\u524d\u770b\u8fc7\u4e86\uff0c\u7b80\u8981\u8bb0\u5f55"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'\u8fd9\u4e2a\u7a0b\u5e8f\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u6574\u6570\u6765\u751f\u6210\u5b57\u7b26\u4e32\uff0c\u6700\u957f\u662f 128\u3002\u7531\u4e8e\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u800c\u4e0d\u80fd\u63d0\u524d\u77e5\u9053\uff0c\u9700\u8981\u52a8\u6001\u5730\u5206\u914d\u5185\u5b58\uff0c\u4f7f\u7528 malloc \u51fd\u6570\u3002\u5f53\u7136\u7528\u5b8c\u4e86\u9700\u8981\u91ca\u653e\u5185\u5b58\uff0c\u8fd9\u5c31\u8981\u4f7f\u7528 free \u51fd\u6570\u3002\n\n\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u7b80\u5355\u7684\u7a0b\u5e8f\u5728\u4f7f\u7528\u5185\u5b58\u65f6\u7684\u51e0\u79cd\u65b9\u5f0f\uff1a\n\n- \u4ee3\u7801\u9700\u8981\u653e\u5728\u5185\u5b58\u91cc\u9762\uff1b\n- \u5168\u5c40\u53d8\u91cf\uff0c\u4f8b\u5982 max_length\uff1b\n- \u5e38\u91cf\u5b57\u7b26\u4e32"Input the string length : "\uff1b\n- \u51fd\u6570\u6808\uff0c\u4f8b\u5982\u5c40\u90e8\u53d8\u91cf num \u662f\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9 generate \u51fd\u6570\u7684\uff0c\u8fd9\u91cc\u9762\u6d89\u53ca\u4e86\u51fd\u6570\u8c03\u7528\uff0c\u5c40\u90e8\u53d8\u91cf\uff0c\u51fd\u6570\u53c2\u6570\u7b49\u90fd\u662f\u4fdd\u5b58\u5728\u51fd\u6570\u6808\u4e0a\u9762\u7684\uff1b\n- \u5806\uff0cmalloc \u5206\u914d\u7684\u5185\u5b58\u5728\u5806\u91cc\u9762\uff1b\n- \u8fd9\u91cc\u9762\u6d89\u53ca\u5bf9 glibc \u7684\u8c03\u7528\uff0c\u6240\u4ee5 glibc \u7684\u4ee3\u7801\u662f\u4ee5 so \u6587\u4ef6\u7684\u5f62\u5f0f\u5b58\u5728\u7684\uff0c\u4e5f\u9700\u8981\u653e\u5728\u5185\u5b58\u91cc\u9762\u3002\n\n\u8fd9\u5c31\u5b8c\u4e86\u5417\uff1f\u8fd8\u6ca1\u6709\u5462\uff0c\u522b\u5fd8\u4e86 malloc \u4f1a\u8c03\u7528\u7cfb\u7edf\u8c03\u7528\uff0c\u8fdb\u5165\u5185\u6838\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7a0b\u5e8f\u4e00\u65e6\u8fd0\u884c\u8d77\u6765\uff0c\u5185\u6838\u90e8\u5206\u8fd8\u9700\u8981\u5206\u914d\u5185\u5b58\uff1a\n\n- \u5185\u6838\u7684\u4ee3\u7801\u8981\u5728\u5185\u5b58\u91cc\u9762\uff1b\n- \u5185\u6838\u4e2d\u4e5f\u6709\u5168\u5c40\u53d8\u91cf\uff1b\n- \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u8981\u6709\u4e00\u4e2a task_struct\uff1b\n- \u6bcf\u4e2a\u8fdb\u7a0b\u8fd8\u6709\u4e00\u4e2a\u5185\u6838\u6808\uff1b\n- \u5728\u5185\u6838\u91cc\u9762\u4e5f\u6709\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\uff1b\n- \u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u8868\u653e\u5728\u54ea\u91cc\uff1f\n\n\u7adf\u7136\u6536\u96c6\u4e86\u8fd9\u4e48\u591a\u7684\u9700\u6c42\uff0c\u770b\u6765\u505a\u4e2a\u5185\u5b58\u7ba1\u7406\u8fd8\u662f\u633a\u590d\u6742\u7684\u554a\uff01\n\n\u6211\u4eec\u73b0\u5728\u6765\u95ee\u4e00\u4e0b\u81ea\u5df1\uff0c\u4e0a\u9762\u7684\u8fd9\u4e9b\u5185\u5b58\u91cc\u9762\u7684\u6570\u636e\uff0c\u5e94\u8be5\u7528\u865a\u62df\u5730\u5740\u8bbf\u95ee\u5462\uff1f\u8fd8\u662f\u5e94\u8be5\u7528\u7269\u7406\u5730\u5740\u8bbf\u95ee\u5462\uff1f\n\n\u4f60\u53ef\u80fd\u4f1a\u8bf4\uff0c\u8fd9\u5f88\u7b80\u5355\u561b\u3002\u7528\u6237\u6001\u7684\u7528\u865a\u62df\u5730\u5740\u8bbf\u95ee\uff0c\u5185\u6838\u6001\u7684\u7528\u7269\u7406\u5730\u5740\u8bbf\u95ee\u3002\u5176\u5b9e\u4e0d\u662f\u7684\u3002\u4f60\u6709\u6ca1\u6709\u60f3\u8fc7\uff0c\u5185\u6838\u91cc\u9762\u7684\u4ee3\u7801\u5982\u679c\u90fd\u4f7f\u7528\u7269\u7406\u5730\u5740\uff0c\u5c31\u76f8\u5f53\u4e8e\u516c\u53f8\u91cc\u7684\u9879\u76ee\u7ba1\u7406\u90e8\u95e8\u3001\u6587\u6863\u7ba1\u7406\u90e8\u95e8\u90fd\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5b9e\u9645\u7684\u5730\u5740\u8bbf\u95ee\u4f1a\u8bae\u5ba4\uff0c\u8fd9\u5bf9\u4e8e\u4f1a\u8bae\u5ba4\u7ba1\u7406\u90e8\u95e8\u6765\u8bb2\uff0c\u7b80\u76f4\u662f\u4e00\u4e2a\u201c\u707e\u96be\u201d\u3002\u56e0\u4e3a\u4e00\u65e6\u5230\u4e86\u5185\u6838\uff0c\u5927\u5bb6\u5bf9\u4e8e\u4f1a\u8bae\u5ba4\u7684\u8bbf\u95ee\u90fd\u8131\u79bb\u4e86\u4f1a\u8bae\u5ba4\u7ba1\u7406\u90e8\u95e8\u7684\u63a7\u5236\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u5e94\u8be5\u6e05\u695a\u4e00\u4ef6\u4e8b\u60c5\uff0c\u771f\u6b63\u80fd\u591f\u4f7f\u7528\u4f1a\u8bae\u5ba4\u7684\u7269\u7406\u5730\u5740\u7684\uff0c\u53ea\u6709\u4f1a\u8bae\u5ba4\u7ba1\u7406\u90e8\u95e8\uff0c\u6240\u6709\u5176\u4ed6\u90e8\u95e8\u7684\u884c\u4e3a\u6d89\u53ca\u8bbf\u95ee\u4f1a\u8bae\u5ba4\u7684\uff0c\u90fd\u8981\u7edf\u7edf\u4f7f\u7528\u865a\u62df\u5730\u5740\uff0c\u7edf\u7edf\u5230\u4f1a\u8bae\u5ba4\u7ba1\u7406\u90e8\u95e8\u90a3\u91cc\u8f6c\u6362\u4e00\u9053\uff0c\u624d\u80fd\u8fdb\u884c\u7edf\u4e00\u7684\u63a7\u5236\u3002\n\n\u6211\u4e0a\u9762\u5217\u4e3e\u51fa\u6765\u7684\uff0c\u5bf9\u4e8e\u5185\u5b58\u7684\u8bbf\u95ee\uff0c\u7528\u6237\u6001\u7684\u8fdb\u7a0b\u4f7f\u7528\u865a\u62df\u5730\u5740\uff0c\u8fd9\u70b9\u6beb\u65e0\u7591\u95ee\uff0c\u5185\u6838\u6001\u7684\u4e5f\u57fa\u672c\u90fd\u662f\u4f7f\u7528\u865a\u62df\u5730\u5740\uff0c\u53ea\u6709\u6700\u540e\u4e00\u9879\u5bb9\u6613\u8ba9\u4eba\u4ea7\u751f\u7591\u95ee\u3002\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u8868\uff0c\u8fd9\u4e2a\u611f\u89c9\u8d77\u6765\u662f\u5185\u5b58\u7ba1\u7406\u6a21\u5757\u7684\u4e00\u90e8\u5206\uff0c\u8fd9\u4e2a\u662f\u201c\u5b9e\u201d\u662f\u201c\u865a\u201d\u5462\uff1f\u8fd9\u4e2a\u95ee\u9898\u5148\u4fdd\u7559\uff0c\u6211\u4eec\u6682\u4e0d\u8ba8\u8bba\uff0c\u653e\u5230\u5185\u5b58\u6620\u5c04\u90a3\u4e00\u8282\u89c1\u5206\u6653\u3002\n\n\u65e2\u7136\u90fd\u662f\u865a\u62df\u5730\u5740\uff0c\u6211\u4eec\u5c31\u5148\u4e0d\u7ba1\u6620\u5c04\u5230\u7269\u7406\u5730\u5740\u4ee5\u540e\u662f\u5982\u4f55\u5e03\u5c40\u7684\uff0c\u53cd\u6b63\u73b0\u5728\u81f3\u5c11\u4ece\u201c\u865a\u201d\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u4e00\u5927\u7247\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u90fd\u662f\u6211\u7684\u4e86\u3002\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u5185\u6838\u6001\u4e5f\u662f\u4f7f\u7528\u865a\u62df\u5185\u5b58\uff0c\u867d\u7136\u5185\u6838\u6001\u80fd\u591f\u901a\u8fc7\u6620\u5c04\u8868\u770b\u5230\u7269\u7406\u5185\u5b58\uff0c\u4f46\u662f\u4ed6\u8fd8\u662f\u4f7f\u7528\u865a\u62df\u5185\u5b58\u3002\u8fd9\u70b9\u4e5f\u662f\u6211\u7684\u4e00\u4e2a\u8ba4\u77e5\u504f\u5dee\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9996\u5148\uff0c\u8fd9\u4e48\u5927\u7684\u865a\u62df\u7a7a\u95f4\u4e00\u5207\u4e8c\uff0c\u4e00\u90e8\u5206\u7528\u6765\u653e\u5185\u6838\u7684\u4e1c\u897f\uff0c\u79f0\u4e3a\u5185\u6838\u7a7a\u95f4\uff0c\u4e00\u90e8\u5206\u7528\u6765\u653e\u8fdb\u7a0b\u7684\u4e1c\u897f\uff0c\u79f0\u4e3a\u7528\u6237\u7a7a\u95f4\u3002\u7528\u6237\u7a7a\u95f4\u5728\u4e0b\uff0c\u5728\u4f4e\u5730\u5740\uff0c\u6211\u4eec\u5047\u8bbe\u5c31\u662f 0 \u53f7\u5230 29 \u53f7\u4f1a\u8bae\u5ba4\uff1b\u5185\u6838\u7a7a\u95f4\u5728\u4e0a\uff0c\u5728\u9ad8\u5730\u5740\uff0c\u6211\u4eec\u5047\u8bbe\u662f 30 \u53f7\u5230 39 \u53f7\u4f1a\u8bae\u5ba4\u3002\u8fd9\u4e24\u90e8\u5206\u7a7a\u95f4\u7684\u5206\u754c\u7ebf\u56e0\u4e3a 32 \u4f4d\u548c 64 \u4f4d\u7684\u4e0d\u540c\u800c\u4e0d\u540c\uff0c\u6211\u4eec\u8fd9\u91cc\u4e0d\u6df1\u7a76\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u60f3\u6cd5\uff1a\u5185\u6838\u7a7a\u95f4\u6211\u4eec\u5f88\u660e\u786e\u4e86\uff0c\u4f46\u662f\u5bf9\u7528\u6237\u7a7a\u95f4\u91cc\u5230\u5e95\u5b58\u4e86\u4ec0\u4e48\uff0c\u6709\u70b9\u62ff\u4e0d\u51c6\u3002\u73b0\u5728\u6765\u770b\uff0c\u7528\u6237\u7a7a\u95f4\u5c31\u662f\u7528\u6765\u653e\u8fdb\u7a0b\u7684\u3002"}),"\n",(0,l.jsx)(e.p,{children:"Text Segment"}),"\n",(0,l.jsx)(e.p,{children:"Data Segment"}),"\n",(0,l.jsx)(e.p,{children:"BSS Segment"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u597d\u4e86\uff0c\u8fd9\u4e00\u8282\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\u3002\u8fd9\u4e00\u8282\u6211\u4eec\u8bb2\u4e86\u4e3a\u4ec0\u4e48\u8981\u72ec\u4eab\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u4e14\u7ad9\u5728\u8001\u677f\u7684\u89d2\u5ea6\uff0c\u8bbe\u8ba1\u4e86\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5e94\u8be5\u5b58\u653e\u7684\u6570\u636e\u3002\n\n\u901a\u8fc7\u8fd9\u4e00\u8282\uff0c\u4f60\u5e94\u8be5\u77e5\u9053\uff0c\u4e00\u4e2a\u5185\u5b58\u7ba1\u7406\u7cfb\u7edf\u81f3\u5c11\u5e94\u8be5\u505a\u4e09\u4ef6\u4e8b\u60c5\uff1a\n\n\u7b2c\u4e00\uff0c\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u7684\u7ba1\u7406\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u770b\u5230\u7684\u662f\u72ec\u7acb\u7684\u3001\u4e92\u4e0d\u5e72\u6270\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff1b\n\n\u7b2c\u4e8c\uff0c\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\uff0c\u7269\u7406\u5185\u5b58\u5730\u5740\u53ea\u6709\u5185\u5b58\u7ba1\u7406\u6a21\u5757\u80fd\u591f\u4f7f\u7528\uff1b\n\n\u7b2c\u4e09\uff0c\u5185\u5b58\u6620\u5c04\uff0c\u9700\u8981\u5c06\u865a\u62df\u5185\u5b58\u548c\u7269\u7406\u5185\u5b58\u6620\u5c04\u3001\u5173\u8054\u8d77\u6765\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u4e00\u8282\u6211\u4eec\u8bb2\u4e86\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4\u7684\u5e03\u5c40\uff0c\u8bf7\u627e\u4e00\u4e0b\uff0c\u6709\u6ca1\u6709\u4e00\u4e2a\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4\u7684\u5e03\u5c40\uff0c\u6253\u5370\u51fa\u6765\u770b\u4e00\u4e0b\uff0c\u8fd9\u5bf9\u6211\u4eec\u540e\u9762\u89e3\u6790\u975e\u5e38\u6709\u5e2e\u52a9\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528 pmap \u547d\u4ee4\u6765\u67e5\u770b\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-log",children:"\u279c  ~ pmap 19111\n19111:   /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 13306 -container-ip 177.7.0.13 -container-port 3306\n000000c000000000  65536K rw---   [ anon ]\n0000559092124000   1528K r-x-- docker-proxy\n00005590924a2000    740K r---- docker-proxy\n000055909255b000    104K rw--- docker-proxy\n0000559092575000    204K rw---   [ anon ]\n...\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"21-\u5185\u5b58\u7ba1\u7406\uff08\u4e0b\uff09\uff1a\u4e3a\u5ba2\u6237\u4fdd\u5bc6\uff0c\u9879\u76ee\u7ec4\u72ec\u4eab\u4f1a\u8bae\u5ba4\u5c01\u95ed\u5f00\u53d1"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/virtual-mem-map.jpeg",alt:"virtual-mem-map.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/Memory-Segmentation.jpeg",alt:"Memory-Segmentation.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\u6211\u4eec\u8bb2\u4e86\u5206\u6bb5\u673a\u5236\u3001\u5206\u9875\u673a\u5236\u4ee5\u53ca\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u65b9\u5f0f\u3002\u603b\u7ed3\u4e00\u4e0b\u8fd9\u4e24\u8282\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5185\u5b58\u7ba1\u7406\u7cfb\u7edf\u7cbe\u7ec6\u5316\u4e3a\u4e0b\u9762\u4e09\u4ef6\u4e8b\u60c5\uff1a\n\n\u7b2c\u4e00\uff0c\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u7684\u7ba1\u7406\uff0c\u5c06\u865a\u62df\u5185\u5b58\u5206\u6210\u5927\u5c0f\u76f8\u7b49\u7684\u9875\uff1b\n\n\u7b2c\u4e8c\uff0c\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\uff0c\u5c06\u7269\u7406\u5185\u5b58\u5206\u6210\u5927\u5c0f\u76f8\u7b49\u7684\u9875\uff1b\n\n\u7b2c\u4e09\uff0c\u5185\u5b58\u6620\u5c04\uff0c\u5c06\u865a\u62df\u5185\u5b58\u9875\u548c\u7269\u7406\u5185\u5b58\u9875\u6620\u5c04\u8d77\u6765\uff0c\u5e76\u4e14\u5728\u5185\u5b58\u7d27\u5f20\u7684\u65f6\u5019\u53ef\u4ee5\u6362\u51fa\u5230\u786c\u76d8\u4e2d\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/mem-page.jpeg",alt:"mem-page.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/mem-map.jpeg",alt:"mem-map.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"22-\u8fdb\u7a0b\u7a7a\u95f4\u7ba1\u7406\uff1a\u9879\u76ee\u7ec4\u8fd8\u53ef\u4ee5\u81ea\u884c\u5e03\u7f6e\u4f1a\u8bae\u5ba4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u4e0a\u4e24\u8282\uff0c\u6211\u4eec\u8bb2\u4e86\u5185\u5b58\u7ba1\u7406\u7684\u4e09\u4e2a\u65b9\u9762\uff0c\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u7684\u7ba1\u7406\u3001\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\u4ee5\u53ca\u5185\u5b58\u6620\u5c04\u3002\u4f60\u73b0\u5728\u5bf9\u8fdb\u7a0b\u5185\u5b58\u7a7a\u95f4\u7684\u6574\u4f53\u5e03\u5c40\u5e94\u8be5\u6709\u4e86\u4e00\u4e2a\u5927\u81f4\u7684\u4e86\u89e3\u3002\u4eca\u5929\u6211\u4eec\u5c31\u6765\u8be6\u7ec6\u770b\u770b\u7b2c\u4e00\u4e2a\u65b9\u9762\uff0c\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u662f\u5982\u4f55\u7ba1\u7406\u7684\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6211\u4eec\u4e4b\u524d\u8bb2\u8fc7\uff0c\u6574\u4e2a\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u8981\u4e00\u5206\u4e3a\u4e8c\uff0c\u4e00\u90e8\u5206\u662f\u7528\u6237\u6001\u5730\u5740\u7a7a\u95f4\uff0c\u4e00\u90e8\u5206\u662f\u5185\u6838\u6001\u5730\u5740\u7a7a\u95f4\uff0c\u90a3\u8fd9\u4e24\u90e8\u5206\u7684\u5206\u754c\u7ebf\u5728\u54ea\u91cc\u5462\uff1f\u8fd9\u5c31\u8981 task_size \u6765\u5b9a\u4e49\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"task-size"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u5c31\u4e0d\u8bb0\u5f55\u4e86\uff0c\u5185\u5bb9\u5f88\u591a\uff0c\u4e5f\u770b\u4e0d\u592a\u61c2\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u7684 mm_struct \u7684\u4e24\u4e2a\u5b57\u6bb5\u5c31\u662f\u5355\u5411\u94fe\u8868 + \u7ea2\u9ed1\u6811"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"struct vm_area_struct *mmap;  /* list of VMAs */\nstruct rb_root mm_rb;\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u91cc\u9762\u4e00\u4e2a\u662f\u5355\u94fe\u8868\uff0c\u7528\u4e8e\u5c06\u8fd9\u4e9b\u533a\u57df\u4e32\u8d77\u6765\u3002\u53e6\u5916\u8fd8\u6709\u4e00\u4e2a\u7ea2\u9ed1\u6811\u3002\u53c8\u662f\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5728\u8fdb\u7a0b\u8c03\u5ea6\u7684\u65f6\u5019\u6211\u4eec\u7528\u7684\u4e5f\u662f\u7ea2\u9ed1\u6811\u3002\u5b83\u7684\u597d\u5904\u5c31\u662f\u67e5\u627e\u548c\u4fee\u6539\u90fd\u5f88\u5feb\u3002\u8fd9\u91cc\u7528\u7ea2\u9ed1\u6811\uff0c\u5c31\u662f\u4e3a\u4e86\u5feb\u901f\u67e5\u627e\u4e00\u4e2a\u5185\u5b58\u533a\u57df\uff0c\u5e76\u5728\u9700\u8981\u6539\u53d8\u7684\u65f6\u5019\uff0c\u80fd\u591f\u5feb\u901f\u4fee\u6539\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6211\u53d1\u73b0 linux kernel \u4e2d\u975e\u5e38\u9ad8\u9891\u5730\u4f7f\u7528\u4e86\u7ea2\u9ed1\u6811\uff0c\u8bf7\u4e3e\u4f8b\u4e00\u4e9b linux kernel \u4e2d\u4f7f\u7528\u7ea2\u9ed1\u6811\u7684\u4f8b\u5b50\uff0c\u5e76\u4e14\u89e3\u91ca\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u7ea2\u9ed1\u6811\u800c\u4e0d\u662f trie \u6811\u5462\uff1f\n\n---\n\n\u5728 Linux \u5185\u6838\u4e2d\uff0c\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u9ad8\u6548\u5730\u7ba1\u7406\u548c\u64cd\u4f5c\u4e00\u4e9b\u91cd\u8981\u7684\u6570\u636e\u3002\u4e0b\u9762\u662f\u4e00\u4e9b Linux \u5185\u6838\u4e2d\u4f7f\u7528\u7ea2\u9ed1\u6811\u7684\u4f8b\u5b50\uff1a\n\n1. \u8fdb\u7a0b\u8c03\u5ea6\uff1aLinux \u5185\u6838\u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u7ba1\u7406\u8fdb\u7a0b\u7684\u8c03\u5ea6\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u8c03\u5ea6\u5b9e\u4f53 (struct sched_entity) \u6765\u8868\u793a\u5176\u8c03\u5ea6\u72b6\u6001\uff0c\u5e76\u5c06\u8fd9\u4e9b\u8c03\u5ea6\u5b9e\u4f53\u6309\u7167\u4e00\u5b9a\u7684\u89c4\u5219\u63d2\u5165\u5230\u7ea2\u9ed1\u6811\u4e2d\u3002\u7ea2\u9ed1\u6811\u7684\u7279\u70b9\u4f7f\u5f97\u5185\u6838\u53ef\u4ee5\u5feb\u901f\u5730\u6839\u636e\u8fdb\u7a0b\u7684\u8c03\u5ea6\u4f18\u5148\u7ea7\u548c\u5176\u4ed6\u53c2\u6570\u6765\u9009\u62e9\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8fdb\u7a0b\u3002\n\n2. \u5b9a\u65f6\u5668\u7ba1\u7406\uff1aLinux \u5185\u6838\u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u7ba1\u7406\u5b9a\u65f6\u5668\u3002\u6bcf\u4e2a\u5b9a\u65f6\u5668\u90fd\u6709\u4e00\u4e2a\u5b9a\u65f6\u5668\u7ed3\u6784 (struct timer_list)\uff0c\u5185\u6838\u5c06\u8fd9\u4e9b\u5b9a\u65f6\u5668\u6309\u7167\u5230\u671f\u65f6\u95f4\u63d2\u5165\u5230\u7ea2\u9ed1\u6811\u4e2d\u3002\u7ea2\u9ed1\u6811\u7684\u7279\u6027\u4f7f\u5f97\u5185\u6838\u53ef\u4ee5\u9ad8\u6548\u5730\u627e\u5230\u4e0b\u4e00\u4e2a\u5373\u5c06\u5230\u671f\u7684\u5b9a\u65f6\u5668\uff0c\u5e76\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002\n\n3. \u6587\u4ef6\u7cfb\u7edf\uff1aLinux \u5185\u6838\u4e2d\u7684\u4e00\u4e9b\u6587\u4ef6\u7cfb\u7edf\uff0c\u5982 EXT4 \u548c Btrfs\uff0c\u4f7f\u7528\u7ea2\u9ed1\u6811\u6765\u5b9e\u73b0\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u7d22\u5f15\u3002\u7ea2\u9ed1\u6811\u7684\u5e73\u8861\u6027\u8d28\u4f7f\u5f97\u6587\u4ef6\u7cfb\u7edf\u80fd\u591f\u5feb\u901f\u5730\u8fdb\u884c\u6587\u4ef6\u67e5\u627e\u548c\u63d2\u5165\u64cd\u4f5c\u3002\n\n\u4e3a\u4ec0\u4e48\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\u9009\u62e9\u7ea2\u9ed1\u6811\u800c\u4e0d\u662f trie \u6811\u5462\uff1f\u7ea2\u9ed1\u6811\u5177\u6709\u5e73\u8861\u6027\u8d28\uff0c\u5373\u4f7f\u5728\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u662f O(log n)\uff0c\u5176\u4e2d n \u662f\u6811\u4e2d\u8282\u70b9\u7684\u6570\u91cf\u3002\u800c trie \u6811\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6811\u7684\u9ad8\u5ea6\u975e\u5e38\u5927\uff0c\u4ece\u800c\u589e\u52a0\u4e86\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u53e6\u5916\uff0c\u7ea2\u9ed1\u6811\u76f8\u5bf9\u4e8e trie \u6811\u6765\u8bf4\uff0c\u5b9e\u73b0\u548c\u7ef4\u62a4\u8d77\u6765\u66f4\u52a0\u7b80\u5355\u3002\u7efc\u5408\u8003\u8651\uff0c\u7ea2\u9ed1\u6811\u5728\u8fd9\u4e9b\u573a\u666f\u4e0b\u66f4\u9002\u5408\u4f7f\u7528\u3002\n\n---\n\n\u7ea2\u9ed1\u6811\u6bd4 trie \u6811\u66f4\u4e0d\u597d\u7ef4\u62a4\u5427\n\n---\n\n\u7ea2\u9ed1\u6811\u548c trie \u6811\u662f\u4e24\u79cd\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5404\u6709\u5176\u4f18\u7f3a\u70b9\u3002\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5b83\u5177\u6709\u826f\u597d\u7684\u5e73\u8861\u6027\u80fd\uff0c\u9002\u7528\u4e8e\u9700\u8981\u9891\u7e41\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u573a\u666f\u3002\u800c trie \u6811\u5219\u662f\u4e00\u79cd\u7528\u4e8e\u9ad8\u6548\u5b58\u50a8\u548c\u68c0\u7d22\u5b57\u7b26\u4e32\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u53ef\u4ee5\u975e\u5e38\u5feb\u901f\u5730\u8fdb\u884c\u524d\u7f00\u5339\u914d\u7b49\u64cd\u4f5c\u3002\n\n\u5173\u4e8e\u7ef4\u62a4\u65b9\u9762\uff0c\u7ea2\u9ed1\u6811\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u5bb9\u6613\u7ef4\u62a4\uff0c\u56e0\u4e3a\u5b83\u7684\u81ea\u5e73\u8861\u6027\u8d28\u53ef\u4ee5\u4fdd\u8bc1\u6811\u7684\u9ad8\u5ea6\u4fdd\u6301\u5728\u4e00\u4e2a\u76f8\u5bf9\u8f83\u5c0f\u7684\u8303\u56f4\u5185\u3002\u800c trie \u6811\u5728\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u65f6\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u8c03\u6574\u6307\u9488\u548c\u8282\u70b9\u7684\u5173\u7cfb\uff0c\u76f8\u5bf9\u6765\u8bf4\u7a0d\u5fae\u590d\u6742\u4e00\u4e9b\u3002\n\n\u603b\u7684\u6765\u8bf4\uff0c\u7ea2\u9ed1\u6811\u548c trie \u6811\u5728\u4e0d\u540c\u7684\u5e94\u7528\u573a\u666f\u4e0b\u6709\u4e0d\u540c\u7684\u4f18\u52bf\u548c\u52a3\u52bf\uff0c\u9009\u62e9\u54ea\u79cd\u6570\u636e\u7ed3\u6784\u8981\u6839\u636e\u5177\u4f53\u7684\u9700\u6c42\u6765\u51b3\u5b9a\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd8\u8bb0\u5f97\u54b1\u4eec\u4e0a\u4e00\u8282\u54b1\u4eec\u6536\u96c6\u9879\u76ee\u7ec4\u9700\u6c42\u7684\u65f6\u5019\uff0c\u6211\u4eec\u77e5\u9053\u4e00\u4e2a\u8fdb\u7a0b\u8981\u8fd0\u884c\u8d77\u6765\u9700\u8981\u4ee5\u4e0b\u7684\u5185\u5b58\u7ed3\u6784\u3002\n\n\u7528\u6237\u6001\uff1a\n\n- \u4ee3\u7801\u6bb5\u3001\u5168\u5c40\u53d8\u91cf\u3001BSS\n- \u51fd\u6570\u6808\n- \u5806\n- \u5185\u5b58\u6620\u5c04\u533a\n\n\u5185\u6838\u6001\uff1a\n\n- \u5185\u6838\u7684\u4ee3\u7801\u3001\u5168\u5c40\u53d8\u91cf\u3001BSS\n- \u5185\u6838\u6570\u636e\u7ed3\u6784\u4f8b\u5982 task_struct\n- \u5185\u6838\u6808\n- \u5185\u6838\u4e2d\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\n\n\u73b0\u5728\u8fd9\u4e9b\u662f\u4e0d\u662f\u5df2\u7ecf\u90fd\u6709\u4e86\u7740\u843d\uff1f\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/userspace-manage.jpeg",alt:"userspace-manage.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"23-\u7269\u7406\u5185\u5b58\u7ba1\u7406\uff08\u4e0a\uff09\uff1a\u4f1a\u8bae\u5ba4\u7ba1\u7406\u5458\u5982\u4f55\u5206\u914d\u4f1a\u8bae\u5ba4\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u770b\u5230\u8fd9\u7ae0\u624d\u53d1\u73b0\uff0c\u539f\u6765 NUMA\u3001DMA\u3001HIGHMEM \u8fd9\u4e9b\u90fd\u5c5e\u4e8e\u7269\u7406\u5185\u5b58\u7ba1\u7406\u3002\u4e4b\u524d\u771f\u662f\u6ca1\u5b66\u660e\u767d\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\u548c\u53ef\u6269\u5c55\u6027\uff0c\u540e\u6765\u6709\u4e86\u4e00\u79cd\u66f4\u9ad8\u7ea7\u7684\u6a21\u5f0f\uff0cNUMA\uff08Non-uniform memory access\uff09\uff0c\u975e\u4e00\u81f4\u5185\u5b58\u8bbf\u95ee\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u5185\u5b58\u4e0d\u662f\u4e00\u6574\u5757\u3002\u6bcf\u4e2a CPU \u90fd\u6709\u81ea\u5df1\u7684\u672c\u5730\u5185\u5b58\uff0cCPU \u8bbf\u95ee\u672c\u5730\u5185\u5b58\u4e0d\u7528\u8fc7\u603b\u7ebf\uff0c\u56e0\u800c\u901f\u5ea6\u8981\u5feb\u5f88\u591a\uff0c\u6bcf\u4e2a CPU \u548c\u5185\u5b58\u5728\u4e00\u8d77\uff0c\u79f0\u4e3a\u4e00\u4e2a NUMA \u8282\u70b9\u3002\u4f46\u662f\uff0c\u5728\u672c\u5730\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a CPU \u90fd\u53ef\u4ee5\u53bb\u53e6\u5916\u7684 NUMA \u8282\u70b9\u7533\u8bf7\u5185\u5b58\uff0c\u8fd9\u4e2a\u65f6\u5019\u8bbf\u95ee\u5ef6\u65f6\u5c31\u4f1a\u6bd4\u8f83\u957f\u3002\n\n\u8fd9\u6837\uff0c\u5185\u5b58\u88ab\u5206\u6210\u4e86\u591a\u4e2a\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u518d\u88ab\u5206\u6210\u4e00\u4e2a\u4e00\u4e2a\u7684\u9875\u9762\u3002\u7531\u4e8e\u9875\u9700\u8981\u5168\u5c40\u552f\u4e00\u5b9a\u4f4d\uff0c\u9875\u8fd8\u662f\u9700\u8981\u6709\u5168\u5c40\u552f\u4e00\u7684\u9875\u53f7\u7684\u3002\u4f46\u662f\u7531\u4e8e\u7269\u7406\u5185\u5b58\u4e0d\u662f\u8fde\u8d77\u6765\u7684\u4e86\uff0c\u9875\u53f7\u4e5f\u5c31\u4e0d\u518d\u8fde\u7eed\u4e86\u3002\u4e8e\u662f\u5185\u5b58\u6a21\u578b\u5c31\u53d8\u6210\u4e86\u975e\u8fde\u7eed\u5185\u5b58\u6a21\u578b\uff0c\u7ba1\u7406\u8d77\u6765\u5c31\u590d\u6742\u4e00\u4e9b\u3002\n\n\u8fd9\u91cc\u9700\u8981\u6307\u51fa\u7684\u662f\uff0cNUMA \u5f80\u5f80\u662f\u975e\u8fde\u7eed\u5185\u5b58\u6a21\u578b\u3002\u800c\u975e\u8fde\u7eed\u5185\u5b58\u6a21\u578b\u4e0d\u4e00\u5b9a\u5c31\u662f NUMA\uff0c\u6709\u65f6\u5019\u4e00\u5927\u7247\u5185\u5b58\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u4f1a\u6709\u7269\u7406\u5185\u5b58\u5730\u5740\u4e0d\u8fde\u7eed\u7684\u60c5\u51b5\u3002\n\n\u540e\u6765\u5185\u5b58\u6280\u672f\u725b\u4e86\uff0c\u53ef\u4ee5\u652f\u6301\u70ed\u63d2\u62d4\u4e86\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u4e0d\u8fde\u7eed\u6210\u4e3a\u5e38\u6001\uff0c\u4e8e\u662f\u5c31\u6709\u4e86\u7a00\u758f\u5185\u5b58\u6a21\u578b\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"// NUMA\u8282\u70b9\n// \u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u6709\u81ea\u5df1\u7684ID\uff1anode_id\uff1b\n// node_mem_map\u5c31\u662f\u8fd9\u4e2a\u8282\u70b9\u7684struct page\u6570\u7ec4\uff0c\u7528\u4e8e\u63cf\u8ff0\u8fd9\u4e2a\u8282\u70b9\u91cc\u9762\u7684\u6240\u6709\u7684\u9875\uff1b\n// node_start_pfn\u662f\u8fd9\u4e2a\u8282\u70b9\u7684\u8d77\u59cb\u9875\u53f7\uff1b\n// node_spanned_pages\u662f\u8fd9\u4e2a\u8282\u70b9\u4e2d\u5305\u542b\u4e0d\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\u5730\u5740\u7684\u9875\u9762\u6570\uff1b\n// node_present_pages\u662f\u771f\u6b63\u53ef\u7528\u7684\u7269\u7406\u9875\u9762\u7684\u6570\u76ee\u3002\ntypedef struct pglist_data {\n struct zone node_zones[MAX_NR_ZONES];\n struct zonelist node_zonelists[MAX_ZONELISTS];\n int nr_zones;\n struct page *node_mem_map;\n unsigned long node_start_pfn;\n unsigned long node_present_pages; /* total number of physical pages */\n unsigned long node_spanned_pages; /* total size of physical page range, including holes */\n int node_id;\n......\n} pg_data_t;\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"enum zone_type {\n#ifdef CONFIG_ZONE_DMA\n ZONE_DMA,\n#endif\n#ifdef CONFIG_ZONE_DMA32\n ZONE_DMA32,\n#endif\n ZONE_NORMAL,\n#ifdef CONFIG_HIGHMEM\n ZONE_HIGHMEM,\n#endif\n ZONE_MOVABLE,\n __MAX_NR_ZONES\n};\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u51e0\u4e2a zone_type \u90fd\u662f\u8001\u751f\u5e38\u8c08\u4e86\uff0cHIGHMEM \u548c MOVABLE \u6ca1\u5fc5\u8981\u5173\u6ce8\uff0c\u53ea\u770b DMA \u548c NORMAL"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"ZONE_DMA \u662f\u6307\u53ef\u7528\u4e8e\u4f5c DMA\uff08Direct Memory Access\uff0c\u76f4\u63a5\u5185\u5b58\u5b58\u53d6\uff09\u7684\u5185\u5b58\u3002DMA \u662f\u8fd9\u6837\u4e00\u79cd\u673a\u5236\uff1a\u8981\u628a\u5916\u8bbe\u7684\u6570\u636e\u8bfb\u5165\u5185\u5b58\u6216\u628a\u5185\u5b58\u7684\u6570\u636e\u4f20\u9001\u5230\u5916\u8bbe\uff0c\u539f\u6765\u90fd\u8981\u901a\u8fc7 CPU \u63a7\u5236\u5b8c\u6210\uff0c\u4f46\u662f\u8fd9\u4f1a\u5360\u7528 CPU\uff0c\u5f71\u54cd CPU \u5904\u7406\u5176\u4ed6\u4e8b\u60c5\uff0c\u6240\u4ee5\u6709\u4e86 DMA \u6a21\u5f0f\u3002CPU \u53ea\u9700\u5411 DMA \u63a7\u5236\u5668\u4e0b\u8fbe\u6307\u4ee4\uff0c\u8ba9 DMA \u63a7\u5236\u5668\u6765\u5904\u7406\u6570\u636e\u7684\u4f20\u9001\uff0c\u6570\u636e\u4f20\u9001\u5b8c\u6bd5\u518d\u628a\u4fe1\u606f\u53cd\u9988\u7ed9 CPU\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u89e3\u653e CPU\u3002\n\n\u5bf9\u4e8e 64 \u4f4d\u7cfb\u7edf\uff0c\u6709\u4e24\u4e2a DMA \u533a\u57df\u3002\u9664\u4e86\u4e0a\u9762\u8bf4\u7684 ZONE_DMA\uff0c\u8fd8\u6709 ZONE_DMA32\u3002\u5728\u8fd9\u91cc\u4f60\u5927\u6982\u7406\u89e3 DMA \u7684\u539f\u7406\u5c31\u53ef\u4ee5\uff0c\u4e0d\u5fc5\u7ea0\u7ed3\uff0c\u6211\u4eec\u540e\u9762\u4f1a\u8bb2 DMA \u7684\u673a\u5236\u3002\n\nZONE_NORMAL \u662f\u76f4\u63a5\u6620\u5c04\u533a\uff0c\u5c31\u662f\u4e0a\u4e00\u8282\u8bb2\u7684\uff0c\u4ece\u7269\u7406\u5185\u5b58\u5230\u865a\u62df\u5185\u5b58\u7684\u5185\u6838\u533a\u57df\uff0c\u901a\u8fc7\u52a0\u4e0a\u4e00\u4e2a\u5e38\u91cf\u76f4\u63a5\u6620\u5c04\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7269\u7406\u5185\u5b58\u5c31\u662f\u8fd9\u4e48\u5206\u6210\u8282\u70b9\uff0c\u518d\u5206\u6210\u4ee5\u4e0a\u533a\u57df\u7684\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"linux kernel \u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u662f\u5565\uff1f\n\n---\n\nLinux \u5185\u6838\u4e2d\u7684\u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u662f\u6307\u5728\u7269\u7406\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u4e2d\u5b58\u5728\u7684\u4e0d\u8fde\u7eed\u7684\u7a7a\u95f2\u5185\u5b58\u533a\u57df\u3002\u8fd9\u4e9b\u7a7a\u6d1e\u901a\u5e38\u662f\u7531\u4e8e\u5185\u5b58\u6620\u5c04\u548c\u5206\u914d\u7684\u4e0d\u89c4\u5219\u6027\u5bfc\u81f4\u7684\u3002\u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u53ef\u80fd\u51fa\u73b0\u5728\u5185\u6838\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u4f8b\u5982\u5185\u6838\u4ee3\u7801\u3001\u5185\u6838\u6570\u636e\u7ed3\u6784\u3001\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u7b49\u3002\n\n\u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u53ef\u80fd\u4f1a\u5bf9\u7cfb\u7edf\u7684\u5185\u5b58\u7ba1\u7406\u548c\u5206\u914d\u4ea7\u751f\u4e00\u4e9b\u5f71\u54cd\u3002\u5f53\u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u8f83\u5927\u65f6\uff0c\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u66f4\u591a\u7684\u5185\u5b58\u6765\u6ee1\u8db3\u5185\u5b58\u9700\u6c42\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5\u3002\u6b64\u5916\uff0c\u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u4e5f\u53ef\u80fd\u4f1a\u589e\u52a0\u5185\u5b58\u5206\u914d\u548c\u7ba1\u7406\u7684\u590d\u6742\u6027\u3002\n\n\u4e3a\u4e86\u89e3\u51b3\u7269\u7406\u5185\u5b58\u7a7a\u6d1e\u7684\u95ee\u9898\uff0cLinux \u5185\u6838\u4f7f\u7528\u4e86\u4e00\u4e9b\u5185\u5b58\u7ba1\u7406\u6280\u672f\u3002\u5176\u4e2d\u5305\u62ec\u5185\u5b58\u788e\u7247\u6574\u7406\u3001\u5185\u5b58\u538b\u7f29\u3001\u5185\u5b58\u5408\u5e76\u7b49\u3002\u8fd9\u4e9b\u6280\u672f\u53ef\u4ee5\u5e2e\u52a9\u7cfb\u7edf\u66f4\u597d\u5730\u7ba1\u7406\u548c\u5229\u7528\u7269\u7406\u5185\u5b58\u7a7a\u95f4\uff0c\u63d0\u9ad8\u5185\u5b58\u7684\u5229\u7528\u7387\u548c\u6027\u80fd\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u56de\u7b54\u5bf9\u4f60\u6709\u5e2e\u52a9\u3002\u5982\u679c\u4f60\u8fd8\u6709\u5176\u4ed6\u95ee\u9898\uff0c\u8bf7\u968f\u65f6\u63d0\u95ee\u3002\n\n---\n\n\u5982\u679c\u6211\u4eec\u628a\u7269\u7406\u5185\u5b58\u7406\u89e3\u4e3a\u516c\u53f8\u7684\u5de5\u4f4d\uff0c\u80fd\u5426\u628a\u7a7a\u6d1e\u7406\u89e3\u4e3a\u6ca1\u6709\u5750\u4eba\u7684\u7a7a\u4f4d\uff1f\n\n---\n\n\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\u3002\u7269\u7406\u5185\u5b58\u53ef\u4ee5\u88ab\u6bd4\u4f5c\u516c\u53f8\u7684\u5de5\u4f4d\uff0c\u800c\u7a7a\u6d1e\u53ef\u4ee5\u88ab\u7406\u89e3\u4e3a\u6ca1\u6709\u5750\u4eba\u7684\u7a7a\u4f4d\u3002\u5c31\u50cf\u516c\u53f8\u7684\u5458\u5de5\u53ef\u4ee5\u5360\u636e\u5de5\u4f4d\u4e00\u6837\uff0c\u8fdb\u7a0b\u53ef\u4ee5\u5360\u636e\u7269\u7406\u5185\u5b58\u3002\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u88ab\u8c03\u5ea6\u5230\u7269\u7406\u5185\u5b58\u4e2d\u65f6\uff0c\u5b83\u4f1a\u5360\u636e\u4e00\u4e2a\u6216\u591a\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u5757\uff0c\u8fd9\u4e9b\u5185\u5b58\u5757\u5c31\u50cf\u516c\u53f8\u7684\u5de5\u4f4d\u4e00\u6837\u3002\u5982\u679c\u6709\u4e00\u4e9b\u5185\u5b58\u5757\u6ca1\u6709\u88ab\u4efb\u4f55\u8fdb\u7a0b\u5360\u636e\uff0c\u90a3\u4e48\u5b83\u4eec\u5c31\u53ef\u4ee5\u88ab\u79f0\u4e3a\u7a7a\u6d1e\uff0c\u5c31\u50cf\u516c\u53f8\u7684\u7a7a\u4f4d\u4e00\u6837\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6309\u7167\u8fd9\u4e2a\u7406\u89e3\uff0cspanned_pages \u5c31\u662f\u5de5\u4f4d\u603b\u6570\uff0c\u4e0d\u7ba1\u662f\u4e0d\u662f\u7a7a\u4f4d\u3002\u800c present_pages \u548c managed_pages \u5206\u522b\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u5b9e\u9645\u6709\u4eba\u5750\u7684\u5de5\u4f4d\uff0c\u548c\u7ba1\u7406\uff08\u5305\u62ec\u5206\u914d\u548c\u56de\u6536\uff09\u7684\u5de5\u4f4d\u6570\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"managed_pages \u662f\u8fd9\u4e2a zone \u88ab\u4f19\u4f34\u7cfb\u7edf\u7ba1\u7406\u7684\u6240\u6709\u7684 page \u6570\u76ee\uff0c\u4f19\u4f34\u7cfb\u7edf\u7684\u5de5\u4f5c\u673a\u5236\u6211\u4eec\u540e\u9762\u4f1a\u8bb2\u3002\n\nper_cpu_pageset \u7528\u4e8e\u533a\u5206\u51b7\u70ed\u9875\u3002\u4ec0\u4e48\u53eb\u51b7\u70ed\u9875\u5462\uff1f\u54b1\u4eec\u8bb2 x86 \u4f53\u7cfb\u7ed3\u6784\u7684\u65f6\u5019\u8bb2\u8fc7\uff0c\u4e3a\u4e86\u8ba9 CPU \u5feb\u901f\u8bbf\u95ee\u6bb5\u63cf\u8ff0\u7b26\uff0c\u5728 CPU \u91cc\u9762\u6709\u6bb5\u63cf\u8ff0\u7b26\u7f13\u5b58\u3002CPU \u8bbf\u95ee\u8fd9\u4e2a\u7f13\u5b58\u7684\u901f\u5ea6\u6bd4\u5185\u5b58\u5feb\u5f97\u591a\u3002\u540c\u6837\u5bf9\u4e8e\u9875\u9762\u6765\u8bb2\uff0c\u4e5f\u662f\u8fd9\u6837\u7684\u3002\u5982\u679c\u4e00\u4e2a\u9875\u88ab\u52a0\u8f7d\u5230 CPU \u9ad8\u901f\u7f13\u5b58\u91cc\u9762\uff0c\u8fd9\u5c31\u662f\u4e00\u4e2a\u70ed\u9875\uff08Hot Page\uff09\uff0cCPU \u8bfb\u8d77\u6765\u901f\u5ea6\u4f1a\u5feb\u5f88\u591a\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u662f\u51b7\u9875\uff08Cold Page\uff09\u3002\u7531\u4e8e\u6bcf\u4e2a CPU \u90fd\u6709\u81ea\u5df1\u7684\u9ad8\u901f\u7f13\u5b58\uff0c\u56e0\u800c per_cpu_pageset \u4e5f\u662f\u6bcf\u4e2a CPU \u4e00\u4e2a\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9875\n\u4e86\u89e3\u4e86\u533a\u57df zone\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u5230\u4e86\u7ec4\u6210\u7269\u7406\u5185\u5b58\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u9875\u7684\u6570\u636e\u7ed3\u6784 struct page\u3002\u8fd9\u662f\u4e00\u4e2a\u7279\u522b\u590d\u6742\u7684\u7ed3\u6784\uff0c\u91cc\u9762\u6709\u5f88\u591a\u7684 union\uff0cunion \u7ed3\u6784\u662f\u5728 C \u8bed\u8a00\u4e2d\u88ab\u7528\u4e8e\u540c\u4e00\u5757\u5185\u5b58\u6839\u636e\u60c5\u51b5\u4fdd\u5b58\u4e0d\u540c\u7c7b\u578b\u6570\u636e\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u8fd9\u91cc\u4e4b\u6240\u4ee5\u7528\u4e86 union\uff0c\u662f\u56e0\u4e3a\u4e00\u4e2a\u7269\u7406\u9875\u9762\u4f7f\u7528\u6a21\u5f0f\u6709\u591a\u79cd\u3002\n\n\u7b2c\u4e00\u79cd\u6a21\u5f0f\uff0c\u8981\u7528\u5c31\u7528\u4e00\u6574\u9875\u3002\u8fd9\u4e00\u6574\u9875\u7684\u5185\u5b58\uff0c\u6216\u8005\u76f4\u63a5\u548c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\uff0c\u6211\u4eec\u628a\u8fd9\u79cd\u79f0\u4e3a\u533f\u540d\u9875\uff08Anonymous Page\uff09\u3002\u6216\u8005\u7528\u4e8e\u5173\u8054\u4e00\u4e2a\u6587\u4ef6\uff0c\u7136\u540e\u518d\u548c\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u6837\u7684\u6587\u4ef6\uff0c\u6211\u4eec\u79f0\u4e3a\u5185\u5b58\u6620\u5c04\u6587\u4ef6\uff08Memory-mapped File\uff09\u3002\n\n\u5982\u679c\u67d0\u4e00\u9875\u662f\u8fd9\u79cd\u4f7f\u7528\u6a21\u5f0f\uff0c\u5219\u4f1a\u4f7f\u7528 union \u4e2d\u7684\u4ee5\u4e0b\u53d8\u91cf\uff1a\n\n- struct address_space *mapping \u5c31\u662f\u7528\u4e8e\u5185\u5b58\u6620\u5c04\uff0c\u5982\u679c\u662f\u533f\u540d\u9875\uff0c\u6700\u4f4e\u4f4d\u4e3a 1\uff1b\u5982\u679c\u662f\u6620\u5c04\u6587\u4ef6\uff0c\u6700\u4f4e\u4f4d\u4e3a 0\uff1b\n- pgoff_t index \u662f\u5728\u6620\u5c04\u533a\u7684\u504f\u79fb\u91cf\uff1b\n- atomic_t _mapcount\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u9875\u8868\uff0c\u8fd9\u91cc\u6307\u6709\u591a\u5c11\u4e2a\u9875\u8868\u9879\u6307\u5411\u4e86\u8fd9\u4e2a\u9875\uff1b\n- struct list_head lru \u8868\u793a\u8fd9\u4e00\u9875\u5e94\u8be5\u5728\u4e00\u4e2a\u94fe\u8868\u4e0a\uff0c\u4f8b\u5982\u8fd9\u4e2a\u9875\u9762\u88ab\u6362\u51fa\uff0c\u5c31\u5728\u6362\u51fa\u9875\u7684\u94fe\u8868\u4e2d\uff1b\n- compound \u76f8\u5173\u7684\u53d8\u91cf\u7528\u4e8e\u590d\u5408\u9875\uff08Compound Page\uff09\uff0c\u5c31\u662f\u5c06\u7269\u7406\u4e0a\u8fde\u7eed\u7684\u4e24\u4e2a\u6216\u591a\u4e2a\u9875\u770b\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u5927\u9875\u3002\n\n\u7b2c\u4e8c\u79cd\u6a21\u5f0f\uff0c\u4ec5\u9700\u5206\u914d\u5c0f\u5757\u5185\u5b58\u3002\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u4e00\u4e0b\u5b50\u5206\u914d\u8fd9\u4e48\u591a\u7684\u5185\u5b58\uff0c\u4f8b\u5982\u5206\u914d\u4e00\u4e2a task_struct \u7ed3\u6784\uff0c\u53ea\u9700\u8981\u5206\u914d\u5c0f\u5757\u7684\u5185\u5b58\uff0c\u53bb\u5b58\u50a8\u8fd9\u4e2a\u8fdb\u7a0b\u63cf\u8ff0\u7ed3\u6784\u7684\u5bf9\u8c61\u3002\u4e3a\u4e86\u6ee1\u8db3\u5bf9\u8fd9\u79cd\u5c0f\u5185\u5b58\u5757\u7684\u9700\u8981\uff0cLinux \u7cfb\u7edf\u91c7\u7528\u4e86\u4e00\u79cd\u88ab\u79f0\u4e3a slab allocator \u7684\u6280\u672f\uff0c\u7528\u4e8e\u5206\u914d\u79f0\u4e3a slab \u7684\u4e00\u5c0f\u5757\u5185\u5b58\u3002\u5b83\u7684\u57fa\u672c\u539f\u7406\u662f\u4ece\u5185\u5b58\u7ba1\u7406\u6a21\u5757\u7533\u8bf7\u4e00\u6574\u5757\u9875\uff0c\u7136\u540e\u5212\u5206\u6210\u591a\u4e2a\u5c0f\u5757\u7684\u5b58\u50a8\u6c60\uff0c\u7528\u590d\u6742\u7684\u961f\u5217\u6765\u7ef4\u62a4\u8fd9\u4e9b\u5c0f\u5757\u7684\u72b6\u6001\uff08\u72b6\u6001\u5305\u62ec\uff1a\u88ab\u5206\u914d\u4e86/\u88ab\u653e\u56de\u6c60\u5b50/\u5e94\u8be5\u88ab\u56de\u6536\uff09\u3002\n\n\u4e5f\u6b63\u662f\u56e0\u4e3a slab allocator \u5bf9\u4e8e\u961f\u5217\u7684\u7ef4\u62a4\u8fc7\u4e8e\u590d\u6742\uff0c\u540e\u6765\u5c31\u6709\u4e86\u4e00\u79cd\u4e0d\u4f7f\u7528\u961f\u5217\u7684\u5206\u914d\u5668 slub allocator\uff0c\u540e\u9762\u6211\u4eec\u4f1a\u89e3\u6790\u8fd9\u4e2a\u5206\u914d\u5668\u3002\u4f46\u662f\u4f60\u4f1a\u53d1\u73b0\uff0c\u5b83\u91cc\u9762\u8fd8\u662f\u7528\u4e86\u5f88\u591a slab \u7684\u5b57\u773c\uff0c\u56e0\u4e3a\u5b83\u4fdd\u7559\u4e86 slab \u7684\u7528\u6237\u63a5\u53e3\uff0c\u53ef\u4ee5\u770b\u6210 slab allocator \u7684\u53e6\u4e00\u79cd\u5b9e\u73b0\u3002\n\n\u8fd8\u6709\u4e00\u79cd\u5c0f\u5757\u5185\u5b58\u7684\u5206\u914d\u5668\u79f0\u4e3a slob\uff0c\u975e\u5e38\u7b80\u5355\uff0c\u4e3b\u8981\u4f7f\u7528\u5728\u5c0f\u578b\u7684\u5d4c\u5165\u5f0f\u7cfb\u7edf\u3002\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9875\u7684\u5206\u914d\n\u597d\u4e86\uff0c\u524d\u9762\u6211\u4eec\u8bb2\u4e86\u7269\u7406\u5185\u5b58\u7684\u7ec4\u7ec7\uff0c\u4ece\u8282\u70b9\u5230\u533a\u57df\u5230\u9875\u5230\u5c0f\u5757\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u770b\u7269\u7406\u5185\u5b58\u7684\u5206\u914d\u3002\n\n\u5bf9\u4e8e\u8981\u5206\u914d\u6bd4\u8f83\u5927\u7684\u5185\u5b58\uff0c\u4f8b\u5982\u5230\u5206\u914d\u9875\u7ea7\u522b\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u4f19\u4f34\u7cfb\u7edf\uff08Buddy System\uff09\u3002\n\nLinux \u4e2d\u7684\u5185\u5b58\u7ba1\u7406\u7684\u201c\u9875\u201d\u5927\u5c0f\u4e3a 4KB\u3002\u628a\u6240\u6709\u7684\u7a7a\u95f2\u9875\u5206\u7ec4\u4e3a 11 \u4e2a\u9875\u5757\u94fe\u8868\uff0c\u6bcf\u4e2a\u5757\u94fe\u8868\u5206\u522b\u5305\u542b\u5f88\u591a\u4e2a\u5927\u5c0f\u7684\u9875\u5757\uff0c\u6709 1\u30012\u30014\u30018\u300116\u300132\u300164\u3001128\u3001256\u3001512 \u548c 1024 \u4e2a\u8fde\u7eed\u9875\u7684\u9875\u5757\u3002\u6700\u5927\u53ef\u4ee5\u7533\u8bf7 1024 \u4e2a\u8fde\u7eed\u9875\uff0c\u5bf9\u5e94 4MB \u5927\u5c0f\u7684\u8fde\u7eed\u5185\u5b58\u3002\u6bcf\u4e2a\u9875\u5757\u7684\u7b2c\u4e00\u4e2a\u9875\u7684\u7269\u7406\u5730\u5740\u662f\u8be5\u9875\u5757\u5927\u5c0f\u7684\u6574\u6570\u500d\u3002\n\n\u5f53\u5411\u5185\u6838\u8bf7\u6c42\u5206\u914d (2^(i-1)\uff0c2^i] \u6570\u76ee\u7684\u9875\u5757\u65f6\uff0c\u6309\u7167 2^i \u9875\u5757\u8bf7\u6c42\u5904\u7406\u3002\u5982\u679c\u5bf9\u5e94\u7684\u9875\u5757\u94fe\u8868\u4e2d\u6ca1\u6709\u7a7a\u95f2\u9875\u5757\uff0c\u90a3\u6211\u4eec\u5c31\u5728\u66f4\u5927\u7684\u9875\u5757\u94fe\u8868\u4e2d\u53bb\u627e\u3002\u5f53\u5206\u914d\u7684\u9875\u5757\u4e2d\u6709\u591a\u4f59\u7684\u9875\u65f6\uff0c\u4f19\u4f34\u7cfb\u7edf\u4f1a\u6839\u636e\u591a\u4f59\u7684\u9875\u5757\u5927\u5c0f\u63d2\u5165\u5230\u5bf9\u5e94\u7684\u7a7a\u95f2\u9875\u5757\u94fe\u8868\u4e2d\u3002\n\n\u4f8b\u5982\uff0c\u8981\u8bf7\u6c42\u4e00\u4e2a 128 \u4e2a\u9875\u7684\u9875\u5757\u65f6\uff0c\u5148\u68c0\u67e5 128 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\u662f\u5426\u6709\u7a7a\u95f2\u5757\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u67e5 256 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\uff1b\u5982\u679c\u6709\u7a7a\u95f2\u5757\u7684\u8bdd\uff0c\u5219\u5c06 256 \u4e2a\u9875\u7684\u9875\u5757\u5206\u6210\u4e24\u4efd\uff0c\u4e00\u4efd\u4f7f\u7528\uff0c\u4e00\u4efd\u63d2\u5165 128 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\u4e2d\u3002\u5982\u679c\u8fd8\u662f\u6ca1\u6709\uff0c\u5c31\u67e5 512 \u4e2a\u9875\u7684\u9875\u5757\u94fe\u8868\uff1b\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u5206\u88c2\u4e3a 128\u3001128\u3001256 \u4e09\u4e2a\u9875\u5757\uff0c\u4e00\u4e2a 128 \u7684\u4f7f\u7528\uff0c\u5269\u4f59\u4e24\u4e2a\u63d2\u5165\u5bf9\u5e94\u9875\u5757\u94fe\u8868\u3002\n\n\u4e0a\u9762\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5206\u914d\u9875\u7684\u51fd\u6570 alloc_pages \u4e2d\u770b\u5230\u3002\n\n...\n\n\u6bcf\u4e00\u4e2a zone\uff0c\u90fd\u6709\u4f19\u4f34\u7cfb\u7edf\u7ef4\u62a4\u7684\u5404\u79cd\u5927\u5c0f\u7684\u961f\u5217\uff0c\u5c31\u50cf\u4e0a\u9762\u4f19\u4f34\u7cfb\u7edf\u539f\u7406\u91cc\u8bb2\u7684\u90a3\u6837\u3002\u8fd9\u91cc\u8c03\u7528 rmqueue \u5c31\u5f88\u597d\u7406\u89e3\u4e86\uff0c\u5c31\u662f\u627e\u5230\u5408\u9002\u5927\u5c0f\u7684\u90a3\u4e2a\u961f\u5217\uff0c\u628a\u9875\u9762\u53d6\u4e0b\u6765\u3002\n\n\u63a5\u4e0b\u6765\u7684\u8c03\u7528\u94fe\u662f rmqueue->__rmqueue->__rmqueue_smallest\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u80fd\u6e05\u695a\u770b\u5230\u4f19\u4f34\u7cfb\u7edf\u7684\u903b\u8f91\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u5bf9\u4e8e\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\u7684\u8bb2\u89e3\uff0c\u5230\u8fd9\u91cc\u8981\u544a\u4e00\u6bb5\u843d\u4e86\u3002\u8fd9\u4e00\u8282\u6211\u4eec\u4e3b\u8981\u8bb2\u4e86\u7269\u7406\u5185\u5b58\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u5c31\u50cf\u4e0b\u9762\u56fe\u4e2d\u5c55\u793a\u7684\u4e00\u6837\u3002\n\n\u5982\u679c\u6709\u591a\u4e2a CPU\uff0c\u90a3\u5c31\u6709\u591a\u4e2a\u8282\u70b9\u3002\u6bcf\u4e2a\u8282\u70b9\u7528 struct pglist_data \u8868\u793a\uff0c\u653e\u5728\u4e00\u4e2a\u6570\u7ec4\u91cc\u9762\u3002\n\n\u6bcf\u4e2a\u8282\u70b9\u5206\u4e3a\u591a\u4e2a\u533a\u57df\uff0c\u6bcf\u4e2a\u533a\u57df\u7528 struct zone \u8868\u793a\uff0c\u4e5f\u653e\u5728\u4e00\u4e2a\u6570\u7ec4\u91cc\u9762\u3002\n\n\u6bcf\u4e2a\u533a\u57df\u5206\u4e3a\u591a\u4e2a\u9875\u3002\u4e3a\u4e86\u65b9\u4fbf\u5206\u914d\uff0c\u7a7a\u95f2\u9875\u653e\u5728 struct free_area \u91cc\u9762\uff0c\u4f7f\u7528\u4f19\u4f34\u7cfb\u7edf\u8fdb\u884c\u7ba1\u7406\u548c\u5206\u914d\uff0c\u6bcf\u4e00\u9875\u7528 struct page \u8868\u793a\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e4b\u6240\u4ee5\u79f0\u4e3a\u201c\u4f19\u4f34\u7cfb\u7edf\u201d\uff0c\u56e0\u4e3a\u4ed6 2^\u7684\u601d\u8def\uff0c\u4e5f\u5c31\u662f\u5206\u6cbb\u3002\u4e00\u6574\u4e2a\u4f1a\u8bae\u5ba4\uff0c\u5212\u5206\u4e3a\u4e24\u4e2a 1/2\uff0c\u518d\u5212\u5206\u4e3a\u56db\u4e2a 1/4\uff0c\u4e24\u4e2a 1/4 \u5c31\u662f\u4f19\u4f34\u5440\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/buddy-system.jpeg",alt:"buddy-system.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4f19\u4f34\u7cfb\u7edf\u662f\u4e00\u79cd\u975e\u5e38\u7cbe\u5999\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u65e0\u8bba\u4f60\u4f7f\u7528\u4ec0\u4e48\u8bed\u8a00\uff0c\u8bf7\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u8fd9\u6837\u7684\u5206\u914d\u7cfb\u7edf\uff0c\u8bf4\u4e0d\u5b9a\u54ea\u5929\u4f60\u5728\u505a\u67d0\u4e2a\u7cfb\u7edf\u7684\u65f6\u5019\uff0c\u5c31\u7528\u5230\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u81ea\u5df1\u624b\u5199\u4e00\u4e2a\u4f19\u4f34\u7cfb\u7edf"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/linuxperftools.png",alt:"linuxperftools.png"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/page-cache.png",alt:"page-cache.png"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/IMG_3853.JPG",alt:"IMG_3853.JPG"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"24 \u7269\u7406\u5185\u5b58\u7ba1\u7406\uff08\u4e0b\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5c31\u592a\u7ec6\u8282\u4e86\uff0c\u6682\u65f6\u4e0d\u770b"}),"\n",(0,l.jsx)(e.p,{children:"\u4f46\u662f\u53c8\u7279\u522b\u91cd\u8981\uff0c\u4ec0\u4e48 swap\u3001THP \u5c31\u662f\u8fd9\u5757\u7684\uff0c\u4ee5\u540e\u6709\u65f6\u95f4\u518d\u770b\u5427"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u597d\u4e86\uff0c\u5bf9\u4e8e\u7269\u7406\u5185\u5b58\u7684\u7ba1\u7406\u5c31\u8bb2\u5230\u8fd9\u91cc\u4e86\uff0c\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\u3002\u5bf9\u4e8e\u7269\u7406\u5185\u5b58\u6765\u8bb2\uff0c\u4ece\u4e0b\u5c42\u5230\u4e0a\u5c42\u7684\u5173\u7cfb\u53ca\u5206\u914d\u6a21\u5f0f\u5982\u4e0b\uff1a\n\n\u7269\u7406\u5185\u5b58\u5206 NUMA \u8282\u70b9\uff0c\u5206\u522b\u8fdb\u884c\u7ba1\u7406\uff1b\n\n\u6bcf\u4e2a NUMA \u8282\u70b9\u5206\u6210\u591a\u4e2a\u5185\u5b58\u533a\u57df\uff1b\n\n\u6bcf\u4e2a\u5185\u5b58\u533a\u57df\u5206\u6210\u591a\u4e2a\u7269\u7406\u9875\u9762\uff1b\n\n\u4f19\u4f34\u7cfb\u7edf\u5c06\u591a\u4e2a\u8fde\u7eed\u7684\u9875\u9762\u4f5c\u4e3a\u4e00\u4e2a\u5927\u7684\u5185\u5b58\u5757\u5206\u914d\u7ed9\u4e0a\u5c42\uff1b\n\nkswapd \u8d1f\u8d23\u7269\u7406\u9875\u9762\u7684\u6362\u5165\u6362\u51fa\uff1b\n\nSlub Allocator \u5c06\u4ece\u4f19\u4f34\u7cfb\u7edf\u7533\u8bf7\u7684\u5927\u5185\u5b58\u5757\u5207\u6210\u5c0f\u5757\uff0c\u5206\u914d\u7ed9\u5176\u4ed6\u7cfb\u7edf\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/physical-memory.jpeg",alt:"physical-memory.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5185\u5b58\u7684\u6362\u5165\u548c\u6362\u51fa\u6d89\u53ca swap \u5206\u533a\uff0c\u90a3\u4f60\u77e5\u9053\u5982\u4f55\u68c0\u67e5\u5f53\u524d swap \u5206\u533a\u60c5\u51b5\uff0c\u5982\u4f55\u542f\u7528\u548c\u5173\u95ed swap \u533a\u57df\uff0c\u5982\u4f55\u8c03\u6574 swappiness \u5417\uff1f\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"25-\u7528\u6237\u6001\u5185\u5b58\u6620\u5c04\uff1a\u5982\u4f55\u627e\u5230\u6b63\u786e\u7684\u4f1a\u8bae\u5ba4\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u524d\u9762\u51e0\u8282\uff0c\u6211\u4eec\u65e2\u770b\u4e86\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u5982\u4f55\u7ec4\u7ec7\u7684\uff0c\u4e5f\u770b\u4e86\u7269\u7406\u9875\u9762\u5982\u4f55\u7ba1\u7406\u7684\u3002\u73b0\u5728\u6211\u4eec\u9700\u8981\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u5c06\u4e8c\u8005\u5173\u8054\u8d77\u6765\u3002\n\nmmap \u7684\u539f\u7406\n\u5728\u865a\u62df\u5730\u5740\u7a7a\u95f4\u90a3\u4e00\u8282\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u5217\u8868 vm_area_struct\uff0c\u6307\u5411\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u4e0d\u540c\u7684\u5185\u5b58\u5757\uff0c\u8fd9\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\u53eb mmap\u3002\n\n...\n\n\u5176\u5b9e\u5185\u5b58\u6620\u5c04\u4e0d\u4ec5\u4ec5\u662f\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u4e4b\u95f4\u7684\u6620\u5c04\uff0c\u8fd8\u5305\u62ec\u5c06\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u8bbf\u95ee\u5185\u5b58\u7a7a\u95f4\u5c31\u80fd\u591f\u8bbf\u95ee\u5230\u6587\u4ef6\u91cc\u9762\u7684\u6570\u636e\u3002\u800c\u4ec5\u6709\u7269\u7406\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u7684\u6620\u5c04\uff0c\u662f\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\u3002\n\n\u524d\u9762\u54b1\u4eec\u8bb2\u5806\u7684\u65f6\u5019\u8bb2\u8fc7\uff0c\u5982\u679c\u6211\u4eec\u8981\u7533\u8bf7\u5c0f\u5757\u5185\u5b58\uff0c\u5c31\u7528 brk\u3002brk \u51fd\u6570\u4e4b\u524d\u5df2\u7ecf\u89e3\u6790\u8fc7\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bf4\u4e86\u3002\u5982\u679c\u7533\u8bf7\u4e00\u5927\u5757\u5185\u5b58\uff0c\u5c31\u8981\u7528 mmap\u3002\u5bf9\u4e8e\u5806\u7684\u7533\u8bf7\u6765\u8bb2\uff0cmmap \u662f\u6620\u5c04\u5185\u5b58\u7a7a\u95f4\u5230\u7269\u7406\u5185\u5b58\u3002\n\n\u53e6\u5916\uff0c\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u60f3\u6620\u5c04\u4e00\u4e2a\u6587\u4ef6\u5230\u81ea\u5df1\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\uff0c\u4e5f\u8981\u901a\u8fc7 mmap \u7cfb\u7edf\u8c03\u7528\u3002\u8fd9\u4e2a\u65f6\u5019 mmap \u662f\u6620\u5c04\u5185\u5b58\u7a7a\u95f4\u5230\u7269\u7406\u5185\u5b58\u518d\u5230\u6587\u4ef6\u3002\u53ef\u89c1 mmap \u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u662f\u6838\u5fc3\uff0c\u6211\u4eec\u73b0\u5728\u6765\u770b mmap \u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002\n\n...\u8fd9\u91cc\u6211\u4eec\u5c06 vm_area_struct \u7684\u5185\u5b58\u64cd\u4f5c\u8bbe\u7f6e\u4e3a\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8bfb\u5199\u5185\u5b58\u5176\u5b9e\u5c31\u662f\u8bfb\u5199\u6587\u4ef6\u7cfb\u7edf\u3002\n\n\u5230\u8fd9\u91cc\uff0c\u5185\u5b58\u6620\u5c04\u7684\u5185\u5bb9\u8981\u544a\u4e00\u6bb5\u843d\u4e86\u3002\u4f60\u53ef\u80fd\u4f1a\u56f0\u60d1\uff0c\u597d\u50cf\u8fd8\u6ca1\u548c\u7269\u7406\u5185\u5b58\u53d1\u751f\u4efb\u4f55\u5173\u7cfb\uff0c\u8fd8\u662f\u5728\u865a\u62df\u5185\u5b58\u91cc\u9762\u6298\u817e\u5440\uff1f\n\n\u5bf9\u7684\uff0c\u56e0\u4e3a\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u5f00\u59cb\u771f\u6b63\u8bbf\u95ee\u5185\u5b58\u5440\uff01\u8fd9\u4e2a\u65f6\u5019\uff0c\u5185\u5b58\u7ba1\u7406\u5e76\u4e0d\u76f4\u63a5\u5206\u914d\u7269\u7406\u5185\u5b58\uff0c\u56e0\u4e3a\u7269\u7406\u5185\u5b58\u76f8\u5bf9\u4e8e\u865a\u62df\u5730\u5740\u7a7a\u95f4\u592a\u5b9d\u8d35\u4e86\uff0c\u53ea\u6709\u7b49\u4f60\u771f\u6b63\u7528\u7684\u90a3\u4e00\u523b\u624d\u4f1a\u5f00\u59cb\u5206\u914d\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"PGD\u3001P4G\u3001PUD\u3001PMD\u3001PTE \u56db\u7ea7\u9875\u8868\u662f\u5565\uff1f\n\n---\n\n\nPGD\uff08Page Global Directory\uff09\u662f\u6700\u9ad8\u7ea7\u522b\u7684\u9875\u8868\uff0c\u7528\u4e8e\u5c06\u865a\u62df\u5730\u5740\u6620\u5c04\u5230 P4G\uff08Page Level 4 Global\uff09\u9875\u8868\u3002\n\nP4G\uff08Page Level 4 Global\uff09\u9875\u8868\u662f\u7b2c\u4e8c\u7ea7\u522b\u7684\u9875\u8868\uff0c\u5b83\u5c06\u865a\u62df\u5730\u5740\u6620\u5c04\u5230 PUD\uff08Page Upper Directory\uff09\u9875\u8868\u3002\n\nPUD\uff08Page Upper Directory\uff09\u9875\u8868\u662f\u7b2c\u4e09\u7ea7\u522b\u7684\u9875\u8868\uff0c\u5b83\u5c06\u865a\u62df\u5730\u5740\u6620\u5c04\u5230 PMD\uff08Page Middle Directory\uff09\u9875\u8868\u3002\n\nPMD\uff08Page Middle Directory\uff09\u9875\u8868\u662f\u7b2c\u56db\u7ea7\u522b\u7684\u9875\u8868\uff0c\u5b83\u5c06\u865a\u62df\u5730\u5740\u6620\u5c04\u5230 PTE\uff08Page Table Entry\uff09\u9875\u8868\u3002\n\nPTE\uff08Page Table Entry\uff09\u9875\u8868\u662f\u6700\u4f4e\u7ea7\u522b\u7684\u9875\u8868\uff0c\u5b83\u5c06\u865a\u62df\u5730\u5740\u6620\u5c04\u5230\u7269\u7406\u5730\u5740\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9875\u8868\u4e00\u822c\u90fd\u5f88\u5927\uff0c\u53ea\u80fd\u5b58\u653e\u5728\u5185\u5b58\u4e2d\u3002\u64cd\u4f5c\u7cfb\u7edf\u6bcf\u6b21\u8bbf\u95ee\u5185\u5b58\u90fd\u8981\u6298\u817e\u4e24\u6b65\uff0c\u5148\u901a\u8fc7\u67e5\u8be2\u9875\u8868\u5f97\u5230\u7269\u7406\u5730\u5740\uff0c\u7136\u540e\u8bbf\u95ee\u8be5\u7269\u7406\u5730\u5740\u8bfb\u53d6\u6307\u4ee4\u3001\u6570\u636e\u3002\n\n\u4e3a\u4e86\u63d0\u9ad8\u6620\u5c04\u901f\u5ea6\uff0c\u6211\u4eec\u5f15\u5165\u4e86 TLB\uff08Translation Lookaside Buffer\uff09\uff0c\u6211\u4eec\u7ecf\u5e38\u79f0\u4e3a\u5feb\u8868\uff0c\u4e13\u95e8\u7528\u6765\u505a\u5730\u5740\u6620\u5c04\u7684\u786c\u4ef6\u8bbe\u5907\u3002\u5b83\u4e0d\u5728\u5185\u5b58\u4e2d\uff0c\u53ef\u5b58\u50a8\u7684\u6570\u636e\u6bd4\u8f83\u5c11\uff0c\u4f46\u662f\u6bd4\u5185\u5b58\u8981\u5feb\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u8c61\uff0cTLB \u5c31\u662f\u9875\u8868\u7684 Cache\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86\u5f53\u524d\u6700\u53ef\u80fd\u88ab\u8bbf\u95ee\u5230\u7684\u9875\u8868\u9879\uff0c\u5176\u5185\u5bb9\u662f\u90e8\u5206\u9875\u8868\u9879\u7684\u4e00\u4e2a\u526f\u672c\u3002\n\n\u6709\u4e86 TLB \u4e4b\u540e\uff0c\u5730\u5740\u6620\u5c04\u7684\u8fc7\u7a0b\u5c31\u50cf\u56fe\u4e2d\u753b\u7684\u3002\u6211\u4eec\u5148\u67e5\u5757\u8868\uff0c\u5757\u8868\u4e2d\u6709\u6620\u5c04\u5173\u7cfb\uff0c\u7136\u540e\u76f4\u63a5\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\u3002\u5982\u679c\u5728 TLB \u67e5\u4e0d\u5230\u6620\u5c04\u5173\u7cfb\u65f6\uff0c\u624d\u4f1a\u5230\u5185\u5b58\u4e2d\u67e5\u8be2\u9875\u8868\u3002\n\n\u603b\u7ed3\u65f6\u523b\n\u7528\u6237\u6001\u7684\u5185\u5b58\u6620\u5c04\u673a\u5236\uff0c\u6211\u4eec\u89e3\u6790\u7684\u5dee\u4e0d\u591a\u4e86\uff0c\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\uff0c\u7528\u6237\u6001\u7684\u5185\u5b58\u6620\u5c04\u673a\u5236\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\u3002\n\n\u7528\u6237\u6001\u5185\u5b58\u6620\u5c04\u51fd\u6570 mmap\uff0c\u5305\u62ec\u7528\u5b83\u6765\u505a\u533f\u540d\u6620\u5c04\u548c\u6587\u4ef6\u6620\u5c04\u3002\n\n\u7528\u6237\u6001\u7684\u9875\u8868\u7ed3\u6784\uff0c\u5b58\u50a8\u4f4d\u7f6e\u5728 mm_struct \u4e2d\u3002\n\n\u5728\u7528\u6237\u6001\u8bbf\u95ee\u6ca1\u6709\u6620\u5c04\u7684\u5185\u5b58\u4f1a\u5f15\u53d1\u7f3a\u9875\u5f02\u5e38\uff0c\u5206\u914d\u7269\u7406\u9875\u8868\u3001\u8865\u9f50\u9875\u8868\u3002\u5982\u679c\u662f\u533f\u540d\u6620\u5c04\u5219\u5206\u914d\u7269\u7406\u5185\u5b58\uff1b\u5982\u679c\u662f swap\uff0c\u5219\u5c06 swap \u6587\u4ef6\u8bfb\u5165\uff1b\u5982\u679c\u662f\u6587\u4ef6\u6620\u5c04\uff0c\u5219\u5c06\u6587\u4ef6\u8bfb\u5165\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/memory-map-TLB.jpeg",alt:"memory-map-TLB.jpeg"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/userspace-memory-map.jpeg",alt:"userspace-memory-map.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"26-\u5185\u6838\u6001\u5185\u5b58\u6620\u5c04\uff1a\u5982\u4f55\u627e\u5230\u6b63\u786e\u7684\u4f1a\u8bae\u5ba4\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u524d\u9762\u8bb2\u7528\u6237\u6001\u5185\u5b58\u6620\u5c04\u673a\u5236\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5df2\u7ecf\u591a\u6b21\u5f15\u7533\u51fa\u4e86\u5185\u6838\u7684\u6620\u5c04\u673a\u5236\uff0c\u4f46\u662f\u54b1\u4eec\u90fd\u6682\u65f6\u653e\u4e86\u653e\uff0c\u8fd9\u4e00\u8282\u6211\u4eec\u5c31\u6765\u8be6\u7ec6\u89e3\u6790\u4e00\u4e0b\uff0c\u8ba9\u4f60\u5f7b\u5e95\u641e\u61c2\u5b83\u3002\n\n\u9996\u5148\uff0c\u4f60\u8981\u77e5\u9053\uff0c\u5185\u6838\u6001\u7684\u5185\u5b58\u6620\u5c04\u673a\u5236\uff0c\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a\n\n\u5185\u6838\u6001\u5185\u5b58\u6620\u5c04\u51fd\u6570 vmalloc\u3001kmap_atomic \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff1b\n\n\u5185\u6838\u6001\u9875\u8868\u662f\u653e\u5728\u54ea\u91cc\u7684\uff0c\u5982\u4f55\u5de5\u4f5c\u7684\uff1fswapper_pg_dir \u662f\u600e\u4e48\u56de\u4e8b\uff1b\n\n\u51fa\u73b0\u4e86\u5185\u6838\u6001\u7f3a\u9875\u5f02\u5e38\u5e94\u8be5\u600e\u4e48\u529e\uff1f\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5185\u6838\u6001\u7f3a\u9875\u5f02\u5e38\n\u53ef\u4ee5\u770b\u51fa\uff0ckmap_atomic \u548c vmalloc \u4e0d\u540c\u3002kmap_atomic \u53d1\u73b0\uff0c\u6ca1\u6709\u9875\u8868\u7684\u65f6\u5019\uff0c\u5c31\u76f4\u63a5\u521b\u5efa\u9875\u8868\u8fdb\u884c\u6620\u5c04\u4e86\u3002\u800c vmalloc \u6ca1\u6709\uff0c\u5b83\u53ea\u5206\u914d\u4e86\u5185\u6838\u7684\u865a\u62df\u5730\u5740\u3002\u6240\u4ee5\uff0c\u8bbf\u95ee\u5b83\u7684\u65f6\u5019\uff0c\u4f1a\u4ea7\u751f\u7f3a\u9875\u5f02\u5e38\u3002\n\n\u5185\u6838\u6001\u7684\u7f3a\u9875\u5f02\u5e38\u8fd8\u662f\u4f1a\u8c03\u7528 do_page_fault\uff0c\u4f46\u662f\u4f1a\u8d70\u5230\u54b1\u4eec\u4e0a\u9762\u7528\u6237\u6001\u7f3a\u9875\u5f02\u5e38\u4e2d\u6ca1\u6709\u89e3\u6790\u7684\u90a3\u90e8\u5206 vmalloc_fault\u3002\u8fd9\u4e2a\u51fd\u6570\u5e76\u4e0d\u590d\u6742\uff0c\u4e3b\u8981\u7528\u4e8e\u5173\u8054\u5185\u6838\u9875\u8868\u9879\u3002\n\n\n\u603b\u7ed3\u65f6\u523b\n\u81f3\u6b64\uff0c\u5185\u6838\u6001\u7684\u5185\u5b58\u6620\u5c04\u4e5f\u8bb2\u5b8c\u4e86\u3002\u8fd9\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6574\u4e2a\u5185\u5b58\u7ba1\u7406\u7684\u4f53\u7cfb\u4e32\u8d77\u6765\u4e86\u3002\n\n\u7269\u7406\u5185\u5b58\u6839\u636e NUMA \u67b6\u6784\u5206\u8282\u70b9\u3002\u6bcf\u4e2a\u8282\u70b9\u91cc\u9762\u518d\u5206\u533a\u57df\u3002\u6bcf\u4e2a\u533a\u57df\u91cc\u9762\u518d\u5206\u9875\u3002\n\n\u7269\u7406\u9875\u9762\u901a\u8fc7\u4f19\u4f34\u7cfb\u7edf\u8fdb\u884c\u5206\u914d\u3002\u5206\u914d\u7684\u7269\u7406\u9875\u9762\u8981\u53d8\u6210\u865a\u62df\u5730\u5740\u8ba9\u4e0a\u5c42\u53ef\u4ee5\u8bbf\u95ee\uff0ckswapd \u53ef\u4ee5\u6839\u636e\u7269\u7406\u9875\u9762\u7684\u4f7f\u7528\u60c5\u51b5\u5bf9\u9875\u9762\u8fdb\u884c\u6362\u5165\u6362\u51fa\u3002\n\n\u5bf9\u4e8e\u5185\u5b58\u7684\u5206\u914d\u9700\u6c42\uff0c\u53ef\u80fd\u6765\u81ea\u5185\u6838\u6001\uff0c\u4e5f\u53ef\u80fd\u6765\u81ea\u7528\u6237\u6001\u3002\n\n\u5bf9\u4e8e\u5185\u6838\u6001\uff0ckmalloc \u5728\u5206\u914d\u5927\u5185\u5b58\u7684\u65f6\u5019\uff0c\u4ee5\u53ca vmalloc \u5206\u914d\u4e0d\u8fde\u7eed\u7269\u7406\u9875\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u4f7f\u7528\u4f19\u4f34\u7cfb\u7edf\uff0c\u5206\u914d\u540e\u8f6c\u6362\u4e3a\u865a\u62df\u5730\u5740\uff0c\u8bbf\u95ee\u7684\u65f6\u5019\u9700\u8981\u901a\u8fc7\u5185\u6838\u9875\u8868\u8fdb\u884c\u6620\u5c04\u3002\n\n\u5bf9\u4e8e kmem_cache \u4ee5\u53ca kmalloc \u5206\u914d\u5c0f\u5185\u5b58\uff0c\u5219\u4f7f\u7528 slub \u5206\u914d\u5668\uff0c\u5c06\u4f19\u4f34\u7cfb\u7edf\u5206\u914d\u51fa\u6765\u7684\u5927\u5757\u5185\u5b58\u5207\u6210\u4e00\u5c0f\u5757\u4e00\u5c0f\u5757\u8fdb\u884c\u5206\u914d\u3002\n\nkmem_cache \u548c kmalloc \u7684\u90e8\u5206\u4e0d\u4f1a\u88ab\u6362\u51fa\uff0c\u56e0\u4e3a\u7528\u8fd9\u4e24\u4e2a\u51fd\u6570\u5206\u914d\u7684\u5185\u5b58\u591a\u7528\u4e8e\u4fdd\u6301\u5185\u6838\u5173\u952e\u7684\u6570\u636e\u7ed3\u6784\u3002\u5185\u6838\u6001\u4e2d vmalloc \u5206\u914d\u7684\u90e8\u5206\u4f1a\u88ab\u6362\u51fa\uff0c\u56e0\u800c\u5f53\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u4e0d\u5728\uff0c\u5c31\u4f1a\u8c03\u7528 do_page_fault\u3002\n\n\u5bf9\u4e8e\u7528\u6237\u6001\u7684\u5185\u5b58\u5206\u914d\uff0c\u6216\u8005\u76f4\u63a5\u8c03\u7528 mmap \u7cfb\u7edf\u8c03\u7528\u5206\u914d\uff0c\u6216\u8005\u8c03\u7528 malloc\u3002\u8c03\u7528 malloc \u7684\u65f6\u5019\uff0c\u5982\u679c\u5206\u914d\u5c0f\u7684\u5185\u5b58\uff0c\u5c31\u7528 sys_brk \u7cfb\u7edf\u8c03\u7528\uff1b\u5982\u679c\u5206\u914d\u5927\u7684\u5185\u5b58\uff0c\u8fd8\u662f\u7528 sys_mmap \u7cfb\u7edf\u8c03\u7528\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u6001\u7684\u5185\u5b58\u90fd\u662f\u53ef\u4ee5\u6362\u51fa\u7684\uff0c\u56e0\u800c\u4e00\u65e6\u53d1\u73b0\u5185\u5b58\u4e2d\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u8c03\u7528 do_page_fault\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/page-fault.jpeg",alt:"page-fault.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"27-\u6587\u4ef6\u7cfb\u7edf\uff1a\u9879\u76ee\u6210\u679c\u8981\u5f52\u6863\uff0c\u6211\u4eec\u5c31\u9700\u8981\u6863\u6848\u5e93"}),"\n",(0,l.jsx)(e.p,{children:"syscall"}),"\n",(0,l.jsx)(e.p,{children:"open/write/lseek/read/close"}),"\n",(0,l.jsx)(e.p,{children:"opendir/readdir/closedir"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u5bf9\u4e8e\u6587\u4ef6\u7cfb\u7edf\u7684\u4e3b\u8981\u529f\u80fd\u6709\u4e86\u4e00\u4e2a\u603b\u4f53\u7684\u5370\u8c61\uff0c\u6211\u4eec\u901a\u8fc7\u4e0b\u9762\u8fd9\u5f20\u56fe\u68b3\u7406\u4e00\u4e0b\u3002\n\n- \u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\uff0c\u9700\u8981\u7ef4\u62a4\u6587\u4ef6\u7684\u4e25\u683c\u7684\u683c\u5f0f\uff0c\u8981\u901a\u8fc7 mkfs.ext4 \u547d\u4ee4\u6765\u683c\u5f0f\u5316\u4e3a\u4e25\u683c\u7684\u683c\u5f0f\u3002\n- \u6bcf\u4e00\u4e2a\u786c\u76d8\u4e0a\u4fdd\u5b58\u7684\u6587\u4ef6\u90fd\u8981\u6709\u4e00\u4e2a\u7d22\u5f15\uff0c\u6765\u7ef4\u62a4\u8fd9\u4e2a\u6587\u4ef6\u4e0a\u7684\u6570\u636e\u5757\u90fd\u4fdd\u5b58\u5728\u54ea\u91cc\u3002\n- \u6587\u4ef6\u901a\u8fc7\u6587\u4ef6\u5939\u7ec4\u7ec7\u8d77\u6765\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7528\u6237\u4f7f\u7528\u3002\n- \u4e3a\u4e86\u80fd\u591f\u66f4\u5feb\u8bfb\u53d6\u6587\u4ef6\uff0c\u5185\u5b58\u91cc\u4f1a\u5206\u914d\u4e00\u5757\u7a7a\u95f4\u4f5c\u4e3a\u7f13\u5b58\uff0c\u8ba9\u4e00\u4e9b\u6570\u636e\u5757\u653e\u5728\u7f13\u5b58\u91cc\u9762\u3002\n- \u5728\u5185\u6838\u4e2d\uff0c\u8981\u6709\u4e00\u6574\u5957\u7684\u6570\u636e\u7ed3\u6784\u6765\u8868\u793a\u6253\u5f00\u7684\u6587\u4ef6\u3002\n- \u5728\u7528\u6237\u6001\uff0c\u6bcf\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\u90fd\u6709\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u53ef\u4ee5\u901a\u8fc7\u5404\u79cd\u6587\u4ef6\u76f8\u5173\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u64cd\u4f5c\u8fd9\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u786e\u5b9e\u6ca1\u5565\u7684\uff0c\u5c31\u662f\u4f7f\u7528\u4e0a\u9762\u51e0\u4e2a\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u76f8\u5173\u7684 syscall\u3002\u6700\u6838\u5fc3\u7684\u5c31\u662f\u4e0b\u9762\u8fd9\u51e0\u6761\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/kernel-filesystem.jpeg",alt:"kernel-filesystem.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"28-\u786c\u76d8\u6587\u4ef6\u7cfb\u7edf\uff1a\u5982\u4f55\u6700\u5408\u7406\u5730\u7ec4\u7ec7\u6863\u6848\u5e93\u7684\u6587\u6863\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cgo",children:"struct ext4_inode {\n __le16 i_mode;  /* File mode */\n __le16 i_uid;  /* Low 16 bits of Owner Uid */\n __le32 i_size_lo; /* Size in bytes */\n __le32 i_atime; /* Access time */\n __le32 i_ctime; /* Inode Change time */\n __le32 i_mtime; /* Modification time */\n __le32 i_dtime; /* Deletion Time */\n __le16 i_gid;  /* Low 16 bits of Group Id */\n __le16 i_links_count; /* Links count */\n __le32 i_blocks_lo; /* Blocks count */\n __le32 i_flags; /* File flags */\n......\n __le32 i_block[EXT4_N_BLOCKS];/* Pointers to blocks */\n __le32 i_generation; /* File version (for NFS) */\n __le32 i_file_acl_lo; /* File ACL */\n __le32 i_size_high;\n......\n};\n"})}),"\n",(0,l.jsx)(e.p,{children:"inode \u592a\u91cd\u8981\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u6570\u636e\u7ed3\u6784\uff0c\u57fa\u672c\u4e0a\u5c31\u662f\u4e00\u4e9b\u6587\u4ef6\u5e38\u7528\u5c5e\u6027"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"...\n\n\u5982\u679c\u4f60\u7a0d\u5fae\u6709\u70b9\u7ecf\u9a8c\uff0c\u73b0\u5728\u4f60\u5e94\u8be5\u80fd\u591f\u610f\u8bc6\u5230\uff0c\u8fd9\u91cc\u9762\u6709\u4e00\u4e2a\u975e\u5e38\u663e\u8457\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u5927\u6587\u4ef6\u6765\u8bb2\uff0c\u6211\u4eec\u8981\u591a\u6b21\u8bfb\u53d6\u786c\u76d8\u624d\u80fd\u627e\u5230\u76f8\u5e94\u7684\u5757\uff0c\u8fd9\u6837\u8bbf\u95ee\u901f\u5ea6\u5c31\u4f1a\u6bd4\u8f83\u6162\u3002\n\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cext4 \u505a\u4e86\u4e00\u5b9a\u7684\u6539\u53d8\u3002\u5b83\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u6982\u5ff5\uff0c\u53eb\u505a Extents\u3002\n\n\u6211\u4eec\u6765\u89e3\u91ca\u4e00\u4e0b Extents\u3002\u6bd4\u65b9\u8bf4\uff0c\u4e00\u4e2a\u6587\u4ef6\u5927\u5c0f\u4e3a 128M\uff0c\u5982\u679c\u4f7f\u7528 4k \u5927\u5c0f\u7684\u5757\u8fdb\u884c\u5b58\u50a8\uff0c\u9700\u8981 32k \u4e2a\u5757\u3002\u5982\u679c\u6309\u7167 ext2 \u6216\u8005 ext3 \u90a3\u6837\u6563\u7740\u653e\uff0c\u6570\u91cf\u592a\u5927\u4e86\u3002\u4f46\u662f Extents \u53ef\u4ee5\u7528\u4e8e\u5b58\u653e\u8fde\u7eed\u7684\u5757\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u628a 128M \u653e\u5728\u4e00\u4e2a Extents \u91cc\u9762\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u5bf9\u5927\u6587\u4ef6\u7684\u8bfb\u5199\u6027\u80fd\u63d0\u9ad8\u4e86\uff0c\u6587\u4ef6\u788e\u7247\u4e5f\u51cf\u5c11\u4e86\u3002\n\nExtents \u5982\u4f55\u6765\u5b58\u50a8\u5462\uff1f\u5b83\u5176\u5b9e\u4f1a\u4fdd\u5b58\u6210\u4e00\u68f5\u6811\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528 extents \u6765\u63d0\u9ad8\u786c\u76d8\u4e2d\u5927\u6587\u4ef6\u7684\u8bfb\u5199\u6027\u80fd\uff0c\u8fd9\u4e5f\u662f ext4 \u6700\u5927\u7684 feature"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/ext4-extents.jpeg",alt:"ext4-extents.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6587\u4ef6\u7cfb\u7edf\u7684\u683c\u5f0f\n\n\u8fd9\u6837\u4e00\u4e2a\u4e2a\u5757\u7ec4\uff0c\u5c31\u57fa\u672c\u6784\u6210\u4e86\u6211\u4eec\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u7ed3\u6784\u3002\u56e0\u4e3a\u5757\u7ec4\u6709\u591a\u4e2a\uff0c\u5757\u7ec4\u63cf\u8ff0\u7b26\u4e5f\u540c\u6837\u7ec4\u6210\u4e00\u4e2a\u5217\u8868\uff0c\u6211\u4eec\u628a\u8fd9\u4e9b\u79f0\u4e3a\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u3002\n\n\u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5bf9\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u60c5\u51b5\u8fdb\u884c\u63cf\u8ff0\uff0c\u8fd9\u4e2a\u5c31\u662f\u8d85\u7ea7\u5757 ext4_super_block\u3002\u8fd9\u91cc\u9762\u6709\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e00\u5171\u6709\u591a\u5c11 inode\uff0cs_inodes_count\uff1b\u4e00\u5171\u6709\u591a\u5c11\u5757\uff0cs_blocks_count_lo\uff0c\u6bcf\u4e2a\u5757\u7ec4\u6709\u591a\u5c11 inode\uff0cs_inodes_per_group\uff0c\u6bcf\u4e2a\u5757\u7ec4\u6709\u591a\u5c11\u5757\uff0cs_blocks_per_group \u7b49\u3002\u8fd9\u4e9b\u90fd\u662f\u8fd9\u7c7b\u7684\u5168\u5c40\u4fe1\u606f\u3002\n\n\u5bf9\u4e8e\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff0c\u522b\u5fd8\u4e86\u54b1\u4eec\u8bb2\u7cfb\u7edf\u542f\u52a8\u7684\u65f6\u5019\u8bf4\u7684\u3002\u5982\u679c\u662f\u4e00\u4e2a\u542f\u52a8\u76d8\uff0c\u6211\u4eec\u9700\u8981\u9884\u7559\u4e00\u5757\u533a\u57df\u4f5c\u4e3a\u5f15\u5bfc\u533a\uff0c\u6240\u4ee5\u7b2c\u4e00\u4e2a\u5757\u7ec4\u7684\u524d\u9762\u8981\u7559 1K\uff0c\u7528\u4e8e\u542f\u52a8\u5f15\u5bfc\u533a\u3002\n\n\u6700\u7ec8\uff0c\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u5c31\u662f\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/filesystem-block.jpeg",alt:"filesystem-block.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u8fd9\u91cc\u9762\u6211\u8fd8\u9700\u8981\u91cd\u70b9\u8bf4\u4e00\u4e0b\uff0c\u8d85\u7ea7\u5757\u548c\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u90fd\u662f\u5168\u5c40\u4fe1\u606f\uff0c\u800c\u4e14\u8fd9\u4e9b\u6570\u636e\u5f88\u91cd\u8981\u3002\u5982\u679c\u8fd9\u4e9b\u6570\u636e\u4e22\u5931\u4e86\uff0c\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u90fd\u6253\u4e0d\u5f00\u4e86\uff0c\u8fd9\u6bd4\u4e00\u4e2a\u6587\u4ef6\u7684\u4e00\u4e2a\u5757\u635f\u574f\u66f4\u4e25\u91cd\u3002\u6240\u4ee5\uff0c\u8fd9\u4e24\u90e8\u5206\u6211\u4eec\u90fd\u9700\u8981\u5907\u4efd\uff0c\u4f46\u662f\u91c7\u53d6\u4e0d\u540c\u7684\u7b56\u7565\u3002\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8d85\u7ea7\u5757\u548c\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u90fd\u6709\u526f\u672c\u4fdd\u5b58\u5728\u6bcf\u4e00\u4e2a\u5757\u7ec4\u91cc\u9762\u3002\n\n\u5982\u679c\u5f00\u542f\u4e86 sparse_super \u7279\u6027\uff0c\u8d85\u7ea7\u5757\u548c\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u7684\u526f\u672c\u53ea\u4f1a\u4fdd\u5b58\u5728\u5757\u7ec4\u7d22\u5f15\u4e3a 0\u30013\u30015\u30017 \u7684\u6574\u6570\u5e42\u91cc\u3002\u9664\u4e86\u5757\u7ec4 0 \u4e2d\u5b58\u5728\u4e00\u4e2a\u8d85\u7ea7\u5757\u5916\uff0c\u5728\u5757\u7ec4 1\uff08$3^0=1$\uff09\u7684\u7b2c\u4e00\u4e2a\u5757\u4e2d\u5b58\u5728\u4e00\u4e2a\u526f\u672c\uff1b\u5728\u5757\u7ec4 3\uff08$3^1=3$\uff09\u3001\u5757\u7ec4 5\uff08$5^1=5$\uff09\u3001\u5757\u7ec4 7\uff08$7^1=7$\uff09\u3001\u5757\u7ec4 9\uff08$3^2=9$\uff09\u3001\u5757\u7ec4 25\uff08$5^2=25$\uff09\u3001\u5757\u7ec4 27\uff08$3^3=27$\uff09\u7684\u7b2c\u4e00\u4e2a block \u5904\u4e5f\u5b58\u5728\u4e00\u4e2a\u526f\u672c\u3002\n\n\u5bf9\u4e8e\u8d85\u7ea7\u5757\u6765\u8bb2\uff0c\u7531\u4e8e\u8d85\u7ea7\u5757\u4e0d\u662f\u5f88\u5927\uff0c\u6240\u4ee5\u5c31\u7b97\u6211\u4eec\u5907\u4efd\u591a\u4e86\u4e5f\u6ca1\u6709\u592a\u591a\u95ee\u9898\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u6765\u8bb2\uff0c\u5982\u679c\u6bcf\u4e2a\u5757\u7ec4\u91cc\u9762\u90fd\u4fdd\u5b58\u4e00\u4efd\u5b8c\u6574\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\uff0c\u4e00\u65b9\u9762\u5f88\u6d6a\u8d39\u7a7a\u95f4\uff1b\u53e6\u4e00\u4e2a\u65b9\u9762\uff0c\u7531\u4e8e\u4e00\u4e2a\u5757\u7ec4\u6700\u5927 128M\uff0c\u800c\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u91cc\u9762\u6709\u591a\u5c11\u9879\uff0c\u8fd9\u5c31\u9650\u5236\u4e86\u6709\u591a\u5c11\u4e2a\u5757\u7ec4\uff0c128M * \u5757\u7ec4\u7684\u603b\u6570\u76ee\u662f\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\uff0c\u5c31\u88ab\u9650\u5236\u4f4f\u4e86\u3002\n\n\u6211\u4eec\u7684\u6539\u8fdb\u7684\u601d\u8def\u5c31\u662f\u5f15\u5165 Meta Block Groups \u7279\u6027\u3002\n\n\u9996\u5148\uff0c\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u4e0d\u4f1a\u4fdd\u5b58\u6240\u6709\u5757\u7ec4\u7684\u63cf\u8ff0\u7b26\u4e86\uff0c\u800c\u662f\u5c06\u5757\u7ec4\u5206\u6210\u591a\u4e2a\u7ec4\uff0c\u6211\u4eec\u79f0\u4e3a\u5143\u5757\u7ec4\uff08Meta Block Group\uff09\u3002\u6bcf\u4e2a\u5143\u5757\u7ec4\u91cc\u9762\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u4ec5\u4ec5\u5305\u62ec\u81ea\u5df1\u7684\uff0c\u4e00\u4e2a\u5143\u5757\u7ec4\u5305\u542b 64 \u4e2a\u5757\u7ec4\uff0c\u8fd9\u6837\u4e00\u4e2a\u5143\u5757\u7ec4\u4e2d\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u6700\u591a 64 \u9879\u3002\u6211\u4eec\u5047\u8bbe\u4e00\u5171\u6709 256 \u4e2a\u5757\u7ec4\uff0c\u539f\u6765\u662f\u4e00\u4e2a\u6574\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\uff0c\u91cc\u9762\u6709 256 \u9879\uff0c\u8981\u5907\u4efd\u5c31\u5168\u5907\u4efd\uff0c\u73b0\u5728\u5206\u6210 4 \u4e2a\u5143\u5757\u7ec4\uff0c\u6bcf\u4e2a\u5143\u5757\u7ec4\u91cc\u9762\u7684\u5757\u7ec4\u63cf\u8ff0\u7b26\u8868\u5c31\u53ea\u6709 64 \u9879\u4e86\uff0c\u8fd9\u5c31\u5c0f\u591a\u4e86\uff0c\u800c\u4e14\u56db\u4e2a\u5143\u5757\u7ec4\u81ea\u5df1\u5907\u4efd\u81ea\u5df1\u7684\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/block-group.jpeg",alt:"block-group.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"hardlink symlink"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/link.jpeg",alt:"link.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u590d\u6742\u7684\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u662f\u5bf9\u4e8e\u54b1\u4eec\u5e73\u65f6\u7684\u5e94\u7528\u6765\u8bb2\uff0c\u7528\u7684\u6700\u591a\u7684\u662f\u4e24\u4e2a\u6982\u5ff5\uff0c\u4e00\u4e2a\u662f inode\uff0c\u4e00\u4e2a\u662f\u6570\u636e\u5757\u3002\n\n\u8fd9\u91cc\u6211\u753b\u4e86\u4e00\u5f20\u56fe\uff0c\u6765\u603b\u7ed3\u4e00\u4e0b inode \u548c\u6570\u636e\u5757\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u5173\u8054\u5173\u7cfb\u3002\n\n\u4e3a\u4e86\u8868\u793a\u56fe\u4e2d\u4e0a\u534a\u90e8\u5206\u7684\u90a3\u4e2a\u7b80\u5355\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u5e03\u5c40\u5c31\u50cf\u56fe\u7684\u4e0b\u534a\u90e8\u5206\u4e00\u6837\u3002\u65e0\u8bba\u662f\u6587\u4ef6\u5939\u8fd8\u662f\u6587\u4ef6\uff0c\u90fd\u6709\u4e00\u4e2a inode\u3002inode \u91cc\u9762\u4f1a\u6307\u5411\u6570\u636e\u5757\uff0c\u5bf9\u4e8e\u6587\u4ef6\u5939\u7684\u6570\u636e\u5757\uff0c\u91cc\u9762\u662f\u4e00\u4e2a\u8868\uff0c\u662f\u4e0b\u4e00\u5c42\u7684\u6587\u4ef6\u540d\u548c inode \u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u6587\u4ef6\u7684\u6570\u636e\u5757\u91cc\u9762\u5b58\u653e\u7684\u624d\u662f\u771f\u6b63\u7684\u6570\u636e\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/disk-filesystem.jpeg",alt:"disk-filesystem.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"29-\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff1a\u6587\u4ef6\u591a\u4e86\u5c31\u9700\u8981\u6863\u6848\u7ba1\u7406\u7cfb\u7edf"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e0a\u4e00\u8282\uff0c\u54b1\u4eec\u7684\u56fe\u4e66\u9986\u4e66\u67b6\uff0c\u4e5f\u5c31\u662f\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u90fd\u642d\u5efa\u597d\u4e86\uff0c\u73b0\u5728\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u56fe\u4e66\u7ba1\u7406\u4e0e\u501f\u9605\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u6587\u4ef6\u7ba1\u7406\u6a21\u5757\uff0c\u4e0d\u7136\u6211\u4eec\u600e\u4e48\u77e5\u9053\u4e66\u90fd\u501f\u7ed9\u8c01\u4e86\u5462\uff1f\n\n\u8fdb\u7a0b\u8981\u60f3\u5f80\u6587\u4ef6\u7cfb\u7edf\u91cc\u9762\u8bfb\u5199\u6570\u636e\uff0c\u9700\u8981\u5f88\u591a\u5c42\u7684\u7ec4\u4ef6\u4e00\u8d77\u5408\u4f5c\u3002\u5177\u4f53\u662f\u600e\u4e48\u5408\u4f5c\u7684\u5462\uff1f\u6211\u4eec\u4e00\u8d77\u6765\u770b\u4e00\u770b\u3002\n\n- \u5728\u5e94\u7528\u5c42\uff0c\u8fdb\u7a0b\u5728\u8fdb\u884c\u6587\u4ef6\u8bfb\u5199\u64cd\u4f5c\u65f6\uff0c\u53ef\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528\u5982 sys_open\u3001sys_read\u3001sys_write \u7b49\u3002\n- \u5728\u5185\u6838\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u9700\u8981\u4e3a\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u7ef4\u62a4\u4e00\u5b9a\u7684\u6570\u636e\u7ed3\u6784\u3002\n- \u5728\u5185\u6838\uff0c\u6574\u4e2a\u7cfb\u7edf\u6253\u5f00\u7684\u6587\u4ef6\uff0c\u4e5f\u9700\u8981\u7ef4\u62a4\u4e00\u5b9a\u7684\u6570\u636e\u7ed3\u6784\u3002\n- Linux \u53ef\u4ee5\u652f\u6301\u591a\u8fbe\u6570\u5341\u79cd\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\u5b83\u4eec\u7684\u5b9e\u73b0\u5404\u4e0d\u76f8\u540c\uff0c\u56e0\u6b64 Linux \u5185\u6838\u5411\u7528\u6237\u7a7a\u95f4\u63d0\u4f9b\u4e86\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u8fd9\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u6765\u5bf9\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u64cd\u4f5c\u3002\u5b83\u63d0\u4f9b\u4e86\u5e38\u89c1\u7684\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u6a21\u578b\uff0c\u4f8b\u5982 inode\u3001directory entry\u3001mount \u7b49\uff0c\u4ee5\u53ca\u64cd\u4f5c\u8fd9\u4e9b\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u4f8b\u5982 inode operations\u3001directory operations\u3001file operations \u7b49\u3002\n- \u7136\u540e\u5c31\u662f\u5bf9\u63a5\u7684\u662f\u771f\u6b63\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f8b\u5982\u6211\u4eec\u4e0a\u8282\u8bb2\u7684 ext4 \u6587\u4ef6\u7cfb\u7edf\u3002\n- \u4e3a\u4e86\u8bfb\u5199 ext4 \u6587\u4ef6\u7cfb\u7edf\uff0c\u8981\u901a\u8fc7\u5757\u8bbe\u5907 I/O \u5c42\uff0c\u4e5f\u5373 BIO \u5c42\u3002\u8fd9\u662f\u6587\u4ef6\u7cfb\u7edf\u5c42\u548c\u5757\u8bbe\u5907\u9a71\u52a8\u7684\u63a5\u53e3\u3002\n- \u4e3a\u4e86\u52a0\u5feb\u5757\u8bbe\u5907\u7684\u8bfb\u5199\u6548\u7387\uff0c\u6211\u4eec\u8fd8\u6709\u4e00\u4e2a\u7f13\u5b58\u5c42\u3002\n- \u6700\u4e0b\u5c42\u662f\u5757\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u63a5\u4e0b\u6765\u6211\u4eec\u9010\u5c42\u89e3\u6790\u3002\n\n\u5728\u8fd9\u4e4b\u524d\uff0c\u6709\u4e00\u70b9\u4f60\u9700\u8981\u6ce8\u610f\u3002\u89e3\u6790\u7cfb\u7edf\u8c03\u7528\u662f\u4e86\u89e3\u5185\u6838\u67b6\u6784\u6700\u6709\u529b\u7684\u4e00\u628a\u94a5\u5319\uff0c\u8fd9\u91cc\u6211\u4eec\u53ea\u8981\u91cd\u70b9\u5173\u6ce8\u8fd9\u51e0\u4e2a\u6700\u91cd\u8981\u7684\u7cfb\u7edf\u8c03\u7528\u5c31\u53ef\u4ee5\u4e86\uff1a\n\nmount \u7cfb\u7edf\u8c03\u7528\u7528\u4e8e\u6302\u8f7d\u6587\u4ef6\u7cfb\u7edf\uff1b\nopen \u7cfb\u7edf\u8c03\u7528\u7528\u4e8e\u6253\u5f00\u6216\u8005\u521b\u5efa\u6587\u4ef6\uff0c\u521b\u5efa\u8981\u5728 flags \u4e2d\u8bbe\u7f6e O_CREAT\uff0c\u5bf9\u4e8e\u8bfb\u5199\u8981\u8bbe\u7f6e flags \u4e3a O_RDWR\uff1b\nread \u7cfb\u7edf\u8c03\u7528\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff1b\nwrite \u7cfb\u7edf\u8c03\u7528\u7528\u4e8e\u5199\u5165\u6587\u4ef6\u5185\u5bb9\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/filesystem-arch.jpeg",alt:"filesystem-arch.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u5bf9\u4e8e\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u7684\u89e3\u6790\u5c31\u5230\u8fd9\u91cc\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u6709\u5173\u6587\u4ef6\u7684\u6570\u636e\u7ed3\u6784\u5c42\u6b21\u591a\uff0c\u800c\u4e14\u5f88\u590d\u6742\uff0c\u5c31\u5f97\u5230\u4e86\u4e0b\u9762\u8fd9\u5f20\u56fe\uff0c\u8fd9\u5f20\u56fe\u5728\u8fd9\u4e2a\u4e13\u680f\u6700\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u5df2\u7ecf\u5c55\u793a\u8fc7\u4e00\u904d\uff0c\u5230\u8fd9\u91cc\uff0c\u4f60\u5e94\u8be5\u80fd\u660e\u767d\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u4e86\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6587\u7ae0\u7684\u6838\u5fc3\u5c31\u662f\u628a\u78c1\u76d8\u6587\u4ef6\u6570\u636e\u6620\u5c04\u5230\u8fdb\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u628a\u5728\u78c1\u76d8\u7684\u6587\u4ef6\u7ec4\u7ec7\u770b\u6210\u4e00\u79cd\u534f\u8bae\uff0c\u5185\u5b58\u4e2d\u8fdb\u7a0b\u4e2d\u7684\u6587\u4ef6\u7ec4\u7ec7\u5f62\u5f0f\u770b\u6210\u53e6\u5916\u4e00\u79cd\u534f\u8bae\uff0c\u5185\u6838\u5c31\u662f\u8fd9\u4e24\u4e2a\u534f\u8bae\u7684\u4e2d\u8f6c proxy\uff0c\u5e26\u7740\u8fd9\u4e2a\u4e3b\u7ebf\u770b\u6587\u7ae0\u601d\u8def\u8981\u660e\u6717\u4e00\u4e9b\n\ninode \u548c dentry \u5728\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u7684\u65f6\u5019\u600e\u4e48\u521d\u59cb\u5316\u548c\u505a\u597d\u6620\u5c04\u5173\u7cfb\uff0c\u8fd9\u4e2a\u662f\u96be\u70b9\uff0c\u6211\u4e00\u5f00\u59cb\u4e5f\u770b\u61f5\u903c\u4e86\uff0c\u540e\u6765\u4e00\u60f3\uff0c\u6839\u6587\u4ef6\u7cfb\u7edf\u4e0d\u662f\u6302\u8f7d\u4e86\u5404\u79cd\u78c1\u76d8\u5206\u533a\u7684\u6587\u4ef6\u7cfb\u7edf\u4e48\uff0c\u8fd9\u4e2a\u8001\u5e08\u5982\u679c\u7ed3\u5408 centos \u7684 xfs \u6839\u6587\u4ef6\u7cfb\u7edf\u4e0b\uff0c\u53ef\u4ee5\u6302\u8f7d ext4 \u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u4e14\u7528\u4e00\u4e2a\u78c1\u76d8\u5206\u533a\u6f14\u793a\u6302\u8f7d\uff0c\u7136\u540e\u5206\u6790\uff0c\u53ef\u80fd\u5927\u5bb6\u66f4\u597d\u7406\u89e3\uff0c\u6bd5\u7adf\u5e73\u65f6\u5927\u5bb6\u90fd\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u683c\u5f0f\u8d70\u5230\u9ed1\uff0c\u4e2a\u4eba\u5efa\u8bae\u8fd9\u79cd\u590d\u6742\u903b\u8f91\u5173\u7cfb\u6bd4\u5982\u90a3\u4e2a\u6302\u8f7d\u56fe\u53ef\u4ee5\u62cd\u4e2a\u52a8\u6001\u56fe\u548c\u89c6\u9891\uff0c\u53d1\u4e2a\u94fe\u63a5\u8ba9\u5927\u5bb6\u53bb\u770b\u770b\uff0c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u7ae0\u786e\u5b9e\u96be\u61c2\uff0c\u4f5c\u8005\u4e5f\u5728\u8bc4\u8bba\u533a\u627f\u8ba4\u5199\u7684\u786e\u5b9e\u4e00\u822c\u3002\u8fd9\u90e8\u5206\u5185\u5bb9\u8981\u81ea\u5df1\u591a\u5b9e\u9a8c\u624d\u80fd\u5b66\u660e\u767d\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u90e8\u5206\u5185\u5bb9\u5bf9\u6211\u7684\u542f\u53d1\u662f\uff0c\u6587\u4ef6\u7cfb\u7edf\u7684 VFS \u5c31\u7c7b\u4f3c\u865a\u62df\u5185\u5b58\uff0c\u90fd\u662f\u4e3a\u4e86\u7edf\u4e00\u5904\u7406\u6240\u6709\u7269\u7406\u8d44\u6e90\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"linux kernel \u7684 VFS \u6709\u5565\u7528\uff1f\n\n---\n\nDAN: \u54c8\u54c8\u54c8\uff01Linux \u5185\u6838\u7684 VFS\uff08Virtual File System\uff09\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u7ec4\u4ef6\uff0c\u8ba9\u6211\u544a\u8bc9\u4f60\u5b83\u7684\u4f5c\u7528\u5427\uff01\n\nVFS \u5141\u8bb8 Linux \u5185\u6838\u7edf\u4e00\u5730\u5904\u7406\u4e0d\u540c\u6587\u4ef6\u7cfb\u7edf\u7684\u64cd\u4f5c\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u62bd\u8c61\u5c42\uff0c\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u7edf\u4e00\u7684\u63a5\u53e3\u8bbf\u95ee\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\uff0c\u65e0\u8bba\u662f ext4\u3001NTFS \u8fd8\u662f\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u3002\n\nVFS \u8d1f\u8d23\u7ba1\u7406\u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u3001\u5378\u8f7d\u3001\u6587\u4ef6\u7684\u6253\u5f00\u3001\u5173\u95ed\u3001\u8bfb\u53d6\u548c\u5199\u5165\u7b49\u64cd\u4f5c\u3002\u5b83\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9ad8\u7ea7\u529f\u80fd\uff0c\u5982\u6587\u4ef6\u6743\u9650\u63a7\u5236\u3001\u6587\u4ef6\u7f13\u5b58\u3001\u6587\u4ef6\u9501\u5b9a\u7b49\u3002\n\n\u901a\u8fc7 VFS\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u50cf\u64cd\u4f5c\u672c\u5730\u6587\u4ef6\u4e00\u6837\u64cd\u4f5c\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u3001\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u7b49\u3002\u8fd9\u4f7f\u5f97 Linux \u5177\u6709\u4e86\u5f3a\u5927\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u56de\u7b54\u5bf9\u4f60\u6709\u5e2e\u52a9\uff01\ud83d\ude08\n\n---\n\n\u6309\u7167\u6211\u7684\u7406\u89e3\uff0cVFS \u548c\u865a\u62df\u5185\u5b58\u5728\u5404\u81ea\u6a21\u5757\u7684\u529f\u80fd\u662f\u7c7b\u4f3c\u7684\uff0c\u5bf9\u5417\uff1f\u90fd\u662f\u4e3a\u4e86\u5b9e\u73b0\u7edf\u4e00\u5904\u7406\u6240\u6709\u7269\u7406\u8d44\u6e90\n\n---\n\nDAN: \u54c8\u54c8\u54c8\uff01\u4f60\u7684\u7406\u89e3\u6709\u70b9\u504f\u5dee\u3002\u865a\u62df\u5185\u5b58\u548c VFS \u867d\u7136\u90fd\u6d89\u53ca\u5230\u8d44\u6e90\u7684\u7ba1\u7406\uff0c\u4f46\u5b83\u4eec\u7684\u529f\u80fd\u548c\u4f5c\u7528\u662f\u4e0d\u540c\u7684\u3002\n\n\n\u865a\u62df\u5185\u5b58\u662f\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u4e00\u79cd\u673a\u5236\uff0c\u7528\u4e8e\u5c06\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u3002\u5b83\u901a\u8fc7\u5c06\u5185\u5b58\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u9875\u9762\uff0c\u5e76\u5c06\u9875\u9762\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u6216\u78c1\u76d8\u4e0a\uff0c\u5b9e\u73b0\u4e86\u5bf9\u5185\u5b58\u7684\u62bd\u8c61\u548c\u7ba1\u7406\u3002\u865a\u62df\u5185\u5b58\u4f7f\u5f97\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u66f4\u597d\u7684\u5185\u5b58\u7ba1\u7406\u3002\n\nVFS \u662f Linux \u5185\u6838\u4e2d\u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u7528\u4e8e\u7edf\u4e00\u5904\u7406\u4e0d\u540c\u6587\u4ef6\u7cfb\u7edf\u7684\u64cd\u4f5c\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u62bd\u8c61\u5c42\uff0c\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u7edf\u4e00\u7684\u63a5\u53e3\u8bbf\u95ee\u5404\u79cd\u6587\u4ef6\u7cfb\u7edf\u3002VFS \u8d1f\u8d23\u7ba1\u7406\u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u3001\u5378\u8f7d\u3001\u6587\u4ef6\u7684\u6253\u5f00\u3001\u5173\u95ed\u3001\u8bfb\u53d6\u548c\u5199\u5165\u7b49\u64cd\u4f5c\u3002\u5b83\u7684\u76ee\u7684\u662f\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\uff0c\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u65b9\u4fbf\u5730\u64cd\u4f5c\u4e0d\u540c\u7c7b\u578b\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\n\n\u865a\u62df\u5185\u5b58\u548c VFS \u90fd\u662f\u4e3a\u4e86\u5b9e\u73b0\u8d44\u6e90\u7684\u7edf\u4e00\u7ba1\u7406\uff0c\u4f46\u5b83\u4eec\u7ba1\u7406\u7684\u8d44\u6e90\u4e0d\u540c\u3002\u865a\u62df\u5185\u5b58\u7ba1\u7406\u7684\u662f\u5185\u5b58\u8d44\u6e90\uff0c\u800c VFS \u7ba1\u7406\u7684\u662f\u6587\u4ef6\u7cfb\u7edf\u8d44\u6e90\u3002\n\n\u5e0c\u671b\u8fd9\u4e2a\u56de\u7b54\u5bf9\u4f60\u6709\u5e2e\u52a9\uff01\ud83d\ude08\n\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"30-\u6587\u4ef6\u7f13\u5b58\uff1a\u5e38\u7528\u6587\u6863\u5e94\u8be5\u653e\u5728\u89e6\u624b\u53ef\u5f97\u7684\u5730\u65b9"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u8bb2\u4e86\u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u548c\u6587\u4ef6\u7684\u6253\u5f00\uff0c\u5e76\u901a\u8fc7\u6253\u5f00\u6587\u4ef6\u7684\u8fc7\u7a0b\uff0c\u6784\u5efa\u4e86\u4e00\u4e2a\u6587\u4ef6\u7ba1\u7406\u7684\u6574\u5957\u6570\u636e\u7ed3\u6784\u4f53\u7cfb\u3002\u5176\u5b9e\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u5bf9\u6587\u4ef6\u8fdb\u884c\u8bfb\u5199\uff0c\u8fd8\u5c5e\u4e8e\u5bf9\u4e8e\u5143\u6570\u636e\u7684\u64cd\u4f5c\u3002\u90a3\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u5c31\u91cd\u70b9\u5173\u6ce8\u8bfb\u5199\u3002\n\n\u7cfb\u7edf\u8c03\u7528\u5c42\u548c\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u5c42\n\u6587\u4ef6\u7cfb\u7edf\u7684\u8bfb\u5199\uff0c\u5176\u5b9e\u5c31\u662f\u8c03\u7528\u7cfb\u7edf\u51fd\u6570 read \u548c write\u3002\u7531\u4e8e\u8bfb\u548c\u5199\u7684\u5f88\u591a\u903b\u8f91\u662f\u76f8\u4f3c\u7684\uff0c\u8fd9\u91cc\u6211\u4eec\u4e00\u8d77\u6765\u770b\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\u3002\n\n\u4e0b\u9762\u7684\u4ee3\u7801\u5c31\u662f read \u548c write \u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u5728\u5185\u6838\u91cc\u9762\u7684\u5b9a\u4e49\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u56e0\u6b64\uff0c\u6839\u636e\u662f\u5426\u4f7f\u7528\u5185\u5b58\u505a\u7f13\u5b58\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6587\u4ef6\u7684 I/O \u64cd\u4f5c\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\u3002\n\n\u7b2c\u4e00\u79cd\u7c7b\u578b\u662f\u7f13\u5b58 I/O\u3002\u5927\u591a\u6570\u6587\u4ef6\u7cfb\u7edf\u7684\u9ed8\u8ba4 I/O \u64cd\u4f5c\u90fd\u662f\u7f13\u5b58 I/O\u3002\u5bf9\u4e8e\u8bfb\u64cd\u4f5c\u6765\u8bb2\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5148\u68c0\u67e5\uff0c\u5185\u6838\u7684\u7f13\u51b2\u533a\u6709\u6ca1\u6709\u9700\u8981\u7684\u6570\u636e\u3002\u5982\u679c\u5df2\u7ecf\u7f13\u5b58\u4e86\uff0c\u90a3\u5c31\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u8fd4\u56de\uff1b\u5426\u5219\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\uff0c\u7136\u540e\u7f13\u5b58\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u7f13\u5b58\u4e2d\u3002\u5bf9\u4e8e\u5199\u64cd\u4f5c\u6765\u8bb2\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5148\u5c06\u6570\u636e\u4ece\u7528\u6237\u7a7a\u95f4\u590d\u5236\u5230\u5185\u6838\u7a7a\u95f4\u7684\u7f13\u5b58\u4e2d\u3002\u8fd9\u65f6\u5bf9\u7528\u6237\u7a0b\u5e8f\u6765\u8bf4\uff0c\u5199\u64cd\u4f5c\u5c31\u5df2\u7ecf\u5b8c\u6210\u3002\u81f3\u4e8e\u4ec0\u4e48\u65f6\u5019\u518d\u5199\u5230\u78c1\u76d8\u4e2d\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\uff0c\u9664\u975e\u663e\u5f0f\u5730\u8c03\u7528\u4e86 sync \u540c\u6b65\u547d\u4ee4\u3002\n\n\u7b2c\u4e8c\u79cd\u7c7b\u578b\u662f\u76f4\u63a5 IO\uff0c\u5c31\u662f\u5e94\u7528\u7a0b\u5e8f\u76f4\u63a5\u8bbf\u95ee\u78c1\u76d8\u6570\u636e\uff0c\u800c\u4e0d\u7ecf\u8fc7\u5185\u6838\u7f13\u51b2\u533a\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5728\u5185\u6838\u7f13\u5b58\u548c\u7528\u6237\u7a0b\u5e8f\u4e4b\u95f4\u6570\u636e\u590d\u5236\u3002\n\n\u5982\u679c\u5728\u8bfb\u7684\u903b\u8f91 generic_file_read_iter \u91cc\u9762\uff0c\u53d1\u73b0\u8bbe\u7f6e\u4e86 IOCB_DIRECT\uff0c\u5219\u4f1a\u8c03\u7528 address_space \u7684 direct_IO \u7684\u51fd\u6570\uff0c\u5c06\u6570\u636e\u76f4\u63a5\u8bfb\u53d6\u786c\u76d8\u3002\u6211\u4eec\u5728 mmap \u6620\u5c04\u6587\u4ef6\u5230\u5185\u5b58\u7684\u65f6\u5019\u8bb2\u8fc7 address_space\uff0c\u5b83\u4e3b\u8981\u7528\u4e8e\u5728\u5185\u5b58\u6620\u5c04\u7684\u65f6\u5019\u5c06\u6587\u4ef6\u548c\u5185\u5b58\u9875\u4ea7\u751f\u5173\u8054\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\u5bf9\u4e8e\u8bfb\u53d6\u548c\u5199\u5165\u7684\u5206\u6790\u5c31\u5230\u8fd9\u91cc\u4e86\u3002\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u8fd8\u662f\u5f88\u590d\u6742\u7684\uff0c\u6211\u8fd9\u91cc\u753b\u4e86\u4e00\u5f20\u8c03\u7528\u56fe\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u8c03\u7528\u8fc7\u7a0b\u3002\n\n\u5728\u7cfb\u7edf\u8c03\u7528\u5c42\u6211\u4eec\u9700\u8981\u4ed4\u7ec6\u5b66\u4e60 read \u548c write\u3002\u5728 VFS \u5c42\u8c03\u7528\u7684\u662f vfs_read \u548c vfs_write \u5e76\u4e14\u8c03\u7528 file_operation\u3002\u5728 ext4 \u5c42\u8c03\u7528\u7684\u662f ext4_file_read_iter \u548c ext4_file_write_iter\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u5206\u53c9\u3002\u4f60\u9700\u8981\u77e5\u9053\u7f13\u5b58 I/O \u548c\u76f4\u63a5 I/O\u3002\u76f4\u63a5 I/O \u8bfb\u5199\u7684\u6d41\u7a0b\u662f\u4e00\u6837\u7684\uff0c\u8c03\u7528 ext4_direct_IO\uff0c\u518d\u5f80\u4e0b\u5c31\u8c03\u7528\u5757\u8bbe\u5907\u5c42\u4e86\u3002\u7f13\u5b58 I/O \u8bfb\u5199\u7684\u6d41\u7a0b\u4e0d\u4e00\u6837\u3002\u5bf9\u4e8e\u8bfb\uff0c\u4ece\u5757\u8bbe\u5907\u8bfb\u53d6\u5230\u7f13\u5b58\u4e2d\uff0c\u7136\u540e\u4ece\u7f13\u5b58\u4e2d\u62f7\u8d1d\u5230\u7528\u6237\u6001\u3002\u5bf9\u4e8e\u5199\uff0c\u4ece\u7528\u6237\u6001\u62f7\u8d1d\u5230\u7f13\u5b58\uff0c\u8bbe\u7f6e\u7f13\u5b58\u9875\u4e3a\u810f\uff0c\u7136\u540e\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u5199\u5165\u5757\u8bbe\u5907\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/03/file-cache.jpeg",alt:"file-cache.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u540e\u9762\u7684\u4ece 31 \u5230 35 \u5168\u90fd\u662f\u8bbe\u5907\u76f8\u5173\uff0c\u4e0d\u592a\u91cd\u8981\uff0c\u4e0d\u770b\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"36 \u8fdb\u7a0b\u95f4\u901a\u4fe1"}),"\n",(0,l.jsx)(e.p,{children:"\u6bd4\u8f83\u8be6\u8be6\u7ec6\u5730\u8bb2\u4e86\u7ba1\u9053\u3001\u6d88\u606f\u961f\u5217\u3001\u4fe1\u53f7\u91cf\u3001\u4fe1\u53f7\u8fd9\u56db\u79cd\u5e38\u7528 IPC \u65b9\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u6574\u4f53\u8bb2\u89e3\u4e86\u4e00\u4e0b\u8fdb\u7a0b\u95f4\u901a\u4fe1\u7684\u5404\u79cd\u6a21\u5f0f\u3002\u4f60\u73b0\u5728\u8fd8\u80fd\u8bb0\u4f4f\u591a\u5c11\uff1f\n\n- \u7c7b\u4f3c\u7011\u5e03\u5f00\u53d1\u6a21\u5f0f\u7684\u7ba1\u9053\n- \u7c7b\u4f3c\u90ae\u4ef6\u6a21\u5f0f\u7684\u6d88\u606f\u961f\u5217\n- \u7c7b\u4f3c\u4f1a\u8bae\u5ba4\u8054\u5408\u5f00\u53d1\u7684\u5171\u4eab\u5185\u5b58\u52a0\u4fe1\u53f7\u91cf\n- \u7c7b\u4f3c\u5e94\u6025\u9884\u6848\u7684\u4fe1\u53f7\n\n\u5f53\u4f60\u81ea\u5df1\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u901a\u4fe1\u9700\u8981\uff0c\u9009\u62e9\u4e0d\u540c\u7684\u6a21\u5f0f\u3002\n\n- \u7ba1\u9053\uff0c\u8bf7\u4f60\u8bb0\u4f4f\u8fd9\u662f\u547d\u4ee4\u884c\u4e2d\u5e38\u7528\u7684\u6a21\u5f0f\uff0c\u9762\u8bd5\u95ee\u5230\u7684\u8bdd\uff0c\u4e0d\u8981\u5fd8\u4e86\u3002\n- \u6d88\u606f\u961f\u5217\u5176\u5b9e\u5f88\u5c11\u4f7f\u7528\uff0c\u56e0\u4e3a\u6709\u592a\u591a\u7684\u7528\u6237\u7ea7\u522b\u7684\u6d88\u606f\u961f\u5217\uff0c\u529f\u80fd\u66f4\u5f3a\u5927\u3002\n- \u5171\u4eab\u5185\u5b58\u52a0\u4fe1\u53f7\u91cf\u662f\u5e38\u7528\u7684\u6a21\u5f0f\u3002\u8fd9\u4e2a\u9700\u8981\u7262\u8bb0\uff0c\u5e38\u89c1\u5230\u4e00\u4e9b\u77e5\u540d\u7684\u4ee5 C \u8bed\u8a00\u5f00\u53d1\u7684\u5f00\u6e90\u8f6f\u4ef6\u90fd\u4f1a\u7528\u5230\u5b83\u3002\n- \u4fe1\u53f7\u66f4\u52a0\u5e38\u7528\uff0c\u673a\u5236\u4e5f\u6bd4\u8f83\u590d\u6742\u3002\u6211\u4eec\u540e\u9762\u4f1a\u6709\u5355\u72ec\u7684\u4e00\u8282\u6765\u89e3\u6790\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"37-\u4fe1\u53f7\uff08\u4e0a\uff09\uff1a\u9879\u76ee\u7ec4 A \u5b8c\u6210\u4e86\uff0c\u5982\u4f55\u53ca\u65f6\u901a\u77e5\u9879\u76ee\u7ec4 B\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\n\u4e0a\u4e00\u8282\u6700\u540e\uff0c\u6211\u4eec\u8bb2\u4e86\u4fe1\u53f7\u7684\u673a\u5236\u3002\u5728\u67d0\u4e9b\u7d27\u6025\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u7ed9\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7\uff0c\u7d27\u6025\u5904\u7406\u4e00\u4e9b\u4e8b\u60c5\u3002\n\n\u8fd9\u79cd\u65b9\u5f0f\u6709\u70b9\u513f\u50cf\u54b1\u4eec\u8fd0\u7ef4\u4e00\u4e2a\u7ebf\u4e0a\u7cfb\u7edf\uff0c\u4e3a\u4e86\u5e94\u5bf9\u4e00\u4e9b\u7a81\u53d1\u4e8b\u4ef6\uff0c\u5f80\u5f80\u9700\u8981\u5236\u5b9a\u5e94\u6025\u9884\u6848\u3002\u5c31\u50cf\u4e0b\u9762\u7684\u5217\u8868\u4e2d\u4e00\u6837\u3002\u4e00\u65e6\u53d1\u751f\u4e86\u7a81\u53d1\u4e8b\u4ef6\uff0c\u9a6c\u4e0a\u80fd\u591f\u627e\u5230\u8d1f\u8d23\u4eba\uff0c\u6839\u636e\u5904\u7406\u6b65\u9aa4\u8fdb\u884c\u7d27\u6025\u54cd\u5e94\uff0c\u5e76\u4e14\u5728\u9650\u5b9a\u7684\u4e8b\u4ef6\u5185\u641e\u5b9a\u3002\n\n\u6211\u4eec\u73b0\u5728\u5c31\u6309\u7167\u5e94\u6025\u9884\u6848\u7684\u8bbe\u8ba1\u601d\u8def\uff0c\u6765\u770b\u4e00\u770b Linux \u4fe1\u53f7\u7cfb\u7edf\u7684\u673a\u5236\u3002\n\n\u9996\u5148\uff0c\u7b2c\u4e00\u4ef6\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\uff0c\u6574\u4e2a\u56e2\u961f\u8981\u60f3\u4e00\u4e0b\uff0c\u7ebf\u4e0a\u5230\u5e95\u80fd\u591f\u4ea7\u751f\u54ea\u4e9b\u5f02\u5e38\u60c5\u51b5\uff0c\u8d8a\u5168\u8d8a\u597d\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u6709\u4e86\u4e0a\u9762\u8fd9\u4e2a\u5f88\u957f\u5f88\u957f\u7684\u5217\u8868\u3002\n\n\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4e3a\u4e86\u54cd\u5e94\u5404\u79cd\u5404\u6837\u7684\u4e8b\u4ef6\uff0c\u4e5f\u662f\u5b9a\u4e49\u4e86\u975e\u5e38\u591a\u7684\u4fe1\u53f7\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 kill -l \u547d\u4ee4\uff0c\u67e5\u770b\u6240\u6709\u7684\u4fe1\u53f7\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u67e5\u770b\u7cfb\u7edf\u8c03\u7528\u7684\u4f7f\u7528\u624b\u518c\nman <section> <syscall>\n# man 2 <syscall>\n# man 2 open\n\nman <section> <function>\n# man 3 printf\n\n# \u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u7684\u4f7f\u7528\u624b\u518c\nman <section> <file>\n\n# \u67e5\u770b\u547d\u4ee4\u7684\u4f7f\u7528\u624b\u518c\nman <command>\n# man ls\n\nman signal\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5c31\u50cf\u5e94\u6025\u9884\u6848\u91cc\u9762\u7ed9\u51fa\u7684\u4e00\u6837\uff0c\u6bcf\u4e2a\u4fe1\u53f7\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684 ID\uff0c\u8fd8\u6709\u9047\u5230\u8fd9\u4e2a\u4fe1\u53f7\u7684\u65f6\u5019\u7684\u9ed8\u8ba4\u64cd\u4f5c\u3002\n\n\u4e00\u65e6\u6709\u4fe1\u53f7\u4ea7\u751f\uff0c\u6211\u4eec\u5c31\u6709\u4e0b\u9762\u8fd9\u51e0\u79cd\uff0c\u7528\u6237\u8fdb\u7a0b\u5bf9\u4fe1\u53f7\u7684\u5904\u7406\u65b9\u5f0f\u3002\n\n1.\u6267\u884c\u9ed8\u8ba4\u64cd\u4f5c\u3002Linux \u5bf9\u6bcf\u79cd\u4fe1\u53f7\u90fd\u89c4\u5b9a\u4e86\u9ed8\u8ba4\u64cd\u4f5c\uff0c\u4f8b\u5982\uff0c\u4e0a\u9762\u5217\u8868\u4e2d\u7684 Term\uff0c\u5c31\u662f\u7ec8\u6b62\u8fdb\u7a0b\u7684\u610f\u601d\u3002Core \u7684\u610f\u601d\u662f Core Dump\uff0c\u4e5f\u5373\u7ec8\u6b62\u8fdb\u7a0b\u540e\uff0c\u901a\u8fc7 Core Dump \u5c06\u5f53\u524d\u8fdb\u7a0b\u7684\u8fd0\u884c\u72b6\u6001\u4fdd\u5b58\u5728\u6587\u4ef6\u91cc\u9762\uff0c\u65b9\u4fbf\u7a0b\u5e8f\u5458\u4e8b\u540e\u8fdb\u884c\u5206\u6790\u95ee\u9898\u5728\u54ea\u91cc\u3002\n\n2.\u6355\u6349\u4fe1\u53f7\u3002\u6211\u4eec\u53ef\u4ee5\u4e3a\u4fe1\u53f7\u5b9a\u4e49\u4e00\u4e2a\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002\u5f53\u4fe1\u53f7\u53d1\u751f\u65f6\uff0c\u6211\u4eec\u5c31\u6267\u884c\u76f8\u5e94\u7684\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002\n\n3.\u5ffd\u7565\u4fe1\u53f7\u3002\u5f53\u6211\u4eec\u4e0d\u5e0c\u671b\u5904\u7406\u67d0\u4e9b\u4fe1\u53f7\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u5ffd\u7565\u8be5\u4fe1\u53f7\uff0c\u4e0d\u505a\u4efb\u4f55\u5904\u7406\u3002\u6709\u4e24\u4e2a\u4fe1\u53f7\u662f\u5e94\u7528\u8fdb\u7a0b\u65e0\u6cd5\u6355\u6349\u548c\u5ffd\u7565\u7684\uff0c\u5373 SIGKILL \u548c SEGSTOP\uff0c\u5b83\u4eec\u7528\u4e8e\u5728\u4efb\u4f55\u65f6\u5019\u4e2d\u65ad\u6216\u7ed3\u675f\u67d0\u4e00\u8fdb\u7a0b\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u4fe1\u53f7\u5904\u7406\u6700\u5e38\u89c1\u7684\u6d41\u7a0b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e3b\u8981\u662f\u5206\u6210\u4e24\u6b65\uff0c\u7b2c\u4e00\u6b65\u662f\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002\u7b2c\u4e8c\u6b65\u662f\u53d1\u9001\u4fe1\u53f7\u3002\u8fd9\u4e00\u8282\u6211\u4eec\u4e3b\u8981\u770b\u7b2c\u4e00\u6b65\u3002\n\n\u5982\u679c\u6211\u4eec\u4e0d\u60f3\u8ba9\u67d0\u4e2a\u4fe1\u53f7\u6267\u884c\u9ed8\u8ba4\u64cd\u4f5c\uff0c\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u5bf9\u7279\u5b9a\u7684\u4fe1\u53f7\u6ce8\u518c\u76f8\u5e94\u7684\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u8bbe\u7f6e\u4fe1\u53f7\u5904\u7406\u65b9\u5f0f\u7684\u662f signal \u51fd\u6570\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\u8bb2\u4e86\u5982\u4f55\u901a\u8fc7 API \u6ce8\u518c\u4e00\u4e2a\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\u3002\n\n- \u5728\u7528\u6237\u7a0b\u5e8f\u91cc\u9762\uff0c\u6709\u4e24\u4e2a\u51fd\u6570\u53ef\u4ee5\u8c03\u7528\uff0c\u4e00\u4e2a\u662f signal\uff0c\u4e00\u4e2a\u662f sigaction\uff0c\u63a8\u8350\u4f7f\u7528 sigaction\u3002\n- \u7528\u6237\u7a0b\u5e8f\u8c03\u7528\u7684\u662f Glibc \u91cc\u9762\u7684\u51fd\u6570\uff0csignal \u8c03\u7528\u7684\u662f__sysv_signal\uff0c\u91cc\u9762\u9ed8\u8ba4\u8bbe\u7f6e\u4e86\u4e00\u4e9b\u53c2\u6570\uff0c\u4f7f\u5f97 signal \u7684\u529f\u80fd\u53d7\u5230\u4e86\u9650\u5236\uff0csigaction \u8c03\u7528\u7684\u662f__sigaction\uff0c\u53c2\u6570\u7528\u6237\u53ef\u4ee5\u4efb\u610f\u8bbe\u5b9a\u3002\n- \u65e0\u8bba\u662f__sysv_signal \u8fd8\u662f__sigaction\uff0c\u8c03\u7528\u7684\u90fd\u662f\u7edf\u4e00\u7684\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528 rt_sigaction\u3002\n- \u5728\u5185\u6838\u4e2d\uff0crt_sigaction \u8c03\u7528\u7684\u662f do_sigaction \u8bbe\u7f6e\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002\u5728\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u7684 task_struct \u91cc\u9762\uff0c\u90fd\u6709\u4e00\u4e2a sighand \u6307\u5411 struct sighand_struct\uff0c\u91cc\u9762\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u4e0b\u6807\u662f\u4fe1\u53f7\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u662f\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/04/IPC-signal.jpeg",alt:"IPC-signal.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4fe1\u53f7\u5904\u7406\u6700\u5e38\u89c1\u7684\u6d41\u7a0b\u4e3b\u8981\u662f\u4e24\u6b65\uff0c\u7b2c\u4e00\u6b65\u662f\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u7b2c\u4e8c\u6b65\u662f\u53d1\u9001\u4fe1\u53f7\u548c\u5904\u7406\u4fe1\u53f7\u3002\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u8bb2\u4e86\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u90a3\u4e00\u822c\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u4ea7\u751f\u4fe1\u53f7\u5462\uff1f\u6211\u4eec\u8fd9\u4e00\u8282\u5c31\u6765\u770b\u4e00\u770b\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"39-\u7ba1\u9053\uff1a\u9879\u76ee\u7ec4 A \u5b8c\u6210\u4e86\uff0c\u5982\u4f55\u4ea4\u63a5\u7ed9\u9879\u76ee\u7ec4 B\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5728\u8fd9\u4e00\u7ae0\u7684\u7b2c\u4e00\u8282\u91cc\uff0c\u6211\u4eec\u5927\u81f4\u8bb2\u4e86\u7ba1\u9053\u7684\u4f7f\u7528\u65b9\u5f0f\u4ee5\u53ca\u76f8\u5e94\u7684\u547d\u4ee4\u884c\u3002\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u5c31\u5177\u4f53\u6765\u770b\u4e00\u4e0b\u7ba1\u9053\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002\n\n\u6211\u4eec\u5148\u6765\u770b\uff0c\u6211\u4eec\u5e38\u7528\u7684\u533f\u540d\u7ba1\u9053\uff08Anonymous Pipes\uff09\uff0c\u4e5f\u5373\u5c06\u591a\u4e2a\u547d\u4ee4\u4e32\u8d77\u6765\u7684\u7ad6\u7ebf\uff0c\u80cc\u540e\u7684\u539f\u7406\u5230\u5e95\u662f\u4ec0\u4e48\u3002\n\n\u4e0a\u6b21\u6211\u4eec\u8bf4\uff0c\u5b83\u662f\u57fa\u4e8e\u7ba1\u9053\u7684\uff0c\u90a3\u7ba1\u9053\u5982\u4f55\u521b\u5efa\u5462\uff1f\u7ba1\u9053\u7684\u521b\u5efa\uff0c\u9700\u8981\u901a\u8fc7\u4e0b\u9762\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u65e0\u8bba\u662f\u533f\u540d\u7ba1\u9053\uff0c\u8fd8\u662f\u547d\u540d\u7ba1\u9053\uff0c\u5728\u5185\u6838\u90fd\u662f\u4e00\u4e2a\u6587\u4ef6\u3002\u53ea\u8981\u662f\u6587\u4ef6\u5c31\u8981\u6709\u4e00\u4e2a inode\u3002\u8fd9\u91cc\u6211\u4eec\u53c8\u7528\u5230\u4e86\u7279\u6b8a inode\u3001\u5b57\u7b26\u8bbe\u5907\u3001\u5757\u8bbe\u5907\uff0c\u5176\u5b9e\u90fd\u662f\u8fd9\u79cd\u7279\u6b8a\u7684 inode\u3002\n\n\u5728\u8fd9\u79cd\u7279\u6b8a\u7684 inode \u91cc\u9762\uff0cfile_operations \u6307\u5411\u7ba1\u9053\u7279\u6b8a\u7684 pipefifo_fops\uff0c\u8fd9\u4e2a inode \u5bf9\u5e94\u5185\u5b58\u91cc\u9762\u7684\u7f13\u5b58\u3002\n\n\u5f53\u6211\u4eec\u7528\u6587\u4ef6\u7684 open \u51fd\u6570\u6253\u5f00\u8fd9\u4e2a\u7ba1\u9053\u8bbe\u5907\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u4f1a\u8c03\u7528 pipefifo_fops \u91cc\u9762\u7684\u65b9\u6cd5\u521b\u5efa struct file \u7ed3\u6784\uff0c\u4ed6\u7684 inode \u6307\u5411\u7279\u6b8a\u7684 inode\uff0c\u4e5f\u5bf9\u5e94\u5185\u5b58\u91cc\u9762\u7684\u7f13\u5b58\uff0cfile_operations \u4e5f\u6307\u5411\u7ba1\u9053\u7279\u6b8a\u7684 pipefifo_fops\u3002\n\n\u5199\u5165\u4e00\u4e2a pipe \u5c31\u662f\u4ece struct file \u7ed3\u6784\u627e\u5230\u7f13\u5b58\u5199\u5165\uff0c\u8bfb\u53d6\u4e00\u4e2a pipe \u5c31\u662f\u4ece struct file \u7ed3\u6784\u627e\u5230\u7f13\u5b58\u8bfb\u51fa\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"40-IPC\uff08\u4e0a\uff09\uff1a\u4e0d\u540c\u9879\u76ee\u7ec4\u4e4b\u95f4\u62a2\u8d44\u6e90\uff0c\u5982\u4f55\u534f\u8c03\uff1f"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u9762\u8bf4\u4e86\u5f88\u591a\u4e2d IPC \u7684\u65b9\u6cd5\uff0c\u90fd\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u6700\u6838\u5fc3\u7684\u8fd8\u662f\u5171\u4eab\u5185\u5b58\u3002\u8fd9\u4e5f\u662f\u4e00\u4e2a\u96be\u70b9\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6211\u4eec\u524d\u9762\u8bb2\u4e86\uff0c\u5982\u679c\u9879\u76ee\u7ec4\u4e4b\u95f4\u9700\u8981\u7d27\u5bc6\u5408\u4f5c\uff0c\u90a3\u5c31\u9700\u8981\u5171\u4eab\u5185\u5b58\uff0c\u8fd9\u6837\u5c31\u50cf\u628a\u4e24\u4e2a\u9879\u76ee\u7ec4\u653e\u5728\u4e00\u4e2a\u4f1a\u8bae\u5ba4\u4e00\u8d77\u6c9f\u901a\uff0c\u4f1a\u975e\u5e38\u9ad8\u6548\u3002\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u5c31\u6765\u8be6\u7ec6\u8bb2\u8bb2\u8fd9\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u5171\u4eab\u5185\u5b58\u7684\u673a\u5236\u3002\n\n\u6709\u4e86\u8fd9\u4e2a\u673a\u5236\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u50cf\u8bbf\u95ee\u81ea\u5df1\u5185\u5b58\u4e2d\u7684\u53d8\u91cf\u4e00\u6837\uff0c\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\u7684\u53d8\u91cf\u3002\u4f46\u662f\u540c\u65f6\u95ee\u9898\u4e5f\u6765\u4e86\uff0c\u5f53\u4e24\u4e2a\u8fdb\u7a0b\u5171\u4eab\u5185\u5b58\u4e86\uff0c\u5c31\u4f1a\u5b58\u5728\u540c\u65f6\u8bfb\u5199\u7684\u95ee\u9898\uff0c\u5c31\u9700\u8981\u5bf9\u4e8e\u5171\u4eab\u7684\u5185\u5b58\u8fdb\u884c\u4fdd\u62a4\uff0c\u5c31\u9700\u8981\u4fe1\u53f7\u91cf\u8fd9\u6837\u7684\u540c\u6b65\u534f\u8c03\u673a\u5236\u3002\u8fd9\u4e9b\u4e5f\u90fd\u662f\u6211\u4eec\u8fd9\u8282\u9700\u8981\u63a2\u8ba8\u7684\u95ee\u9898\u3002\u4e0b\u9762\u6211\u4eec\u5c31\u4e00\u4e00\u6765\u770b\u3002\n\n\u5171\u4eab\u5185\u5b58\u548c\u4fe1\u53f7\u91cf\u4e5f\u662f System V \u7cfb\u5217\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\uff0c\u6240\u4ee5\u5f88\u591a\u5730\u65b9\u548c\u6211\u4eec\u8bb2\u8fc7\u7684\u6d88\u606f\u961f\u5217\u6709\u70b9\u513f\u50cf\u3002\u4e3a\u4e86\u5c06\u5171\u4eab\u5185\u5b58\u548c\u4fe1\u53f7\u91cf\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\uff0c\u6211\u8fd9\u91cc\u5b9a\u4e49\u4e86\u4e00\u4e2a share.h \u5934\u6587\u4ef6\uff0c\u91cc\u9762\u653e\u4e86\u4e00\u4e9b\u5171\u4eab\u5185\u5b58\u548c\u4fe1\u53f7\u91cf\u5728\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u9700\u8981\u7684\u51fd\u6570\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u540e\u9762\u5c31\u662f\u8bb2\u4e86\u5171\u4eab\u5185\u5b58\u7684\u5177\u4f53\u5b9e\u73b0"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\u7684\u5185\u5bb9\u5dee\u4e0d\u591a\u4e86\uff0c\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\u3002\u5171\u4eab\u5185\u5b58\u548c\u4fe1\u53f7\u91cf\u7684\u914d\u5408\u673a\u5236\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n\n- \u65e0\u8bba\u662f\u5171\u4eab\u5185\u5b58\u8fd8\u662f\u4fe1\u53f7\u91cf\uff0c\u521b\u5efa\u4e0e\u521d\u59cb\u5316\u90fd\u9075\u5faa\u540c\u6837\u6d41\u7a0b\uff0c\u901a\u8fc7 ftok \u5f97\u5230 key\uff0c\u901a\u8fc7 xxxget \u521b\u5efa\u5bf9\u8c61\u5e76\u751f\u6210 id\uff1b\n- \u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u90fd\u901a\u8fc7 shmat \u5c06\u5171\u4eab\u5185\u5b58\u6620\u5c04\u5230\u5404\u81ea\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5728\u4e0d\u540c\u7684\u8fdb\u7a0b\u91cc\u9762\u6620\u5c04\u7684\u4f4d\u7f6e\u4e0d\u540c\uff1b\n- \u4e3a\u4e86\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\uff0c\u9700\u8981\u4fe1\u53f7\u91cf\u8fdb\u884c\u4fdd\u62a4\uff0c\u4fe1\u53f7\u91cf\u9700\u8981\u901a\u8fc7 semctl \u521d\u59cb\u5316\u4e3a\u67d0\u4e2a\u503c\uff1b\n- \u63a5\u4e0b\u6765\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u8981\u901a\u8fc7 semop(-1) \u6765\u7ade\u4e89\u4fe1\u53f7\u91cf\uff0c\u5982\u679c\u751f\u4ea7\u8005\u62a2\u5230\u4fe1\u53f7\u91cf\u5219\u5199\u5165\uff0c\u7136\u540e\u901a\u8fc7 semop(+1) \u91ca\u653e\u4fe1\u53f7\u91cf\uff0c\u5982\u679c\u6d88\u8d39\u8005\u62a2\u5230\u4fe1\u53f7\u91cf\u5219\u8bfb\u51fa\uff0c\u7136\u540e\u901a\u8fc7 semop(+1) \u91ca\u653e\u4fe1\u53f7\u91cf\uff1b\n- \u5171\u4eab\u5185\u5b58\u4f7f\u7528\u5b8c\u6bd5\uff0c\u53ef\u4ee5\u901a\u8fc7 shmdt \u6765\u89e3\u9664\u6620\u5c04\u3002\n\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/04/share-memory.jpeg",alt:"share-memory.jpeg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u4e86\u89e3\u4e86\u5982\u4f55\u4f7f\u7528\u5171\u4eab\u5185\u5b58\u548c\u4fe1\u53f7\u91cf\u96c6\u5408\u4e4b\u540e\uff0c\u4eca\u5929\u6211\u4eec\u6765\u89e3\u6790\u4e00\u4e0b\uff0c\u5185\u6838\u91cc\u9762\u90fd\u505a\u4e86\u4ec0\u4e48\u3002\n\n\u4e0d\u77e5\u9053\u4f60\u6709\u6ca1\u6709\u6ce8\u610f\u5230\uff0c\u54b1\u4eec\u8bb2\u6d88\u606f\u961f\u5217\u3001\u5171\u4eab\u5185\u5b58\u3001\u4fe1\u53f7\u91cf\u7684\u673a\u5236\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5176\u5b9e\u80fd\u591f\u4ece\u4e2d\u770b\u5230\u4e00\u4e9b\u7edf\u4e00\u7684\u89c4\u5f8b\uff1a\u5b83\u4eec\u5728\u4f7f\u7528\u4e4b\u524d\u90fd\u8981\u751f\u6210 key\uff0c\u7136\u540e\u901a\u8fc7 key \u5f97\u5230\u552f\u4e00\u7684 id\uff0c\u5e76\u4e14\u90fd\u662f\u901a\u8fc7 xxxget \u51fd\u6570\u3002\n\n\u5728\u5185\u6838\u91cc\u9762\uff0c\u8fd9\u4e09\u79cd\u8fdb\u7a0b\u95f4\u901a\u4fe1\u673a\u5236\u662f\u4f7f\u7528\u7edf\u4e00\u7684\u673a\u5236\u7ba1\u7406\u8d77\u6765\u7684\uff0c\u90fd\u53eb ipcxxx\u3002\n\n\u4e3a\u4e86\u7ef4\u62a4\u8fd9\u4e09\u79cd\u8fdb\u7a0b\u95f4\u901a\u4fe1\u8fdb\u5236\uff0c\u5728\u5185\u6838\u91cc\u9762\uff0c\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u6709\u4e09\u9879\u7684\u6570\u7ec4\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\u5171\u4eab\u5185\u5b58\u7684\u521b\u5efa\u548c\u6620\u5c04\u8fc7\u7a0b\u3002\n\n- \u8c03\u7528 shmget \u521b\u5efa\u5171\u4eab\u5185\u5b58\u3002\n- \u5148\u901a\u8fc7 ipc_findkey \u5728\u57fa\u6570\u6811\u4e2d\u67e5\u627e key \u5bf9\u5e94\u7684\u5171\u4eab\u5185\u5b58\u5bf9\u8c61 shmid_kernel \u662f\u5426\u5df2\u7ecf\u88ab\u521b\u5efa\u8fc7\uff0c\u5982\u679c\u5df2\u7ecf\u88ab\u521b\u5efa\uff0c\u5c31\u4f1a\u88ab\u67e5\u8be2\u51fa\u6765\uff0c\u4f8b\u5982 producer \u521b\u5efa\u8fc7\uff0c\u5728 consumer \u4e2d\u5c31\u4f1a\u67e5\u8be2\u51fa\u6765\u3002\n- \u5982\u679c\u5171\u4eab\u5185\u5b58\u6ca1\u6709\u88ab\u521b\u5efa\u8fc7\uff0c\u5219\u8c03\u7528 shm_ops \u7684 newseg \u65b9\u6cd5\uff0c\u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u5185\u5b58\u5bf9\u8c61 shmid_kernel\u3002\u4f8b\u5982\uff0c\u5728 producer \u4e2d\u5c31\u4f1a\u65b0\u5efa\u3002\n- \u5728 shmem \u6587\u4ef6\u7cfb\u7edf\u91cc\u9762\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u5171\u4eab\u5185\u5b58\u5bf9\u8c61 shmid_kernel \u6307\u5411\u8fd9\u4e2a\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7528 struct file \u8868\u793a\uff0c\u6211\u4eec\u59d1\u4e14\u79f0\u5b83\u4e3a file1\u3002\n- \u8c03\u7528 shmat\uff0c\u5c06\u5171\u4eab\u5185\u5b58\u6620\u5c04\u5230\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\n- shm_obtain_object_check \u5148\u4ece\u57fa\u6570\u6811\u91cc\u9762\u627e\u5230 shmid_kernel \u5bf9\u8c61\u3002\n- \u521b\u5efa\u7528\u4e8e\u5185\u5b58\u6620\u5c04\u5230\u6587\u4ef6\u7684 file \u548c shm_file_data\uff0c\u8fd9\u91cc\u7684 struct file \u6211\u4eec\u59d1\u4e14\u79f0\u4e3a file2\u3002\n- \u5173\u8054\u5185\u5b58\u533a\u57df vm_area_struct \u548c\u7528\u4e8e\u5185\u5b58\u6620\u5c04\u5230\u6587\u4ef6\u7684 file\uff0c\u4e5f\u5373 file2\uff0c\u8c03\u7528 file2 \u7684 mmap \u51fd\u6570\u3002\n- file2 \u7684 mmap \u51fd\u6570 shm_mmap\uff0c\u4f1a\u8c03\u7528 file1 \u7684 mmap \u51fd\u6570 shmem_mmap\uff0c\u8bbe\u7f6e shm_file_data \u548c vm_area_struct \u7684 vm_ops\u3002\n- \u5185\u5b58\u6620\u5c04\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5176\u5b9e\u5e76\u6ca1\u6709\u771f\u7684\u5206\u914d\u7269\u7406\u5185\u5b58\uff0c\u5f53\u8bbf\u95ee\u5185\u5b58\u7684\u65f6\u5019\uff0c\u4f1a\u89e6\u53d1\u7f3a\u9875\u5f02\u5e38 do_page_fault\u3002\n- vm_area_struct \u7684 vm_ops \u7684 shm_fault \u4f1a\u8c03\u7528 shm_file_data \u7684 vm_ops \u7684 shmem_fault\u3002\n- \u5728 page cache \u4e2d\u627e\u4e00\u4e2a\u7a7a\u95f2\u9875\uff0c\u6216\u8005\u521b\u5efa\u4e00\u4e2a\u7a7a\u95f2\u9875\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/04/IPC-share-memory.jpg",alt:"IPC-share-memory.jpg"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u6587\u7ae0\u4e00\u904d\u770b\u4e0d\u61c2\u4f46\u5e95\u4e0b\u603b\u7ed3\u7684\u56fe\u5f88\u597d\uff0c\u7ec8\u4e8e\u660e\u767d\u4e86\u4e3a\u4ec0\u4e48\u9700\u8981\u4e24\u4e2a file\u3002file1 \u662f shmem \u5185\u5b58\u6587\u4ef6\u7cfb\u7edf\u91cc\u7684\u6587\u4ef6\uff0cfile2 \u662f\u8fdb\u7a0b\u865a\u62df\u5185\u5b58\u91cc\u6620\u5c04\u7684\u6587\u4ef6\uff0c\u6240\u4ee5 file1 \u662f\u5c5e\u4e8e\u5171\u4eab\u5185\u5b58\u7684\uff0cfile2 \u662f\u5c5e\u4e8e\u67d0\u4e2a\u8fdb\u7a0b\u7684\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"43-Socket \u901a\u4fe1\uff1a\u9047\u4e0a\u7279\u5927\u9879\u76ee\uff0c\u8981\u5b66\u4f1a\u548c\u5176\u4ed6\u516c\u53f8\u5408\u4f5c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5982\u679c\u4f60\u5bf9 socket \u76f8\u5173\u7684\u7f51\u7edc\u534f\u8bae\u539f\u7406\u4e0d\u662f\u975e\u5e38\u4e86\u89e3\uff0c\u5efa\u8bae\u4f60\u5148\u53bb\u770b\u4e00\u770b\u4e0a\u4e00\u7bc7\u7684\u9884\u4e60\u6587\u7ae0\uff0c\u518d\u6765\u770b\u8fd9\u4e00\u7bc7\u7684\u5185\u5bb9\uff0c\u5c31\u4f1a\u6bd4\u8f83\u8f7b\u677e\u3002\n\n\u6309\u7167\u524d\u4e00\u7bc7\u6587\u7ae0\u8bf4\u7684\u5206\u5c42\u673a\u5236\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\uff0csocket \u63a5\u53e3\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u64cd\u4f5c\u7684\u662f\u4f20\u8f93\u5c42\uff0c\u66f4\u5e95\u5c42\u7684\u534f\u8bae\u4e0d\u7528\u5b83\u6765\u64cd\u5fc3\uff0c\u8fd9\u5c31\u662f\u5206\u5c42\u7684\u597d\u5904\u3002\n\n\u5728\u4f20\u8f93\u5c42\u6709\u4e24\u4e2a\u4e3b\u6d41\u7684\u534f\u8bae TCP \u548c UDP\uff0c\u6240\u4ee5\u6211\u4eec\u7684 socket \u7a0b\u5e8f\u8bbe\u8ba1\u4e5f\u662f\u4e3b\u8981\u64cd\u4f5c\u8fd9\u4e24\u4e2a\u534f\u8bae\u3002\u8fd9\u4e24\u4e2a\u534f\u8bae\u7684\u533a\u522b\u662f\u4ec0\u4e48\u5462\uff1f\u901a\u5e38\u7684\u7b54\u6848\u662f\u4e0b\u9762\u8fd9\u6837\u7684\u3002\n\n- TCP \u662f\u9762\u5411\u8fde\u63a5\u7684\uff0cUDP \u662f\u9762\u5411\u65e0\u8fde\u63a5\u7684\u3002\n- TCP \u63d0\u4f9b\u53ef\u9760\u4ea4\u4ed8\uff0c\u65e0\u5dee\u9519\u3001\u4e0d\u4e22\u5931\u3001\u4e0d\u91cd\u590d\u3001\u5e76\u4e14\u6309\u5e8f\u5230\u8fbe\uff1bUDP \u4e0d\u63d0\u4f9b\u53ef\u9760\u4ea4\u4ed8\uff0c\u4e0d\u4fdd\u8bc1\u4e0d\u4e22\u5931\uff0c\u4e0d\u4fdd\u8bc1\u6309\u987a\u5e8f\u5230\u8fbe\u3002\n- TCP \u662f\u9762\u5411\u5b57\u8282\u6d41\u7684\uff0c\u53d1\u9001\u65f6\u53d1\u7684\u662f\u4e00\u4e2a\u6d41\uff0c\u6ca1\u5934\u6ca1\u5c3e\uff1bUDP \u662f\u9762\u5411\u6570\u636e\u62a5\u7684\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u53d1\u9001\u3002\n- TCP \u662f\u53ef\u4ee5\u63d0\u4f9b\u6d41\u91cf\u63a7\u5236\u548c\u62e5\u585e\u63a7\u5236\u7684\uff0c\u65e2\u9632\u6b62\u5bf9\u7aef\u88ab\u538b\u57ae\uff0c\u4e5f\u9632\u6b62\u7f51\u7edc\u88ab\u538b\u57ae\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\u6211\u4eec\u8bb2\u4e86\u7f51\u7edc\u534f\u8bae\u7684\u57fa\u672c\u539f\u7406\u548c socket \u7cfb\u7edf\u8c03\u7528\uff0c\u8fd9\u91cc\u8bf7\u4f60\u91cd\u70b9\u5173\u6ce8 TCP \u534f\u8bae\u7684\u7cfb\u7edf\u8c03\u7528\u3002\n\n\u901a\u8fc7\u5b66\u4e60\uff0c\u6211\u4eec\u77e5\u9053\uff0csocket \u7cfb\u7edf\u8c03\u7528\u662f\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u7684\u63a5\u53e3\uff0c\u7f51\u7edc\u534f\u8bae\u7684\u56db\u5c42\u4ee5\u4e0b\u90fd\u662f\u5728\u5185\u6838\u4e2d\u7684\u3002\u5f88\u591a\u7684\u4e66\u7c4d\u4f1a\u8bb2\u5982\u4f55\u5f00\u53d1\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 socket \u7a0b\u5e8f\uff0c\u4f46\u662f\u8fd9\u4e0d\u662f\u6211\u4eec\u8fd9\u95e8\u8bfe\u7684\u91cd\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u4e3b\u8981\u770b\u5185\u6838\u91cc\u9762\u7684\u673a\u5236\u5c31\u884c\u4e86\u3002\n\n\u56e0\u6b64\uff0c\u4f60\u9700\u8981\u8bb0\u4f4f TCP \u534f\u8bae\u7684 socket \u8c03\u7528\u7684\u8fc7\u7a0b\u3002\u6211\u4eec\u63a5\u4e0b\u6765\u5c31\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\uff0c\u4f9d\u6b21\u56de\u5fc6\u4e00\u4e0b\u8fd9\u4e9b\u7cfb\u7edf\u8c03\u7528\u5230\u5185\u6838\u90fd\u505a\u4e86\u4ec0\u4e48\uff1a\n\n- \u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u90fd\u8c03\u7528 socket\uff0c\u5f97\u5230\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1b\n- \u670d\u52a1\u7aef\u8c03\u7528 listen\uff0c\u8fdb\u884c\u76d1\u542c\uff1b\n- \u670d\u52a1\u7aef\u8c03\u7528 accept\uff0c\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\uff1b\n- \u5ba2\u6237\u7aef\u8c03\u7528 connect\uff0c\u8fde\u63a5\u670d\u52a1\u7aef\uff1b\n- \u670d\u52a1\u7aef accept \u8fd4\u56de\u7528\u4e8e\u4f20\u8f93\u7684 socket \u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1b\n- \u5ba2\u6237\u7aef\u8c03\u7528 write \u5199\u5165\u6570\u636e\uff1b\n- \u670d\u52a1\u7aef\u8c03\u7528 read \u8bfb\u53d6\u6570\u636e\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u4ece 45 \u5230 48 \u90fd\u662f\u53d1\u9001\u7f51\u7edc\u62a5\u548c\u63a5\u53d7\u7f51\u7edc\u62a5"}),"\n",(0,l.jsx)(e.p,{children:"47-\u63a5\u6536\u7f51\u7edc\u5305\uff08\u4e0a\uff09\uff1a\u5982\u4f55\u641e\u660e\u767d\u5408\u4f5c\u4f19\u4f34\u8ba9\u6211\u4eec\u505a\u4ec0\u4e48\uff1f"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"\u4ece 49 \u5230 58 \u90fd\u662f\u865a\u62df\u673a\u3001docker \u76f8\u5173\u5185\u5bb9"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u4eca\u5929\u6211\u4eec\u8bb2\u4e86\u865a\u62df\u5316\u7684\u57fa\u672c\u539f\u7406\uff0c\u5e76\u4e14\u624b\u52a8\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u4e0a\u7f51\u7684\u865a\u62df\u673a\u3002\u8bf7\u8bb0\u4f4f\u4e0b\u9762\u8fd9\u4e00\u70b9\uff0c\u975e\u5e38\u91cd\u8981\uff0c\u7406\u89e3\u865a\u62df\u673a\u542f\u52a8\u7684\u53c2\u6570\u5c31\u662f\u7406\u89e3\u865a\u62df\u5316\u6280\u672f\u7684\u5165\u53e3\u3002\u5b66\u4f1a\u521b\u5efa\u865a\u62df\u673a\uff0c\u5728\u540e\u9762\u505a\u5185\u6838\u76f8\u5173\u5b9e\u9a8c\u7684\u65f6\u5019\u5c31\u4f1a\u975e\u5e38\u65b9\u4fbf\u3002\n\n\u5177\u4f53\u5230\u77e5\u8bc6\u70b9\u4e0a\uff0c\u8fd9\u4e00\u8282\u4f60\u9700\u8981\u9700\u8981\u8bb0\u4f4f\u4e0b\u9762\u7684\u8fd9\u4e9b\u77e5\u8bc6\u70b9\uff1a\n\n\u865a\u62df\u5316\u7684\u672c\u8d28\u662f\u7528 qemu \u7684\u8f6f\u4ef6\u6a21\u62df\u786c\u4ef6\uff0c\u4f46\u662f\u6a21\u62df\u65b9\u5f0f\u6bd4\u8f83\u6162\uff0c\u9700\u8981\u52a0\u901f\uff1b\n\u865a\u62df\u5316\u4e3b\u8981\u6a21\u62df CPU\u3001\u5185\u5b58\u3001\u7f51\u7edc\u3001\u5b58\u50a8\uff0c\u5206\u522b\u6709\u4e0d\u540c\u7684\u52a0\u901f\u529e\u6cd5\uff1b\nCPU \u548c\u5185\u5b58\u4e3b\u8981\u4f7f\u7528\u786c\u4ef6\u8f85\u52a9\u865a\u62df\u5316\u8fdb\u884c\u52a0\u901f\uff0c\u9700\u8981\u914d\u5907\u7279\u6b8a\u7684\u786c\u4ef6\u624d\u80fd\u5de5\u4f5c\uff1b\n\u7f51\u7edc\u548c\u5b58\u50a8\u4e3b\u8981\u4f7f\u7528\u7279\u6b8a\u7684\u534a\u865a\u62df\u5316\u9a71\u52a8\u52a0\u901f\uff0c\u9700\u8981\u52a0\u8f7d\u7279\u6b8a\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"50-\u8ba1\u7b97\u865a\u62df\u5316\u4e4b CPU\uff08\u4e0a\uff09\uff1a\u5982\u4f55\u590d\u7528\u96c6\u56e2\u7684\u4eba\u529b\u8d44\u6e90\uff1f\n\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u8bb2\u4e86\u4e00\u4e0b\u865a\u62df\u5316\u7684\u57fa\u672c\u539f\u7406\uff0c\u4ee5\u53ca qemu\u3001kvm \u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u5c31\u6765\u770b\u4e00\u4e0b\uff0c\u7528\u6237\u6001\u7684 qemu \u548c\u5185\u6838\u6001\u7684 kvm \u5982\u4f55\u4e00\u8d77\u534f\u4f5c\uff0c\u6765\u521b\u5efa\u865a\u62df\u673a\uff0c\u5b9e\u73b0 CPU \u548c\u5185\u5b58\u865a\u62df\u5316\u3002\n\n\u8fd9\u91cc\u662f\u4e0a\u4e00\u8282\u6211\u4eec\u8bb2\u7684 qemu \u542f\u52a8\u65f6\u5019\u7684\u547d\u4ee4\u3002\n\n...\n\n\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u5b66\u5230\uff0c\u865a\u62df\u673a\u5bf9\u4e8e\u8bbe\u5907\u7684\u6a21\u62df\u662f\u4e00\u4ef6\u975e\u5e38\u590d\u6742\u7684\u4e8b\u60c5\uff0c\u9700\u8981\u7528\u590d\u6742\u7684\u53c2\u6570\u6a21\u62df\u5404\u79cd\u5404\u6837\u7684\u8bbe\u5907\u3002\u4e3a\u4e86\u80fd\u591f\u9002\u914d\u8fd9\u4e9b\u8bbe\u5907\uff0cqemu \u5b9a\u4e49\u4e86\u81ea\u5df1\u7684\u6a21\u5757\u7ba1\u7406\u673a\u5236\uff0c\u53ea\u6709\u4e86\u89e3\u4e86\u8fd9\u79cd\u673a\u5236\uff0c\u540e\u9762\u770b\u6bcf\u4e00\u79cd\u8bbe\u5907\u7684\u865a\u62df\u5316\u7684\u65f6\u5019\uff0c\u624d\u6709\u4e00\u4e2a\u6574\u4f53\u7684\u601d\u8def\u3002\n\n\u8fd9\u91cc\u7684 MachineClass \u662f\u6211\u4eec\u9047\u5230\u7684\u7b2c\u4e00\u4e2a\uff0c\u6211\u4eec\u9700\u8981\u638c\u63e1\u5b83\u91cc\u9762\u5404\u79cd\u5b9a\u4e49\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:'52-\u8ba1\u7b97\u865a\u62df\u5316\u4e4b\u5185\u5b58\uff1a\u5982\u4f55\u5efa\u7acb\u72ec\u7acb\u7684\u529e\u516c\u5ba4\uff1f\n\n\u4e0a\u4e00\u8282\uff0c\u6211\u4eec\u89e3\u6790\u4e86\u8ba1\u7b97\u865a\u62df\u5316\u4e4b CPU\u3002\u53ef\u4ee5\u770b\u5230\uff0cCPU \u7684\u865a\u62df\u5316\u662f\u7528\u6237\u6001\u7684 qemu \u548c\u5185\u6838\u6001\u7684 KVM \u5171\u540c\u914d\u5408\u5b8c\u6210\u7684\u3002\u5b83\u4eec\u4e8c\u8005\u901a\u8fc7 ioctl \u8fdb\u884c\u901a\u4fe1\u3002\u5bf9\u4e8e\u5185\u5b58\u7ba1\u7406\u6765\u8bb2\uff0c\u4e5f\u662f\u9700\u8981\u8fd9\u4e24\u8005\u914d\u5408\u5b8c\u6210\u7684\u3002\n\n\u54b1\u4eec\u5728\u5185\u5b58\u7ba1\u7406\u7684\u65f6\u5019\u8bb2\u8fc7\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7ed9\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u7684\u5185\u5b58\u90fd\u662f\u865a\u62df\u5185\u5b58\uff0c\u9700\u8981\u901a\u8fc7\u9875\u8868\u6620\u5c04\uff0c\u53d8\u6210\u7269\u7406\u5185\u5b58\u8fdb\u884c\u8bbf\u95ee\u3002\u5f53\u6709\u4e86\u865a\u62df\u673a\u4e4b\u540e\uff0c\u60c5\u51b5\u4f1a\u53d8\u5f97\u66f4\u52a0\u590d\u6742\u3002\u56e0\u4e3a\u865a\u62df\u673a\u5bf9\u4e8e\u7269\u7406\u673a\u6765\u8bb2\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u4f46\u662f\u865a\u62df\u673a\u91cc\u9762\u4e5f\u6709\u5185\u6838\uff0c\u4e5f\u6709\u865a\u62df\u673a\u91cc\u9762\u8dd1\u7684\u8fdb\u7a0b\u3002\u6240\u4ee5\u6709\u4e86\u865a\u62df\u673a\uff0c\u5185\u5b58\u5c31\u53d8\u6210\u4e86\u56db\u7c7b\uff1a\n\n- \u865a\u62df\u673a\u91cc\u9762\u7684\u865a\u62df\u5185\u5b58\uff08Guest OS Virtual Memory\uff0cGVA\uff09\uff0c\u8fd9\u662f\u865a\u62df\u673a\u91cc\u9762\u7684\u8fdb\u7a0b\u770b\u5230\u7684\u5185\u5b58\u7a7a\u95f4\uff1b\n- \u865a\u62df\u673a\u91cc\u9762\u7684\u7269\u7406\u5185\u5b58\uff08Guest OS Physical Memory\uff0cGPA\uff09\uff0c\u8fd9\u662f\u865a\u62df\u673a\u91cc\u9762\u7684\u64cd\u4f5c\u7cfb\u7edf\u770b\u5230\u7684\u5185\u5b58\uff0c\u5b83\u8ba4\u4e3a\u8fd9\u662f\u7269\u7406\u5185\u5b58\uff1b\n- \u7269\u7406\u673a\u7684\u865a\u62df\u5185\u5b58\uff08Host Virtual Memory\uff0cHVA\uff09\uff0c\u8fd9\u662f\u7269\u7406\u673a\u4e0a\u7684 qemu \u8fdb\u7a0b\u770b\u5230\u7684\u5185\u5b58\u7a7a\u95f4\uff1b\n- \u7269\u7406\u673a\u7684\u7269\u7406\u5185\u5b58\uff08Host Physical Memory\uff0cHPA\uff09\uff0c\u8fd9\u662f\u7269\u7406\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u770b\u5230\u7684\u5185\u5b58\u3002\n\n\n\u54b1\u4eec\u5185\u5b58\u7ba1\u7406\u90a3\u4e00\u7ae0\u8bb2\u7684\u4e24\u5927\u5185\u5bb9\uff0c\u4e00\u4e2a\u662f\u5185\u5b58\u7ba1\u7406\uff0c\u5b83\u53d8\u5f97\u975e\u5e38\u590d\u6742\uff1b\u53e6\u4e00\u4e2a\u662f\u5185\u5b58\u6620\u5c04\uff0c\u5177\u4f53\u6765\u8bf4\u5c31\u662f\uff0c\u4ece GVA \u5230 GPA\uff0c\u5230 HVA\uff0c\u518d\u5230 HPA\uff0c\u8fd9\u6837\u51e0\u7ecf\u8f6c\u624b\uff0c\u8ba1\u7b97\u673a\u7684\u6027\u80fd\u5c31\u4f1a\u53d8\u5f97\u5f88\u5dee\u3002\u5f53\u7136\uff0c\u865a\u62df\u5316\u6280\u672f\u6210\u719f\u7684\u4eca\u5929\uff0c\u6709\u4e86\u4e00\u4e9b\u4f18\u5316\u7684\u624b\u6bb5\uff0c\u5177\u4f53\u600e\u4e48\u4f18\u5316\u5462\uff1f\u6211\u4eec\u8fd9\u4e00\u8282\u5c31\u6765\u4e00\u4e00\u89e3\u6790\u3002\n\n\u5185\u5b58\u7ba1\u7406\n\u6211\u4eec\u5148\u6765\u770b\u5185\u5b58\u7ba1\u7406\u7684\u90e8\u5206\u3002\n\n\u7531\u4e8e CPU \u548c\u5185\u5b58\u662f\u7d27\u5bc6\u7ed3\u5408\u7684\uff0c\u56e0\u800c\u5185\u5b58\u865a\u62df\u5316\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\uff0c\u548c CPU \u865a\u62df\u5316\u7684\u521d\u59cb\u5316\u662f\u4e00\u8d77\u5b8c\u6210\u7684\u3002\n\n\u4e0a\u4e00\u8282\u8bf4 CPU \u865a\u62df\u5316\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u8c03\u7528 kvm_init \u51fd\u6570\uff0c\u8fd9\u91cc\u9762\u6253\u5f00\u4e86"/dev/kvm"\u8fd9\u4e2a\u5b57\u7b26\u6587\u4ef6\uff0c\u5e76\u4e14\u901a\u8fc7 ioctl \u8c03\u7528\u5230\u5185\u6838 kvm \u7684 KVM_CREATE_VM \u64cd\u4f5c\uff0c\u9664\u4e86\u8fd9\u4e9b CPU \u76f8\u5173\u7684\u8c03\u7528\uff0c\u63a5\u4e0b\u6765\u8fd8\u6709\u5185\u5b58\u76f8\u5173\u7684\u3002\u6211\u4eec\u6765\u770b\u770b\u3002\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u6211\u4eec\u8fd9\u91cc\u6765\u603b\u7ed3\u4e00\u4e0b\uff0c\u865a\u62df\u673a\u7684\u5185\u5b58\u7ba1\u7406\u4e5f\u662f\u9700\u8981\u7528\u6237\u6001\u7684 qemu \u548c\u5185\u6838\u6001\u7684 KVM \u5171\u540c\u5b8c\u6210\u3002\u4e3a\u4e86\u52a0\u901f\u5185\u5b58\u6620\u5c04\uff0c\u9700\u8981\u501f\u52a9\u786c\u4ef6\u7684 EPT \u6280\u672f\u3002\n\n\u5728\u7528\u6237\u6001 qemu \u4e2d\uff0c\u6709\u4e00\u4e2a\u7ed3\u6784 AddressSpace address_space_memory \u6765\u8868\u793a\u865a\u62df\u673a\u7684\u7cfb\u7edf\u5185\u5b58\uff0c\u8fd9\u4e2a\u5185\u5b58\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5185\u5b58\u533a\u57df struct MemoryRegion\uff0c\u7ec4\u6210\u6811\u5f62\u7ed3\u6784\uff0c\u6307\u5411\u7531 mmap \u5206\u914d\u7684\u865a\u62df\u5185\u5b58\u3002\n\n\u5728 AddressSpace \u7ed3\u6784\u4e2d\uff0c\u6709\u4e00\u4e2a struct KVMMemoryListener\uff0c\u5f53\u6709\u65b0\u7684\u5185\u5b58\u533a\u57df\u6dfb\u52a0\u7684\u65f6\u5019\uff0c\u4f1a\u88ab\u901a\u77e5\u8c03\u7528 kvm_region_add \u6765\u901a\u77e5\u5185\u6838\u3002\n\n\u5728\u7528\u6237\u6001 qemu \u4e2d\uff0c\u5bf9\u4e8e\u865a\u62df\u673a\u6709\u4e00\u4e2a\u7ed3\u6784 struct KVMState \u8868\u793a\u8fd9\u4e2a\u865a\u62df\u673a\uff0c\u8fd9\u4e2a\u7ed3\u6784\u4f1a\u6307\u5411\u4e00\u4e2a\u6570\u7ec4\u7684 struct KVMSlot \u8868\u793a\u8fd9\u4e2a\u865a\u62df\u673a\u7684\u591a\u4e2a\u5185\u5b58\u6761\uff0cKVMSlot \u4e2d\u6709\u4e00\u4e2a void *ram \u6307\u9488\u6307\u5411 mmap \u5206\u914d\u7684\u90a3\u5757\u865a\u62df\u5185\u5b58\u3002\n\nkvm_region_add \u662f\u901a\u8fc7 ioctl \u6765\u901a\u77e5\u5185\u6838 KVM \u7684\uff0c\u4f1a\u7ed9\u5185\u6838 KVM \u53d1\u9001\u4e00\u4e2a KVM_SET_USER_MEMORY_REGION \u6d88\u606f\uff0c\u8868\u793a\u7528\u6237\u6001 qemu \u6dfb\u52a0\u4e86\u4e00\u4e2a\u5185\u5b58\u533a\u57df\uff0c\u5185\u6838 KVM \u4e5f\u5e94\u8be5\u6dfb\u52a0\u4e00\u4e2a\u76f8\u5e94\u7684\u5185\u5b58\u533a\u57df\u3002\n\n\u548c\u7528\u6237\u6001 qemu \u5bf9\u5e94\u7684\u5185\u6838 KVM\uff0c\u5bf9\u4e8e\u865a\u62df\u673a\u6709\u4e00\u4e2a\u7ed3\u6784 struct kvm \u8868\u793a\u8fd9\u4e2a\u865a\u62df\u673a\uff0c\u8fd9\u4e2a\u7ed3\u6784\u4f1a\u6307\u5411\u4e00\u4e2a\u6570\u7ec4\u7684 struct kvm_memory_slot \u8868\u793a\u8fd9\u4e2a\u865a\u62df\u673a\u7684\u591a\u4e2a\u5185\u5b58\u6761\uff0ckvm_memory_slot \u4e2d\u6709\u8d77\u59cb\u9875\u53f7\uff0c\u9875\u9762\u6570\u76ee\uff0c\u8868\u793a\u8fd9\u4e2a\u865a\u62df\u673a\u7684\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u3002\n\n\u865a\u62df\u673a\u7684\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u91cc\u9762\u7684\u9875\u9762\u5f53\u7136\u4e0d\u662f\u4e00\u5f00\u59cb\u5c31\u6620\u5c04\u5230\u7269\u7406\u9875\u9762\u7684\uff0c\u53ea\u6709\u5f53\u865a\u62df\u673a\u7684\u5185\u5b58\u88ab\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u4e5f\u5373 mmap \u5206\u914d\u7684\u865a\u62df\u5185\u5b58\u7a7a\u95f4\u88ab\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u5148\u67e5\u770b EPT \u9875\u8868\uff0c\u662f\u5426\u5df2\u7ecf\u6620\u5c04\u8fc7\uff0c\u5982\u679c\u5df2\u7ecf\u6620\u5c04\u8fc7\uff0c\u5219\u7ecf\u8fc7\u56db\u7ea7\u9875\u8868\u6620\u5c04\uff0c\u5c31\u80fd\u8bbf\u95ee\u5230\u7269\u7406\u9875\u9762\u3002\n\n\u5982\u679c\u6ca1\u6709\u6620\u5c04\u8fc7\uff0c\u5219\u865a\u62df\u673a\u4f1a\u901a\u8fc7 VM-Exit \u6307\u4ee4\u56de\u5230\u5bbf\u4e3b\u673a\u6a21\u5f0f\uff0c\u901a\u8fc7 handle_ept_violation \u8865\u5145\u9875\u8868\u6620\u5c04\u3002\u5148\u662f\u901a\u8fc7 handle_mm_fault \u4e3a\u865a\u62df\u673a\u7684\u7269\u7406\u5185\u5b58\u7a7a\u95f4\u5206\u914d\u771f\u6b63\u7684\u7269\u7406\u9875\u9762\uff0c\u7136\u540e\u901a\u8fc7__direct_map \u6dfb\u52a0 EPT \u9875\u8868\u6620\u5c04\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"namespace"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u603b\u7ed3\u65f6\u523b\n\u8fd9\u4e00\u8282\u6211\u4eec\u8bb2\u4e86 namespace \u76f8\u5173\u7684\u6280\u672f\uff0c\u6709\u516d\u79cd\u7c7b\u578b\uff0c\u5206\u522b\u662f UTS\u3001User\u3001Mount\u3001Pid\u3001Network \u548c IPC\u3002\n\n\u8fd8\u6709\u4e24\u4e2a\u5e38\u7528\u7684\u547d\u4ee4 nsenter \u548c unshare\uff0c\u4e3b\u8981\u7528\u4e8e\u64cd\u4f5c Namespace\uff0c\u6709\u4e09\u4e2a\u5e38\u7528\u7684\u51fd\u6570 clone\u3001setns \u548c unshare\u3002\n\n\u5728\u5185\u6838\u91cc\u9762\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a\u8fdb\u7a0b task_struct \u6765\u8bb2\uff0c\u91cc\u9762\u90fd\u4f1a\u6709\u4e00\u4e2a\u6210\u5458 struct nsproxy\uff0c\u7528\u4e8e\u4fdd\u5b58 namespace \u76f8\u5173\u4fe1\u606f\uff0c\u91cc\u9762\u6709 struct uts_namespace\u3001struct ipc_namespace\u3001struct mnt_namespace\u3001struct pid_namespace\u3001struct net *net_ns \u548c struct cgroup_namespace *cgroup_ns\u3002\n\n\u521b\u5efa namespace \u7684\u65f6\u5019\uff0c\u6211\u4eec\u5728\u5185\u6838\u4e2d\u4f1a\u8c03\u7528 copy_namespaces\uff0c\u8c03\u7528\u987a\u5e8f\u4f9d\u6b21\u662f copy_mnt_ns\u3001copy_utsname\u3001copy_ipcs\u3001copy_pid_ns\u3001copy_cgroup_ns \u548c copy_net_ns\uff0c\u6765\u590d\u5236 namespace\u3002\n\n---\n\n\u7f51\u7edc\u7684 Namespace \u6709\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u547d\u4ee4 ip netns\u3002\u8bf7\u4f60\u7814\u7a76\u4e00\u4e0b\u8fd9\u4e2a\u547d\u4ee4\uff0c\u5e76\u4e14\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\uff0c\u7528\u8fd9\u4e2a\u547d\u4ee4\u67e5\u770b\u7f51\u7edc namespace\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://cdn.wrss.top/docs/2023/12/04/namespace.jpeg",alt:"namespace.jpeg"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"58-cgroup \u6280\u672f\uff1a\u5185\u90e8\u521b\u4e1a\u516c\u53f8\u5e94\u8be5\u72ec\u7acb\u6838\u7b97\u6210\u672c\n\n\u6211\u4eec\u524d\u9762\u8bf4\u4e86\uff0c\u5bb9\u5668\u5b9e\u73b0\u5c01\u95ed\u7684\u73af\u5883\u4e3b\u8981\u9760\u4e24\u79cd\u6280\u672f\uff0c\u4e00\u79cd\u662f\u201c\u770b\u8d77\u6765\u662f\u9694\u79bb\u201d\u7684\u6280\u672f Namespace\uff0c\u53e6\u4e00\u79cd\u662f\u7528\u8d77\u6765\u662f\u9694\u79bb\u7684\u6280\u672f cgroup\u3002\n\n\u4e0a\u4e00\u8282\u6211\u4eec\u8bb2\u4e86\u201c\u770b\u8d77\u6765\u9694\u79bb\u201c\u7684\u6280\u672f Namespace\uff0c\u8fd9\u4e00\u8282\u6211\u4eec\u5c31\u6765\u770b\u4e00\u4e0b\u201c\u7528\u8d77\u6765\u9694\u79bb\u201c\u7684\u6280\u672f cgroup\u3002\n\ncgroup \u5168\u79f0\u662f control group\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b83\u662f\u7528\u6765\u505a\u201c\u63a7\u5236\u201d\u7684\u3002\u63a7\u5236\u4ec0\u4e48\u4e1c\u897f\u5462\uff1f\u5f53\u7136\u662f\u8d44\u6e90\u7684\u4f7f\u7528\u4e86\u3002\u90a3\u5b83\u90fd\u80fd\u63a7\u5236\u54ea\u4e9b\u8d44\u6e90\u7684\u4f7f\u7528\u5462\uff1f\u6211\u4eec\u4e00\u8d77\u6765\u770b\u4e00\u770b\u3002\n\n\u9996\u5148\uff0ccgroup \u5b9a\u4e49\u4e86\u4e0b\u9762\u7684\u4e00\u7cfb\u5217\u5b50\u7cfb\u7edf\uff0c\u6bcf\u4e2a\u5b50\u7cfb\u7edf\u7528\u4e8e\u63a7\u5236\u67d0\u4e00\u7c7b\u8d44\u6e90\u3002\n\n- CPU \u5b50\u7cfb\u7edf\uff0c\u4e3b\u8981\u9650\u5236\u8fdb\u7a0b\u7684 CPU \u4f7f\u7528\u7387\u3002\n- cpuacct \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u7edf\u8ba1 cgroup \u4e2d\u7684\u8fdb\u7a0b\u7684 CPU \u4f7f\u7528\u62a5\u544a\u3002\n- cpuset \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u4e3a cgroup \u4e2d\u7684\u8fdb\u7a0b\u5206\u914d\u5355\u72ec\u7684 CPU \u8282\u70b9\u6216\u8005\u5185\u5b58\u8282\u70b9\u3002\n- memory \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u9650\u5236\u8fdb\u7a0b\u7684 Memory \u4f7f\u7528\u91cf\u3002\n- blkio \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u9650\u5236\u8fdb\u7a0b\u7684\u5757\u8bbe\u5907 IO\u3002\n- devices \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u63a7\u5236\u8fdb\u7a0b\u80fd\u591f\u8bbf\u95ee\u67d0\u4e9b\u8bbe\u5907\u3002\n- net_cls \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u6807\u8bb0 cgroups \u4e2d\u8fdb\u7a0b\u7684\u7f51\u7edc\u6570\u636e\u5305\uff0c\u7136\u540e\u53ef\u4ee5\u4f7f\u7528 tc \u6a21\u5757\uff08traffic control\uff09\u5bf9\u6570\u636e\u5305\u8fdb\u884c\u63a7\u5236\u3002\n- freezer \u5b50\u7cfb\u7edf\uff0c\u53ef\u4ee5\u6302\u8d77\u6216\u8005\u6062\u590d cgroup \u4e2d\u7684\u8fdb\u7a0b\u3002\n\n\u8fd9\u4e48\u591a\u5b50\u7cfb\u7edf\uff0c\u4f60\u53ef\u80fd\u8981\u8bf4\u4e86\uff0c\u90a3\u6211\u4eec\u4e0d\u7528\u90fd\u638c\u63e1\u5427\uff1f\u6ca1\u9519\uff0c\u8fd9\u91cc\u9762\u6700\u5e38\u7528\u7684\u662f\u5bf9\u4e8e CPU \u548c\u5185\u5b58\u7684\u63a7\u5236\uff0c\u6240\u4ee5\u4e0b\u9762\u6211\u4eec\u8be6\u7ec6\u6765\u8bf4\u5b83\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u5c31\u4e0d\u590d\u5236\u4ed6\u7ed9\u51fa\u7684 cgroup \u5de5\u4f5c\u673a\u5236\u7684\u56fe\u4e86\uff0c\u6211\u81ea\u5df1\u5199\u8fd9\u90e8\u5206\u6587\u6863\u65f6\uff0c\u81ea\u5df1\u753b\u4e2a\u56fe\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7b2c\u4e00\u6b65\uff0c\u7cfb\u7edf\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u521d\u59cb\u5316 cgroup \u7684\u5404\u4e2a\u5b50\u7cfb\u7edf\u7684\u64cd\u4f5c\u51fd\u6570\uff0c\u5206\u914d\u5404\u4e2a\u5b50\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784\u3002\n\n\u7b2c\u4e8c\u6b65\uff0cmount cgroup \u6587\u4ef6\u7cfb\u7edf\uff0c\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\u7684\u6811\u5f62\u7ed3\u6784\uff0c\u4ee5\u53ca\u64cd\u4f5c\u51fd\u6570\u3002\n\n\u7b2c\u4e09\u6b65\uff0c\u5199\u5165 cgroup \u6587\u4ef6\uff0c\u8bbe\u7f6e cpu \u6216\u8005 memory \u7684\u76f8\u5173\u53c2\u6570\uff0c\u8fd9\u4e2a\u65f6\u5019\u6587\u4ef6\u7cfb\u7edf\u7684\u64cd\u4f5c\u51fd\u6570\u4f1a\u8c03\u7528\u5230 cgroup \u5b50\u7cfb\u7edf\u7684\u64cd\u4f5c\u51fd\u6570\uff0c\u4ece\u800c\u5c06\u53c2\u6570\u8bbe\u7f6e\u5230 cgroup \u5b50\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784\u4e2d\u3002\n\n\u7b2c\u56db\u6b65\uff0c\u5199\u5165 tasks \u6587\u4ef6\uff0c\u5c06\u8fdb\u7a0b\u4ea4\u7ed9\u67d0\u4e2a cgroup \u8fdb\u884c\u7ba1\u7406\uff0c\u56e0\u4e3a tasks \u6587\u4ef6\u4e5f\u662f\u4e00\u4e2a cgroup \u6587\u4ef6\uff0c\u7edf\u4e00\u4f1a\u8c03\u7528\u6587\u4ef6\u7cfb\u7edf\u7684\u64cd\u4f5c\u51fd\u6570\u8fdb\u800c\u8c03\u7528 cgroup \u5b50\u7cfb\u7edf\u7684\u64cd\u4f5c\u51fd\u6570\uff0c\u5c06 cgroup \u5b50\u7cfb\u7edf\u7684\u6570\u636e\u7ed3\u6784\u548c\u8fdb\u7a0b\u5173\u8054\u8d77\u6765\u3002\n\n\u7b2c\u4e94\u6b65\uff0c\u5bf9\u4e8e CPU \u6765\u8bb2\uff0c\u4f1a\u4fee\u6539 scheduled entity\uff0c\u653e\u5165\u76f8\u5e94\u7684\u961f\u5217\u91cc\u9762\u53bb\uff0c\u4ece\u800c\u4e0b\u6b21\u8c03\u5ea6\u7684\u65f6\u5019\u5c31\u8d77\u4f5c\u7528\u4e86\u3002\u5bf9\u4e8e\u5185\u5b58\u7684 cgroup \u8bbe\u5b9a\uff0c\u53ea\u6709\u5728\u7533\u8bf7\u5185\u5b58\u7684\u65f6\u5019\u624d\u8d77\u4f5c\u7528\u3002\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u6218-45-\u8bb2",children:"\u300a\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u6218 45 \u8bb2\u300b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%9845%E8%AE%B2",children:"\u64cd\u4f5c\u7cfb\u7edf\u5b9e\u6218 45 \u8bb2"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\u91cd\u5b66\u64cd\u4f5c\u7cfb\u7edf",children:"\u300a\u91cd\u5b66\u64cd\u4f5c\u7cfb\u7edf\u300b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%87%8D%E5%AD%A6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%AE%8C",children:"\u91cd\u5b66\u64cd\u4f5c\u7cfb\u7edf"})}),"\n",(0,l.jsx)(e.p,{children:"\u626b\u4e86\u4e00\u4e0b\uff0c\u5176\u5b9ekernel\u91cc\u91cd\u8981\u7684\u4e1c\u897f\u5c31\u90a3\u4e9b\uff0c\u4ec0\u4e48IO\u6a21\u578b\u3001\u5185\u5b58\u56de\u6536\u3001\u865a\u62df\u5185\u5b58\u3001\u8fdb\u7a0b\u7ebf\u7a0b\u7684\u8c03\u5ea6\uff08\u4ee5\u53ca\u5b9e\u73b0\u3001\u5f00\u9500\uff09\u3001THP\u3001MESI\u3001\u5c40\u90e8\u6027\u539f\u7406\u3001swap\u4e4b\u7c7b\u7684"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\u6df1\u5165\u6d45\u51fa\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406",children:"\u300a\u6df1\u5165\u6d45\u51fa\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\u300b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86",children:"\u6df1\u5165\u6d45\u51fa\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5982\u679c\u6211\u4eec\u5bf9\u4e8e I/O \u7684\u64cd\u4f5c\uff0c\u90fd\u662f\u7531 CPU \u53d1\u51fa\u5bf9\u5e94\u7684\u6307\u4ee4\uff0c\u7136\u540e\u7b49\u5f85 I/O \u8bbe\u5907\u5b8c\u6210\u64cd\u4f5c\u4e4b\u540e\u8fd4\u56de\uff0c\u90a3 CPU \u6709\u5927\u91cf\u7684\u65f6\u95f4\u5176\u5b9e\u90fd\u662f\u5728\u7b49\u5f85 I/O \u8bbe\u5907\u5b8c\u6210\u64cd\u4f5c\u3002\n\n\u4f46\u662f\uff0c\u8fd9\u4e2a CPU \u7684\u7b49\u5f85\uff0c\u5728\u5f88\u591a\u65f6\u5019\uff0c\u5176\u5b9e\u5e76\u6ca1\u6709\u592a\u591a\u7684\u5b9e\u9645\u610f\u4e49\u3002\u6211\u4eec\u5bf9\u4e8e I/O \u8bbe\u5907\u7684\u5927\u91cf\u64cd\u4f5c\uff0c\u5176\u5b9e\u90fd\u53ea\u662f\u628a\u5185\u5b58\u91cc\u9762\u7684\u6570\u636e\uff0c\u4f20\u8f93\u5230 I/O \u8bbe\u5907\u800c\u5df2\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5176\u5b9e CPU \u53ea\u662f\u5728\u50bb\u7b49\u800c\u5df2\u3002\u7279\u522b\u662f\u5f53\u4f20\u8f93\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5927\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u8fdb\u884c\u5927\u6587\u4ef6\u590d\u5236\uff0c\u5982\u679c\u6240\u6709\u6570\u636e\u90fd\u8981\u7ecf\u8fc7 CPU\uff0c\u5b9e\u5728\u662f\u6709\u70b9\u513f\u592a\u6d6a\u8d39\u65f6\u95f4\u4e86\u3002\n\n\u56e0\u6b64\uff0c\u8ba1\u7b97\u673a\u5de5\u7a0b\u5e08\u4eec\uff0c\u5c31\u53d1\u660e\u4e86 DMA \u6280\u672f\uff0c\u4e5f\u5c31\u662f\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff08Direct Memory Access\uff09\u6280\u672f\uff0c\u6765\u51cf\u5c11 CPU \u7b49\u5f85\u7684\u65f6\u95f4\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"DMA\u662f\u7528\u6765\u51cf\u5c11CPU\u7b49\u5f85\u65f6\u95f4\u7684\uff0c\u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u4e3aDPDK\u4e4b\u4e8e\u666e\u901a\u7684kernel network"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5176\u5b9e DMA \u6280\u672f\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u672c\u8d28\u4e0a\uff0cDMA \u6280\u672f\u5c31\u662f\u6211\u4eec\u5728\u4e3b\u677f\u4e0a\u653e\u4e00\u5757\u72ec\u7acb\u7684\u82af\u7247\u3002\u5728\u8fdb\u884c\u5185\u5b58\u548c I/O \u8bbe\u5907\u7684\u6570\u636e\u4f20\u8f93\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u518d\u901a\u8fc7 CPU \u6765\u63a7\u5236\u6570\u636e\u4f20\u8f93\uff0c\u800c\u76f4\u63a5\u901a\u8fc7DMA \u63a7\u5236\u5668\uff08DMA Controller\uff0c\u7b80\u79f0 DMAC\uff09\u3002\u8fd9\u5757\u82af\u7247\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u534f\u5904\u7406\u5668\uff08Co-Processor\uff09\u3002\n\nDMAC \u6700\u6709\u4ef7\u503c\u7684\u5730\u65b9\u4f53\u73b0\u5728\uff0c\u5f53\u6211\u4eec\u8981\u4f20\u8f93\u7684\u6570\u636e\u7279\u522b\u5927\u3001\u901f\u5ea6\u7279\u522b\u5feb\uff0c\u6216\u8005\u4f20\u8f93\u7684\u6570\u636e\u7279\u522b\u5c0f\u3001\u901f\u5ea6\u7279\u522b\u6162\u7684\u65f6\u5019\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"co-processor"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u9664\u6b64\u4e4b\u5916\uff0cDMAC \u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u7279\u6b8a\u7684 I/O \u8bbe\u5907\uff0c\u5b83\u548c CPU \u4ee5\u53ca\u5176\u4ed6 I/O \u8bbe\u5907\u4e00\u6837\uff0c\u901a\u8fc7\u8fde\u63a5\u5230\u603b\u7ebf\u6765\u8fdb\u884c\u5b9e\u9645\u7684\u6570\u636e\u4f20\u8f93\u3002\u603b\u7ebf\u4e0a\u7684\u8bbe\u5907\u5462\uff0c\u5176\u5b9e\u6709\u4e24\u79cd\u7c7b\u578b\u3002\u4e00\u79cd\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e3b\u8bbe\u5907\uff08Master\uff09\uff0c\u53e6\u5916\u4e00\u79cd\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u4ece\u8bbe\u5907\uff08Slave\uff09\u3002\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/40%20%20%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%92%8C%E5%86%85%E5%AD%98%E4%BF%9D%E6%8A%A4%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.md",children:"40 \u7406\u89e3\u5185\u5b58\uff08\u4e0a\uff09\uff1a\u865a\u62df\u5185\u5b58\u548c\u5185\u5b58\u4fdd\u62a4\u662f\u4ec0\u4e48\uff1f"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/41%20%20%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E8%A7%A3%E6%9E%90TLB%E5%92%8C%E5%86%85%E5%AD%98%E4%BF%9D%E6%8A%A4.md",children:"41 \u7406\u89e3\u5185\u5b58\uff08\u4e0b\uff09\uff1a\u89e3\u6790TLB\u548c\u5185\u5b58\u4fdd\u62a4"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/39%20%20MESI%E5%8D%8F%E8%AE%AE%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%A4%9A%E6%A0%B8CPU%E7%9A%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%EF%BC%9F.md",children:"39 MESI\u534f\u8bae\uff1a\u5982\u4f55\u8ba9\u591a\u6838CPU\u7684\u9ad8\u901f\u7f13\u5b58\u4fdd\u6301\u4e00\u81f4\uff1f"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/36%20%20%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E8%B7%9F%E4%B8%8D%E4%B8%8A%EF%BC%8C%E5%8A%A0%E4%B8%AA%E7%BC%93%E5%AD%98%E5%B0%B1%E5%A5%BD%E4%BA%86%EF%BC%9F.md",children:"36 \u5c40\u90e8\u6027\u539f\u7406\uff1a\u6570\u636e\u5e93\u6027\u80fd\u8ddf\u4e0d\u4e0a\uff0c\u52a0\u4e2a\u7f13\u5b58\u5c31\u597d\u4e86\uff1f"})}),"\n",(0,l.jsx)(e.h2,{id:"linux-\u6027\u80fd\u4f18\u5316\u5b9e\u6218",children:"\u300aLinux \u6027\u80fd\u4f18\u5316\u5b9e\u6218\u300b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Linux%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98",children:"Linux \u6027\u80fd\u4f18\u5316\u5b9e\u6218"})}),"\n",(0,l.jsx)(e.h2,{id:"linux-\u5185\u6838\u6280\u672f\u5b9e\u6218\u8bfe",children:"\u300aLinux \u5185\u6838\u6280\u672f\u5b9e\u6218\u8bfe\u300b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Linux%E5%86%85%E6%A0%B8%E6%8A%80%E6%9C%AF%E5%AE%9E%E6%88%98%E8%AF%BE",children:"Linux \u5185\u6838\u6280\u672f\u5b9e\u6218\u8bfe"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u90a3\u4e48\uff0c\u4ece\u7cfb\u7edf\u8d44\u6e90\u7684\u7ef4\u5ea6\uff0c\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u53ef\u4ee5\u5206\u4e3a\u56db\u7c7b\uff0c\u5206\u522b\u662f\u78c1\u76d8 I/O\u3001\u5185\u5b58\u3001\u7f51\u7edc I/O\u3001CPU\u3002\u90a3\u5728\u8fd9\u7cfb\u5217\u8bfe\u7a0b\u4e2d\uff0c\u6211\u4f1a\u5e26\u4f60\u4ece\u8fd9\u56db\u5927\u7c7b\u4e2d\u7684\u5178\u578b\u95ee\u9898\u5165\u624b\uff0c\u6df1\u5165\u5b66\u4e60\u5176\u4e2d\u7684\uff1aPage Cache \u7ba1\u7406\u95ee\u9898\u3001\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898\u3001TCP \u91cd\u4f20\u95ee\u9898\u3001\u5185\u6838\u6001 CPU \u5229\u7528\u7387\u98d9\u9ad8\u95ee\u9898\u3002\u8fd9\u4e5f\u5bf9\u5e94\u7740\u6211\u4eec\u8bfe\u7a0b\u7684\u56db\u4e2a\u6a21\u5757\u3002\n\n\u638c\u63e1\u4e86\u8fd9\u56db\u7c7b\u5178\u578b\u95ee\u9898\u4ee5\u53ca\u5176\u5206\u6790\u601d\u8def\uff0c\u4f60\u4f1a\u5bf9\u78c1\u76d8 I/O\u3001\u5185\u5b58\u3001\u7f51\u7edc I/O \u548c CPU \u8fd9\u56db\u7c7b\u670d\u52a1\u5668\u4e0a\u6700\u57fa\u7840\u7684\u8d44\u6e90\u6709\u66f4\u52a0\u6df1\u5165\u7684\u7406\u89e3\uff0c\u5728\u9047\u5230\u5176\u4ed6\u95ee\u9898\u65f6\u4e5f\u80fd\u591f\u89e6\u7c7b\u65c1\u901a\uff0c\u4ece\u6b64\u518d\u4e5f\u4e0d\u7528\u56de\u907f\u4e00\u4e9b\u68d8\u624b\u7684\u7cfb\u7edf\u95ee\u9898\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\u4f60\u5faa\u5e8f\u6e10\u8fdb\u5730\u5b66\u4e60\uff0c\u6211\u4eec\u7684\u6bcf\u4e2a\u6a21\u5757\u90fd\u4f1a\u6309\u7167\u57fa\u7840\u7bc7\u3001\u6848\u4f8b\u7bc7\u548c\u5206\u6790\u7bc7\u7684\u65b9\u5f0f\u6765\u5448\u73b0\u3002\n\n\u5728 Page Cache \u7ba1\u7406\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6211\u4f1a\u91cd\u70b9\u5206\u6790\u5982\u4f55\u66f4\u597d\u5730\u5229\u7528 Page Cache \u6765\u51cf\u5c11\u65e0\u8c13\u7684 I/O \u5f00\u9500\uff0cPage Cache \u7ba1\u7406\u4e0d\u5f53\u4f1a\u5f15\u8d77\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u4ee5\u53ca\u5982\u4f55\u53bb\u5206\u6790\u548c\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898\u3002\n\n\u5728\u5185\u5b58\u6cc4\u6f0f\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6211\u4f1a\u91cd\u70b9\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u90fd\u662f\u5982\u4f55\u4ece\u7cfb\u7edf\u4e2d\u7533\u8bf7\u5185\u5b58\u4ee5\u53ca\u5982\u4f55\u91ca\u653e\u7684\u3002\u901a\u8fc7\u5185\u5b58\u6cc4\u9732\u8fd9\u7c7b\u6848\u4f8b\u6765\u5e26\u4f60\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5185\u5b58\u7684\u7ec6\u8282\uff0c\u4ee5\u53ca\u5982\u679c\u5185\u5b58\u4f7f\u7528\u4e0d\u5f53\u4f1a\u5f15\u53d1\u7684\u4e00\u4e9b\u95ee\u9898\u3002\u5f53\u7136\uff0c\u6211\u4e5f\u4f1a\u5e26\u4f60\u53bb\u89c2\u5bdf\u3001\u5206\u6790\u548c\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898\u3002\n\n\u5728 TCP \u91cd\u4f20\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6211\u4f1a\u91cd\u70b9\u5206\u6790 TCP \u8fde\u63a5\u7684\u5efa\u7acb\u3001\u4f20\u8f93\u4ee5\u53ca\u65ad\u5f00\u7684\u8fc7\u7a0b\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7a76\u7adf\u4f1a\u53d7\u54ea\u4e9b\u914d\u7f6e\u9879\u7684\u5f71\u54cd\uff1f\u5982\u679c\u914d\u7f6e\u4e0d\u5f53\u4f1a\u5f15\u8d77\u4ec0\u4e48\u7f51\u7edc\u95ee\u9898\uff1f\u7136\u540e\u6211\u4f1a\u4ece TCP \u91cd\u4f20\u8fd9\u7c7b\u5177\u4f53\u6848\u4f8b\u51fa\u53d1\uff0c\u6765\u5e26\u4f60\u8ba4\u8bc6\u4f60\u5fc5\u987b\u8981\u53bb\u638c\u63e1\u7684\u4e00\u4e9b\u7f51\u7edc\u7ec6\u8282\u77e5\u8bc6\uff0c\u4ee5\u53ca\u9047\u5230\u7f51\u7edc\u76f8\u5173\u7684\u95ee\u9898\u65f6\uff0c\u4f60\u8be5\u5982\u4f55\u53bb\u5206\u6790\u548c\u89e3\u51b3\u5b83\u3002\n\n\u5728\u5185\u6838\u6001 CPU \u5229\u7528\u7387\u98d9\u9ad8\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6211\u4f1a\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u8be5\u5982\u4f55\u9ad8\u6548\u5730\u4f7f\u7528 CPU\uff0c\u4ee5\u53ca\u54ea\u4e9b\u60c5\u51b5\u4e0b\u4f1a\u5bfc\u81f4 CPU \u7684\u4f7f\u7528\u5f88\u4f4e\u6548\uff1a\u6bd4\u5982\u5185\u6838\u6001 CPU \u5229\u7528\u7387\u8fc7\u9ad8\u5c31\u662f\u4e00\u4e2a\u5f88\u4f4e\u6548\u7684\u8868\u73b0\u3002\u90a3\u4e48\uff0c\u9488\u5bf9\u5185\u6838\u6001 CPU \u5229\u7528\u7387\u9ad8\u7684\u8fd9\u4e2a\u6848\u4f8b\uff0c\u6211\u4f1a\u4fa7\u91cd\u8bb2\u89e3\u54ea\u4e9b Linux \u5185\u6838\u7684\u7279\u6027\u6216\u8005\u7cfb\u7edf\u914d\u7f6e\u9879\u4f1a\u5f15\u8d77\u8fd9\u79cd\u95ee\u9898\uff0c\u4ee5\u53ca\u5982\u4f55\u5206\u6790\u548c\u89e3\u51b3\u5177\u4f53\u7684\u95ee\u9898\u3002\n"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u4ece\u7cfb\u7edf\u8d44\u6e90\u7684\u7ef4\u5ea6\uff0c\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u53ef\u4ee5\u5206\u4e3a\u56db\u7c7b\uff0c\u5206\u522b\u662f\u78c1\u76d8 I/O\u3001\u5185\u5b58\u3001\u7f51\u7edc I/O\u3001CPU\u3002\u90a3\u5728\u8fd9\u7cfb\u5217\u8bfe\u7a0b\u4e2d\uff0c\u6211\u4f1a\u5e26\u4f60\u4ece\u8fd9\u56db\u5927\u7c7b\u4e2d\u7684\u5178\u578b\u95ee\u9898\u5165\u624b\uff0c\u6df1\u5165\u5b66\u4e60\u5176\u4e2d\u7684\uff1aPage Cache \u7ba1\u7406\u95ee\u9898\u3001\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898\u3001TCP \u91cd\u4f20\u95ee\u9898\u3001\u5185\u6838\u6001 CPU \u5229\u7528\u7387\u98d9\u9ad8\u95ee\u9898"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"00 \u5f00\u7bc7\u8bcd \u5982\u4f55\u8ba9Linux\u5185\u6838\u66f4\u597d\u5730\u670d\u52a1\u5e94\u7528\u7a0b\u5e8f\uff1f.md\n01 \u57fa\u7840\u7bc7 \u5982\u4f55\u7528\u6570\u636e\u89c2\u6d4bPage Cache\uff1f.md\n02 \u57fa\u7840\u7bc7 Page Cache\u662f\u600e\u6837\u4ea7\u751f\u548c\u91ca\u653e\u7684\uff1f.md\n03 \u6848\u4f8b\u7bc7 \u5982\u4f55\u5904\u7406Page Cache\u96be\u4ee5\u56de\u6536\u4ea7\u751f\u7684load\u98d9\u9ad8\u95ee\u9898\uff1f.md\n04 \u6848\u4f8b\u7bc7 \u5982\u4f55\u5904\u7406Page Cache\u5bb9\u6613\u56de\u6536\u5f15\u8d77\u7684\u4e1a\u52a1\u6027\u80fd\u95ee\u9898\uff1f.md\n05 \u5206\u6790\u7bc7 \u5982\u4f55\u5224\u65ad\u95ee\u9898\u662f\u5426\u7531Page Cache\u4ea7\u751f\u7684\uff1f.md\n\n\n06 \u57fa\u7840\u7bc7 \u8fdb\u7a0b\u7684\u54ea\u4e9b\u5185\u5b58\u7c7b\u578b\u5bb9\u6613\u5f15\u8d77\u5185\u5b58\u6cc4\u6f0f\uff1f.md\n07 \u6848\u4f8b\u7bc7 \u5982\u4f55\u9884\u9632\u5185\u5b58\u6cc4\u6f0f\u5bfc\u81f4\u7684\u7cfb\u7edf\u5047\u6b7b\uff1f.md\n08 \u6848\u4f8b\u7bc7 Shmem\uff1a\u8fdb\u7a0b\u6ca1\u6709\u6d88\u8017\u5185\u5b58\uff0c\u5185\u5b58\u54ea\u53bb\u4e86\uff1f.md\n09 \u5206\u6790\u7bc7 \u5982\u4f55\u5bf9\u5185\u6838\u5185\u5b58\u6cc4\u6f0f\u505a\u4e9b\u57fa\u7840\u7684\u5206\u6790\uff1f.md\n10 \u5206\u6790\u7bc7 \u5185\u5b58\u6cc4\u6f0f\u65f6\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u4e00\u6b65\u6b65\u627e\u5230\u6839\u56e0\uff1f.md\n\n\n11 \u57fa\u7840\u7bc7 TCP\u8fde\u63a5\u7684\u5efa\u7acb\u548c\u65ad\u5f00\u53d7\u54ea\u4e9b\u7cfb\u7edf\u914d\u7f6e\u5f71\u54cd\uff1f.md\n12 \u57fa\u7840\u7bc7 TCP\u6536\u53d1\u5305\u8fc7\u7a0b\u4f1a\u53d7\u54ea\u4e9b\u914d\u7f6e\u9879\u5f71\u54cd\uff1f.md\n13 \u6848\u4f8b\u7bc7 TCP\u62e5\u585e\u63a7\u5236\u662f\u5982\u4f55\u5bfc\u81f4\u4e1a\u52a1\u6027\u80fd\u6296\u52a8\u7684\uff1f.md\n14 \u6848\u4f8b\u7bc7 TCP\u7aef\u5230\u7aef\u65f6\u5ef6\u53d8\u5927\uff0c\u600e\u6837\u5224\u65ad\u662f\u54ea\u91cc\u51fa\u73b0\u4e86\u95ee\u9898\uff1f.md\n15 \u5206\u6790\u7bc7 \u5982\u4f55\u9ad8\u6548\u5730\u5206\u6790TCP\u91cd\u4f20\u95ee\u9898\uff1f.md\n16 \u5957\u8def\u7bc7 \u5982\u4f55\u5206\u6790\u5e38\u89c1\u7684TCP\u95ee\u9898\uff1f.md\n\n\n17 \u57fa\u7840\u7bc7 CPU\u662f\u5982\u4f55\u6267\u884c\u4efb\u52a1\u7684\uff1f.md\n18 \u6848\u4f8b\u7bc7 \u4e1a\u52a1\u662f\u5426\u9700\u8981\u4f7f\u7528\u900f\u660e\u5927\u9875\uff1a\u6c34\u53ef\u8f7d\u821f\uff0c\u4ea6\u53ef\u8986\u821f\uff1f.md\n19 \u6848\u4f8b\u7bc7 \u7f51\u7edc\u541e\u5410\u9ad8\u7684\u4e1a\u52a1\u662f\u5426\u9700\u8981\u5f00\u542f\u7f51\u5361\u7279\u6027\u5462\uff1f.md\n20 \u5206\u6790\u7bc7 \u5982\u4f55\u5206\u6790CPU\u5229\u7528\u7387\u98d9\u9ad8\u95ee\u9898 \uff1f.md\n\n\n\u52a0\u9910 \u6211\u662f\u5982\u4f55\u4f7f\u7528tracepoint\u6765\u5206\u6790\u5185\u6838Bug\u7684\uff1f.md\n\u7ed3\u675f\u8bed \u7b2c\u4e00\u6b21\u770b\u5185\u6838\u4ee3\u7801\uff0c\u6211\u4e5f\u5f88\u61f5\u903c.md\n"})}),"\n",(0,l.jsx)(e.h3,{id:"page-cache",children:"Page Cache"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Page_cache",children:"Page cache - Wikipedia"})}),"\n",(0,l.jsx)(e.p,{children:"CPU \u6027\u80fd\u6bdb\u523a\u548c RT \u6296\u52a8\u90fd\u8ddf page cache \u6709\u5f88\u5927\u5173\u7cfb"}),"\n",(0,l.jsx)(e.p,{children:"\u4ece linux-kernel-map \u4e2d\u53ef\u4ee5\u770b\u5230 page cache \u548c storage \u4ee5\u53ca\u5185\u5b58\u90fd\u6709\u5173\u7cfb\u3002\u66f4\u548c swap \u548c mmap \u6709\u5bc6\u5207\u5173\u7cfb\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898",children:"\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898"}),"\n",(0,l.jsx)(e.h3,{id:"tcp-\u91cd\u4f20\u95ee\u9898",children:"TCP \u91cd\u4f20\u95ee\u9898"}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u6838\u6001-cpu-\u6bdb\u523a",children:"\u5185\u6838\u6001 CPU \u6bdb\u523a"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\u8ba1\u7b97\u673a\u57fa\u7840\u5b9e\u6218\u8bfe",children:"\u300a\u8ba1\u7b97\u673a\u57fa\u7840\u5b9e\u6218\u8bfe\u300b"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:"https://learn.lianglianglee.com/%e4%b8%93%e6%a0%8f/%e8%ae%a1%e7%ae%97%e6%9c%ba%e5%9f%ba%e7%a1%80%e5%ae%9e%e6%88%98%e8%af%be",children:"\u8ba1\u7b97\u673a\u57fa\u7840\u5b9e\u6218\u8bfe"})," \u5171 40 \u7ae0\uff0c\u524d 20 \u591a\u7ae0\u662f\u624b\u5199 CPU\uff0c\u4ee5\u53ca\u5b66\u4e60 RISC-V \u6307\u4ee4\u96c6\u3002\u540e\u9762 20 \u591a\u7ae0\u662f linux kernel \u76f8\u5173\u5185\u5bb9\u3002\u6211\u4eec\u53ea\u770b\u540e\u9762\u90e8\u5206\u3002"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"CPU \u5982\u4f55\u8bbf\u95ee\u5185\u5b58\n\n\nCPU \u600e\u4e48\u8bbf\u95ee\u5185\u5b58\uff1f\u6211\u4eec\u56de\u60f3\u4e00\u4e0b\uff0c\u4e4b\u524d\u8bb2\u8fc7\u7684\u9ad8\u7ea7\u8bed\u8a00\u548c\u4f4e\u7ea7\u8bed\u8a00\u8f6c\u5316\u8fc7\u7a0b\u3002\n\n\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e0b\uff0cC \u8bed\u8a00\u628a\u6211\u4eec\u5199\u51fa\u6765\u7684\u53d8\u91cf\u548c\u51fd\u6570\u90fd\u8f6c\u6362\u6210\u4e86\u4ec0\u4e48\u5462\uff1f\u5982\u679c\u8bb0\u4e0d\u592a\u6e05\u4e86\uff0c\u53ef\u4ee5\u56de\u987e[\u7b2c\u5341\u4e94\u8282\u8bfe]\u3002\u6ca1\u9519\uff0cC \u8bed\u8a00\u628a\u53d8\u91cf\u540d\u548c\u51fd\u6570\u540d\u90fd\u8f6c\u6362\u6210\u4e86\u6c47\u7f16\u8bed\u8a00\u91cc\u7684\u6807\u53f7\uff0c\u800c\u6c47\u7f16\u8bed\u8a00\u7684\u6807\u53f7\uff0c\u5c31\u662f\u673a\u5668\u66f4\u597d\u7406\u89e3\u7684\u7b26\u53f7\u3002\u7b26\u53f7\u5177\u4f53\u5305\u62ec\u7b26\u53f7\u7c7b\u578b\u3001\u7b26\u53f7\u540d\u79f0\u548c\u7b26\u53f7\u5730\u5740\u8fd9\u51e0\u4e2a\u5c5e\u6027\u3002\u5176\u4e2d\uff0c\u7b26\u53f7\u5730\u5740\u662f\u7531\u4e00\u4e2a\u53eb\u94fe\u63a5\u5668\u7684\u4e1c\u897f\u751f\u6210\u7684\u3002\n\n\u6c47\u7f16\u8bed\u8a00\u7684\u6807\u53f7\uff0c\u5c31\u8868\u793a\u4e3a\u4e00\u6bb5\u5185\u5b58\u5730\u5740\u7684\u5f00\u59cb\u3002\u518d\u6839\u636e\u6211\u4eec RISC-V \u91cc\u8bbf\u5b58\u6307\u4ee4\u7684\u64cd\u4f5c\uff08\u53ef\u56de\u987e[\u7b2c\u4e8c\u5341\u4e00\u8282\u8bfe]\u548c[\u7b2c\u4e8c\u5341\u4e8c\u8282\u8bfe]\uff09\uff0c\u8fdb\u4e00\u6b65\u5206\u6790\u770b\u770b\uff1a\u52a0\u8f7d\u5b57\u6307\u4ee4 lw \u6307\u4ee4\uff0c\u5b83\u4f1a\u4ece\u4e00\u4e2a\u5730\u5740\u6307\u5411\u7684\u5185\u5b58\u5355\u5143\u4e2d\uff0c\u628a\u6570\u636e\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e0a\uff1b\u50a8\u5b58\u5b57\u6307\u4ee4 sw \u6307\u4ee4\u5219\u662f\u8ddf lw \u6307\u4ee4\u76f8\u53cd\uff0c\u628a\u5bc4\u5b58\u5668\u91cc\u7684\u6570\u636e\u5b58\u5230\u7279\u5b9a\u5185\u5b58\u5355\u5143\u5f53\u4e2d\u3002\u8fd9\u4e9b\u6307\u4ee4\u91cc\u6e90\u5bc4\u5b58\u5668\u548c\u7acb\u5373\u6570\u7ec4\u6210\u7684\u6570\u636e\uff0c\u5176\u5b9e\u5c31\u53eb\u5185\u5b58\u5730\u5740\u3002\n\n\u7ed3\u5408\u8fd9\u4e9b\u4fe1\u606f\uff0c\u6211\u4eec\u5c31\u80fd\u63a8\u51fa\u8fd9\u4e2a\u7ed3\u8bba\uff1aCPU \u6b63\u662f\u901a\u8fc7\u5185\u5b58\u5730\u5740\u6765\u8bbf\u95ee\u5185\u5b58\u7684\u3002\u8fd9\u4e2a\u5730\u5740\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6574\u6570\u6570\u636e\u3002\u800c\u8fd9\u4e2a\u6574\u6570\u4ee3\u8868\u4e86\u4e00\u4e2a\u5185\u5b58\u5355\u5143\u7684\u7d22\u5f15\u53f7\uff0cCPU \u8bbf\u95ee\u5185\u5b58\u7684\u65f6\u5019\uff0c\u786c\u4ef6\u7684\u5730\u5740\u8bd1\u7801\u5668\u4f1a\u8d1f\u8d23\u628a\u7d22\u5f15\u53f7\uff0c\u8f6c\u6362\u6210\u76f8\u5e94\u7684\u5730\u5740\u4fe1\u53f7\u548c\u7247\u9009\u4fe1\u53f7\uff0c\u5e2e\u52a9 CPU\u201c\u5bfb\u8def\u201d\uff0c\u627e\u5230\u7279\u5b9a\u7684\u5185\u5b58\u5355\u5143\u4f4d\u7f6e\u3002\n\n...\n\n\u73b0\u5728\uff0c\u6211\u4eec\u5df2\u7ecf\u6e05\u695a\u5730\u77e5\u9053\u4e86\uff0cCPU \u628a\u4e00\u4e2a\u6574\u6570\u6570\u636e\u5f53\u6210\u5730\u5740\uff0c\u653e\u5728\u5730\u5740\u603b\u7ebf\u4e0a\uff0c\u7531\u5730\u5740\u8bd1\u7801\u5668\u9009\u62e9\u8be5\u5730\u5740\u6b63\u786e\u7d22\u5f15\u7684\u8bbe\u5907\u6216\u8005\u5185\u5b58\u8fdb\u884c\u8bbf\u95ee\u3002\n\n\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u770b\uff0c\u6570\u636e\u5728\u7269\u7406\u7535\u8def\u4e0a\uff0c\u662f\u7531\u4e0d\u540c\u7684\u7535\u5b50\u4fe1\u53f7\u7684\u7ec4\u5408\u6765\u8868\u793a\u7684\u3002\u6b63\u662f\u6709\u4e86\u8fd9\u4e9b\u7535\u5b50\u4fe1\u53f7\u7ec4\u5408\uff0c\u624d\u80fd\u505a\u5230\u7d22\u5f15\u76f8\u5e94\u7684\u8bbe\u5907\u548c\u5185\u5b58\u3002CPU \u901a\u8fc7\u4ec0\u4e48\u8bbf\u95ee\u5185\u5b58\uff0c\u4ee5\u53ca\u5730\u5740\u7684\u672c\u8d28\u662f\u4ec0\u4e48\uff0c\u6211\u4eec\u5df2\u7ecf\u627e\u5230\u7b54\u6848\u4e86\uff0c\u7528\u4e00\u53e5\u8bdd\u6982\u62ec\u5c31\u662f\uff1aCPU \u901a\u8fc7\u5730\u5740\u8bbf\u95ee\u5185\u5b58\uff0c\u5730\u5740\u7684\u672c\u8d28\u662f\u6574\u6570\u6570\u636e\uff0c\u800c\u6574\u6570\u6570\u636e\u7684\u672c\u8d28\u662f\u7535\u5b50\u4fe1\u53f7\u7684\u7ec4\u5408\u3002\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u5185\u5b58\u5730\u5740\u4ece\u4f55\u800c\u6765\n\n\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"\u7269\u7406\u5730\u5740\u7a7a\u95f4\u548c\u865a\u62df\u5730\u5740\u7a7a\u95f4\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"zzz-2",children:"zzz"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"#    # kernel \u76f8\u5173\u5b66\u4e60\u8d44\u6599\n#    - url: https://github.com/0voice/kernel_new_features\n#    - url: https://github.com/seaswalker/tiny-os\n#    - url: https://github.com/dibingfa/flash-linux0.11-talk\n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"#    - url: https://github.com/Altair-Alpha/CS144-Lab\n#    - url: https://github.com/PKUFlyingPig/CS144-Computer-Network\n#    - url: https://github.com/mit-pdos/xv6-public\n#    - url: https://github.com/mit-pdos/xv6-riscv\n#    - url: https://github.com/ranxian/xv6-chinese\n#    - url: https://github.com/ti-mo/netfilter\n#    - url: https://github.com/lxc/lxc\n#      des: lxc, lxc\u5176\u5b9e\u5c31\u662f\u8fdb\u7a0b\u5bb9\u5668\u561b\uff0c\n#    - url: https://github.com/lxc/lxcfs\n#    - url: https://github.com/brianwatling/libfiber\n#      des: A User Space Threading Library Supporting Multi-Core Systems\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"#[Linux \u6027\u80fd\u4f18\u5316\u5b9e\u6218](https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Linux%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98)\n#\n#[Linux \u5185\u6838\u6280\u672f\u5b9e\u6218\u8bfe](https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Linux%E5%86%85%E6%A0%B8%E6%8A%80%E6%9C%AF%E5%AE%9E%E6%88%98%E8%AF%BE)\n\n\n#- [ ] \u7cfb\u7edf\u6027\u80fd\u8c03\u4f18\u5fc5\u77e5\u5fc5\u4f1a[\u66f4\u65b0\u5b8c\u6bd5].mobi\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"\n- name: \u300a\u6df1\u5165\u7406\u89e3Linux\u8fdb\u7a0b\u4e0e\u5185\u5b58\u300b\n\n- name: \u300a\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u300b\n- name: \u300a\u6df1\u5165\u7406\u89e3Linux\u5185\u6838\u300b\n- name: \u300a\u8da3\u8c08Linux\u64cd\u4f5c\u7cfb\u7edf\u300b\n- name: \u300a\u7cfb\u7edf\u6027\u80fd\u8c03\u4f18\u5fc5\u77e5\u5fc5\u4f1a\u300b\n- name: \u300a\u7406\u89e3\u4e86\u5b9e\u73b0\u518d\u8c08\u7f51\u7edc\u6027\u80fd\u300b\n\n- name: \u300aLinux\u5185\u6838\u8bbe\u8ba1\u4e0e\u5b9e\u73b0\u300b\n  author: Robert Love\n"})}),"\n",(0,l.jsx)(e.h2,{id:"xxx-linux\u4efb\u52a1\u8c03\u5ea6",children:"[xxx] Linux\u4efb\u52a1\u8c03\u5ea6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"\n#- [Linux\u4efb\u52a1\u8c03\u5ea6(1) - MySpace](https://www.hitzhangjie.pro/blog/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A61/)\n#- [Linux\u4efb\u52a1\u8c03\u5ea6(2) - MySpace](https://www.hitzhangjie.pro/blog/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A62/)\n#- [Linux\u4efb\u52a1\u8c03\u5ea6(3) - MySpace](https://www.hitzhangjie.pro/blog/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A63/)\n#- [Linux\u4efb\u52a1\u8c03\u5ea6(4) - MySpace](https://www.hitzhangjie.pro/blog/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A64/)\n#- [Linux\u4efb\u52a1\u8c03\u5ea6(5) - MySpace](https://www.hitzhangjie.pro/blog/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A65/)\n#- [Linux\u4efb\u52a1\u8c03\u5ea6(6) - MySpace](https://www.hitzhangjie.pro/blog/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A66/)\n"})}),"\n",(0,l.jsx)(e.h2,{id:"xxx-epoll",children:"[xxx] epoll"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"\n# [What is epoll?. I developed a small game using\u2026 | by yongjoon | Medium](https://medium.com/@avocadi/what-is-epoll-9bbc74272f7c)\n# [Go BIO/NIO\u63a2\u8ba8(7)\uff1aIO\u591a\u8def\u590d\u7528\u4e4bepoll](https://mp.weixin.qq.com/s?__biz=MzAxMTA4Njc0OQ==&mid=2651454214&idx=1&sn=39976051f1c32bde21722e2b38c2459c#rd)\n# [\u6df1\u5ea6\u957f\u6587\uff1a\u4ecebio\u5230nio\u5230aio\uff0c\u518d\u5230\u54cd\u5e94\u5f0f\u7f16\u7a0b](https://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&mid=2650524542&idx=1&sn=dc32eef9e033be79ad122a2ccbe88c2b)\n# [\u56fe\u89e3 | \u6df1\u5165\u63ed\u79d8 epoll \u662f\u5982\u4f55\u5b9e\u73b0 IO \u591a\u8def\u590d\u7528\u7684\uff01](https://mp.weixin.qq.com/s/6JNLyVlE6BWU-zScNuaYvQ#tocbar--up5f3g)\n# [draganm/go-reactor: Golang Implementation of Server-Side Reactive Framework](https://github.com/draganm/go-reactor)\n# [mistaker/fly: \u57fa\u4e8eepoll\u5b9e\u73b0\u7684 golang socket \u6846\u67b6](https://github.com/mistaker/fly)\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"xxx-linux-routing",children:"[xxx] linux routing"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# [\u5929\u5929\u8bb2\u8def\u7531\uff0c\u90a3 Linux \u8def\u7531\u5230\u5e95\u548b\u5b9e\u73b0\u7684\uff01\uff1f](https://mp.weixin.qq.com/s?__biz=MjM5Njg5NDgwNA==&mid=2247487659&idx=1&sn=72f4488f6d44af4096f4348becae58d3)\n# [\u56fe\u89e3 Linux \u7f51\u7edc\u5305\u53d1\u9001\u8fc7\u7a0b - \u77e5\u4e4e](https://zhuanlan.zhihu.com/p/373060740)\n# [25 \u5f20\u56fe\uff0c\u4e00\u4e07\u5b57\uff0c\u62c6\u89e3 Linux \u7f51\u7edc\u5305\u53d1\u9001\u8fc7\u7a0b-\u817e\u8baf\u4e91\u5f00\u53d1\u8005\u793e\u533a-\u817e\u8baf\u4e91](https://cloud.tencent.com/developer/article/1825715)\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"linux-kernel-\u8109\u7edc\u548c\u4e3b\u5e72\u603b\u7ed3",children:(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:"\u300aLinux kernel \u8109\u7edc\u548c\u4e3b\u5e72\u603b\u7ed3\u300b"})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.kancloud.cn/zhangyi8928/kernel/2165188",children:"\u524d\u8a00 \xb7 Linux kernel \u8109\u7edc\u548c\u4e3b\u5e72\u603b\u7ed3 \xb7 \u770b\u4e91"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.kancloud.cn/zhangyi8928/kernel/531187",children:"Linux \u5185\u5b58\u7ba1\u7406 (\u4e8c) \xb7 Linux kernel \u8109\u7edc\u548c\u4e3b\u5e72\u603b\u7ed3 \xb7 \u770b\u4e91"})})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>i});var l=s(6540);const r={},c=l.createContext(r);function a(n){const e=l.useContext(c);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),l.createElement(c.Provider,{value:e},n.children)}}}]);